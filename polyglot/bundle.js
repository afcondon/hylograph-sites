/* Generated by Spago v1.0.3 */
(() => {
  // output/Control.Apply/foreign.js
  var arrayApply = function(fs) {
    return function(xs) {
      var l2 = fs.length;
      var k = xs.length;
      var result = new Array(l2 * k);
      var n = 0;
      for (var i2 = 0; i2 < l2; i2++) {
        var f = fs[i2];
        for (var j = 0; j < k; j++) {
          result[n++] = f(xs[j]);
        }
      }
      return result;
    };
  };

  // output/Control.Semigroupoid/index.js
  var semigroupoidFn = {
    compose: function(f) {
      return function(g2) {
        return function(x7) {
          return f(g2(x7));
        };
      };
    }
  };

  // output/Control.Category/index.js
  var identity = function(dict) {
    return dict.identity;
  };
  var categoryFn = {
    identity: function(x7) {
      return x7;
    },
    Semigroupoid0: function() {
      return semigroupoidFn;
    }
  };

  // output/Data.Boolean/index.js
  var otherwise = true;

  // output/Data.Function/index.js
  var on = function(f) {
    return function(g2) {
      return function(x7) {
        return function(y7) {
          return f(g2(x7))(g2(y7));
        };
      };
    };
  };
  var flip = function(f) {
    return function(b2) {
      return function(a3) {
        return f(a3)(b2);
      };
    };
  };
  var $$const = function(a3) {
    return function(v2) {
      return a3;
    };
  };

  // output/Data.Functor/foreign.js
  var arrayMap = function(f) {
    return function(arr) {
      var l2 = arr.length;
      var result = new Array(l2);
      for (var i2 = 0; i2 < l2; i2++) {
        result[i2] = f(arr[i2]);
      }
      return result;
    };
  };

  // output/Data.Unit/foreign.js
  var unit = void 0;

  // output/Type.Proxy/index.js
  var $$Proxy = /* @__PURE__ */ (function() {
    function $$Proxy2() {
    }
    ;
    $$Proxy2.value = new $$Proxy2();
    return $$Proxy2;
  })();

  // output/Data.Functor/index.js
  var map = function(dict) {
    return dict.map;
  };
  var mapFlipped = function(dictFunctor) {
    var map121 = map(dictFunctor);
    return function(fa) {
      return function(f) {
        return map121(f)(fa);
      };
    };
  };
  var $$void = function(dictFunctor) {
    return map(dictFunctor)($$const(unit));
  };
  var voidLeft = function(dictFunctor) {
    var map121 = map(dictFunctor);
    return function(f) {
      return function(x7) {
        return map121($$const(x7))(f);
      };
    };
  };
  var voidRight = function(dictFunctor) {
    var map121 = map(dictFunctor);
    return function(x7) {
      return map121($$const(x7));
    };
  };
  var functorArray = {
    map: arrayMap
  };

  // output/Control.Apply/index.js
  var identity2 = /* @__PURE__ */ identity(categoryFn);
  var applyArray = {
    apply: arrayApply,
    Functor0: function() {
      return functorArray;
    }
  };
  var apply = function(dict) {
    return dict.apply;
  };
  var applyFirst = function(dictApply) {
    var apply1 = apply(dictApply);
    var map57 = map(dictApply.Functor0());
    return function(a3) {
      return function(b2) {
        return apply1(map57($$const)(a3))(b2);
      };
    };
  };
  var applySecond = function(dictApply) {
    var apply1 = apply(dictApply);
    var map57 = map(dictApply.Functor0());
    return function(a3) {
      return function(b2) {
        return apply1(map57($$const(identity2))(a3))(b2);
      };
    };
  };
  var lift2 = function(dictApply) {
    var apply1 = apply(dictApply);
    var map57 = map(dictApply.Functor0());
    return function(f) {
      return function(a3) {
        return function(b2) {
          return apply1(map57(f)(a3))(b2);
        };
      };
    };
  };

  // output/Control.Applicative/index.js
  var pure = function(dict) {
    return dict.pure;
  };
  var unless = function(dictApplicative) {
    var pure118 = pure(dictApplicative);
    return function(v2) {
      return function(v1) {
        if (!v2) {
          return v1;
        }
        ;
        if (v2) {
          return pure118(unit);
        }
        ;
        throw new Error("Failed pattern match at Control.Applicative (line 68, column 1 - line 68, column 65): " + [v2.constructor.name, v1.constructor.name]);
      };
    };
  };
  var when = function(dictApplicative) {
    var pure118 = pure(dictApplicative);
    return function(v2) {
      return function(v1) {
        if (v2) {
          return v1;
        }
        ;
        if (!v2) {
          return pure118(unit);
        }
        ;
        throw new Error("Failed pattern match at Control.Applicative (line 63, column 1 - line 63, column 63): " + [v2.constructor.name, v1.constructor.name]);
      };
    };
  };
  var liftA1 = function(dictApplicative) {
    var apply5 = apply(dictApplicative.Apply0());
    var pure118 = pure(dictApplicative);
    return function(f) {
      return function(a3) {
        return apply5(pure118(f))(a3);
      };
    };
  };
  var applicativeArray = {
    pure: function(x7) {
      return [x7];
    },
    Apply0: function() {
      return applyArray;
    }
  };

  // output/Control.Bind/foreign.js
  var arrayBind = typeof Array.prototype.flatMap === "function" ? function(arr) {
    return function(f) {
      return arr.flatMap(f);
    };
  } : function(arr) {
    return function(f) {
      var result = [];
      var l2 = arr.length;
      for (var i2 = 0; i2 < l2; i2++) {
        var xs = f(arr[i2]);
        var k = xs.length;
        for (var j = 0; j < k; j++) {
          result.push(xs[j]);
        }
      }
      return result;
    };
  };

  // output/Control.Bind/index.js
  var identity3 = /* @__PURE__ */ identity(categoryFn);
  var discard = function(dict) {
    return dict.discard;
  };
  var bindArray = {
    bind: arrayBind,
    Apply0: function() {
      return applyArray;
    }
  };
  var bind = function(dict) {
    return dict.bind;
  };
  var bindFlipped = function(dictBind) {
    return flip(bind(dictBind));
  };
  var composeKleisliFlipped = function(dictBind) {
    var bindFlipped12 = bindFlipped(dictBind);
    return function(f) {
      return function(g2) {
        return function(a3) {
          return bindFlipped12(f)(g2(a3));
        };
      };
    };
  };
  var composeKleisli = function(dictBind) {
    var bind115 = bind(dictBind);
    return function(f) {
      return function(g2) {
        return function(a3) {
          return bind115(f(a3))(g2);
        };
      };
    };
  };
  var discardUnit = {
    discard: function(dictBind) {
      return bind(dictBind);
    }
  };
  var join = function(dictBind) {
    var bind115 = bind(dictBind);
    return function(m2) {
      return bind115(m2)(identity3);
    };
  };

  // output/Data.Bounded/foreign.js
  var topInt = 2147483647;
  var bottomInt = -2147483648;
  var topChar = String.fromCharCode(65535);
  var bottomChar = String.fromCharCode(0);
  var topNumber = Number.POSITIVE_INFINITY;
  var bottomNumber = Number.NEGATIVE_INFINITY;

  // output/Data.Ord/foreign.js
  var unsafeCompareImpl = function(lt2) {
    return function(eq9) {
      return function(gt2) {
        return function(x7) {
          return function(y7) {
            return x7 < y7 ? lt2 : x7 === y7 ? eq9 : gt2;
          };
        };
      };
    };
  };
  var ordBooleanImpl = unsafeCompareImpl;
  var ordIntImpl = unsafeCompareImpl;
  var ordNumberImpl = unsafeCompareImpl;
  var ordStringImpl = unsafeCompareImpl;
  var ordCharImpl = unsafeCompareImpl;

  // output/Data.Eq/foreign.js
  var refEq = function(r1) {
    return function(r22) {
      return r1 === r22;
    };
  };
  var eqBooleanImpl = refEq;
  var eqIntImpl = refEq;
  var eqNumberImpl = refEq;
  var eqCharImpl = refEq;
  var eqStringImpl = refEq;

  // output/Data.Symbol/index.js
  var reflectSymbol = function(dict) {
    return dict.reflectSymbol;
  };

  // output/Record.Unsafe/foreign.js
  var unsafeGet = function(label5) {
    return function(rec) {
      return rec[label5];
    };
  };

  // output/Data.Eq/index.js
  var eqUnit = {
    eq: function(v2) {
      return function(v1) {
        return true;
      };
    }
  };
  var eqString = {
    eq: eqStringImpl
  };
  var eqRowNil = {
    eqRecord: function(v2) {
      return function(v1) {
        return function(v22) {
          return true;
        };
      };
    }
  };
  var eqRecord = function(dict) {
    return dict.eqRecord;
  };
  var eqRec = function() {
    return function(dictEqRecord) {
      return {
        eq: eqRecord(dictEqRecord)($$Proxy.value)
      };
    };
  };
  var eqNumber = {
    eq: eqNumberImpl
  };
  var eqInt = {
    eq: eqIntImpl
  };
  var eqChar = {
    eq: eqCharImpl
  };
  var eqBoolean = {
    eq: eqBooleanImpl
  };
  var eq = function(dict) {
    return dict.eq;
  };
  var eq2 = /* @__PURE__ */ eq(eqBoolean);
  var eqRowCons = function(dictEqRecord) {
    var eqRecord1 = eqRecord(dictEqRecord);
    return function() {
      return function(dictIsSymbol) {
        var reflectSymbol2 = reflectSymbol(dictIsSymbol);
        return function(dictEq) {
          var eq32 = eq(dictEq);
          return {
            eqRecord: function(v2) {
              return function(ra) {
                return function(rb) {
                  var tail3 = eqRecord1($$Proxy.value)(ra)(rb);
                  var key = reflectSymbol2($$Proxy.value);
                  var get11 = unsafeGet(key);
                  return eq32(get11(ra))(get11(rb)) && tail3;
                };
              };
            }
          };
        };
      };
    };
  };
  var notEq = function(dictEq) {
    var eq32 = eq(dictEq);
    return function(x7) {
      return function(y7) {
        return eq2(eq32(x7)(y7))(false);
      };
    };
  };

  // output/Data.Ordering/index.js
  var LT = /* @__PURE__ */ (function() {
    function LT2() {
    }
    ;
    LT2.value = new LT2();
    return LT2;
  })();
  var GT = /* @__PURE__ */ (function() {
    function GT2() {
    }
    ;
    GT2.value = new GT2();
    return GT2;
  })();
  var EQ = /* @__PURE__ */ (function() {
    function EQ2() {
    }
    ;
    EQ2.value = new EQ2();
    return EQ2;
  })();
  var eqOrdering = {
    eq: function(v2) {
      return function(v1) {
        if (v2 instanceof LT && v1 instanceof LT) {
          return true;
        }
        ;
        if (v2 instanceof GT && v1 instanceof GT) {
          return true;
        }
        ;
        if (v2 instanceof EQ && v1 instanceof EQ) {
          return true;
        }
        ;
        return false;
      };
    }
  };

  // output/Data.Ring/foreign.js
  var intSub = function(x7) {
    return function(y7) {
      return x7 - y7 | 0;
    };
  };

  // output/Data.Semiring/foreign.js
  var intAdd = function(x7) {
    return function(y7) {
      return x7 + y7 | 0;
    };
  };
  var intMul = function(x7) {
    return function(y7) {
      return x7 * y7 | 0;
    };
  };
  var numAdd = function(n1) {
    return function(n2) {
      return n1 + n2;
    };
  };
  var numMul = function(n1) {
    return function(n2) {
      return n1 * n2;
    };
  };

  // output/Data.Semiring/index.js
  var semiringNumber = {
    add: numAdd,
    zero: 0,
    mul: numMul,
    one: 1
  };
  var semiringInt = {
    add: intAdd,
    zero: 0,
    mul: intMul,
    one: 1
  };
  var one = function(dict) {
    return dict.one;
  };
  var mul = function(dict) {
    return dict.mul;
  };
  var add = function(dict) {
    return dict.add;
  };

  // output/Data.Ring/index.js
  var ringInt = {
    sub: intSub,
    Semiring0: function() {
      return semiringInt;
    }
  };

  // output/Data.Ord/index.js
  var eqRec2 = /* @__PURE__ */ eqRec();
  var notEq2 = /* @__PURE__ */ notEq(eqOrdering);
  var ordUnit = {
    compare: function(v2) {
      return function(v1) {
        return EQ.value;
      };
    },
    Eq0: function() {
      return eqUnit;
    }
  };
  var ordString = /* @__PURE__ */ (function() {
    return {
      compare: ordStringImpl(LT.value)(EQ.value)(GT.value),
      Eq0: function() {
        return eqString;
      }
    };
  })();
  var ordRecordNil = {
    compareRecord: function(v2) {
      return function(v1) {
        return function(v22) {
          return EQ.value;
        };
      };
    },
    EqRecord0: function() {
      return eqRowNil;
    }
  };
  var ordNumber = /* @__PURE__ */ (function() {
    return {
      compare: ordNumberImpl(LT.value)(EQ.value)(GT.value),
      Eq0: function() {
        return eqNumber;
      }
    };
  })();
  var ordInt = /* @__PURE__ */ (function() {
    return {
      compare: ordIntImpl(LT.value)(EQ.value)(GT.value),
      Eq0: function() {
        return eqInt;
      }
    };
  })();
  var ordChar = /* @__PURE__ */ (function() {
    return {
      compare: ordCharImpl(LT.value)(EQ.value)(GT.value),
      Eq0: function() {
        return eqChar;
      }
    };
  })();
  var ordBoolean = /* @__PURE__ */ (function() {
    return {
      compare: ordBooleanImpl(LT.value)(EQ.value)(GT.value),
      Eq0: function() {
        return eqBoolean;
      }
    };
  })();
  var compareRecord = function(dict) {
    return dict.compareRecord;
  };
  var ordRecord = function() {
    return function(dictOrdRecord) {
      var eqRec1 = eqRec2(dictOrdRecord.EqRecord0());
      return {
        compare: compareRecord(dictOrdRecord)($$Proxy.value),
        Eq0: function() {
          return eqRec1;
        }
      };
    };
  };
  var compare = function(dict) {
    return dict.compare;
  };
  var comparing = function(dictOrd) {
    var compare32 = compare(dictOrd);
    return function(f) {
      return function(x7) {
        return function(y7) {
          return compare32(f(x7))(f(y7));
        };
      };
    };
  };
  var max = function(dictOrd) {
    var compare32 = compare(dictOrd);
    return function(x7) {
      return function(y7) {
        var v2 = compare32(x7)(y7);
        if (v2 instanceof LT) {
          return y7;
        }
        ;
        if (v2 instanceof EQ) {
          return x7;
        }
        ;
        if (v2 instanceof GT) {
          return x7;
        }
        ;
        throw new Error("Failed pattern match at Data.Ord (line 181, column 3 - line 184, column 12): " + [v2.constructor.name]);
      };
    };
  };
  var min = function(dictOrd) {
    var compare32 = compare(dictOrd);
    return function(x7) {
      return function(y7) {
        var v2 = compare32(x7)(y7);
        if (v2 instanceof LT) {
          return x7;
        }
        ;
        if (v2 instanceof EQ) {
          return x7;
        }
        ;
        if (v2 instanceof GT) {
          return y7;
        }
        ;
        throw new Error("Failed pattern match at Data.Ord (line 172, column 3 - line 175, column 12): " + [v2.constructor.name]);
      };
    };
  };
  var ordRecordCons = function(dictOrdRecord) {
    var compareRecord1 = compareRecord(dictOrdRecord);
    var eqRowCons2 = eqRowCons(dictOrdRecord.EqRecord0())();
    return function() {
      return function(dictIsSymbol) {
        var reflectSymbol2 = reflectSymbol(dictIsSymbol);
        var eqRowCons1 = eqRowCons2(dictIsSymbol);
        return function(dictOrd) {
          var compare32 = compare(dictOrd);
          var eqRowCons22 = eqRowCons1(dictOrd.Eq0());
          return {
            compareRecord: function(v2) {
              return function(ra) {
                return function(rb) {
                  var key = reflectSymbol2($$Proxy.value);
                  var left = compare32(unsafeGet(key)(ra))(unsafeGet(key)(rb));
                  var $95 = notEq2(left)(EQ.value);
                  if ($95) {
                    return left;
                  }
                  ;
                  return compareRecord1($$Proxy.value)(ra)(rb);
                };
              };
            },
            EqRecord0: function() {
              return eqRowCons22;
            }
          };
        };
      };
    };
  };
  var clamp = function(dictOrd) {
    var min1 = min(dictOrd);
    var max1 = max(dictOrd);
    return function(low2) {
      return function(hi) {
        return function(x7) {
          return min1(hi)(max1(low2)(x7));
        };
      };
    };
  };

  // output/Data.Bounded/index.js
  var top = function(dict) {
    return dict.top;
  };
  var boundedInt = {
    top: topInt,
    bottom: bottomInt,
    Ord0: function() {
      return ordInt;
    }
  };
  var boundedChar = {
    top: topChar,
    bottom: bottomChar,
    Ord0: function() {
      return ordChar;
    }
  };
  var bottom = function(dict) {
    return dict.bottom;
  };

  // output/Data.Show/foreign.js
  var showIntImpl = function(n) {
    return n.toString();
  };
  var showNumberImpl = function(n) {
    var str6 = n.toString();
    return isNaN(str6 + ".0") ? str6 : str6 + ".0";
  };
  var showStringImpl = function(s2) {
    var l2 = s2.length;
    return '"' + s2.replace(
      /[\0-\x1F\x7F"\\]/g,
      // eslint-disable-line no-control-regex
      function(c2, i2) {
        switch (c2) {
          case '"':
          case "\\":
            return "\\" + c2;
          case "\x07":
            return "\\a";
          case "\b":
            return "\\b";
          case "\f":
            return "\\f";
          case "\n":
            return "\\n";
          case "\r":
            return "\\r";
          case "	":
            return "\\t";
          case "\v":
            return "\\v";
        }
        var k = i2 + 1;
        var empty8 = k < l2 && s2[k] >= "0" && s2[k] <= "9" ? "\\&" : "";
        return "\\" + c2.charCodeAt(0).toString(10) + empty8;
      }
    ) + '"';
  };
  var showArrayImpl = function(f) {
    return function(xs) {
      var ss = [];
      for (var i2 = 0, l2 = xs.length; i2 < l2; i2++) {
        ss[i2] = f(xs[i2]);
      }
      return "[" + ss.join(",") + "]";
    };
  };

  // output/Data.Void/index.js
  var absurd = function(a3) {
    var spin = function($copy_v) {
      var $tco_result;
      function $tco_loop(v2) {
        $copy_v = v2;
        return;
      }
      ;
      while (true) {
        $tco_result = $tco_loop($copy_v);
      }
      ;
      return $tco_result;
    };
    return spin(a3);
  };

  // output/Data.Show/index.js
  var showString = {
    show: showStringImpl
  };
  var showNumber = {
    show: showNumberImpl
  };
  var showInt = {
    show: showIntImpl
  };
  var showBoolean = {
    show: function(v2) {
      if (v2) {
        return "true";
      }
      ;
      if (!v2) {
        return "false";
      }
      ;
      throw new Error("Failed pattern match at Data.Show (line 29, column 1 - line 31, column 23): " + [v2.constructor.name]);
    }
  };
  var show = function(dict) {
    return dict.show;
  };
  var showArray = function(dictShow) {
    return {
      show: showArrayImpl(show(dictShow))
    };
  };

  // output/Data.HeytingAlgebra/foreign.js
  var boolConj = function(b1) {
    return function(b2) {
      return b1 && b2;
    };
  };
  var boolDisj = function(b1) {
    return function(b2) {
      return b1 || b2;
    };
  };
  var boolNot = function(b2) {
    return !b2;
  };

  // output/Data.HeytingAlgebra/index.js
  var tt = function(dict) {
    return dict.tt;
  };
  var not = function(dict) {
    return dict.not;
  };
  var implies = function(dict) {
    return dict.implies;
  };
  var ff = function(dict) {
    return dict.ff;
  };
  var disj = function(dict) {
    return dict.disj;
  };
  var heytingAlgebraBoolean = {
    ff: false,
    tt: true,
    implies: function(a3) {
      return function(b2) {
        return disj(heytingAlgebraBoolean)(not(heytingAlgebraBoolean)(a3))(b2);
      };
    },
    conj: boolConj,
    disj: boolDisj,
    not: boolNot
  };
  var conj = function(dict) {
    return dict.conj;
  };
  var heytingAlgebraFunction = function(dictHeytingAlgebra) {
    var ff1 = ff(dictHeytingAlgebra);
    var tt1 = tt(dictHeytingAlgebra);
    var implies1 = implies(dictHeytingAlgebra);
    var conj1 = conj(dictHeytingAlgebra);
    var disj1 = disj(dictHeytingAlgebra);
    var not1 = not(dictHeytingAlgebra);
    return {
      ff: function(v2) {
        return ff1;
      },
      tt: function(v2) {
        return tt1;
      },
      implies: function(f) {
        return function(g2) {
          return function(a3) {
            return implies1(f(a3))(g2(a3));
          };
        };
      },
      conj: function(f) {
        return function(g2) {
          return function(a3) {
            return conj1(f(a3))(g2(a3));
          };
        };
      },
      disj: function(f) {
        return function(g2) {
          return function(a3) {
            return disj1(f(a3))(g2(a3));
          };
        };
      },
      not: function(f) {
        return function(a3) {
          return not1(f(a3));
        };
      }
    };
  };

  // output/Data.EuclideanRing/foreign.js
  var intDegree = function(x7) {
    return Math.min(Math.abs(x7), 2147483647);
  };
  var intDiv = function(x7) {
    return function(y7) {
      if (y7 === 0) return 0;
      return y7 > 0 ? Math.floor(x7 / y7) : -Math.floor(x7 / -y7);
    };
  };
  var intMod = function(x7) {
    return function(y7) {
      if (y7 === 0) return 0;
      var yy = Math.abs(y7);
      return (x7 % yy + yy) % yy;
    };
  };

  // output/Data.CommutativeRing/index.js
  var commutativeRingInt = {
    Ring0: function() {
      return ringInt;
    }
  };

  // output/Data.EuclideanRing/index.js
  var mod = function(dict) {
    return dict.mod;
  };
  var euclideanRingInt = {
    degree: intDegree,
    div: intDiv,
    mod: intMod,
    CommutativeRing0: function() {
      return commutativeRingInt;
    }
  };
  var div = function(dict) {
    return dict.div;
  };

  // output/Data.Semigroup/foreign.js
  var concatString = function(s1) {
    return function(s2) {
      return s1 + s2;
    };
  };
  var concatArray = function(xs) {
    return function(ys) {
      if (xs.length === 0) return ys;
      if (ys.length === 0) return xs;
      return xs.concat(ys);
    };
  };

  // output/Data.Semigroup/index.js
  var semigroupString = {
    append: concatString
  };
  var semigroupArray = {
    append: concatArray
  };
  var append = function(dict) {
    return dict.append;
  };

  // output/Data.Monoid/index.js
  var monoidString = {
    mempty: "",
    Semigroup0: function() {
      return semigroupString;
    }
  };
  var mempty = function(dict) {
    return dict.mempty;
  };

  // output/Data.Tuple/index.js
  var Tuple = /* @__PURE__ */ (function() {
    function Tuple2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Tuple2.create = function(value0) {
      return function(value1) {
        return new Tuple2(value0, value1);
      };
    };
    return Tuple2;
  })();
  var snd = function(v2) {
    return v2.value1;
  };
  var functorTuple = {
    map: function(f) {
      return function(m2) {
        return new Tuple(m2.value0, f(m2.value1));
      };
    }
  };
  var fst = function(v2) {
    return v2.value0;
  };
  var eqTuple = function(dictEq) {
    var eq9 = eq(dictEq);
    return function(dictEq1) {
      var eq15 = eq(dictEq1);
      return {
        eq: function(x7) {
          return function(y7) {
            return eq9(x7.value0)(y7.value0) && eq15(x7.value1)(y7.value1);
          };
        }
      };
    };
  };
  var ordTuple = function(dictOrd) {
    var compare8 = compare(dictOrd);
    var eqTuple1 = eqTuple(dictOrd.Eq0());
    return function(dictOrd1) {
      var compare12 = compare(dictOrd1);
      var eqTuple2 = eqTuple1(dictOrd1.Eq0());
      return {
        compare: function(x7) {
          return function(y7) {
            var v2 = compare8(x7.value0)(y7.value0);
            if (v2 instanceof LT) {
              return LT.value;
            }
            ;
            if (v2 instanceof GT) {
              return GT.value;
            }
            ;
            return compare12(x7.value1)(y7.value1);
          };
        },
        Eq0: function() {
          return eqTuple2;
        }
      };
    };
  };

  // output/Control.Monad.State.Class/index.js
  var state = function(dict) {
    return dict.state;
  };
  var modify_ = function(dictMonadState) {
    var state1 = state(dictMonadState);
    return function(f) {
      return state1(function(s2) {
        return new Tuple(unit, f(s2));
      });
    };
  };
  var gets = function(dictMonadState) {
    var state1 = state(dictMonadState);
    return function(f) {
      return state1(function(s2) {
        return new Tuple(f(s2), s2);
      });
    };
  };
  var get = function(dictMonadState) {
    return state(dictMonadState)(function(s2) {
      return new Tuple(s2, s2);
    });
  };

  // output/Data.Array/foreign.js
  var rangeImpl = function(start4, end2) {
    var step5 = start4 > end2 ? -1 : 1;
    var result = new Array(step5 * (end2 - start4) + 1);
    var i2 = start4, n = 0;
    while (i2 !== end2) {
      result[n++] = i2;
      i2 += step5;
    }
    result[n] = i2;
    return result;
  };
  var replicateFill = function(count, value18) {
    if (count < 1) {
      return [];
    }
    var result = new Array(count);
    return result.fill(value18);
  };
  var replicatePolyfill = function(count, value18) {
    var result = [];
    var n = 0;
    for (var i2 = 0; i2 < count; i2++) {
      result[n++] = value18;
    }
    return result;
  };
  var replicateImpl = typeof Array.prototype.fill === "function" ? replicateFill : replicatePolyfill;
  var fromFoldableImpl = /* @__PURE__ */ (function() {
    function Cons2(head6, tail3) {
      this.head = head6;
      this.tail = tail3;
    }
    var emptyList = {};
    function curryCons(head6) {
      return function(tail3) {
        return new Cons2(head6, tail3);
      };
    }
    function listToArray(list) {
      var result = [];
      var count = 0;
      var xs = list;
      while (xs !== emptyList) {
        result[count++] = xs.head;
        xs = xs.tail;
      }
      return result;
    }
    return function(foldr5, xs) {
      return listToArray(foldr5(curryCons)(emptyList)(xs));
    };
  })();
  var length = function(xs) {
    return xs.length;
  };
  var unconsImpl = function(empty8, next2, xs) {
    return xs.length === 0 ? empty8({}) : next2(xs[0])(xs.slice(1));
  };
  var indexImpl = function(just, nothing, xs, i2) {
    return i2 < 0 || i2 >= xs.length ? nothing : just(xs[i2]);
  };
  var findMapImpl = function(nothing, isJust2, f, xs) {
    for (var i2 = 0; i2 < xs.length; i2++) {
      var result = f(xs[i2]);
      if (isJust2(result)) return result;
    }
    return nothing;
  };
  var findIndexImpl = function(just, nothing, f, xs) {
    for (var i2 = 0, l2 = xs.length; i2 < l2; i2++) {
      if (f(xs[i2])) return just(i2);
    }
    return nothing;
  };
  var _deleteAt = function(just, nothing, i2, l2) {
    if (i2 < 0 || i2 >= l2.length) return nothing;
    var l1 = l2.slice();
    l1.splice(i2, 1);
    return just(l1);
  };
  var reverse = function(l2) {
    return l2.slice().reverse();
  };
  var concat = function(xss) {
    if (xss.length <= 1e4) {
      return Array.prototype.concat.apply([], xss);
    }
    var result = [];
    for (var i2 = 0, l2 = xss.length; i2 < l2; i2++) {
      var xs = xss[i2];
      for (var j = 0, m2 = xs.length; j < m2; j++) {
        result.push(xs[j]);
      }
    }
    return result;
  };
  var filterImpl = function(f, xs) {
    return xs.filter(f);
  };
  var sortByImpl = /* @__PURE__ */ (function() {
    function mergeFromTo(compare8, fromOrdering, xs1, xs2, from5, to) {
      var mid;
      var i2;
      var j;
      var k;
      var x7;
      var y7;
      var c2;
      mid = from5 + (to - from5 >> 1);
      if (mid - from5 > 1) mergeFromTo(compare8, fromOrdering, xs2, xs1, from5, mid);
      if (to - mid > 1) mergeFromTo(compare8, fromOrdering, xs2, xs1, mid, to);
      i2 = from5;
      j = mid;
      k = from5;
      while (i2 < mid && j < to) {
        x7 = xs2[i2];
        y7 = xs2[j];
        c2 = fromOrdering(compare8(x7)(y7));
        if (c2 > 0) {
          xs1[k++] = y7;
          ++j;
        } else {
          xs1[k++] = x7;
          ++i2;
        }
      }
      while (i2 < mid) {
        xs1[k++] = xs2[i2++];
      }
      while (j < to) {
        xs1[k++] = xs2[j++];
      }
    }
    return function(compare8, fromOrdering, xs) {
      var out;
      if (xs.length < 2) return xs;
      out = xs.slice(0);
      mergeFromTo(compare8, fromOrdering, out, xs.slice(0), 0, xs.length);
      return out;
    };
  })();
  var sliceImpl = function(s2, e, l2) {
    return l2.slice(s2, e);
  };
  var zipWithImpl = function(f, xs, ys) {
    var l2 = xs.length < ys.length ? xs.length : ys.length;
    var result = new Array(l2);
    for (var i2 = 0; i2 < l2; i2++) {
      result[i2] = f(xs[i2])(ys[i2]);
    }
    return result;
  };
  var anyImpl = function(p2, xs) {
    var len = xs.length;
    for (var i2 = 0; i2 < len; i2++) {
      if (p2(xs[i2])) return true;
    }
    return false;
  };
  var unsafeIndexImpl = function(xs, n) {
    return xs[n];
  };

  // output/Control.Alt/index.js
  var alt = function(dict) {
    return dict.alt;
  };

  // output/Control.Monad/index.js
  var unlessM = function(dictMonad) {
    var bind34 = bind(dictMonad.Bind1());
    var unless5 = unless(dictMonad.Applicative0());
    return function(mb) {
      return function(m2) {
        return bind34(mb)(function(b2) {
          return unless5(b2)(m2);
        });
      };
    };
  };
  var ap = function(dictMonad) {
    var bind34 = bind(dictMonad.Bind1());
    var pure60 = pure(dictMonad.Applicative0());
    return function(f) {
      return function(a3) {
        return bind34(f)(function(f$prime) {
          return bind34(a3)(function(a$prime) {
            return pure60(f$prime(a$prime));
          });
        });
      };
    };
  };

  // output/Data.Maybe/index.js
  var identity4 = /* @__PURE__ */ identity(categoryFn);
  var Nothing = /* @__PURE__ */ (function() {
    function Nothing2() {
    }
    ;
    Nothing2.value = new Nothing2();
    return Nothing2;
  })();
  var Just = /* @__PURE__ */ (function() {
    function Just2(value0) {
      this.value0 = value0;
    }
    ;
    Just2.create = function(value0) {
      return new Just2(value0);
    };
    return Just2;
  })();
  var maybe = function(v2) {
    return function(v1) {
      return function(v22) {
        if (v22 instanceof Nothing) {
          return v2;
        }
        ;
        if (v22 instanceof Just) {
          return v1(v22.value0);
        }
        ;
        throw new Error("Failed pattern match at Data.Maybe (line 237, column 1 - line 237, column 51): " + [v2.constructor.name, v1.constructor.name, v22.constructor.name]);
      };
    };
  };
  var isNothing = /* @__PURE__ */ maybe(true)(/* @__PURE__ */ $$const(false));
  var isJust = /* @__PURE__ */ maybe(false)(/* @__PURE__ */ $$const(true));
  var functorMaybe = {
    map: function(v2) {
      return function(v1) {
        if (v1 instanceof Just) {
          return new Just(v2(v1.value0));
        }
        ;
        return Nothing.value;
      };
    }
  };
  var map2 = /* @__PURE__ */ map(functorMaybe);
  var fromMaybe = function(a3) {
    return maybe(a3)(identity4);
  };
  var fromJust = function() {
    return function(v2) {
      if (v2 instanceof Just) {
        return v2.value0;
      }
      ;
      throw new Error("Failed pattern match at Data.Maybe (line 288, column 1 - line 288, column 46): " + [v2.constructor.name]);
    };
  };
  var eqMaybe = function(dictEq) {
    var eq9 = eq(dictEq);
    return {
      eq: function(x7) {
        return function(y7) {
          if (x7 instanceof Nothing && y7 instanceof Nothing) {
            return true;
          }
          ;
          if (x7 instanceof Just && y7 instanceof Just) {
            return eq9(x7.value0)(y7.value0);
          }
          ;
          return false;
        };
      }
    };
  };
  var ordMaybe = function(dictOrd) {
    var compare8 = compare(dictOrd);
    var eqMaybe1 = eqMaybe(dictOrd.Eq0());
    return {
      compare: function(x7) {
        return function(y7) {
          if (x7 instanceof Nothing && y7 instanceof Nothing) {
            return EQ.value;
          }
          ;
          if (x7 instanceof Nothing) {
            return LT.value;
          }
          ;
          if (y7 instanceof Nothing) {
            return GT.value;
          }
          ;
          if (x7 instanceof Just && y7 instanceof Just) {
            return compare8(x7.value0)(y7.value0);
          }
          ;
          throw new Error("Failed pattern match at Data.Maybe (line 0, column 0 - line 0, column 0): " + [x7.constructor.name, y7.constructor.name]);
        };
      },
      Eq0: function() {
        return eqMaybe1;
      }
    };
  };
  var applyMaybe = {
    apply: function(v2) {
      return function(v1) {
        if (v2 instanceof Just) {
          return map2(v2.value0)(v1);
        }
        ;
        if (v2 instanceof Nothing) {
          return Nothing.value;
        }
        ;
        throw new Error("Failed pattern match at Data.Maybe (line 67, column 1 - line 69, column 30): " + [v2.constructor.name, v1.constructor.name]);
      };
    },
    Functor0: function() {
      return functorMaybe;
    }
  };
  var bindMaybe = {
    bind: function(v2) {
      return function(v1) {
        if (v2 instanceof Just) {
          return v1(v2.value0);
        }
        ;
        if (v2 instanceof Nothing) {
          return Nothing.value;
        }
        ;
        throw new Error("Failed pattern match at Data.Maybe (line 125, column 1 - line 127, column 28): " + [v2.constructor.name, v1.constructor.name]);
      };
    },
    Apply0: function() {
      return applyMaybe;
    }
  };
  var applicativeMaybe = /* @__PURE__ */ (function() {
    return {
      pure: Just.create,
      Apply0: function() {
        return applyMaybe;
      }
    };
  })();
  var altMaybe = {
    alt: function(v2) {
      return function(v1) {
        if (v2 instanceof Nothing) {
          return v1;
        }
        ;
        return v2;
      };
    },
    Functor0: function() {
      return functorMaybe;
    }
  };
  var plusMaybe = /* @__PURE__ */ (function() {
    return {
      empty: Nothing.value,
      Alt0: function() {
        return altMaybe;
      }
    };
  })();
  var alternativeMaybe = {
    Applicative0: function() {
      return applicativeMaybe;
    },
    Plus1: function() {
      return plusMaybe;
    }
  };

  // output/Data.Either/index.js
  var Left = /* @__PURE__ */ (function() {
    function Left3(value0) {
      this.value0 = value0;
    }
    ;
    Left3.create = function(value0) {
      return new Left3(value0);
    };
    return Left3;
  })();
  var Right = /* @__PURE__ */ (function() {
    function Right3(value0) {
      this.value0 = value0;
    }
    ;
    Right3.create = function(value0) {
      return new Right3(value0);
    };
    return Right3;
  })();
  var note = function(a3) {
    return maybe(new Left(a3))(Right.create);
  };
  var functorEither = {
    map: function(f) {
      return function(m2) {
        if (m2 instanceof Left) {
          return new Left(m2.value0);
        }
        ;
        if (m2 instanceof Right) {
          return new Right(f(m2.value0));
        }
        ;
        throw new Error("Failed pattern match at Data.Either (line 0, column 0 - line 0, column 0): " + [m2.constructor.name]);
      };
    }
  };
  var either = function(v2) {
    return function(v1) {
      return function(v22) {
        if (v22 instanceof Left) {
          return v2(v22.value0);
        }
        ;
        if (v22 instanceof Right) {
          return v1(v22.value0);
        }
        ;
        throw new Error("Failed pattern match at Data.Either (line 208, column 1 - line 208, column 64): " + [v2.constructor.name, v1.constructor.name, v22.constructor.name]);
      };
    };
  };

  // output/Data.Identity/index.js
  var Identity = function(x7) {
    return x7;
  };
  var functorIdentity = {
    map: function(f) {
      return function(m2) {
        return f(m2);
      };
    }
  };
  var applyIdentity = {
    apply: function(v2) {
      return function(v1) {
        return v2(v1);
      };
    },
    Functor0: function() {
      return functorIdentity;
    }
  };
  var bindIdentity = {
    bind: function(v2) {
      return function(f) {
        return f(v2);
      };
    },
    Apply0: function() {
      return applyIdentity;
    }
  };
  var applicativeIdentity = {
    pure: Identity,
    Apply0: function() {
      return applyIdentity;
    }
  };
  var monadIdentity = {
    Applicative0: function() {
      return applicativeIdentity;
    },
    Bind1: function() {
      return bindIdentity;
    }
  };

  // output/Effect/foreign.js
  var pureE = function(a3) {
    return function() {
      return a3;
    };
  };
  var bindE = function(a3) {
    return function(f) {
      return function() {
        return f(a3())();
      };
    };
  };

  // output/Effect/index.js
  var $runtime_lazy = function(name16, moduleName, init3) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init3();
      state3 = 2;
      return val;
    };
  };
  var monadEffect = {
    Applicative0: function() {
      return applicativeEffect;
    },
    Bind1: function() {
      return bindEffect;
    }
  };
  var bindEffect = {
    bind: bindE,
    Apply0: function() {
      return $lazy_applyEffect(0);
    }
  };
  var applicativeEffect = {
    pure: pureE,
    Apply0: function() {
      return $lazy_applyEffect(0);
    }
  };
  var $lazy_functorEffect = /* @__PURE__ */ $runtime_lazy("functorEffect", "Effect", function() {
    return {
      map: liftA1(applicativeEffect)
    };
  });
  var $lazy_applyEffect = /* @__PURE__ */ $runtime_lazy("applyEffect", "Effect", function() {
    return {
      apply: ap(monadEffect),
      Functor0: function() {
        return $lazy_functorEffect(0);
      }
    };
  });
  var functorEffect = /* @__PURE__ */ $lazy_functorEffect(20);
  var applyEffect = /* @__PURE__ */ $lazy_applyEffect(23);

  // output/Effect.Ref/foreign.js
  var _new = function(val) {
    return function() {
      return { value: val };
    };
  };
  var read = function(ref2) {
    return function() {
      return ref2.value;
    };
  };
  var modifyImpl = function(f) {
    return function(ref2) {
      return function() {
        var t2 = f(ref2.value);
        ref2.value = t2.state;
        return t2.value;
      };
    };
  };
  var write = function(val) {
    return function(ref2) {
      return function() {
        ref2.value = val;
      };
    };
  };

  // output/Effect.Ref/index.js
  var $$void2 = /* @__PURE__ */ $$void(functorEffect);
  var $$new = _new;
  var modify$prime = modifyImpl;
  var modify = function(f) {
    return modify$prime(function(s2) {
      var s$prime = f(s2);
      return {
        state: s$prime,
        value: s$prime
      };
    });
  };
  var modify_2 = function(f) {
    return function(s2) {
      return $$void2(modify(f)(s2));
    };
  };

  // output/Control.Monad.Rec.Class/index.js
  var bindFlipped2 = /* @__PURE__ */ bindFlipped(bindEffect);
  var map3 = /* @__PURE__ */ map(functorEffect);
  var Loop = /* @__PURE__ */ (function() {
    function Loop2(value0) {
      this.value0 = value0;
    }
    ;
    Loop2.create = function(value0) {
      return new Loop2(value0);
    };
    return Loop2;
  })();
  var Done = /* @__PURE__ */ (function() {
    function Done2(value0) {
      this.value0 = value0;
    }
    ;
    Done2.create = function(value0) {
      return new Done2(value0);
    };
    return Done2;
  })();
  var tailRecM = function(dict) {
    return dict.tailRecM;
  };
  var monadRecEffect = {
    tailRecM: function(f) {
      return function(a3) {
        var fromDone = function(v2) {
          if (v2 instanceof Done) {
            return v2.value0;
          }
          ;
          throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 137, column 30 - line 137, column 44): " + [v2.constructor.name]);
        };
        return function __do7() {
          var r8 = bindFlipped2($$new)(f(a3))();
          (function() {
            while (!(function __do8() {
              var v2 = read(r8)();
              if (v2 instanceof Loop) {
                var e = f(v2.value0)();
                write(e)(r8)();
                return false;
              }
              ;
              if (v2 instanceof Done) {
                return true;
              }
              ;
              throw new Error("Failed pattern match at Control.Monad.Rec.Class (line 128, column 22 - line 133, column 28): " + [v2.constructor.name]);
            })()) {
            }
            ;
            return {};
          })();
          return map3(fromDone)(read(r8))();
        };
      };
    },
    Monad0: function() {
      return monadEffect;
    }
  };
  var forever = function(dictMonadRec) {
    var tailRecM1 = tailRecM(dictMonadRec);
    var voidRight4 = voidRight(dictMonadRec.Monad0().Bind1().Apply0().Functor0());
    return function(ma) {
      return tailRecM1(function(u2) {
        return voidRight4(new Loop(u2))(ma);
      })(unit);
    };
  };

  // output/Control.Monad.ST.Internal/foreign.js
  var map_ = function(f) {
    return function(a3) {
      return function() {
        return f(a3());
      };
    };
  };
  var foreach = function(as) {
    return function(f) {
      return function() {
        for (var i2 = 0, l2 = as.length; i2 < l2; i2++) {
          f(as[i2])();
        }
      };
    };
  };
  function newSTRef(val) {
    return function() {
      return { value: val };
    };
  }
  var read2 = function(ref2) {
    return function() {
      return ref2.value;
    };
  };
  var modifyImpl2 = function(f) {
    return function(ref2) {
      return function() {
        var t2 = f(ref2.value);
        ref2.value = t2.state;
        return t2.value;
      };
    };
  };
  var write2 = function(a3) {
    return function(ref2) {
      return function() {
        return ref2.value = a3;
      };
    };
  };

  // output/Control.Monad.ST.Internal/index.js
  var modify$prime2 = modifyImpl2;
  var modify2 = function(f) {
    return modify$prime2(function(s2) {
      var s$prime = f(s2);
      return {
        state: s$prime,
        value: s$prime
      };
    });
  };
  var functorST = {
    map: map_
  };

  // output/Data.Array.ST/foreign.js
  function newSTArray() {
    return [];
  }
  function unsafeFreezeThawImpl(xs) {
    return xs;
  }
  var unsafeFreezeImpl = unsafeFreezeThawImpl;
  function copyImpl(xs) {
    return xs.slice();
  }
  var thawImpl = copyImpl;
  var pushImpl = function(a3, xs) {
    return xs.push(a3);
  };

  // output/Control.Monad.ST.Uncurried/foreign.js
  var runSTFn1 = function runSTFn12(fn) {
    return function(a3) {
      return function() {
        return fn(a3);
      };
    };
  };
  var runSTFn2 = function runSTFn22(fn) {
    return function(a3) {
      return function(b2) {
        return function() {
          return fn(a3, b2);
        };
      };
    };
  };

  // output/Data.Array.ST/index.js
  var unsafeFreeze = /* @__PURE__ */ runSTFn1(unsafeFreezeImpl);
  var thaw = /* @__PURE__ */ runSTFn1(thawImpl);
  var withArray = function(f) {
    return function(xs) {
      return function __do7() {
        var result = thaw(xs)();
        f(result)();
        return unsafeFreeze(result)();
      };
    };
  };
  var push = /* @__PURE__ */ runSTFn2(pushImpl);

  // output/Data.Array.ST.Iterator/index.js
  var map4 = /* @__PURE__ */ map(functorST);
  var not2 = /* @__PURE__ */ not(heytingAlgebraBoolean);
  var $$void3 = /* @__PURE__ */ $$void(functorST);
  var Iterator = /* @__PURE__ */ (function() {
    function Iterator2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Iterator2.create = function(value0) {
      return function(value1) {
        return new Iterator2(value0, value1);
      };
    };
    return Iterator2;
  })();
  var peek = function(v2) {
    return function __do7() {
      var i2 = read2(v2.value1)();
      return v2.value0(i2);
    };
  };
  var next = function(v2) {
    return function __do7() {
      var i2 = read2(v2.value1)();
      modify2(function(v1) {
        return v1 + 1 | 0;
      })(v2.value1)();
      return v2.value0(i2);
    };
  };
  var pushWhile = function(p2) {
    return function(iter) {
      return function(array) {
        return function __do7() {
          var $$break = newSTRef(false)();
          while (map4(not2)(read2($$break))()) {
            (function __do8() {
              var mx = peek(iter)();
              if (mx instanceof Just && p2(mx.value0)) {
                push(mx.value0)(array)();
                return $$void3(next(iter))();
              }
              ;
              return $$void3(write2(true)($$break))();
            })();
          }
          ;
          return {};
        };
      };
    };
  };
  var iterator = function(f) {
    return map4(Iterator.create(f))(newSTRef(0));
  };
  var iterate = function(iter) {
    return function(f) {
      return function __do7() {
        var $$break = newSTRef(false)();
        while (map4(not2)(read2($$break))()) {
          (function __do8() {
            var mx = next(iter)();
            if (mx instanceof Just) {
              return f(mx.value0)();
            }
            ;
            if (mx instanceof Nothing) {
              return $$void3(write2(true)($$break))();
            }
            ;
            throw new Error("Failed pattern match at Data.Array.ST.Iterator (line 42, column 5 - line 44, column 47): " + [mx.constructor.name]);
          })();
        }
        ;
        return {};
      };
    };
  };

  // output/Data.Foldable/foreign.js
  var foldrArray = function(f) {
    return function(init3) {
      return function(xs) {
        var acc = init3;
        var len = xs.length;
        for (var i2 = len - 1; i2 >= 0; i2--) {
          acc = f(xs[i2])(acc);
        }
        return acc;
      };
    };
  };
  var foldlArray = function(f) {
    return function(init3) {
      return function(xs) {
        var acc = init3;
        var len = xs.length;
        for (var i2 = 0; i2 < len; i2++) {
          acc = f(acc)(xs[i2]);
        }
        return acc;
      };
    };
  };

  // output/Control.Plus/index.js
  var empty = function(dict) {
    return dict.empty;
  };

  // output/Data.Bifunctor/index.js
  var bimap = function(dict) {
    return dict.bimap;
  };

  // output/Data.Monoid.Conj/index.js
  var Conj = function(x7) {
    return x7;
  };
  var semigroupConj = function(dictHeytingAlgebra) {
    var conj2 = conj(dictHeytingAlgebra);
    return {
      append: function(v2) {
        return function(v1) {
          return conj2(v2)(v1);
        };
      }
    };
  };
  var monoidConj = function(dictHeytingAlgebra) {
    var semigroupConj1 = semigroupConj(dictHeytingAlgebra);
    return {
      mempty: tt(dictHeytingAlgebra),
      Semigroup0: function() {
        return semigroupConj1;
      }
    };
  };

  // output/Data.Monoid.Disj/index.js
  var Disj = function(x7) {
    return x7;
  };
  var semigroupDisj = function(dictHeytingAlgebra) {
    var disj2 = disj(dictHeytingAlgebra);
    return {
      append: function(v2) {
        return function(v1) {
          return disj2(v2)(v1);
        };
      }
    };
  };
  var monoidDisj = function(dictHeytingAlgebra) {
    var semigroupDisj1 = semigroupDisj(dictHeytingAlgebra);
    return {
      mempty: ff(dictHeytingAlgebra),
      Semigroup0: function() {
        return semigroupDisj1;
      }
    };
  };

  // output/Unsafe.Coerce/foreign.js
  var unsafeCoerce2 = function(x7) {
    return x7;
  };

  // output/Safe.Coerce/index.js
  var coerce = function() {
    return unsafeCoerce2;
  };

  // output/Data.Newtype/index.js
  var coerce2 = /* @__PURE__ */ coerce();
  var unwrap = function() {
    return coerce2;
  };
  var alaF = function() {
    return function() {
      return function() {
        return function() {
          return function(v2) {
            return coerce2;
          };
        };
      };
    };
  };

  // output/Data.Foldable/index.js
  var eq12 = /* @__PURE__ */ eq(eqOrdering);
  var alaF2 = /* @__PURE__ */ alaF()()()();
  var foldr = function(dict) {
    return dict.foldr;
  };
  var traverse_ = function(dictApplicative) {
    var applySecond3 = applySecond(dictApplicative.Apply0());
    var pure60 = pure(dictApplicative);
    return function(dictFoldable) {
      var foldr22 = foldr(dictFoldable);
      return function(f) {
        return foldr22(function($454) {
          return applySecond3(f($454));
        })(pure60(unit));
      };
    };
  };
  var for_ = function(dictApplicative) {
    var traverse_14 = traverse_(dictApplicative);
    return function(dictFoldable) {
      return flip(traverse_14(dictFoldable));
    };
  };
  var foldl = function(dict) {
    return dict.foldl;
  };
  var indexl = function(dictFoldable) {
    var foldl22 = foldl(dictFoldable);
    return function(idx) {
      var go2 = function(cursor) {
        return function(a3) {
          if (cursor.elem instanceof Just) {
            return cursor;
          }
          ;
          var $296 = cursor.pos === idx;
          if ($296) {
            return {
              elem: new Just(a3),
              pos: cursor.pos
            };
          }
          ;
          return {
            pos: cursor.pos + 1 | 0,
            elem: cursor.elem
          };
        };
      };
      var $455 = foldl22(go2)({
        elem: Nothing.value,
        pos: 0
      });
      return function($456) {
        return (function(v2) {
          return v2.elem;
        })($455($456));
      };
    };
  };
  var intercalate = function(dictFoldable) {
    var foldl22 = foldl(dictFoldable);
    return function(dictMonoid) {
      var append25 = append(dictMonoid.Semigroup0());
      var mempty2 = mempty(dictMonoid);
      return function(sep) {
        return function(xs) {
          var go2 = function(v2) {
            return function(v1) {
              if (v2.init) {
                return {
                  init: false,
                  acc: v1
                };
              }
              ;
              return {
                init: false,
                acc: append25(v2.acc)(append25(sep)(v1))
              };
            };
          };
          return foldl22(go2)({
            init: true,
            acc: mempty2
          })(xs).acc;
        };
      };
    };
  };
  var maximumBy = function(dictFoldable) {
    var foldl22 = foldl(dictFoldable);
    return function(cmp) {
      var max$prime = function(v2) {
        return function(v1) {
          if (v2 instanceof Nothing) {
            return new Just(v1);
          }
          ;
          if (v2 instanceof Just) {
            return new Just((function() {
              var $303 = eq12(cmp(v2.value0)(v1))(GT.value);
              if ($303) {
                return v2.value0;
              }
              ;
              return v1;
            })());
          }
          ;
          throw new Error("Failed pattern match at Data.Foldable (line 441, column 3 - line 441, column 27): " + [v2.constructor.name, v1.constructor.name]);
        };
      };
      return foldl22(max$prime)(Nothing.value);
    };
  };
  var maximum = function(dictOrd) {
    var compare8 = compare(dictOrd);
    return function(dictFoldable) {
      return maximumBy(dictFoldable)(compare8);
    };
  };
  var minimumBy = function(dictFoldable) {
    var foldl22 = foldl(dictFoldable);
    return function(cmp) {
      var min$prime = function(v2) {
        return function(v1) {
          if (v2 instanceof Nothing) {
            return new Just(v1);
          }
          ;
          if (v2 instanceof Just) {
            return new Just((function() {
              var $307 = eq12(cmp(v2.value0)(v1))(LT.value);
              if ($307) {
                return v2.value0;
              }
              ;
              return v1;
            })());
          }
          ;
          throw new Error("Failed pattern match at Data.Foldable (line 454, column 3 - line 454, column 27): " + [v2.constructor.name, v1.constructor.name]);
        };
      };
      return foldl22(min$prime)(Nothing.value);
    };
  };
  var minimum = function(dictOrd) {
    var compare8 = compare(dictOrd);
    return function(dictFoldable) {
      return minimumBy(dictFoldable)(compare8);
    };
  };
  var foldableMaybe = {
    foldr: function(v2) {
      return function(v1) {
        return function(v22) {
          if (v22 instanceof Nothing) {
            return v1;
          }
          ;
          if (v22 instanceof Just) {
            return v2(v22.value0)(v1);
          }
          ;
          throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): " + [v2.constructor.name, v1.constructor.name, v22.constructor.name]);
        };
      };
    },
    foldl: function(v2) {
      return function(v1) {
        return function(v22) {
          if (v22 instanceof Nothing) {
            return v1;
          }
          ;
          if (v22 instanceof Just) {
            return v2(v1)(v22.value0);
          }
          ;
          throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): " + [v2.constructor.name, v1.constructor.name, v22.constructor.name]);
        };
      };
    },
    foldMap: function(dictMonoid) {
      var mempty2 = mempty(dictMonoid);
      return function(v2) {
        return function(v1) {
          if (v1 instanceof Nothing) {
            return mempty2;
          }
          ;
          if (v1 instanceof Just) {
            return v2(v1.value0);
          }
          ;
          throw new Error("Failed pattern match at Data.Foldable (line 138, column 1 - line 144, column 27): " + [v2.constructor.name, v1.constructor.name]);
        };
      };
    }
  };
  var foldableEither = {
    foldr: function(v2) {
      return function(v1) {
        return function(v22) {
          if (v22 instanceof Left) {
            return v1;
          }
          ;
          if (v22 instanceof Right) {
            return v2(v22.value0)(v1);
          }
          ;
          throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): " + [v2.constructor.name, v1.constructor.name, v22.constructor.name]);
        };
      };
    },
    foldl: function(v2) {
      return function(v1) {
        return function(v22) {
          if (v22 instanceof Left) {
            return v1;
          }
          ;
          if (v22 instanceof Right) {
            return v2(v1)(v22.value0);
          }
          ;
          throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): " + [v2.constructor.name, v1.constructor.name, v22.constructor.name]);
        };
      };
    },
    foldMap: function(dictMonoid) {
      var mempty2 = mempty(dictMonoid);
      return function(v2) {
        return function(v1) {
          if (v1 instanceof Left) {
            return mempty2;
          }
          ;
          if (v1 instanceof Right) {
            return v2(v1.value0);
          }
          ;
          throw new Error("Failed pattern match at Data.Foldable (line 181, column 1 - line 187, column 28): " + [v2.constructor.name, v1.constructor.name]);
        };
      };
    }
  };
  var foldMapDefaultR = function(dictFoldable) {
    var foldr22 = foldr(dictFoldable);
    return function(dictMonoid) {
      var append25 = append(dictMonoid.Semigroup0());
      var mempty2 = mempty(dictMonoid);
      return function(f) {
        return foldr22(function(x7) {
          return function(acc) {
            return append25(f(x7))(acc);
          };
        })(mempty2);
      };
    };
  };
  var foldableArray = {
    foldr: foldrArray,
    foldl: foldlArray,
    foldMap: function(dictMonoid) {
      return foldMapDefaultR(foldableArray)(dictMonoid);
    }
  };
  var foldMap = function(dict) {
    return dict.foldMap;
  };
  var any = function(dictFoldable) {
    var foldMap22 = foldMap(dictFoldable);
    return function(dictHeytingAlgebra) {
      return alaF2(Disj)(foldMap22(monoidDisj(dictHeytingAlgebra)));
    };
  };
  var all = function(dictFoldable) {
    var foldMap22 = foldMap(dictFoldable);
    return function(dictHeytingAlgebra) {
      return alaF2(Conj)(foldMap22(monoidConj(dictHeytingAlgebra)));
    };
  };

  // output/Data.Function.Uncurried/foreign.js
  var runFn2 = function(fn) {
    return function(a3) {
      return function(b2) {
        return fn(a3, b2);
      };
    };
  };
  var runFn3 = function(fn) {
    return function(a3) {
      return function(b2) {
        return function(c2) {
          return fn(a3, b2, c2);
        };
      };
    };
  };
  var runFn4 = function(fn) {
    return function(a3) {
      return function(b2) {
        return function(c2) {
          return function(d3) {
            return fn(a3, b2, c2, d3);
          };
        };
      };
    };
  };

  // output/Data.FunctorWithIndex/foreign.js
  var mapWithIndexArray = function(f) {
    return function(xs) {
      var l2 = xs.length;
      var result = Array(l2);
      for (var i2 = 0; i2 < l2; i2++) {
        result[i2] = f(i2)(xs[i2]);
      }
      return result;
    };
  };

  // output/Data.FunctorWithIndex/index.js
  var mapWithIndex = function(dict) {
    return dict.mapWithIndex;
  };
  var functorWithIndexArray = {
    mapWithIndex: mapWithIndexArray,
    Functor0: function() {
      return functorArray;
    }
  };

  // output/Data.Traversable/foreign.js
  var traverseArrayImpl = /* @__PURE__ */ (function() {
    function array1(a3) {
      return [a3];
    }
    function array2(a3) {
      return function(b2) {
        return [a3, b2];
      };
    }
    function array3(a3) {
      return function(b2) {
        return function(c2) {
          return [a3, b2, c2];
        };
      };
    }
    function concat22(xs) {
      return function(ys) {
        return xs.concat(ys);
      };
    }
    return function(apply5) {
      return function(map57) {
        return function(pure60) {
          return function(f) {
            return function(array) {
              function go2(bot, top3) {
                switch (top3 - bot) {
                  case 0:
                    return pure60([]);
                  case 1:
                    return map57(array1)(f(array[bot]));
                  case 2:
                    return apply5(map57(array2)(f(array[bot])))(f(array[bot + 1]));
                  case 3:
                    return apply5(apply5(map57(array3)(f(array[bot])))(f(array[bot + 1])))(f(array[bot + 2]));
                  default:
                    var pivot = bot + Math.floor((top3 - bot) / 4) * 2;
                    return apply5(map57(concat22)(go2(bot, pivot)))(go2(pivot, top3));
                }
              }
              return go2(0, array.length);
            };
          };
        };
      };
    };
  })();

  // output/Data.Traversable.Accum.Internal/index.js
  var stateL = function(v2) {
    return v2;
  };
  var functorStateL = {
    map: function(f) {
      return function(k) {
        return function(s2) {
          var v2 = stateL(k)(s2);
          return {
            accum: v2.accum,
            value: f(v2.value)
          };
        };
      };
    }
  };
  var applyStateL = {
    apply: function(f) {
      return function(x7) {
        return function(s2) {
          var v2 = stateL(f)(s2);
          var v1 = stateL(x7)(v2.accum);
          return {
            accum: v1.accum,
            value: v2.value(v1.value)
          };
        };
      };
    },
    Functor0: function() {
      return functorStateL;
    }
  };
  var applicativeStateL = {
    pure: function(a3) {
      return function(s2) {
        return {
          accum: s2,
          value: a3
        };
      };
    },
    Apply0: function() {
      return applyStateL;
    }
  };

  // output/Data.Traversable/index.js
  var identity5 = /* @__PURE__ */ identity(categoryFn);
  var traverse = function(dict) {
    return dict.traverse;
  };
  var sequenceDefault = function(dictTraversable) {
    var traverse22 = traverse(dictTraversable);
    return function(dictApplicative) {
      return traverse22(dictApplicative)(identity5);
    };
  };
  var traversableArray = {
    traverse: function(dictApplicative) {
      var Apply0 = dictApplicative.Apply0();
      return traverseArrayImpl(apply(Apply0))(map(Apply0.Functor0()))(pure(dictApplicative));
    },
    sequence: function(dictApplicative) {
      return sequenceDefault(traversableArray)(dictApplicative);
    },
    Functor0: function() {
      return functorArray;
    },
    Foldable1: function() {
      return foldableArray;
    }
  };
  var sequence = function(dict) {
    return dict.sequence;
  };
  var mapAccumL = function(dictTraversable) {
    var traverse22 = traverse(dictTraversable)(applicativeStateL);
    return function(f) {
      return function(s0) {
        return function(xs) {
          return stateL(traverse22(function(a3) {
            return function(s2) {
              return f(s2)(a3);
            };
          })(xs))(s0);
        };
      };
    };
  };
  var scanl = function(dictTraversable) {
    var mapAccumL1 = mapAccumL(dictTraversable);
    return function(f) {
      return function(b0) {
        return function(xs) {
          return mapAccumL1(function(b2) {
            return function(a3) {
              var b$prime = f(b2)(a3);
              return {
                accum: b$prime,
                value: b$prime
              };
            };
          })(b0)(xs).value;
        };
      };
    };
  };
  var $$for = function(dictApplicative) {
    return function(dictTraversable) {
      var traverse22 = traverse(dictTraversable)(dictApplicative);
      return function(x7) {
        return function(f) {
          return traverse22(f)(x7);
        };
      };
    };
  };

  // output/Data.Unfoldable/foreign.js
  var unfoldrArrayImpl = function(isNothing2) {
    return function(fromJust7) {
      return function(fst2) {
        return function(snd2) {
          return function(f) {
            return function(b2) {
              var result = [];
              var value18 = b2;
              while (true) {
                var maybe2 = f(value18);
                if (isNothing2(maybe2)) return result;
                var tuple = fromJust7(maybe2);
                result.push(fst2(tuple));
                value18 = snd2(tuple);
              }
            };
          };
        };
      };
    };
  };

  // output/Data.Unfoldable1/foreign.js
  var unfoldr1ArrayImpl = function(isNothing2) {
    return function(fromJust7) {
      return function(fst2) {
        return function(snd2) {
          return function(f) {
            return function(b2) {
              var result = [];
              var value18 = b2;
              while (true) {
                var tuple = f(value18);
                result.push(fst2(tuple));
                var maybe2 = snd2(tuple);
                if (isNothing2(maybe2)) return result;
                value18 = fromJust7(maybe2);
              }
            };
          };
        };
      };
    };
  };

  // output/Data.Unfoldable1/index.js
  var fromJust2 = /* @__PURE__ */ fromJust();
  var unfoldable1Array = {
    unfoldr1: /* @__PURE__ */ unfoldr1ArrayImpl(isNothing)(fromJust2)(fst)(snd)
  };

  // output/Data.Unfoldable/index.js
  var fromJust3 = /* @__PURE__ */ fromJust();
  var unfoldr = function(dict) {
    return dict.unfoldr;
  };
  var unfoldableArray = {
    unfoldr: /* @__PURE__ */ unfoldrArrayImpl(isNothing)(fromJust3)(fst)(snd),
    Unfoldable10: function() {
      return unfoldable1Array;
    }
  };

  // output/Data.Array/index.js
  var $$void4 = /* @__PURE__ */ $$void(functorST);
  var intercalate1 = /* @__PURE__ */ intercalate(foldableArray);
  var map5 = /* @__PURE__ */ map(functorMaybe);
  var fromJust4 = /* @__PURE__ */ fromJust();
  var append2 = /* @__PURE__ */ append(semigroupArray);
  var zipWith = /* @__PURE__ */ runFn3(zipWithImpl);
  var unsafeIndex = function() {
    return runFn2(unsafeIndexImpl);
  };
  var unsafeIndex1 = /* @__PURE__ */ unsafeIndex();
  var uncons = /* @__PURE__ */ (function() {
    return runFn3(unconsImpl)($$const(Nothing.value))(function(x7) {
      return function(xs) {
        return new Just({
          head: x7,
          tail: xs
        });
      };
    });
  })();
  var sortBy = function(comp) {
    return runFn3(sortByImpl)(comp)(function(v2) {
      if (v2 instanceof GT) {
        return 1;
      }
      ;
      if (v2 instanceof EQ) {
        return 0;
      }
      ;
      if (v2 instanceof LT) {
        return -1 | 0;
      }
      ;
      throw new Error("Failed pattern match at Data.Array (line 897, column 38 - line 900, column 11): " + [v2.constructor.name]);
    });
  };
  var sortWith = function(dictOrd) {
    var comparing2 = comparing(dictOrd);
    return function(f) {
      return sortBy(comparing2(f));
    };
  };
  var snoc = function(xs) {
    return function(x7) {
      return withArray(push(x7))(xs)();
    };
  };
  var slice = /* @__PURE__ */ runFn3(sliceImpl);
  var take = function(n) {
    return function(xs) {
      var $152 = n < 1;
      if ($152) {
        return [];
      }
      ;
      return slice(0)(n)(xs);
    };
  };
  var singleton2 = function(a3) {
    return [a3];
  };
  var replicate = /* @__PURE__ */ runFn2(replicateImpl);
  var range2 = /* @__PURE__ */ runFn2(rangeImpl);
  var $$null = function(xs) {
    return length(xs) === 0;
  };
  var mapWithIndex2 = /* @__PURE__ */ mapWithIndex(functorWithIndexArray);
  var intercalate2 = function(dictMonoid) {
    return intercalate1(dictMonoid);
  };
  var index = /* @__PURE__ */ (function() {
    return runFn4(indexImpl)(Just.create)(Nothing.value);
  })();
  var last = function(xs) {
    return index(xs)(length(xs) - 1 | 0);
  };
  var head = function(xs) {
    return index(xs)(0);
  };
  var groupBy = function(op) {
    return function(xs) {
      return (function __do7() {
        var result = newSTArray();
        var iter = iterator(function(v2) {
          return index(xs)(v2);
        })();
        iterate(iter)(function(x7) {
          return $$void4(function __do8() {
            var sub1 = newSTArray();
            push(x7)(sub1)();
            pushWhile(op(x7))(iter)(sub1)();
            var grp = unsafeFreeze(sub1)();
            return push(grp)(result)();
          });
        })();
        return unsafeFreeze(result)();
      })();
    };
  };
  var fromFoldable = function(dictFoldable) {
    return runFn2(fromFoldableImpl)(foldr(dictFoldable));
  };
  var foldl2 = /* @__PURE__ */ foldl(foldableArray);
  var foldM = function(dictMonad) {
    var pure118 = pure(dictMonad.Applicative0());
    var bind115 = bind(dictMonad.Bind1());
    return function(f) {
      return function(b2) {
        return runFn3(unconsImpl)(function(v2) {
          return pure118(b2);
        })(function(a3) {
          return function(as) {
            return bind115(f(b2)(a3))(function(b$prime) {
              return foldM(dictMonad)(f)(b$prime)(as);
            });
          };
        });
      };
    };
  };
  var findMap = /* @__PURE__ */ (function() {
    return runFn4(findMapImpl)(Nothing.value)(isJust);
  })();
  var findIndex = /* @__PURE__ */ (function() {
    return runFn4(findIndexImpl)(Just.create)(Nothing.value);
  })();
  var find2 = function(f) {
    return function(xs) {
      return map5(unsafeIndex1(xs))(findIndex(f)(xs));
    };
  };
  var filter = /* @__PURE__ */ runFn2(filterImpl);
  var elemIndex = function(dictEq) {
    var eq22 = eq(dictEq);
    return function(x7) {
      return findIndex(function(v2) {
        return eq22(v2)(x7);
      });
    };
  };
  var elem2 = function(dictEq) {
    var elemIndex1 = elemIndex(dictEq);
    return function(a3) {
      return function(arr) {
        return isJust(elemIndex1(a3)(arr));
      };
    };
  };
  var deleteAt = /* @__PURE__ */ (function() {
    return runFn4(_deleteAt)(Just.create)(Nothing.value);
  })();
  var deleteBy = function(v2) {
    return function(v1) {
      return function(v22) {
        if (v22.length === 0) {
          return [];
        }
        ;
        return maybe(v22)(function(i2) {
          return fromJust4(deleteAt(i2)(v22));
        })(findIndex(v2(v1))(v22));
      };
    };
  };
  var cons = function(x7) {
    return function(xs) {
      return append2([x7])(xs);
    };
  };
  var concatMap = /* @__PURE__ */ flip(/* @__PURE__ */ bind(bindArray));
  var mapMaybe = function(f) {
    return concatMap((function() {
      var $189 = maybe([])(singleton2);
      return function($190) {
        return $189(f($190));
      };
    })());
  };
  var catMaybes = /* @__PURE__ */ mapMaybe(/* @__PURE__ */ identity(categoryFn));
  var any2 = /* @__PURE__ */ runFn2(anyImpl);

  // output/Effect.Random/foreign.js
  var random = Math.random;

  // output/Data.Int/foreign.js
  var fromNumberImpl = function(just) {
    return function(nothing) {
      return function(n) {
        return (n | 0) === n ? just(n) : nothing;
      };
    };
  };
  var toNumber = function(n) {
    return n;
  };
  var fromStringAsImpl = function(just) {
    return function(nothing) {
      return function(radix) {
        var digits;
        if (radix < 11) {
          digits = "[0-" + (radix - 1).toString() + "]";
        } else if (radix === 11) {
          digits = "[0-9a]";
        } else {
          digits = "[0-9a-" + String.fromCharCode(86 + radix) + "]";
        }
        var pattern2 = new RegExp("^[\\+\\-]?" + digits + "+$", "i");
        return function(s2) {
          if (pattern2.test(s2)) {
            var i2 = parseInt(s2, radix);
            return (i2 | 0) === i2 ? just(i2) : nothing;
          } else {
            return nothing;
          }
        };
      };
    };
  };

  // output/Data.Number/foreign.js
  var isFiniteImpl = isFinite;
  function fromStringImpl(str6, isFinite2, just, nothing) {
    var num7 = parseFloat(str6);
    if (isFinite2(num7)) {
      return just(num7);
    } else {
      return nothing;
    }
  }
  var cos = Math.cos;
  var exp = Math.exp;
  var floor = Math.floor;
  var pow = function(n) {
    return function(p2) {
      return Math.pow(n, p2);
    };
  };
  var round = Math.round;
  var sin = Math.sin;
  var sqrt = Math.sqrt;

  // output/Data.Number/index.js
  var pi = 3.141592653589793;
  var fromString = function(str6) {
    return fromStringImpl(str6, isFiniteImpl, Just.create, Nothing.value);
  };

  // output/Data.Int/index.js
  var top2 = /* @__PURE__ */ top(boundedInt);
  var bottom2 = /* @__PURE__ */ bottom(boundedInt);
  var fromStringAs = /* @__PURE__ */ (function() {
    return fromStringAsImpl(Just.create)(Nothing.value);
  })();
  var fromString2 = /* @__PURE__ */ fromStringAs(10);
  var fromNumber = /* @__PURE__ */ (function() {
    return fromNumberImpl(Just.create)(Nothing.value);
  })();
  var unsafeClamp = function(x7) {
    if (!isFiniteImpl(x7)) {
      return 0;
    }
    ;
    if (x7 >= toNumber(top2)) {
      return top2;
    }
    ;
    if (x7 <= toNumber(bottom2)) {
      return bottom2;
    }
    ;
    if (otherwise) {
      return fromMaybe(0)(fromNumber(x7));
    }
    ;
    throw new Error("Failed pattern match at Data.Int (line 72, column 1 - line 72, column 29): " + [x7.constructor.name]);
  };
  var round2 = function($37) {
    return unsafeClamp(round($37));
  };
  var floor2 = function($39) {
    return unsafeClamp(floor($39));
  };

  // output/Effect.Random/index.js
  var randomInt = function(low2) {
    return function(high2) {
      return function __do7() {
        var n = random();
        var asNumber = (toNumber(high2) - toNumber(low2) + 1) * n + toNumber(low2);
        return floor2(asNumber);
      };
    };
  };

  // output/D3.Viz.ForcePlayground.Generator/index.js
  var foldM2 = /* @__PURE__ */ foldM(monadEffect);
  var pure2 = /* @__PURE__ */ pure(applicativeEffect);
  var append3 = /* @__PURE__ */ append(semigroupArray);
  var min3 = /* @__PURE__ */ min(ordInt);
  var max3 = /* @__PURE__ */ max(ordInt);
  var show2 = /* @__PURE__ */ show(showInt);
  var bind1 = /* @__PURE__ */ bind(bindArray);
  var pure1 = /* @__PURE__ */ pure(applicativeArray);
  var foldl3 = /* @__PURE__ */ foldl(foldableArray);
  var map6 = /* @__PURE__ */ map(functorArray);
  var pickBridgePairs = function(numSubgraphs) {
    return function(count) {
      return foldM2(function(acc) {
        return function(v2) {
          return function __do7() {
            var sg1 = randomInt(0)(numSubgraphs - 1 | 0)();
            var sg2 = randomInt(0)(numSubgraphs - 1 | 0)();
            var $44 = sg1 !== sg2;
            if ($44) {
              return append3(acc)([new Tuple(min3(sg1)(sg2), max3(sg1)(sg2))]);
            }
            ;
            return acc;
          };
        };
      })([])(replicate(count * 2 | 0)(unit));
    };
  };
  var generateNode = function(localId) {
    return function(subgraphId) {
      return function(dominantCategory) {
        return function __do7() {
          var useDominant = random();
          var category = (function() {
            var $46 = useDominant < 0.7;
            if ($46) {
              return dominantCategory;
            }
            ;
            return randomInt(0)(3)();
          })();
          var sizeClass = randomInt(0)(2)();
          var importance = random();
          var name16 = "Node " + (show2(subgraphId) + ("-" + show2(localId)));
          return {
            id: localId,
            name: name16,
            category,
            sizeClass,
            importance,
            subgraph: subgraphId
          };
        };
      };
    };
  };
  var generateNodes = function(count) {
    return function(subgraphId) {
      return function(dominantCategory) {
        return foldM2(function(acc) {
          return function(i2) {
            return function __do7() {
              var node = generateNode(i2)(subgraphId)(dominantCategory)();
              return append3(acc)([node]);
            };
          };
        })([])(range2(0)(count - 1 | 0));
      };
    };
  };
  var generateBimodalWeight = function __do() {
    var r8 = random();
    var $47 = r8 < 0.5;
    if ($47) {
      var w = random();
      return 0.15 + w * 0.2;
    }
    ;
    var w = random();
    return 0.7 + w * 0.3;
  };
  var generateLink = function(source3) {
    return function(target7) {
      return function __do7() {
        var weight = generateBimodalWeight();
        var linkType = randomInt(0)(3)();
        var distance = 30 + (1 - weight) * 70;
        return {
          source: source3,
          target: target7,
          weight,
          linkType,
          distance
        };
      };
    };
  };
  var generateBridgeLinks = function(v2) {
    return function(nodes) {
      return function(sg1) {
        return function(sg2) {
          return function(count) {
            var nodesInSg2 = filter(function(n) {
              return n.subgraph === sg2;
            })(nodes);
            var nodesInSg1 = filter(function(n) {
              return n.subgraph === sg1;
            })(nodes);
            var $48 = length(nodesInSg1) === 0 || length(nodesInSg2) === 0;
            if ($48) {
              return pure2([]);
            }
            ;
            return foldM2(function(acc) {
              return function(v1) {
                return function __do7() {
                  var idx1 = randomInt(0)(length(nodesInSg1) - 1 | 0)();
                  var idx2 = randomInt(0)(length(nodesInSg2) - 1 | 0)();
                  var v22 = new Tuple(index(nodesInSg1)(idx1), index(nodesInSg2)(idx2));
                  if (v22.value0 instanceof Just && v22.value1 instanceof Just) {
                    var link4 = generateLink(v22.value0.value0.id)(v22.value1.value0.id)();
                    var bridgeLink = {
                      linkType: link4.linkType,
                      source: link4.source,
                      target: link4.target,
                      weight: link4.weight * 0.5,
                      distance: link4.distance * 1.5
                    };
                    return append3(acc)([bridgeLink]);
                  }
                  ;
                  return acc;
                };
              };
            })([])(replicate(count)(unit));
          };
        };
      };
    };
  };
  var generateBridges = function(config) {
    return function(offsets) {
      return function(nodes) {
        var numSubgraphs = length(offsets);
        var $54 = numSubgraphs < 2;
        if ($54) {
          return pure2([]);
        }
        ;
        return function __do7() {
          var bridgePairs = pickBridgePairs(numSubgraphs)(config.bridgeCount)();
          return foldM2(function(acc) {
            return function(v2) {
              return function __do8() {
                var links = generateBridgeLinks(offsets)(nodes)(v2.value0)(v2.value1)(config.bridgeLinks)();
                return append3(acc)(links);
              };
            };
          })([])(bridgePairs)();
        };
      };
    };
  };
  var generateInternalLinks = function(nodes) {
    return function(connectivity) {
      var n = length(nodes);
      var $58 = n < 2;
      if ($58) {
        return pure2([]);
      }
      ;
      var pairs = bind1(range2(0)(n - 2 | 0))(function(i2) {
        return bind1(range2(i2 + 1 | 0)(n - 1 | 0))(function(j) {
          return pure1(new Tuple(i2, j));
        });
      });
      return foldM2(function(acc) {
        return function(v2) {
          return function __do7() {
            var include = random();
            var $60 = include < connectivity;
            if ($60) {
              var link4 = generateLink(v2.value0)(v2.value1)();
              return append3(acc)([link4]);
            }
            ;
            return acc;
          };
        };
      })([])(pairs);
    };
  };
  var generateSubgraph = function(config) {
    return function(subgraphId) {
      return function __do7() {
        var nodeCount = randomInt(config.minNodesPerSubgraph)(config.maxNodesPerSubgraph)();
        var dominantCategory = randomInt(0)(3)();
        var nodes = generateNodes(nodeCount)(subgraphId)(dominantCategory)();
        var links = generateInternalLinks(nodes)(config.internalConnectivity)();
        return {
          nodes,
          links
        };
      };
    };
  };
  var generateSubgraphs = function(config) {
    return function(count) {
      return foldM2(function(acc) {
        return function(i2) {
          return function __do7() {
            var sg = generateSubgraph(config)(i2)();
            return append3(acc)([sg]);
          };
        };
      })([])(range2(0)(count - 1 | 0));
    };
  };
  var flattenSubgraphs = function(subgraphs) {
    var offsets = foldl3(function(acc) {
      return function(v2) {
        var prevCount = (function() {
          var v1 = index(subgraphs)(length(acc) - 1 | 0);
          if (v1 instanceof Nothing) {
            return 0;
          }
          ;
          if (v1 instanceof Just) {
            return length(v1.value0.nodes);
          }
          ;
          throw new Error("Failed pattern match at D3.Viz.ForcePlayground.Generator (line 251, column 25 - line 253, column 45): " + [v1.constructor.name]);
        })();
        var lastOffset = (function() {
          var v1 = last(acc);
          if (v1 instanceof Nothing) {
            return 0;
          }
          ;
          if (v1 instanceof Just) {
            return v1.value0;
          }
          ;
          throw new Error("Failed pattern match at D3.Viz.ForcePlayground.Generator (line 248, column 26 - line 250, column 26): " + [v1.constructor.name]);
        })();
        return append3(acc)([lastOffset + prevCount | 0]);
      };
    })([0])(take(length(subgraphs) - 1 | 0)(subgraphs));
    var adjustedNodes = concat(mapWithIndex2(function(i2) {
      return function(sg) {
        var offset = (function() {
          var v2 = index(offsets)(i2);
          if (v2 instanceof Nothing) {
            return 0;
          }
          ;
          if (v2 instanceof Just) {
            return v2.value0;
          }
          ;
          throw new Error("Failed pattern match at D3.Viz.ForcePlayground.Generator (line 262, column 22 - line 264, column 26): " + [v2.constructor.name]);
        })();
        return map6(function(n) {
          return {
            category: n.category,
            importance: n.importance,
            name: n.name,
            sizeClass: n.sizeClass,
            subgraph: n.subgraph,
            id: n.id + offset | 0
          };
        })(sg.nodes);
      };
    })(subgraphs));
    var adjustedLinks = concat(mapWithIndex2(function(i2) {
      return function(sg) {
        var offset = (function() {
          var v2 = index(offsets)(i2);
          if (v2 instanceof Nothing) {
            return 0;
          }
          ;
          if (v2 instanceof Just) {
            return v2.value0;
          }
          ;
          throw new Error("Failed pattern match at D3.Viz.ForcePlayground.Generator (line 272, column 22 - line 274, column 26): " + [v2.constructor.name]);
        })();
        return map6(function(l2) {
          return {
            distance: l2.distance,
            linkType: l2.linkType,
            weight: l2.weight,
            source: l2.source + offset | 0,
            target: l2.target + offset | 0
          };
        })(sg.links);
      };
    })(subgraphs));
    return {
      nodes: adjustedNodes,
      links: adjustedLinks,
      offsets
    };
  };
  var generateGraph = function(config) {
    return function __do7() {
      var numSubgraphs = randomInt(config.minSubgraphs)(config.maxSubgraphs)();
      var subgraphs = generateSubgraphs(config)(numSubgraphs)();
      var v2 = flattenSubgraphs(subgraphs);
      var bridgeLinks = generateBridges(config)(v2.offsets)(v2.nodes)();
      return {
        nodes: v2.nodes,
        links: append3(v2.links)(bridgeLinks)
      };
    };
  };
  var defaultConfig = {
    minSubgraphs: 20,
    maxSubgraphs: 30,
    minNodesPerSubgraph: 3,
    maxNodesPerSubgraph: 10,
    internalConnectivity: 0.3,
    bridgeCount: 8,
    bridgeLinks: 2
  };

  // output/Data.Nullable/foreign.js
  var nullImpl = null;
  function nullable(a3, r8, f) {
    return a3 == null ? r8 : f(a3);
  }
  function notNull(x7) {
    return x7;
  }

  // output/Data.Nullable/index.js
  var toNullable = /* @__PURE__ */ maybe(nullImpl)(notNull);
  var toMaybe = function(n) {
    return nullable(n, Nothing.value, Just.create);
  };
  var eqNullable = function(dictEq) {
    return {
      eq: on(eq(eqMaybe(dictEq)))(toMaybe)
    };
  };
  var ordNullable = function(dictOrd) {
    var eqNullable1 = eqNullable(dictOrd.Eq0());
    return {
      compare: on(compare(ordMaybe(dictOrd)))(toMaybe),
      Eq0: function() {
        return eqNullable1;
      }
    };
  };

  // output/D3.Viz.ForcePlayground.Model/index.js
  var map7 = /* @__PURE__ */ map(functorArray);
  var mkNodeFromGenerated = function(gen) {
    return {
      id: gen.id,
      name: gen.name,
      group: gen.category,
      sizeClass: gen.sizeClass,
      importance: gen.importance,
      subgraph: gen.subgraph,
      x: 0,
      y: 0,
      vx: 0,
      vy: 0,
      fx: nullImpl,
      fy: nullImpl
    };
  };
  var mkLinkFromGenerated = function(gen) {
    return {
      source: gen.source,
      target: gen.target,
      weight: gen.weight,
      linkType: gen.linkType,
      distance: gen.distance
    };
  };
  var fromGeneratedGraph = function(gen) {
    return {
      nodes: map7(mkNodeFromGenerated)(gen.nodes),
      links: map7(mkLinkFromGenerated)(gen.links)
    };
  };

  // output/Data.FoldableWithIndex/index.js
  var foldr8 = /* @__PURE__ */ foldr(foldableArray);
  var mapWithIndex3 = /* @__PURE__ */ mapWithIndex(functorWithIndexArray);
  var foldl8 = /* @__PURE__ */ foldl(foldableArray);
  var foldrWithIndex = function(dict) {
    return dict.foldrWithIndex;
  };
  var traverseWithIndex_ = function(dictApplicative) {
    var applySecond3 = applySecond(dictApplicative.Apply0());
    var pure60 = pure(dictApplicative);
    return function(dictFoldableWithIndex) {
      var foldrWithIndex1 = foldrWithIndex(dictFoldableWithIndex);
      return function(f) {
        return foldrWithIndex1(function(i2) {
          var $289 = f(i2);
          return function($290) {
            return applySecond3($289($290));
          };
        })(pure60(unit));
      };
    };
  };
  var foldlWithIndex = function(dict) {
    return dict.foldlWithIndex;
  };
  var foldMapWithIndexDefaultR = function(dictFoldableWithIndex) {
    var foldrWithIndex1 = foldrWithIndex(dictFoldableWithIndex);
    return function(dictMonoid) {
      var append25 = append(dictMonoid.Semigroup0());
      var mempty2 = mempty(dictMonoid);
      return function(f) {
        return foldrWithIndex1(function(i2) {
          return function(x7) {
            return function(acc) {
              return append25(f(i2)(x7))(acc);
            };
          };
        })(mempty2);
      };
    };
  };
  var foldableWithIndexArray = {
    foldrWithIndex: function(f) {
      return function(z2) {
        var $291 = foldr8(function(v2) {
          return function(y7) {
            return f(v2.value0)(v2.value1)(y7);
          };
        })(z2);
        var $292 = mapWithIndex3(Tuple.create);
        return function($293) {
          return $291($292($293));
        };
      };
    },
    foldlWithIndex: function(f) {
      return function(z2) {
        var $294 = foldl8(function(y7) {
          return function(v2) {
            return f(v2.value0)(y7)(v2.value1);
          };
        })(z2);
        var $295 = mapWithIndex3(Tuple.create);
        return function($296) {
          return $294($295($296));
        };
      };
    },
    foldMapWithIndex: function(dictMonoid) {
      return foldMapWithIndexDefaultR(foldableWithIndexArray)(dictMonoid);
    },
    Foldable0: function() {
      return foldableArray;
    }
  };

  // output/Data.TraversableWithIndex/index.js
  var traverseWithIndexDefault = function(dictTraversableWithIndex) {
    var sequence3 = sequence(dictTraversableWithIndex.Traversable2());
    var mapWithIndex4 = mapWithIndex(dictTraversableWithIndex.FunctorWithIndex0());
    return function(dictApplicative) {
      var sequence12 = sequence3(dictApplicative);
      return function(f) {
        var $174 = mapWithIndex4(f);
        return function($175) {
          return sequence12($174($175));
        };
      };
    };
  };
  var traverseWithIndex = function(dict) {
    return dict.traverseWithIndex;
  };
  var traversableWithIndexArray = {
    traverseWithIndex: function(dictApplicative) {
      return traverseWithIndexDefault(traversableWithIndexArray)(dictApplicative);
    },
    FunctorWithIndex0: function() {
      return functorWithIndexArray;
    },
    FoldableWithIndex1: function() {
      return foldableWithIndexArray;
    },
    Traversable2: function() {
      return traversableArray;
    }
  };

  // output/Data.NonEmpty/index.js
  var NonEmpty = /* @__PURE__ */ (function() {
    function NonEmpty2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    NonEmpty2.create = function(value0) {
      return function(value1) {
        return new NonEmpty2(value0, value1);
      };
    };
    return NonEmpty2;
  })();
  var singleton3 = function(dictPlus) {
    var empty8 = empty(dictPlus);
    return function(a3) {
      return new NonEmpty(a3, empty8);
    };
  };

  // output/Data.List.Types/index.js
  var identity6 = /* @__PURE__ */ identity(categoryFn);
  var Nil = /* @__PURE__ */ (function() {
    function Nil2() {
    }
    ;
    Nil2.value = new Nil2();
    return Nil2;
  })();
  var Cons = /* @__PURE__ */ (function() {
    function Cons2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Cons2.create = function(value0) {
      return function(value1) {
        return new Cons2(value0, value1);
      };
    };
    return Cons2;
  })();
  var NonEmptyList = function(x7) {
    return x7;
  };
  var toList = function(v2) {
    return new Cons(v2.value0, v2.value1);
  };
  var listMap = function(f) {
    var chunkedRevMap = function($copy_v) {
      return function($copy_v1) {
        var $tco_var_v = $copy_v;
        var $tco_done = false;
        var $tco_result;
        function $tco_loop(v2, v1) {
          if (v1 instanceof Cons && (v1.value1 instanceof Cons && v1.value1.value1 instanceof Cons)) {
            $tco_var_v = new Cons(v1, v2);
            $copy_v1 = v1.value1.value1.value1;
            return;
          }
          ;
          var unrolledMap = function(v22) {
            if (v22 instanceof Cons && (v22.value1 instanceof Cons && v22.value1.value1 instanceof Nil)) {
              return new Cons(f(v22.value0), new Cons(f(v22.value1.value0), Nil.value));
            }
            ;
            if (v22 instanceof Cons && v22.value1 instanceof Nil) {
              return new Cons(f(v22.value0), Nil.value);
            }
            ;
            return Nil.value;
          };
          var reverseUnrolledMap = function($copy_v2) {
            return function($copy_v3) {
              var $tco_var_v2 = $copy_v2;
              var $tco_done1 = false;
              var $tco_result2;
              function $tco_loop2(v22, v3) {
                if (v22 instanceof Cons && (v22.value0 instanceof Cons && (v22.value0.value1 instanceof Cons && v22.value0.value1.value1 instanceof Cons))) {
                  $tco_var_v2 = v22.value1;
                  $copy_v3 = new Cons(f(v22.value0.value0), new Cons(f(v22.value0.value1.value0), new Cons(f(v22.value0.value1.value1.value0), v3)));
                  return;
                }
                ;
                $tco_done1 = true;
                return v3;
              }
              ;
              while (!$tco_done1) {
                $tco_result2 = $tco_loop2($tco_var_v2, $copy_v3);
              }
              ;
              return $tco_result2;
            };
          };
          $tco_done = true;
          return reverseUnrolledMap(v2)(unrolledMap(v1));
        }
        ;
        while (!$tco_done) {
          $tco_result = $tco_loop($tco_var_v, $copy_v1);
        }
        ;
        return $tco_result;
      };
    };
    return chunkedRevMap(Nil.value);
  };
  var functorList = {
    map: listMap
  };
  var map8 = /* @__PURE__ */ map(functorList);
  var foldableList = {
    foldr: function(f) {
      return function(b2) {
        var rev3 = (function() {
          var go2 = function($copy_v) {
            return function($copy_v1) {
              var $tco_var_v = $copy_v;
              var $tco_done = false;
              var $tco_result;
              function $tco_loop(v2, v1) {
                if (v1 instanceof Nil) {
                  $tco_done = true;
                  return v2;
                }
                ;
                if (v1 instanceof Cons) {
                  $tco_var_v = new Cons(v1.value0, v2);
                  $copy_v1 = v1.value1;
                  return;
                }
                ;
                throw new Error("Failed pattern match at Data.List.Types (line 107, column 7 - line 107, column 23): " + [v2.constructor.name, v1.constructor.name]);
              }
              ;
              while (!$tco_done) {
                $tco_result = $tco_loop($tco_var_v, $copy_v1);
              }
              ;
              return $tco_result;
            };
          };
          return go2(Nil.value);
        })();
        var $284 = foldl(foldableList)(flip(f))(b2);
        return function($285) {
          return $284(rev3($285));
        };
      };
    },
    foldl: function(f) {
      var go2 = function($copy_b) {
        return function($copy_v) {
          var $tco_var_b = $copy_b;
          var $tco_done1 = false;
          var $tco_result;
          function $tco_loop(b2, v2) {
            if (v2 instanceof Nil) {
              $tco_done1 = true;
              return b2;
            }
            ;
            if (v2 instanceof Cons) {
              $tco_var_b = f(b2)(v2.value0);
              $copy_v = v2.value1;
              return;
            }
            ;
            throw new Error("Failed pattern match at Data.List.Types (line 111, column 12 - line 113, column 30): " + [v2.constructor.name]);
          }
          ;
          while (!$tco_done1) {
            $tco_result = $tco_loop($tco_var_b, $copy_v);
          }
          ;
          return $tco_result;
        };
      };
      return go2;
    },
    foldMap: function(dictMonoid) {
      var append25 = append(dictMonoid.Semigroup0());
      var mempty2 = mempty(dictMonoid);
      return function(f) {
        return foldl(foldableList)(function(acc) {
          var $286 = append25(acc);
          return function($287) {
            return $286(f($287));
          };
        })(mempty2);
      };
    }
  };
  var foldl4 = /* @__PURE__ */ foldl(foldableList);
  var foldr2 = /* @__PURE__ */ foldr(foldableList);
  var semigroupList = {
    append: function(xs) {
      return function(ys) {
        return foldr2(Cons.create)(ys)(xs);
      };
    }
  };
  var append1 = /* @__PURE__ */ append(semigroupList);
  var semigroupNonEmptyList = {
    append: function(v2) {
      return function(as$prime) {
        return new NonEmpty(v2.value0, append1(v2.value1)(toList(as$prime)));
      };
    }
  };
  var traversableList = {
    traverse: function(dictApplicative) {
      var Apply0 = dictApplicative.Apply0();
      var map121 = map(Apply0.Functor0());
      var lift22 = lift2(Apply0);
      var pure118 = pure(dictApplicative);
      return function(f) {
        var $301 = map121(foldl4(flip(Cons.create))(Nil.value));
        var $302 = foldl4(function(acc) {
          var $304 = lift22(flip(Cons.create))(acc);
          return function($305) {
            return $304(f($305));
          };
        })(pure118(Nil.value));
        return function($303) {
          return $301($302($303));
        };
      };
    },
    sequence: function(dictApplicative) {
      return traverse(traversableList)(dictApplicative)(identity6);
    },
    Functor0: function() {
      return functorList;
    },
    Foldable1: function() {
      return foldableList;
    }
  };
  var applyList = {
    apply: function(v2) {
      return function(v1) {
        if (v2 instanceof Nil) {
          return Nil.value;
        }
        ;
        if (v2 instanceof Cons) {
          return append1(map8(v2.value0)(v1))(apply(applyList)(v2.value1)(v1));
        }
        ;
        throw new Error("Failed pattern match at Data.List.Types (line 157, column 1 - line 159, column 48): " + [v2.constructor.name, v1.constructor.name]);
      };
    },
    Functor0: function() {
      return functorList;
    }
  };
  var bindList = {
    bind: function(v2) {
      return function(v1) {
        if (v2 instanceof Nil) {
          return Nil.value;
        }
        ;
        if (v2 instanceof Cons) {
          return append1(v1(v2.value0))(bind(bindList)(v2.value1)(v1));
        }
        ;
        throw new Error("Failed pattern match at Data.List.Types (line 164, column 1 - line 166, column 37): " + [v2.constructor.name, v1.constructor.name]);
      };
    },
    Apply0: function() {
      return applyList;
    }
  };
  var applicativeList = {
    pure: function(a3) {
      return new Cons(a3, Nil.value);
    },
    Apply0: function() {
      return applyList;
    }
  };
  var altList = {
    alt: append1,
    Functor0: function() {
      return functorList;
    }
  };
  var plusList = /* @__PURE__ */ (function() {
    return {
      empty: Nil.value,
      Alt0: function() {
        return altList;
      }
    };
  })();

  // output/Data.Map.Internal/index.js
  var $runtime_lazy2 = function(name16, moduleName, init3) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init3();
      state3 = 2;
      return val;
    };
  };
  var map9 = /* @__PURE__ */ map(functorMaybe);
  var Leaf = /* @__PURE__ */ (function() {
    function Leaf2() {
    }
    ;
    Leaf2.value = new Leaf2();
    return Leaf2;
  })();
  var Node = /* @__PURE__ */ (function() {
    function Node3(value0, value1, value22, value32, value42, value52) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
      this.value3 = value32;
      this.value4 = value42;
      this.value5 = value52;
    }
    ;
    Node3.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return function(value32) {
            return function(value42) {
              return function(value52) {
                return new Node3(value0, value1, value22, value32, value42, value52);
              };
            };
          };
        };
      };
    };
    return Node3;
  })();
  var IterLeaf = /* @__PURE__ */ (function() {
    function IterLeaf2() {
    }
    ;
    IterLeaf2.value = new IterLeaf2();
    return IterLeaf2;
  })();
  var IterEmit = /* @__PURE__ */ (function() {
    function IterEmit2(value0, value1, value22) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
    }
    ;
    IterEmit2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return new IterEmit2(value0, value1, value22);
        };
      };
    };
    return IterEmit2;
  })();
  var IterNode = /* @__PURE__ */ (function() {
    function IterNode2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    IterNode2.create = function(value0) {
      return function(value1) {
        return new IterNode2(value0, value1);
      };
    };
    return IterNode2;
  })();
  var Split = /* @__PURE__ */ (function() {
    function Split2(value0, value1, value22) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
    }
    ;
    Split2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return new Split2(value0, value1, value22);
        };
      };
    };
    return Split2;
  })();
  var SplitLast = /* @__PURE__ */ (function() {
    function SplitLast2(value0, value1, value22) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
    }
    ;
    SplitLast2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return new SplitLast2(value0, value1, value22);
        };
      };
    };
    return SplitLast2;
  })();
  var unsafeNode = function(k, v2, l2, r8) {
    if (l2 instanceof Leaf) {
      if (r8 instanceof Leaf) {
        return new Node(1, 1, k, v2, l2, r8);
      }
      ;
      if (r8 instanceof Node) {
        return new Node(1 + r8.value0 | 0, 1 + r8.value1 | 0, k, v2, l2, r8);
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 702, column 5 - line 706, column 39): " + [r8.constructor.name]);
    }
    ;
    if (l2 instanceof Node) {
      if (r8 instanceof Leaf) {
        return new Node(1 + l2.value0 | 0, 1 + l2.value1 | 0, k, v2, l2, r8);
      }
      ;
      if (r8 instanceof Node) {
        return new Node(1 + (function() {
          var $280 = l2.value0 > r8.value0;
          if ($280) {
            return l2.value0;
          }
          ;
          return r8.value0;
        })() | 0, (1 + l2.value1 | 0) + r8.value1 | 0, k, v2, l2, r8);
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 708, column 5 - line 712, column 68): " + [r8.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at Data.Map.Internal (line 700, column 32 - line 712, column 68): " + [l2.constructor.name]);
  };
  var toMapIter = /* @__PURE__ */ (function() {
    return flip(IterNode.create)(IterLeaf.value);
  })();
  var stepWith = function(f) {
    return function(next2) {
      return function(done) {
        var go2 = function($copy_v) {
          var $tco_done = false;
          var $tco_result;
          function $tco_loop(v2) {
            if (v2 instanceof IterLeaf) {
              $tco_done = true;
              return done(unit);
            }
            ;
            if (v2 instanceof IterEmit) {
              $tco_done = true;
              return next2(v2.value0, v2.value1, v2.value2);
            }
            ;
            if (v2 instanceof IterNode) {
              $copy_v = f(v2.value1)(v2.value0);
              return;
            }
            ;
            throw new Error("Failed pattern match at Data.Map.Internal (line 940, column 8 - line 946, column 20): " + [v2.constructor.name]);
          }
          ;
          while (!$tco_done) {
            $tco_result = $tco_loop($copy_v);
          }
          ;
          return $tco_result;
        };
        return go2;
      };
    };
  };
  var singleton4 = function(k) {
    return function(v2) {
      return new Node(1, 1, k, v2, Leaf.value, Leaf.value);
    };
  };
  var unsafeBalancedNode = /* @__PURE__ */ (function() {
    var height14 = function(v2) {
      if (v2 instanceof Leaf) {
        return 0;
      }
      ;
      if (v2 instanceof Node) {
        return v2.value0;
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 757, column 12 - line 759, column 26): " + [v2.constructor.name]);
    };
    var rotateLeft = function(k, v2, l2, rk, rv, rl, rr) {
      if (rl instanceof Node && rl.value0 > height14(rr)) {
        return unsafeNode(rl.value2, rl.value3, unsafeNode(k, v2, l2, rl.value4), unsafeNode(rk, rv, rl.value5, rr));
      }
      ;
      return unsafeNode(rk, rv, unsafeNode(k, v2, l2, rl), rr);
    };
    var rotateRight = function(k, v2, lk, lv, ll, lr, r8) {
      if (lr instanceof Node && height14(ll) <= lr.value0) {
        return unsafeNode(lr.value2, lr.value3, unsafeNode(lk, lv, ll, lr.value4), unsafeNode(k, v2, lr.value5, r8));
      }
      ;
      return unsafeNode(lk, lv, ll, unsafeNode(k, v2, lr, r8));
    };
    return function(k, v2, l2, r8) {
      if (l2 instanceof Leaf) {
        if (r8 instanceof Leaf) {
          return singleton4(k)(v2);
        }
        ;
        if (r8 instanceof Node && r8.value0 > 1) {
          return rotateLeft(k, v2, l2, r8.value2, r8.value3, r8.value4, r8.value5);
        }
        ;
        return unsafeNode(k, v2, l2, r8);
      }
      ;
      if (l2 instanceof Node) {
        if (r8 instanceof Node) {
          if (r8.value0 > (l2.value0 + 1 | 0)) {
            return rotateLeft(k, v2, l2, r8.value2, r8.value3, r8.value4, r8.value5);
          }
          ;
          if (l2.value0 > (r8.value0 + 1 | 0)) {
            return rotateRight(k, v2, l2.value2, l2.value3, l2.value4, l2.value5, r8);
          }
          ;
        }
        ;
        if (r8 instanceof Leaf && l2.value0 > 1) {
          return rotateRight(k, v2, l2.value2, l2.value3, l2.value4, l2.value5, r8);
        }
        ;
        return unsafeNode(k, v2, l2, r8);
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 717, column 40 - line 738, column 34): " + [l2.constructor.name]);
    };
  })();
  var $lazy_unsafeSplit = /* @__PURE__ */ $runtime_lazy2("unsafeSplit", "Data.Map.Internal", function() {
    return function(comp, k, m2) {
      if (m2 instanceof Leaf) {
        return new Split(Nothing.value, Leaf.value, Leaf.value);
      }
      ;
      if (m2 instanceof Node) {
        var v2 = comp(k)(m2.value2);
        if (v2 instanceof LT) {
          var v1 = $lazy_unsafeSplit(793)(comp, k, m2.value4);
          return new Split(v1.value0, v1.value1, unsafeBalancedNode(m2.value2, m2.value3, v1.value2, m2.value5));
        }
        ;
        if (v2 instanceof GT) {
          var v1 = $lazy_unsafeSplit(796)(comp, k, m2.value5);
          return new Split(v1.value0, unsafeBalancedNode(m2.value2, m2.value3, m2.value4, v1.value1), v1.value2);
        }
        ;
        if (v2 instanceof EQ) {
          return new Split(new Just(m2.value3), m2.value4, m2.value5);
        }
        ;
        throw new Error("Failed pattern match at Data.Map.Internal (line 791, column 5 - line 799, column 30): " + [v2.constructor.name]);
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 787, column 34 - line 799, column 30): " + [m2.constructor.name]);
    };
  });
  var unsafeSplit = /* @__PURE__ */ $lazy_unsafeSplit(786);
  var $lazy_unsafeSplitLast = /* @__PURE__ */ $runtime_lazy2("unsafeSplitLast", "Data.Map.Internal", function() {
    return function(k, v2, l2, r8) {
      if (r8 instanceof Leaf) {
        return new SplitLast(k, v2, l2);
      }
      ;
      if (r8 instanceof Node) {
        var v1 = $lazy_unsafeSplitLast(779)(r8.value2, r8.value3, r8.value4, r8.value5);
        return new SplitLast(v1.value0, v1.value1, unsafeBalancedNode(k, v2, l2, v1.value2));
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 776, column 37 - line 780, column 57): " + [r8.constructor.name]);
    };
  });
  var unsafeSplitLast = /* @__PURE__ */ $lazy_unsafeSplitLast(775);
  var unsafeJoinNodes = function(v2, v1) {
    if (v2 instanceof Leaf) {
      return v1;
    }
    ;
    if (v2 instanceof Node) {
      var v22 = unsafeSplitLast(v2.value2, v2.value3, v2.value4, v2.value5);
      return unsafeBalancedNode(v22.value0, v22.value1, v22.value2, v1);
    }
    ;
    throw new Error("Failed pattern match at Data.Map.Internal (line 764, column 25 - line 768, column 38): " + [v2.constructor.name, v1.constructor.name]);
  };
  var $lazy_unsafeDifference = /* @__PURE__ */ $runtime_lazy2("unsafeDifference", "Data.Map.Internal", function() {
    return function(comp, l2, r8) {
      if (l2 instanceof Leaf) {
        return Leaf.value;
      }
      ;
      if (r8 instanceof Leaf) {
        return l2;
      }
      ;
      if (r8 instanceof Node) {
        var v2 = unsafeSplit(comp, r8.value2, l2);
        var l$prime = $lazy_unsafeDifference(841)(comp, v2.value1, r8.value4);
        var r$prime = $lazy_unsafeDifference(842)(comp, v2.value2, r8.value5);
        return unsafeJoinNodes(l$prime, r$prime);
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 836, column 39 - line 843, column 33): " + [l2.constructor.name, r8.constructor.name]);
    };
  });
  var unsafeDifference = /* @__PURE__ */ $lazy_unsafeDifference(835);
  var $lazy_unsafeIntersectionWith = /* @__PURE__ */ $runtime_lazy2("unsafeIntersectionWith", "Data.Map.Internal", function() {
    return function(comp, app, l2, r8) {
      if (l2 instanceof Leaf) {
        return Leaf.value;
      }
      ;
      if (r8 instanceof Leaf) {
        return Leaf.value;
      }
      ;
      if (r8 instanceof Node) {
        var v2 = unsafeSplit(comp, r8.value2, l2);
        var l$prime = $lazy_unsafeIntersectionWith(825)(comp, app, v2.value1, r8.value4);
        var r$prime = $lazy_unsafeIntersectionWith(826)(comp, app, v2.value2, r8.value5);
        if (v2.value0 instanceof Just) {
          return unsafeBalancedNode(r8.value2, app(v2.value0.value0)(r8.value3), l$prime, r$prime);
        }
        ;
        if (v2.value0 instanceof Nothing) {
          return unsafeJoinNodes(l$prime, r$prime);
        }
        ;
        throw new Error("Failed pattern match at Data.Map.Internal (line 827, column 5 - line 831, column 37): " + [v2.value0.constructor.name]);
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 820, column 49 - line 831, column 37): " + [l2.constructor.name, r8.constructor.name]);
    };
  });
  var unsafeIntersectionWith = /* @__PURE__ */ $lazy_unsafeIntersectionWith(819);
  var $lazy_unsafeUnionWith = /* @__PURE__ */ $runtime_lazy2("unsafeUnionWith", "Data.Map.Internal", function() {
    return function(comp, app, l2, r8) {
      if (l2 instanceof Leaf) {
        return r8;
      }
      ;
      if (r8 instanceof Leaf) {
        return l2;
      }
      ;
      if (r8 instanceof Node) {
        var v2 = unsafeSplit(comp, r8.value2, l2);
        var l$prime = $lazy_unsafeUnionWith(809)(comp, app, v2.value1, r8.value4);
        var r$prime = $lazy_unsafeUnionWith(810)(comp, app, v2.value2, r8.value5);
        if (v2.value0 instanceof Just) {
          return unsafeBalancedNode(r8.value2, app(v2.value0.value0)(r8.value3), l$prime, r$prime);
        }
        ;
        if (v2.value0 instanceof Nothing) {
          return unsafeBalancedNode(r8.value2, r8.value3, l$prime, r$prime);
        }
        ;
        throw new Error("Failed pattern match at Data.Map.Internal (line 811, column 5 - line 815, column 46): " + [v2.value0.constructor.name]);
      }
      ;
      throw new Error("Failed pattern match at Data.Map.Internal (line 804, column 42 - line 815, column 46): " + [l2.constructor.name, r8.constructor.name]);
    };
  });
  var unsafeUnionWith = /* @__PURE__ */ $lazy_unsafeUnionWith(803);
  var unionWith = function(dictOrd) {
    var compare8 = compare(dictOrd);
    return function(app) {
      return function(m1) {
        return function(m2) {
          return unsafeUnionWith(compare8, app, m1, m2);
        };
      };
    };
  };
  var union = function(dictOrd) {
    return unionWith(dictOrd)($$const);
  };
  var pop = function(dictOrd) {
    var compare8 = compare(dictOrd);
    return function(k) {
      return function(m2) {
        var v2 = unsafeSplit(compare8, k, m2);
        return map9(function(a3) {
          return new Tuple(a3, unsafeJoinNodes(v2.value1, v2.value2));
        })(v2.value0);
      };
    };
  };
  var member = function(dictOrd) {
    var compare8 = compare(dictOrd);
    return function(k) {
      var go2 = function($copy_v) {
        var $tco_done = false;
        var $tco_result;
        function $tco_loop(v2) {
          if (v2 instanceof Leaf) {
            $tco_done = true;
            return false;
          }
          ;
          if (v2 instanceof Node) {
            var v1 = compare8(k)(v2.value2);
            if (v1 instanceof LT) {
              $copy_v = v2.value4;
              return;
            }
            ;
            if (v1 instanceof GT) {
              $copy_v = v2.value5;
              return;
            }
            ;
            if (v1 instanceof EQ) {
              $tco_done = true;
              return true;
            }
            ;
            throw new Error("Failed pattern match at Data.Map.Internal (line 459, column 7 - line 462, column 19): " + [v1.constructor.name]);
          }
          ;
          throw new Error("Failed pattern match at Data.Map.Internal (line 456, column 8 - line 462, column 19): " + [v2.constructor.name]);
        }
        ;
        while (!$tco_done) {
          $tco_result = $tco_loop($copy_v);
        }
        ;
        return $tco_result;
      };
      return go2;
    };
  };
  var mapMaybeWithKey = function(dictOrd) {
    return function(f) {
      var go2 = function(v2) {
        if (v2 instanceof Leaf) {
          return Leaf.value;
        }
        ;
        if (v2 instanceof Node) {
          var v22 = f(v2.value2)(v2.value3);
          if (v22 instanceof Just) {
            return unsafeBalancedNode(v2.value2, v22.value0, go2(v2.value4), go2(v2.value5));
          }
          ;
          if (v22 instanceof Nothing) {
            return unsafeJoinNodes(go2(v2.value4), go2(v2.value5));
          }
          ;
          throw new Error("Failed pattern match at Data.Map.Internal (line 661, column 7 - line 665, column 47): " + [v22.constructor.name]);
        }
        ;
        throw new Error("Failed pattern match at Data.Map.Internal (line 658, column 8 - line 665, column 47): " + [v2.constructor.name]);
      };
      return go2;
    };
  };
  var lookup = function(dictOrd) {
    var compare8 = compare(dictOrd);
    return function(k) {
      var go2 = function($copy_v) {
        var $tco_done = false;
        var $tco_result;
        function $tco_loop(v2) {
          if (v2 instanceof Leaf) {
            $tco_done = true;
            return Nothing.value;
          }
          ;
          if (v2 instanceof Node) {
            var v1 = compare8(k)(v2.value2);
            if (v1 instanceof LT) {
              $copy_v = v2.value4;
              return;
            }
            ;
            if (v1 instanceof GT) {
              $copy_v = v2.value5;
              return;
            }
            ;
            if (v1 instanceof EQ) {
              $tco_done = true;
              return new Just(v2.value3);
            }
            ;
            throw new Error("Failed pattern match at Data.Map.Internal (line 283, column 7 - line 286, column 22): " + [v1.constructor.name]);
          }
          ;
          throw new Error("Failed pattern match at Data.Map.Internal (line 280, column 8 - line 286, column 22): " + [v2.constructor.name]);
        }
        ;
        while (!$tco_done) {
          $tco_result = $tco_loop($copy_v);
        }
        ;
        return $tco_result;
      };
      return go2;
    };
  };
  var iterMapL = /* @__PURE__ */ (function() {
    var go2 = function($copy_iter) {
      return function($copy_v) {
        var $tco_var_iter = $copy_iter;
        var $tco_done = false;
        var $tco_result;
        function $tco_loop(iter, v2) {
          if (v2 instanceof Leaf) {
            $tco_done = true;
            return iter;
          }
          ;
          if (v2 instanceof Node) {
            if (v2.value5 instanceof Leaf) {
              $tco_var_iter = new IterEmit(v2.value2, v2.value3, iter);
              $copy_v = v2.value4;
              return;
            }
            ;
            $tco_var_iter = new IterEmit(v2.value2, v2.value3, new IterNode(v2.value5, iter));
            $copy_v = v2.value4;
            return;
          }
          ;
          throw new Error("Failed pattern match at Data.Map.Internal (line 951, column 13 - line 958, column 48): " + [v2.constructor.name]);
        }
        ;
        while (!$tco_done) {
          $tco_result = $tco_loop($tco_var_iter, $copy_v);
        }
        ;
        return $tco_result;
      };
    };
    return go2;
  })();
  var stepAscCps = /* @__PURE__ */ stepWith(iterMapL);
  var stepUnfoldr = /* @__PURE__ */ (function() {
    var step5 = function(k, v2, next2) {
      return new Just(new Tuple(new Tuple(k, v2), next2));
    };
    return stepAscCps(step5)(function(v2) {
      return Nothing.value;
    });
  })();
  var toUnfoldable = function(dictUnfoldable) {
    var $784 = unfoldr(dictUnfoldable)(stepUnfoldr);
    return function($785) {
      return $784(toMapIter($785));
    };
  };
  var isEmpty = function(v2) {
    if (v2 instanceof Leaf) {
      return true;
    }
    ;
    return false;
  };
  var intersectionWith = function(dictOrd) {
    var compare8 = compare(dictOrd);
    return function(app) {
      return function(m1) {
        return function(m2) {
          return unsafeIntersectionWith(compare8, app, m1, m2);
        };
      };
    };
  };
  var intersection = function(dictOrd) {
    return intersectionWith(dictOrd)($$const);
  };
  var insert = function(dictOrd) {
    var compare8 = compare(dictOrd);
    return function(k) {
      return function(v2) {
        var go2 = function(v1) {
          if (v1 instanceof Leaf) {
            return singleton4(k)(v2);
          }
          ;
          if (v1 instanceof Node) {
            var v22 = compare8(k)(v1.value2);
            if (v22 instanceof LT) {
              return unsafeBalancedNode(v1.value2, v1.value3, go2(v1.value4), v1.value5);
            }
            ;
            if (v22 instanceof GT) {
              return unsafeBalancedNode(v1.value2, v1.value3, v1.value4, go2(v1.value5));
            }
            ;
            if (v22 instanceof EQ) {
              return new Node(v1.value0, v1.value1, k, v2, v1.value4, v1.value5);
            }
            ;
            throw new Error("Failed pattern match at Data.Map.Internal (line 471, column 7 - line 474, column 35): " + [v22.constructor.name]);
          }
          ;
          throw new Error("Failed pattern match at Data.Map.Internal (line 468, column 8 - line 474, column 35): " + [v1.constructor.name]);
        };
        return go2;
      };
    };
  };
  var functorMap = {
    map: function(f) {
      var go2 = function(v2) {
        if (v2 instanceof Leaf) {
          return Leaf.value;
        }
        ;
        if (v2 instanceof Node) {
          return new Node(v2.value0, v2.value1, v2.value2, f(v2.value3), go2(v2.value4), go2(v2.value5));
        }
        ;
        throw new Error("Failed pattern match at Data.Map.Internal (line 147, column 10 - line 150, column 39): " + [v2.constructor.name]);
      };
      return go2;
    }
  };
  var foldableMap = {
    foldr: function(f) {
      return function(z2) {
        var $lazy_go = $runtime_lazy2("go", "Data.Map.Internal", function() {
          return function(m$prime, z$prime) {
            if (m$prime instanceof Leaf) {
              return z$prime;
            }
            ;
            if (m$prime instanceof Node) {
              return $lazy_go(172)(m$prime.value4, f(m$prime.value3)($lazy_go(172)(m$prime.value5, z$prime)));
            }
            ;
            throw new Error("Failed pattern match at Data.Map.Internal (line 169, column 26 - line 172, column 43): " + [m$prime.constructor.name]);
          };
        });
        var go2 = $lazy_go(169);
        return function(m2) {
          return go2(m2, z2);
        };
      };
    },
    foldl: function(f) {
      return function(z2) {
        var $lazy_go = $runtime_lazy2("go", "Data.Map.Internal", function() {
          return function(z$prime, m$prime) {
            if (m$prime instanceof Leaf) {
              return z$prime;
            }
            ;
            if (m$prime instanceof Node) {
              return $lazy_go(178)(f($lazy_go(178)(z$prime, m$prime.value4))(m$prime.value3), m$prime.value5);
            }
            ;
            throw new Error("Failed pattern match at Data.Map.Internal (line 175, column 26 - line 178, column 43): " + [m$prime.constructor.name]);
          };
        });
        var go2 = $lazy_go(175);
        return function(m2) {
          return go2(z2, m2);
        };
      };
    },
    foldMap: function(dictMonoid) {
      var mempty2 = mempty(dictMonoid);
      var append112 = append(dictMonoid.Semigroup0());
      return function(f) {
        var go2 = function(v2) {
          if (v2 instanceof Leaf) {
            return mempty2;
          }
          ;
          if (v2 instanceof Node) {
            return append112(go2(v2.value4))(append112(f(v2.value3))(go2(v2.value5)));
          }
          ;
          throw new Error("Failed pattern match at Data.Map.Internal (line 181, column 10 - line 184, column 28): " + [v2.constructor.name]);
        };
        return go2;
      };
    }
  };
  var foldableWithIndexMap = {
    foldrWithIndex: function(f) {
      return function(z2) {
        var $lazy_go = $runtime_lazy2("go", "Data.Map.Internal", function() {
          return function(m$prime, z$prime) {
            if (m$prime instanceof Leaf) {
              return z$prime;
            }
            ;
            if (m$prime instanceof Node) {
              return $lazy_go(192)(m$prime.value4, f(m$prime.value2)(m$prime.value3)($lazy_go(192)(m$prime.value5, z$prime)));
            }
            ;
            throw new Error("Failed pattern match at Data.Map.Internal (line 189, column 26 - line 192, column 45): " + [m$prime.constructor.name]);
          };
        });
        var go2 = $lazy_go(189);
        return function(m2) {
          return go2(m2, z2);
        };
      };
    },
    foldlWithIndex: function(f) {
      return function(z2) {
        var $lazy_go = $runtime_lazy2("go", "Data.Map.Internal", function() {
          return function(z$prime, m$prime) {
            if (m$prime instanceof Leaf) {
              return z$prime;
            }
            ;
            if (m$prime instanceof Node) {
              return $lazy_go(198)(f(m$prime.value2)($lazy_go(198)(z$prime, m$prime.value4))(m$prime.value3), m$prime.value5);
            }
            ;
            throw new Error("Failed pattern match at Data.Map.Internal (line 195, column 26 - line 198, column 45): " + [m$prime.constructor.name]);
          };
        });
        var go2 = $lazy_go(195);
        return function(m2) {
          return go2(z2, m2);
        };
      };
    },
    foldMapWithIndex: function(dictMonoid) {
      var mempty2 = mempty(dictMonoid);
      var append112 = append(dictMonoid.Semigroup0());
      return function(f) {
        var go2 = function(v2) {
          if (v2 instanceof Leaf) {
            return mempty2;
          }
          ;
          if (v2 instanceof Node) {
            return append112(go2(v2.value4))(append112(f(v2.value2)(v2.value3))(go2(v2.value5)));
          }
          ;
          throw new Error("Failed pattern match at Data.Map.Internal (line 201, column 10 - line 204, column 30): " + [v2.constructor.name]);
        };
        return go2;
      };
    },
    Foldable0: function() {
      return foldableMap;
    }
  };
  var keys = /* @__PURE__ */ (function() {
    return foldrWithIndex(foldableWithIndexMap)(function(k) {
      return function(v2) {
        return function(acc) {
          return new Cons(k, acc);
        };
      };
    })(Nil.value);
  })();
  var values = /* @__PURE__ */ (function() {
    return foldr(foldableMap)(Cons.create)(Nil.value);
  })();
  var filterWithKey = function(dictOrd) {
    return function(f) {
      var go2 = function(v2) {
        if (v2 instanceof Leaf) {
          return Leaf.value;
        }
        ;
        if (v2 instanceof Node) {
          if (f(v2.value2)(v2.value3)) {
            return unsafeBalancedNode(v2.value2, v2.value3, go2(v2.value4), go2(v2.value5));
          }
          ;
          if (otherwise) {
            return unsafeJoinNodes(go2(v2.value4), go2(v2.value5));
          }
          ;
        }
        ;
        throw new Error("Failed pattern match at Data.Map.Internal (line 627, column 8 - line 633, column 47): " + [v2.constructor.name]);
      };
      return go2;
    };
  };
  var filter2 = function(dictOrd) {
    var $786 = filterWithKey(dictOrd);
    return function($787) {
      return $786($$const($787));
    };
  };
  var empty2 = /* @__PURE__ */ (function() {
    return Leaf.value;
  })();
  var fromFoldable2 = function(dictOrd) {
    var insert15 = insert(dictOrd);
    return function(dictFoldable) {
      return foldl(dictFoldable)(function(m2) {
        return function(v2) {
          return insert15(v2.value0)(v2.value1)(m2);
        };
      })(empty2);
    };
  };
  var difference = function(dictOrd) {
    var compare8 = compare(dictOrd);
    return function(m1) {
      return function(m2) {
        return unsafeDifference(compare8, m1, m2);
      };
    };
  };
  var $$delete = function(dictOrd) {
    var compare8 = compare(dictOrd);
    return function(k) {
      var go2 = function(v2) {
        if (v2 instanceof Leaf) {
          return Leaf.value;
        }
        ;
        if (v2 instanceof Node) {
          var v1 = compare8(k)(v2.value2);
          if (v1 instanceof LT) {
            return unsafeBalancedNode(v2.value2, v2.value3, go2(v2.value4), v2.value5);
          }
          ;
          if (v1 instanceof GT) {
            return unsafeBalancedNode(v2.value2, v2.value3, v2.value4, go2(v2.value5));
          }
          ;
          if (v1 instanceof EQ) {
            return unsafeJoinNodes(v2.value4, v2.value5);
          }
          ;
          throw new Error("Failed pattern match at Data.Map.Internal (line 498, column 7 - line 501, column 43): " + [v1.constructor.name]);
        }
        ;
        throw new Error("Failed pattern match at Data.Map.Internal (line 495, column 8 - line 501, column 43): " + [v2.constructor.name]);
      };
      return go2;
    };
  };
  var alter = function(dictOrd) {
    var compare8 = compare(dictOrd);
    return function(f) {
      return function(k) {
        return function(m2) {
          var v2 = unsafeSplit(compare8, k, m2);
          var v22 = f(v2.value0);
          if (v22 instanceof Nothing) {
            return unsafeJoinNodes(v2.value1, v2.value2);
          }
          ;
          if (v22 instanceof Just) {
            return unsafeBalancedNode(k, v22.value0, v2.value1, v2.value2);
          }
          ;
          throw new Error("Failed pattern match at Data.Map.Internal (line 514, column 3 - line 518, column 41): " + [v22.constructor.name]);
        };
      };
    };
  };

  // output/Data.List/index.js
  var map10 = /* @__PURE__ */ map(functorMaybe);
  var foldl5 = /* @__PURE__ */ foldl(foldableList);
  var uncons2 = function(v2) {
    if (v2 instanceof Nil) {
      return Nothing.value;
    }
    ;
    if (v2 instanceof Cons) {
      return new Just({
        head: v2.value0,
        tail: v2.value1
      });
    }
    ;
    throw new Error("Failed pattern match at Data.List (line 259, column 1 - line 259, column 66): " + [v2.constructor.name]);
  };
  var toUnfoldable2 = function(dictUnfoldable) {
    return unfoldr(dictUnfoldable)(function(xs) {
      return map10(function(rec) {
        return new Tuple(rec.head, rec.tail);
      })(uncons2(xs));
    });
  };
  var singleton5 = function(a3) {
    return new Cons(a3, Nil.value);
  };
  var reverse2 = /* @__PURE__ */ (function() {
    var go2 = function($copy_v) {
      return function($copy_v1) {
        var $tco_var_v = $copy_v;
        var $tco_done = false;
        var $tco_result;
        function $tco_loop(v2, v1) {
          if (v1 instanceof Nil) {
            $tco_done = true;
            return v2;
          }
          ;
          if (v1 instanceof Cons) {
            $tco_var_v = new Cons(v1.value0, v2);
            $copy_v1 = v1.value1;
            return;
          }
          ;
          throw new Error("Failed pattern match at Data.List (line 368, column 3 - line 368, column 19): " + [v2.constructor.name, v1.constructor.name]);
        }
        ;
        while (!$tco_done) {
          $tco_result = $tco_loop($tco_var_v, $copy_v1);
        }
        ;
        return $tco_result;
      };
    };
    return go2(Nil.value);
  })();
  var unsnoc = function(lst) {
    var go2 = function($copy_v) {
      return function($copy_v1) {
        var $tco_var_v = $copy_v;
        var $tco_done = false;
        var $tco_result;
        function $tco_loop(v2, v1) {
          if (v2 instanceof Nil) {
            $tco_done = true;
            return Nothing.value;
          }
          ;
          if (v2 instanceof Cons && v2.value1 instanceof Nil) {
            $tco_done = true;
            return new Just({
              revInit: v1,
              last: v2.value0
            });
          }
          ;
          if (v2 instanceof Cons) {
            $tco_var_v = v2.value1;
            $copy_v1 = new Cons(v2.value0, v1);
            return;
          }
          ;
          throw new Error("Failed pattern match at Data.List (line 270, column 3 - line 270, column 21): " + [v2.constructor.name, v1.constructor.name]);
        }
        ;
        while (!$tco_done) {
          $tco_result = $tco_loop($tco_var_v, $copy_v1);
        }
        ;
        return $tco_result;
      };
    };
    return map10(function(h7) {
      return {
        init: reverse2(h7.revInit),
        last: h7.last
      };
    })(go2(lst)(Nil.value));
  };
  var zipWith2 = function(f) {
    return function(xs) {
      return function(ys) {
        var go2 = function($copy_v) {
          return function($copy_v1) {
            return function($copy_v2) {
              var $tco_var_v = $copy_v;
              var $tco_var_v1 = $copy_v1;
              var $tco_done = false;
              var $tco_result;
              function $tco_loop(v2, v1, v22) {
                if (v2 instanceof Nil) {
                  $tco_done = true;
                  return v22;
                }
                ;
                if (v1 instanceof Nil) {
                  $tco_done = true;
                  return v22;
                }
                ;
                if (v2 instanceof Cons && v1 instanceof Cons) {
                  $tco_var_v = v2.value1;
                  $tco_var_v1 = v1.value1;
                  $copy_v2 = new Cons(f(v2.value0)(v1.value0), v22);
                  return;
                }
                ;
                throw new Error("Failed pattern match at Data.List (line 779, column 3 - line 779, column 21): " + [v2.constructor.name, v1.constructor.name, v22.constructor.name]);
              }
              ;
              while (!$tco_done) {
                $tco_result = $tco_loop($tco_var_v, $tco_var_v1, $copy_v2);
              }
              ;
              return $tco_result;
            };
          };
        };
        return reverse2(go2(xs)(ys)(Nil.value));
      };
    };
  };
  var $$null2 = function(v2) {
    if (v2 instanceof Nil) {
      return true;
    }
    ;
    return false;
  };
  var length2 = /* @__PURE__ */ foldl5(function(acc) {
    return function(v2) {
      return acc + 1 | 0;
    };
  })(0);
  var fromFoldable3 = function(dictFoldable) {
    return foldr(dictFoldable)(Cons.create)(Nil.value);
  };

  // output/Data.Set/index.js
  var coerce3 = /* @__PURE__ */ coerce();
  var foldMap2 = /* @__PURE__ */ foldMap(foldableList);
  var foldl6 = /* @__PURE__ */ foldl(foldableList);
  var foldr3 = /* @__PURE__ */ foldr(foldableList);
  var $$Set = function(x7) {
    return x7;
  };
  var toList2 = function(v2) {
    return keys(v2);
  };
  var toUnfoldable3 = function(dictUnfoldable) {
    var $96 = toUnfoldable2(dictUnfoldable);
    return function($97) {
      return $96(toList2($97));
    };
  };
  var member2 = function(dictOrd) {
    return coerce3(member(dictOrd));
  };
  var intersection2 = function(dictOrd) {
    return coerce3(intersection(dictOrd));
  };
  var insert2 = function(dictOrd) {
    var insert15 = insert(dictOrd);
    return function(a3) {
      return function(v2) {
        return insert15(a3)(unit)(v2);
      };
    };
  };
  var fromMap = $$Set;
  var foldableSet = {
    foldMap: function(dictMonoid) {
      var foldMap12 = foldMap2(dictMonoid);
      return function(f) {
        var $98 = foldMap12(f);
        return function($99) {
          return $98(toList2($99));
        };
      };
    },
    foldl: function(f) {
      return function(x7) {
        var $100 = foldl6(f)(x7);
        return function($101) {
          return $100(toList2($101));
        };
      };
    },
    foldr: function(f) {
      return function(x7) {
        var $102 = foldr3(f)(x7);
        return function($103) {
          return $102(toList2($103));
        };
      };
    }
  };
  var empty3 = empty2;
  var fromFoldable4 = function(dictFoldable) {
    var foldl22 = foldl(dictFoldable);
    return function(dictOrd) {
      var insert15 = insert2(dictOrd);
      return foldl22(function(m2) {
        return function(a3) {
          return insert15(a3)(m2);
        };
      })(empty3);
    };
  };
  var difference2 = function(dictOrd) {
    return coerce3(difference(dictOrd));
  };
  var $$delete2 = function(dictOrd) {
    return coerce3($$delete(dictOrd));
  };

  // output/Hylograph.Internal.Selection.Types/index.js
  var EmptySelection = /* @__PURE__ */ (function() {
    function EmptySelection2(value0) {
      this.value0 = value0;
    }
    ;
    EmptySelection2.create = function(value0) {
      return new EmptySelection2(value0);
    };
    return EmptySelection2;
  })();
  var BoundSelection = /* @__PURE__ */ (function() {
    function BoundSelection2(value0) {
      this.value0 = value0;
    }
    ;
    BoundSelection2.create = function(value0) {
      return new BoundSelection2(value0);
    };
    return BoundSelection2;
  })();
  var PendingSelection = /* @__PURE__ */ (function() {
    function PendingSelection2(value0) {
      this.value0 = value0;
    }
    ;
    PendingSelection2.create = function(value0) {
      return new PendingSelection2(value0);
    };
    return PendingSelection2;
  })();
  var ExitingSelection = /* @__PURE__ */ (function() {
    function ExitingSelection2(value0) {
      this.value0 = value0;
    }
    ;
    ExitingSelection2.create = function(value0) {
      return new ExitingSelection2(value0);
    };
    return ExitingSelection2;
  })();
  var SVGContext = /* @__PURE__ */ (function() {
    function SVGContext2() {
    }
    ;
    SVGContext2.value = new SVGContext2();
    return SVGContext2;
  })();
  var HTMLContext = /* @__PURE__ */ (function() {
    function HTMLContext2() {
    }
    ;
    HTMLContext2.value = new HTMLContext2();
    return HTMLContext2;
  })();
  var JoinResult = /* @__PURE__ */ (function() {
    function JoinResult2(value0) {
      this.value0 = value0;
    }
    ;
    JoinResult2.create = function(value0) {
      return new JoinResult2(value0);
    };
    return JoinResult2;
  })();
  var Circle = /* @__PURE__ */ (function() {
    function Circle3() {
    }
    ;
    Circle3.value = new Circle3();
    return Circle3;
  })();
  var Rect = /* @__PURE__ */ (function() {
    function Rect2() {
    }
    ;
    Rect2.value = new Rect2();
    return Rect2;
  })();
  var Path = /* @__PURE__ */ (function() {
    function Path4() {
    }
    ;
    Path4.value = new Path4();
    return Path4;
  })();
  var Line = /* @__PURE__ */ (function() {
    function Line2() {
    }
    ;
    Line2.value = new Line2();
    return Line2;
  })();
  var Polygon = /* @__PURE__ */ (function() {
    function Polygon2() {
    }
    ;
    Polygon2.value = new Polygon2();
    return Polygon2;
  })();
  var Text = /* @__PURE__ */ (function() {
    function Text3() {
    }
    ;
    Text3.value = new Text3();
    return Text3;
  })();
  var Group = /* @__PURE__ */ (function() {
    function Group2() {
    }
    ;
    Group2.value = new Group2();
    return Group2;
  })();
  var SVG = /* @__PURE__ */ (function() {
    function SVG2() {
    }
    ;
    SVG2.value = new SVG2();
    return SVG2;
  })();
  var Defs = /* @__PURE__ */ (function() {
    function Defs2() {
    }
    ;
    Defs2.value = new Defs2();
    return Defs2;
  })();
  var LinearGradient = /* @__PURE__ */ (function() {
    function LinearGradient2() {
    }
    ;
    LinearGradient2.value = new LinearGradient2();
    return LinearGradient2;
  })();
  var Stop = /* @__PURE__ */ (function() {
    function Stop2() {
    }
    ;
    Stop2.value = new Stop2();
    return Stop2;
  })();
  var PatternFill = /* @__PURE__ */ (function() {
    function PatternFill2() {
    }
    ;
    PatternFill2.value = new PatternFill2();
    return PatternFill2;
  })();
  var Div = /* @__PURE__ */ (function() {
    function Div2() {
    }
    ;
    Div2.value = new Div2();
    return Div2;
  })();
  var Span = /* @__PURE__ */ (function() {
    function Span2() {
    }
    ;
    Span2.value = new Span2();
    return Span2;
  })();
  var Table = /* @__PURE__ */ (function() {
    function Table2() {
    }
    ;
    Table2.value = new Table2();
    return Table2;
  })();
  var Tr = /* @__PURE__ */ (function() {
    function Tr2() {
    }
    ;
    Tr2.value = new Tr2();
    return Tr2;
  })();
  var Td = /* @__PURE__ */ (function() {
    function Td2() {
    }
    ;
    Td2.value = new Td2();
    return Td2;
  })();
  var Th = /* @__PURE__ */ (function() {
    function Th2() {
    }
    ;
    Th2.value = new Th2();
    return Th2;
  })();
  var Tbody = /* @__PURE__ */ (function() {
    function Tbody2() {
    }
    ;
    Tbody2.value = new Tbody2();
    return Tbody2;
  })();
  var Thead = /* @__PURE__ */ (function() {
    function Thead2() {
    }
    ;
    Thead2.value = new Thead2();
    return Thead2;
  })();
  var elementContext = function(v2) {
    if (v2 instanceof Circle) {
      return SVGContext.value;
    }
    ;
    if (v2 instanceof Rect) {
      return SVGContext.value;
    }
    ;
    if (v2 instanceof Path) {
      return SVGContext.value;
    }
    ;
    if (v2 instanceof Line) {
      return SVGContext.value;
    }
    ;
    if (v2 instanceof Polygon) {
      return SVGContext.value;
    }
    ;
    if (v2 instanceof Text) {
      return SVGContext.value;
    }
    ;
    if (v2 instanceof Group) {
      return SVGContext.value;
    }
    ;
    if (v2 instanceof SVG) {
      return SVGContext.value;
    }
    ;
    if (v2 instanceof Defs) {
      return SVGContext.value;
    }
    ;
    if (v2 instanceof LinearGradient) {
      return SVGContext.value;
    }
    ;
    if (v2 instanceof Stop) {
      return SVGContext.value;
    }
    ;
    if (v2 instanceof PatternFill) {
      return SVGContext.value;
    }
    ;
    if (v2 instanceof Div) {
      return HTMLContext.value;
    }
    ;
    if (v2 instanceof Span) {
      return HTMLContext.value;
    }
    ;
    if (v2 instanceof Table) {
      return HTMLContext.value;
    }
    ;
    if (v2 instanceof Tr) {
      return HTMLContext.value;
    }
    ;
    if (v2 instanceof Td) {
      return HTMLContext.value;
    }
    ;
    if (v2 instanceof Th) {
      return HTMLContext.value;
    }
    ;
    if (v2 instanceof Tbody) {
      return HTMLContext.value;
    }
    ;
    if (v2 instanceof Thead) {
      return HTMLContext.value;
    }
    ;
    throw new Error("Failed pattern match at Hylograph.Internal.Selection.Types (line 218, column 1 - line 218, column 47): " + [v2.constructor.name]);
  };

  // output/Hylograph.AST/index.js
  var append4 = /* @__PURE__ */ append(semigroupArray);
  var Node2 = /* @__PURE__ */ (function() {
    function Node3(value0) {
      this.value0 = value0;
    }
    ;
    Node3.create = function(value0) {
      return new Node3(value0);
    };
    return Node3;
  })();
  var Join = /* @__PURE__ */ (function() {
    function Join3(value0) {
      this.value0 = value0;
    }
    ;
    Join3.create = function(value0) {
      return new Join3(value0);
    };
    return Join3;
  })();
  var NestedJoin = /* @__PURE__ */ (function() {
    function NestedJoin2(value0) {
      this.value0 = value0;
    }
    ;
    NestedJoin2.create = function(value0) {
      return new NestedJoin2(value0);
    };
    return NestedJoin2;
  })();
  var UpdateJoin = /* @__PURE__ */ (function() {
    function UpdateJoin2(value0) {
      this.value0 = value0;
    }
    ;
    UpdateJoin2.create = function(value0) {
      return new UpdateJoin2(value0);
    };
    return UpdateJoin2;
  })();
  var UpdateNestedJoin = /* @__PURE__ */ (function() {
    function UpdateNestedJoin2(value0) {
      this.value0 = value0;
    }
    ;
    UpdateNestedJoin2.create = function(value0) {
      return new UpdateNestedJoin2(value0);
    };
    return UpdateNestedJoin2;
  })();
  var ConditionalRender = /* @__PURE__ */ (function() {
    function ConditionalRender2(value0) {
      this.value0 = value0;
    }
    ;
    ConditionalRender2.create = function(value0) {
      return new ConditionalRender2(value0);
    };
    return ConditionalRender2;
  })();
  var LocalCoordSpace = /* @__PURE__ */ (function() {
    function LocalCoordSpace2(value0) {
      this.value0 = value0;
    }
    ;
    LocalCoordSpace2.create = function(value0) {
      return new LocalCoordSpace2(value0);
    };
    return LocalCoordSpace2;
  })();
  var withChildren = function(parent2) {
    return function(newChildren) {
      if (parent2 instanceof Node2) {
        return new Node2({
          name: parent2.value0.name,
          elemType: parent2.value0.elemType,
          attrs: parent2.value0.attrs,
          behaviors: parent2.value0.behaviors,
          children: append4(parent2.value0.children)(newChildren)
        });
      }
      ;
      if (parent2 instanceof Join) {
        return new Join(parent2.value0);
      }
      ;
      if (parent2 instanceof NestedJoin) {
        return new NestedJoin(parent2.value0);
      }
      ;
      if (parent2 instanceof UpdateJoin) {
        return new UpdateJoin(parent2.value0);
      }
      ;
      if (parent2 instanceof UpdateNestedJoin) {
        return new UpdateNestedJoin(parent2.value0);
      }
      ;
      if (parent2 instanceof ConditionalRender) {
        return new ConditionalRender(parent2.value0);
      }
      ;
      if (parent2 instanceof LocalCoordSpace) {
        return new LocalCoordSpace(parent2.value0);
      }
      ;
      throw new Error("Failed pattern match at Hylograph.AST (line 299, column 35 - line 306, column 45): " + [parent2.constructor.name]);
    };
  };
  var named = function(elemType) {
    return function(name16) {
      return function(attrs) {
        return new Node2({
          name: new Just(name16),
          elemType,
          attrs,
          behaviors: [],
          children: []
        });
      };
    };
  };
  var joinData = function(name16) {
    return function(key) {
      return function(data$prime) {
        return function(templateBuilder) {
          return new Join({
            name: name16,
            key,
            joinData: data$prime,
            template: templateBuilder
          });
        };
      };
    };
  };
  var elem3 = function(elemType) {
    return function(attrs) {
      return new Node2({
        name: Nothing.value,
        elemType,
        attrs,
        behaviors: [],
        children: []
      });
    };
  };

  // output/Data.Array.NonEmpty/index.js
  var fromJust5 = /* @__PURE__ */ fromJust();
  var toArray = function(v2) {
    return v2;
  };
  var adaptMaybe = function(f) {
    return function($126) {
      return fromJust5(f(toArray($126)));
    };
  };
  var head2 = /* @__PURE__ */ adaptMaybe(head);

  // output/Data.String.CodePoints/foreign.js
  var hasArrayFrom = typeof Array.from === "function";
  var hasStringIterator = typeof Symbol !== "undefined" && Symbol != null && typeof Symbol.iterator !== "undefined" && typeof String.prototype[Symbol.iterator] === "function";
  var hasFromCodePoint = typeof String.prototype.fromCodePoint === "function";
  var hasCodePointAt = typeof String.prototype.codePointAt === "function";
  var _unsafeCodePointAt0 = function(fallback) {
    return hasCodePointAt ? function(str6) {
      return str6.codePointAt(0);
    } : fallback;
  };
  var _singleton = function(fallback) {
    return hasFromCodePoint ? String.fromCodePoint : fallback;
  };
  var _take = function(fallback) {
    return function(n) {
      if (hasStringIterator) {
        return function(str6) {
          var accum = "";
          var iter = str6[Symbol.iterator]();
          for (var i2 = 0; i2 < n; ++i2) {
            var o = iter.next();
            if (o.done) return accum;
            accum += o.value;
          }
          return accum;
        };
      }
      return fallback(n);
    };
  };
  var _toCodePointArray = function(fallback) {
    return function(unsafeCodePointAt02) {
      if (hasArrayFrom) {
        return function(str6) {
          return Array.from(str6, unsafeCodePointAt02);
        };
      }
      return fallback;
    };
  };

  // output/Data.Enum/foreign.js
  function toCharCode(c2) {
    return c2.charCodeAt(0);
  }
  function fromCharCode(c2) {
    return String.fromCharCode(c2);
  }

  // output/Control.Alternative/index.js
  var guard = function(dictAlternative) {
    var pure60 = pure(dictAlternative.Applicative0());
    var empty8 = empty(dictAlternative.Plus1());
    return function(v2) {
      if (v2) {
        return pure60(unit);
      }
      ;
      if (!v2) {
        return empty8;
      }
      ;
      throw new Error("Failed pattern match at Control.Alternative (line 48, column 1 - line 48, column 54): " + [v2.constructor.name]);
    };
  };

  // output/Data.Enum/index.js
  var bottom1 = /* @__PURE__ */ bottom(boundedChar);
  var top1 = /* @__PURE__ */ top(boundedChar);
  var toEnum = function(dict) {
    return dict.toEnum;
  };
  var fromEnum = function(dict) {
    return dict.fromEnum;
  };
  var toEnumWithDefaults = function(dictBoundedEnum) {
    var toEnum1 = toEnum(dictBoundedEnum);
    var fromEnum1 = fromEnum(dictBoundedEnum);
    var bottom22 = bottom(dictBoundedEnum.Bounded0());
    return function(low2) {
      return function(high2) {
        return function(x7) {
          var v2 = toEnum1(x7);
          if (v2 instanceof Just) {
            return v2.value0;
          }
          ;
          if (v2 instanceof Nothing) {
            var $140 = x7 < fromEnum1(bottom22);
            if ($140) {
              return low2;
            }
            ;
            return high2;
          }
          ;
          throw new Error("Failed pattern match at Data.Enum (line 158, column 33 - line 160, column 62): " + [v2.constructor.name]);
        };
      };
    };
  };
  var defaultSucc = function(toEnum$prime) {
    return function(fromEnum$prime) {
      return function(a3) {
        return toEnum$prime(fromEnum$prime(a3) + 1 | 0);
      };
    };
  };
  var defaultPred = function(toEnum$prime) {
    return function(fromEnum$prime) {
      return function(a3) {
        return toEnum$prime(fromEnum$prime(a3) - 1 | 0);
      };
    };
  };
  var charToEnum = function(v2) {
    if (v2 >= toCharCode(bottom1) && v2 <= toCharCode(top1)) {
      return new Just(fromCharCode(v2));
    }
    ;
    return Nothing.value;
  };
  var enumChar = {
    succ: /* @__PURE__ */ defaultSucc(charToEnum)(toCharCode),
    pred: /* @__PURE__ */ defaultPred(charToEnum)(toCharCode),
    Ord0: function() {
      return ordChar;
    }
  };
  var boundedEnumChar = /* @__PURE__ */ (function() {
    return {
      cardinality: toCharCode(top1) - toCharCode(bottom1) | 0,
      toEnum: charToEnum,
      fromEnum: toCharCode,
      Bounded0: function() {
        return boundedChar;
      },
      Enum1: function() {
        return enumChar;
      }
    };
  })();

  // output/Data.String.CodeUnits/foreign.js
  var fromCharArray = function(a3) {
    return a3.join("");
  };
  var toCharArray = function(s2) {
    return s2.split("");
  };
  var singleton6 = function(c2) {
    return c2;
  };
  var length3 = function(s2) {
    return s2.length;
  };
  var _indexOf = function(just) {
    return function(nothing) {
      return function(x7) {
        return function(s2) {
          var i2 = s2.indexOf(x7);
          return i2 === -1 ? nothing : just(i2);
        };
      };
    };
  };
  var take2 = function(n) {
    return function(s2) {
      return s2.substr(0, n);
    };
  };
  var drop2 = function(n) {
    return function(s2) {
      return s2.substring(n);
    };
  };
  var splitAt2 = function(i2) {
    return function(s2) {
      return { before: s2.substring(0, i2), after: s2.substring(i2) };
    };
  };

  // output/Data.String.Unsafe/foreign.js
  var charAt = function(i2) {
    return function(s2) {
      if (i2 >= 0 && i2 < s2.length) return s2.charAt(i2);
      throw new Error("Data.String.Unsafe.charAt: Invalid index.");
    };
  };

  // output/Data.String.CodeUnits/index.js
  var stripPrefix = function(v2) {
    return function(str6) {
      var v1 = splitAt2(length3(v2))(str6);
      var $20 = v1.before === v2;
      if ($20) {
        return new Just(v1.after);
      }
      ;
      return Nothing.value;
    };
  };
  var indexOf = /* @__PURE__ */ (function() {
    return _indexOf(Just.create)(Nothing.value);
  })();

  // output/Data.String.Common/foreign.js
  var split = function(sep) {
    return function(s2) {
      return s2.split(sep);
    };
  };
  var toUpper = function(s2) {
    return s2.toUpperCase();
  };
  var trim = function(s2) {
    return s2.trim();
  };
  var joinWith = function(s2) {
    return function(xs) {
      return xs.join(s2);
    };
  };

  // output/Data.String.CodePoints/index.js
  var fromEnum2 = /* @__PURE__ */ fromEnum(boundedEnumChar);
  var map11 = /* @__PURE__ */ map(functorMaybe);
  var unfoldr2 = /* @__PURE__ */ unfoldr(unfoldableArray);
  var div2 = /* @__PURE__ */ div(euclideanRingInt);
  var mod2 = /* @__PURE__ */ mod(euclideanRingInt);
  var unsurrogate = function(lead) {
    return function(trail) {
      return (((lead - 55296 | 0) * 1024 | 0) + (trail - 56320 | 0) | 0) + 65536 | 0;
    };
  };
  var isTrail = function(cu) {
    return 56320 <= cu && cu <= 57343;
  };
  var isLead = function(cu) {
    return 55296 <= cu && cu <= 56319;
  };
  var uncons3 = function(s2) {
    var v2 = length3(s2);
    if (v2 === 0) {
      return Nothing.value;
    }
    ;
    if (v2 === 1) {
      return new Just({
        head: fromEnum2(charAt(0)(s2)),
        tail: ""
      });
    }
    ;
    var cu1 = fromEnum2(charAt(1)(s2));
    var cu0 = fromEnum2(charAt(0)(s2));
    var $43 = isLead(cu0) && isTrail(cu1);
    if ($43) {
      return new Just({
        head: unsurrogate(cu0)(cu1),
        tail: drop2(2)(s2)
      });
    }
    ;
    return new Just({
      head: cu0,
      tail: drop2(1)(s2)
    });
  };
  var unconsButWithTuple = function(s2) {
    return map11(function(v2) {
      return new Tuple(v2.head, v2.tail);
    })(uncons3(s2));
  };
  var toCodePointArrayFallback = function(s2) {
    return unfoldr2(unconsButWithTuple)(s2);
  };
  var unsafeCodePointAt0Fallback = function(s2) {
    var cu0 = fromEnum2(charAt(0)(s2));
    var $47 = isLead(cu0) && length3(s2) > 1;
    if ($47) {
      var cu1 = fromEnum2(charAt(1)(s2));
      var $48 = isTrail(cu1);
      if ($48) {
        return unsurrogate(cu0)(cu1);
      }
      ;
      return cu0;
    }
    ;
    return cu0;
  };
  var unsafeCodePointAt0 = /* @__PURE__ */ _unsafeCodePointAt0(unsafeCodePointAt0Fallback);
  var toCodePointArray = /* @__PURE__ */ _toCodePointArray(toCodePointArrayFallback)(unsafeCodePointAt0);
  var length4 = function($74) {
    return length(toCodePointArray($74));
  };
  var indexOf2 = function(p2) {
    return function(s2) {
      return map11(function(i2) {
        return length4(take2(i2)(s2));
      })(indexOf(p2)(s2));
    };
  };
  var fromCharCode2 = /* @__PURE__ */ (function() {
    var $75 = toEnumWithDefaults(boundedEnumChar)(bottom(boundedChar))(top(boundedChar));
    return function($76) {
      return singleton6($75($76));
    };
  })();
  var singletonFallback = function(v2) {
    if (v2 <= 65535) {
      return fromCharCode2(v2);
    }
    ;
    var lead = div2(v2 - 65536 | 0)(1024) + 55296 | 0;
    var trail = mod2(v2 - 65536 | 0)(1024) + 56320 | 0;
    return fromCharCode2(lead) + fromCharCode2(trail);
  };
  var singleton7 = /* @__PURE__ */ _singleton(singletonFallback);
  var takeFallback = function(v2) {
    return function(v1) {
      if (v2 < 1) {
        return "";
      }
      ;
      var v22 = uncons3(v1);
      if (v22 instanceof Just) {
        return singleton7(v22.value0.head) + takeFallback(v2 - 1 | 0)(v22.value0.tail);
      }
      ;
      return v1;
    };
  };
  var take3 = /* @__PURE__ */ _take(takeFallback);
  var splitAt3 = function(i2) {
    return function(s2) {
      var before = take3(i2)(s2);
      return {
        before,
        after: drop2(length3(before))(s2)
      };
    };
  };
  var drop3 = function(n) {
    return function(s2) {
      return drop2(length3(take3(n)(s2)))(s2);
    };
  };

  // output/Hylograph.Expr.Interpreter.Eval/foreign.js
  var unsafeGetField = (name16) => (record) => record[name16];

  // output/Hylograph.Expr.Path.Generators/index.js
  var show3 = /* @__PURE__ */ show(showNumber);
  var foldl7 = /* @__PURE__ */ foldl(foldableArray);
  var genSankeyLink = function(sx) {
    return function(sy0) {
      return function(sy1) {
        return function(tx) {
          return function(ty0) {
            return function(ty1) {
              var mx = (sx + tx) / 2;
              return "M " + (show3(sx) + ("," + (show3(sy0) + (" C " + (show3(mx) + ("," + (show3(sy0) + (" " + (show3(mx) + ("," + (show3(ty0) + (" " + (show3(tx) + ("," + (show3(ty0) + (" L " + (show3(tx) + ("," + (show3(ty1) + (" C " + (show3(mx) + ("," + (show3(ty1) + (" " + (show3(mx) + ("," + (show3(sy1) + (" " + (show3(sx) + ("," + (show3(sy1) + " Z")))))))))))))))))))))))))))))));
            };
          };
        };
      };
    };
  };
  var genRibbon = function(sa0) {
    return function(sa1) {
      return function(ta0) {
        return function(ta1) {
          return function(innerR) {
            return function(outerR) {
              var ty1 = -outerR * cos(ta1);
              var ty0 = -outerR * cos(ta0);
              var tx1 = outerR * sin(ta1);
              var tx0 = outerR * sin(ta0);
              var targetArcFlag = (function() {
                var $11 = ta1 - ta0 > pi;
                if ($11) {
                  return "1";
                }
                ;
                return "0";
              })();
              var sy1 = -outerR * cos(sa1);
              var sy0 = -outerR * cos(sa0);
              var sx1 = outerR * sin(sa1);
              var sx0 = outerR * sin(sa0);
              var sourceArcFlag = (function() {
                var $12 = sa1 - sa0 > pi;
                if ($12) {
                  return "1";
                }
                ;
                return "0";
              })();
              return "M " + (show3(sx0) + ("," + (show3(sy0) + (" A " + (show3(outerR) + ("," + (show3(outerR) + (" 0 " + (sourceArcFlag + (" 1 " + (show3(sx1) + ("," + (show3(sy1) + (" Q 0,0 " + (show3(tx0) + ("," + (show3(ty0) + (" A " + (show3(outerR) + ("," + (show3(outerR) + (" 0 " + (targetArcFlag + (" 1 " + (show3(tx1) + ("," + (show3(ty1) + (" Q 0,0 " + (show3(sx0) + ("," + (show3(sy0) + " Z")))))))))))))))))))))))))))))));
            };
          };
        };
      };
    };
  };
  var genPolylinePath = function(points2) {
    var v2 = uncons(points2);
    if (v2 instanceof Nothing) {
      return "";
    }
    ;
    if (v2 instanceof Just) {
      return "M " + (show3(v2.value0.head.x) + ("," + (show3(v2.value0.head.y) + foldl7(function(acc) {
        return function(p2) {
          return acc + (" L " + (show3(p2.x) + ("," + show3(p2.y))));
        };
      })("")(v2.value0.tail))));
    }
    ;
    throw new Error("Failed pattern match at Hylograph.Expr.Path.Generators (line 40, column 3 - line 44, column 76): " + [v2.constructor.name]);
  };
  var genLinkVertical = function(x13) {
    return function(y13) {
      return function(x24) {
        return function(y24) {
          var my = (y13 + y24) / 2;
          return "M " + (show3(x13) + ("," + (show3(y13) + (" C " + (show3(x13) + ("," + (show3(my) + (" " + (show3(x24) + ("," + (show3(my) + (" " + (show3(x24) + ("," + show3(y24)))))))))))))));
        };
      };
    };
  };
  var genLinkRadial = function(angle1) {
    return function(radius1) {
      return function(angle2) {
        return function(radius2) {
          var y24 = -radius2 * cos(angle2);
          var y13 = -radius1 * cos(angle1);
          var x24 = radius2 * sin(angle2);
          var x13 = radius1 * sin(angle1);
          var mr = (radius1 + radius2) / 2;
          var ma = (angle1 + angle2) / 2;
          var mx = mr * sin(ma);
          var my = -mr * cos(ma);
          return "M " + (show3(x13) + ("," + (show3(y13) + (" Q " + (show3(mx) + ("," + (show3(my) + (" " + (show3(x24) + ("," + show3(y24)))))))))));
        };
      };
    };
  };
  var genLinkHorizontal = function(x13) {
    return function(y13) {
      return function(x24) {
        return function(y24) {
          var mx = (x13 + x24) / 2;
          return "M " + (show3(x13) + ("," + (show3(y13) + (" C " + (show3(mx) + ("," + (show3(y13) + (" " + (show3(mx) + ("," + (show3(y24) + (" " + (show3(x24) + ("," + show3(y24)))))))))))))));
        };
      };
    };
  };
  var genLinePath = function(x13) {
    return function(y13) {
      return function(x24) {
        return function(y24) {
          return "M " + (show3(x13) + ("," + (show3(y13) + (" L " + (show3(x24) + ("," + show3(y24)))))));
        };
      };
    };
  };
  var genArc = function(startAngle) {
    return function(endAngle) {
      return function(innerRadius) {
        return function(outerRadius) {
          var oy1 = -outerRadius * cos(endAngle);
          var oy0 = -outerRadius * cos(startAngle);
          var ox1 = outerRadius * sin(endAngle);
          var ox0 = outerRadius * sin(startAngle);
          var largeArc = (function() {
            var $17 = endAngle - startAngle > pi;
            if ($17) {
              return "1";
            }
            ;
            return "0";
          })();
          var iy1 = -innerRadius * cos(endAngle);
          var iy0 = -innerRadius * cos(startAngle);
          var ix1 = innerRadius * sin(endAngle);
          var ix0 = innerRadius * sin(startAngle);
          var $18 = innerRadius <= 0;
          if ($18) {
            return "M 0,0" + (" L " + (show3(ox0) + ("," + (show3(oy0) + (" A " + (show3(outerRadius) + ("," + (show3(outerRadius) + (" 0 " + (largeArc + (" 1 " + (show3(ox1) + ("," + (show3(oy1) + " Z"))))))))))))));
          }
          ;
          return "M " + (show3(ox0) + ("," + (show3(oy0) + (" A " + (show3(outerRadius) + ("," + (show3(outerRadius) + (" 0 " + (largeArc + (" 1 " + (show3(ox1) + ("," + (show3(oy1) + (" L " + (show3(ix1) + ("," + (show3(iy1) + (" A " + (show3(innerRadius) + ("," + (show3(innerRadius) + (" 0 " + (largeArc + (" 0 " + (show3(ix0) + ("," + (show3(iy0) + " Z")))))))))))))))))))))))))));
        };
      };
    };
  };

  // output/Hylograph.Expr.Expr/index.js
  var str = function(dict) {
    return dict.str;
  };
  var lit = function(dict) {
    return dict.lit;
  };

  // output/Hylograph.Expr.Interpreter.Eval/index.js
  var stringExprEvalD = {
    str: function(s2) {
      return function(v2) {
        return function(v1) {
          return s2;
        };
      };
    },
    concat: function(v2) {
      return function(v1) {
        return function(d3) {
          return function(i2) {
            return v2(d3)(i2) + v1(d3)(i2);
          };
        };
      };
    }
  };
  var runEvalD = function(v2) {
    return function(d3) {
      return function(i2) {
        return v2(d3)(i2);
      };
    };
  };
  var pathExprEvalD = {
    linePath: function(v2) {
      return function(v1) {
        return function(v22) {
          return function(v3) {
            return function(d3) {
              return function(i2) {
                return genLinePath(v2(d3)(i2))(v1(d3)(i2))(v22(d3)(i2))(v3(d3)(i2));
              };
            };
          };
        };
      };
    },
    polylinePath: function(v2) {
      return function(d3) {
        return function(i2) {
          return genPolylinePath(v2(d3)(i2));
        };
      };
    },
    linkHorizontal: function(v2) {
      return function(v1) {
        return function(v22) {
          return function(v3) {
            return function(d3) {
              return function(i2) {
                return genLinkHorizontal(v2(d3)(i2))(v1(d3)(i2))(v22(d3)(i2))(v3(d3)(i2));
              };
            };
          };
        };
      };
    },
    linkVertical: function(v2) {
      return function(v1) {
        return function(v22) {
          return function(v3) {
            return function(d3) {
              return function(i2) {
                return genLinkVertical(v2(d3)(i2))(v1(d3)(i2))(v22(d3)(i2))(v3(d3)(i2));
              };
            };
          };
        };
      };
    },
    linkRadial: function(v2) {
      return function(v1) {
        return function(v22) {
          return function(v3) {
            return function(d3) {
              return function(i2) {
                return genLinkRadial(v2(d3)(i2))(v1(d3)(i2))(v22(d3)(i2))(v3(d3)(i2));
              };
            };
          };
        };
      };
    },
    sankeyLink: function(v2) {
      return function(v1) {
        return function(v22) {
          return function(v3) {
            return function(v4) {
              return function(v5) {
                return function(d3) {
                  return function(i2) {
                    return genSankeyLink(v2(d3)(i2))(v1(d3)(i2))(v22(d3)(i2))(v3(d3)(i2))(v4(d3)(i2))(v5(d3)(i2));
                  };
                };
              };
            };
          };
        };
      };
    },
    ribbon: function(v2) {
      return function(v1) {
        return function(v22) {
          return function(v3) {
            return function(v4) {
              return function(v5) {
                return function(d3) {
                  return function(i2) {
                    return genRibbon(v2(d3)(i2))(v1(d3)(i2))(v22(d3)(i2))(v3(d3)(i2))(v4(d3)(i2))(v5(d3)(i2));
                  };
                };
              };
            };
          };
        };
      };
    },
    arc: function(v2) {
      return function(v1) {
        return function(v22) {
          return function(v3) {
            return function(d3) {
              return function(i2) {
                return genArc(v2(d3)(i2))(v1(d3)(i2))(v22(d3)(i2))(v3(d3)(i2));
              };
            };
          };
        };
      };
    },
    closePath: function(v2) {
      return function(d3) {
        return function(i2) {
          return v2(d3)(i2) + " Z";
        };
      };
    }
  };
  var numExprEvalD = {
    lit: function(n) {
      return function(v2) {
        return function(v1) {
          return n;
        };
      };
    },
    add: function(v2) {
      return function(v1) {
        return function(d3) {
          return function(i2) {
            return v2(d3)(i2) + v1(d3)(i2);
          };
        };
      };
    },
    sub: function(v2) {
      return function(v1) {
        return function(d3) {
          return function(i2) {
            return v2(d3)(i2) - v1(d3)(i2);
          };
        };
      };
    },
    mul: function(v2) {
      return function(v1) {
        return function(d3) {
          return function(i2) {
            return v2(d3)(i2) * v1(d3)(i2);
          };
        };
      };
    },
    div: function(v2) {
      return function(v1) {
        return function(d3) {
          return function(i2) {
            return v2(d3)(i2) / v1(d3)(i2);
          };
        };
      };
    },
    negate: function(v2) {
      return function(d3) {
        return function(i2) {
          return -v2(d3)(i2);
        };
      };
    }
  };
  var datumExprEvalD = {
    field: function(dictIsSymbol) {
      var reflectSymbol2 = reflectSymbol(dictIsSymbol);
      return function() {
        return function(proxy) {
          return function(d3) {
            return function(v2) {
              return unsafeGetField(reflectSymbol2(proxy))(d3);
            };
          };
        };
      };
    },
    index: function(v2) {
      return function(i2) {
        return i2;
      };
    }
  };

  // output/Hylograph.Internal.Attribute/index.js
  var StringValue = /* @__PURE__ */ (function() {
    function StringValue2(value0) {
      this.value0 = value0;
    }
    ;
    StringValue2.create = function(value0) {
      return new StringValue2(value0);
    };
    return StringValue2;
  })();
  var NumberValue = /* @__PURE__ */ (function() {
    function NumberValue2(value0) {
      this.value0 = value0;
    }
    ;
    NumberValue2.create = function(value0) {
      return new NumberValue2(value0);
    };
    return NumberValue2;
  })();
  var BooleanValue = /* @__PURE__ */ (function() {
    function BooleanValue2(value0) {
      this.value0 = value0;
    }
    ;
    BooleanValue2.create = function(value0) {
      return new BooleanValue2(value0);
    };
    return BooleanValue2;
  })();
  var UnknownSource = /* @__PURE__ */ (function() {
    function UnknownSource2() {
    }
    ;
    UnknownSource2.value = new UnknownSource2();
    return UnknownSource2;
  })();
  var StaticAttr = /* @__PURE__ */ (function() {
    function StaticAttr3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    StaticAttr3.create = function(value0) {
      return function(value1) {
        return new StaticAttr3(value0, value1);
      };
    };
    return StaticAttr3;
  })();
  var DataAttr = /* @__PURE__ */ (function() {
    function DataAttr2(value0, value1, value22) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
    }
    ;
    DataAttr2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return new DataAttr2(value0, value1, value22);
        };
      };
    };
    return DataAttr2;
  })();
  var IndexedAttr = /* @__PURE__ */ (function() {
    function IndexedAttr2(value0, value1, value22) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
    }
    ;
    IndexedAttr2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return new IndexedAttr2(value0, value1, value22);
        };
      };
    };
    return IndexedAttr2;
  })();
  var AnimatedAttr = /* @__PURE__ */ (function() {
    function AnimatedAttr2(value0) {
      this.value0 = value0;
    }
    ;
    AnimatedAttr2.create = function(value0) {
      return new AnimatedAttr2(value0);
    };
    return AnimatedAttr2;
  })();
  var AnimatedCompound = /* @__PURE__ */ (function() {
    function AnimatedCompound2(value0) {
      this.value0 = value0;
    }
    ;
    AnimatedCompound2.create = function(value0) {
      return new AnimatedCompound2(value0);
    };
    return AnimatedCompound2;
  })();

  // output/Hylograph.Expr.Datum/index.js
  var field = function(dict) {
    return dict.field;
  };

  // output/Hylograph.Expr.Friendly/index.js
  var show4 = /* @__PURE__ */ show(showNumber);
  var toAttributeValueString = {
    toAttrValue: /* @__PURE__ */ identity(categoryFn)
  };
  var toAttributeValueNumber = {
    toAttrValue: show4
  };
  var viewBox = function(minX) {
    return function(minY) {
      return function(w) {
        return function(h7) {
          return new StaticAttr("viewBox", new StringValue(show4(minX) + (" " + (show4(minY) + (" " + (show4(w) + (" " + show4(h7))))))));
        };
      };
    };
  };
  var toAttrValue = function(dict) {
    return dict.toAttrValue;
  };
  var text = function(dictStringExpr) {
    return str(dictStringExpr);
  };
  var num = function(dictNumExpr) {
    return lit(dictNumExpr);
  };
  var fromStr = function(name16) {
    return function(f) {
      return new DataAttr(name16, UnknownSource.value, function(d3) {
        return new StringValue(f(d3));
      });
    };
  };
  var from2 = function(dictShow) {
    var show118 = show(dictShow);
    return function(name16) {
      return function(f) {
        return new DataAttr(name16, UnknownSource.value, function(d3) {
          return new StringValue(show118(f(d3)));
        });
      };
    };
  };
  var attr = function(dictToAttributeValue) {
    var toAttrValue1 = toAttrValue(dictToAttributeValue);
    return function(name16) {
      return function(expr) {
        return new DataAttr(name16, UnknownSource.value, function(d3) {
          return new StringValue(toAttrValue1(runEvalD(expr)(d3)(0)));
        });
      };
    };
  };
  var cx = function(dictToAttributeValue) {
    return attr(dictToAttributeValue)("cx");
  };
  var cy = function(dictToAttributeValue) {
    return attr(dictToAttributeValue)("cy");
  };
  var fill = function(dictToAttributeValue) {
    return attr(dictToAttributeValue)("fill");
  };
  var fontSize = function(dictToAttributeValue) {
    return attr(dictToAttributeValue)("font-size");
  };
  var height = function(dictToAttributeValue) {
    return attr(dictToAttributeValue)("height");
  };
  var path = function(dictToAttributeValue) {
    return attr(dictToAttributeValue)("d");
  };
  var r = function(dictToAttributeValue) {
    return attr(dictToAttributeValue)("r");
  };
  var stroke = function(dictToAttributeValue) {
    return attr(dictToAttributeValue)("stroke");
  };
  var strokeWidth = function(dictToAttributeValue) {
    return attr(dictToAttributeValue)("stroke-width");
  };
  var textAnchor = function(dictToAttributeValue) {
    return attr(dictToAttributeValue)("text-anchor");
  };
  var textContent = function(dictToAttributeValue) {
    return attr(dictToAttributeValue)("textContent");
  };
  var transform = function(dictToAttributeValue) {
    return attr(dictToAttributeValue)("transform");
  };
  var width = function(dictToAttributeValue) {
    return attr(dictToAttributeValue)("width");
  };
  var x = function(dictToAttributeValue) {
    return attr(dictToAttributeValue)("x");
  };
  var y = function(dictToAttributeValue) {
    return attr(dictToAttributeValue)("y");
  };

  // output/Data.Map/index.js
  var keys2 = /* @__PURE__ */ (function() {
    var $38 = $$void(functorMap);
    return function($39) {
      return fromMap($38($39));
    };
  })();

  // node_modules/d3-force/src/center.js
  function center_default(x7, y7) {
    var nodes, strength = 1;
    if (x7 == null) x7 = 0;
    if (y7 == null) y7 = 0;
    function force2() {
      var i2, n = nodes.length, node, sx = 0, sy = 0;
      for (i2 = 0; i2 < n; ++i2) {
        node = nodes[i2], sx += node.x, sy += node.y;
      }
      for (sx = (sx / n - x7) * strength, sy = (sy / n - y7) * strength, i2 = 0; i2 < n; ++i2) {
        node = nodes[i2], node.x -= sx, node.y -= sy;
      }
    }
    force2.initialize = function(_) {
      nodes = _;
    };
    force2.x = function(_) {
      return arguments.length ? (x7 = +_, force2) : x7;
    };
    force2.y = function(_) {
      return arguments.length ? (y7 = +_, force2) : y7;
    };
    force2.strength = function(_) {
      return arguments.length ? (strength = +_, force2) : strength;
    };
    return force2;
  }

  // node_modules/d3-quadtree/src/add.js
  function add_default(d3) {
    const x7 = +this._x.call(null, d3), y7 = +this._y.call(null, d3);
    return add3(this.cover(x7, y7), x7, y7, d3);
  }
  function add3(tree, x7, y7, d3) {
    if (isNaN(x7) || isNaN(y7)) return tree;
    var parent2, node = tree._root, leaf = { data: d3 }, x0 = tree._x0, y0 = tree._y0, x13 = tree._x1, y13 = tree._y1, xm, ym, xp, yp, right, bottom3, i2, j;
    if (!node) return tree._root = leaf, tree;
    while (node.length) {
      if (right = x7 >= (xm = (x0 + x13) / 2)) x0 = xm;
      else x13 = xm;
      if (bottom3 = y7 >= (ym = (y0 + y13) / 2)) y0 = ym;
      else y13 = ym;
      if (parent2 = node, !(node = node[i2 = bottom3 << 1 | right])) return parent2[i2] = leaf, tree;
    }
    xp = +tree._x.call(null, node.data);
    yp = +tree._y.call(null, node.data);
    if (x7 === xp && y7 === yp) return leaf.next = node, parent2 ? parent2[i2] = leaf : tree._root = leaf, tree;
    do {
      parent2 = parent2 ? parent2[i2] = new Array(4) : tree._root = new Array(4);
      if (right = x7 >= (xm = (x0 + x13) / 2)) x0 = xm;
      else x13 = xm;
      if (bottom3 = y7 >= (ym = (y0 + y13) / 2)) y0 = ym;
      else y13 = ym;
    } while ((i2 = bottom3 << 1 | right) === (j = (yp >= ym) << 1 | xp >= xm));
    return parent2[j] = node, parent2[i2] = leaf, tree;
  }
  function addAll(data) {
    var d3, i2, n = data.length, x7, y7, xz = new Array(n), yz = new Array(n), x0 = Infinity, y0 = Infinity, x13 = -Infinity, y13 = -Infinity;
    for (i2 = 0; i2 < n; ++i2) {
      if (isNaN(x7 = +this._x.call(null, d3 = data[i2])) || isNaN(y7 = +this._y.call(null, d3))) continue;
      xz[i2] = x7;
      yz[i2] = y7;
      if (x7 < x0) x0 = x7;
      if (x7 > x13) x13 = x7;
      if (y7 < y0) y0 = y7;
      if (y7 > y13) y13 = y7;
    }
    if (x0 > x13 || y0 > y13) return this;
    this.cover(x0, y0).cover(x13, y13);
    for (i2 = 0; i2 < n; ++i2) {
      add3(this, xz[i2], yz[i2], data[i2]);
    }
    return this;
  }

  // node_modules/d3-quadtree/src/cover.js
  function cover_default(x7, y7) {
    if (isNaN(x7 = +x7) || isNaN(y7 = +y7)) return this;
    var x0 = this._x0, y0 = this._y0, x13 = this._x1, y13 = this._y1;
    if (isNaN(x0)) {
      x13 = (x0 = Math.floor(x7)) + 1;
      y13 = (y0 = Math.floor(y7)) + 1;
    } else {
      var z2 = x13 - x0 || 1, node = this._root, parent2, i2;
      while (x0 > x7 || x7 >= x13 || y0 > y7 || y7 >= y13) {
        i2 = (y7 < y0) << 1 | x7 < x0;
        parent2 = new Array(4), parent2[i2] = node, node = parent2, z2 *= 2;
        switch (i2) {
          case 0:
            x13 = x0 + z2, y13 = y0 + z2;
            break;
          case 1:
            x0 = x13 - z2, y13 = y0 + z2;
            break;
          case 2:
            x13 = x0 + z2, y0 = y13 - z2;
            break;
          case 3:
            x0 = x13 - z2, y0 = y13 - z2;
            break;
        }
      }
      if (this._root && this._root.length) this._root = node;
    }
    this._x0 = x0;
    this._y0 = y0;
    this._x1 = x13;
    this._y1 = y13;
    return this;
  }

  // node_modules/d3-quadtree/src/data.js
  function data_default() {
    var data = [];
    this.visit(function(node) {
      if (!node.length) do
        data.push(node.data);
      while (node = node.next);
    });
    return data;
  }

  // node_modules/d3-quadtree/src/extent.js
  function extent_default(_) {
    return arguments.length ? this.cover(+_[0][0], +_[0][1]).cover(+_[1][0], +_[1][1]) : isNaN(this._x0) ? void 0 : [[this._x0, this._y0], [this._x1, this._y1]];
  }

  // node_modules/d3-quadtree/src/quad.js
  function quad_default(node, x0, y0, x13, y13) {
    this.node = node;
    this.x0 = x0;
    this.y0 = y0;
    this.x1 = x13;
    this.y1 = y13;
  }

  // node_modules/d3-quadtree/src/find.js
  function find_default(x7, y7, radius) {
    var data, x0 = this._x0, y0 = this._y0, x13, y13, x24, y24, x32 = this._x1, y32 = this._y1, quads = [], node = this._root, q3, i2;
    if (node) quads.push(new quad_default(node, x0, y0, x32, y32));
    if (radius == null) radius = Infinity;
    else {
      x0 = x7 - radius, y0 = y7 - radius;
      x32 = x7 + radius, y32 = y7 + radius;
      radius *= radius;
    }
    while (q3 = quads.pop()) {
      if (!(node = q3.node) || (x13 = q3.x0) > x32 || (y13 = q3.y0) > y32 || (x24 = q3.x1) < x0 || (y24 = q3.y1) < y0) continue;
      if (node.length) {
        var xm = (x13 + x24) / 2, ym = (y13 + y24) / 2;
        quads.push(
          new quad_default(node[3], xm, ym, x24, y24),
          new quad_default(node[2], x13, ym, xm, y24),
          new quad_default(node[1], xm, y13, x24, ym),
          new quad_default(node[0], x13, y13, xm, ym)
        );
        if (i2 = (y7 >= ym) << 1 | x7 >= xm) {
          q3 = quads[quads.length - 1];
          quads[quads.length - 1] = quads[quads.length - 1 - i2];
          quads[quads.length - 1 - i2] = q3;
        }
      } else {
        var dx = x7 - +this._x.call(null, node.data), dy = y7 - +this._y.call(null, node.data), d22 = dx * dx + dy * dy;
        if (d22 < radius) {
          var d3 = Math.sqrt(radius = d22);
          x0 = x7 - d3, y0 = y7 - d3;
          x32 = x7 + d3, y32 = y7 + d3;
          data = node.data;
        }
      }
    }
    return data;
  }

  // node_modules/d3-quadtree/src/remove.js
  function remove_default(d3) {
    if (isNaN(x7 = +this._x.call(null, d3)) || isNaN(y7 = +this._y.call(null, d3))) return this;
    var parent2, node = this._root, retainer, previous, next2, x0 = this._x0, y0 = this._y0, x13 = this._x1, y13 = this._y1, x7, y7, xm, ym, right, bottom3, i2, j;
    if (!node) return this;
    if (node.length) while (true) {
      if (right = x7 >= (xm = (x0 + x13) / 2)) x0 = xm;
      else x13 = xm;
      if (bottom3 = y7 >= (ym = (y0 + y13) / 2)) y0 = ym;
      else y13 = ym;
      if (!(parent2 = node, node = node[i2 = bottom3 << 1 | right])) return this;
      if (!node.length) break;
      if (parent2[i2 + 1 & 3] || parent2[i2 + 2 & 3] || parent2[i2 + 3 & 3]) retainer = parent2, j = i2;
    }
    while (node.data !== d3) if (!(previous = node, node = node.next)) return this;
    if (next2 = node.next) delete node.next;
    if (previous) return next2 ? previous.next = next2 : delete previous.next, this;
    if (!parent2) return this._root = next2, this;
    next2 ? parent2[i2] = next2 : delete parent2[i2];
    if ((node = parent2[0] || parent2[1] || parent2[2] || parent2[3]) && node === (parent2[3] || parent2[2] || parent2[1] || parent2[0]) && !node.length) {
      if (retainer) retainer[j] = node;
      else this._root = node;
    }
    return this;
  }
  function removeAll(data) {
    for (var i2 = 0, n = data.length; i2 < n; ++i2) this.remove(data[i2]);
    return this;
  }

  // node_modules/d3-quadtree/src/root.js
  function root_default() {
    return this._root;
  }

  // node_modules/d3-quadtree/src/size.js
  function size_default() {
    var size6 = 0;
    this.visit(function(node) {
      if (!node.length) do
        ++size6;
      while (node = node.next);
    });
    return size6;
  }

  // node_modules/d3-quadtree/src/visit.js
  function visit_default(callback) {
    var quads = [], q3, node = this._root, child, x0, y0, x13, y13;
    if (node) quads.push(new quad_default(node, this._x0, this._y0, this._x1, this._y1));
    while (q3 = quads.pop()) {
      if (!callback(node = q3.node, x0 = q3.x0, y0 = q3.y0, x13 = q3.x1, y13 = q3.y1) && node.length) {
        var xm = (x0 + x13) / 2, ym = (y0 + y13) / 2;
        if (child = node[3]) quads.push(new quad_default(child, xm, ym, x13, y13));
        if (child = node[2]) quads.push(new quad_default(child, x0, ym, xm, y13));
        if (child = node[1]) quads.push(new quad_default(child, xm, y0, x13, ym));
        if (child = node[0]) quads.push(new quad_default(child, x0, y0, xm, ym));
      }
    }
    return this;
  }

  // node_modules/d3-quadtree/src/visitAfter.js
  function visitAfter_default(callback) {
    var quads = [], next2 = [], q3;
    if (this._root) quads.push(new quad_default(this._root, this._x0, this._y0, this._x1, this._y1));
    while (q3 = quads.pop()) {
      var node = q3.node;
      if (node.length) {
        var child, x0 = q3.x0, y0 = q3.y0, x13 = q3.x1, y13 = q3.y1, xm = (x0 + x13) / 2, ym = (y0 + y13) / 2;
        if (child = node[0]) quads.push(new quad_default(child, x0, y0, xm, ym));
        if (child = node[1]) quads.push(new quad_default(child, xm, y0, x13, ym));
        if (child = node[2]) quads.push(new quad_default(child, x0, ym, xm, y13));
        if (child = node[3]) quads.push(new quad_default(child, xm, ym, x13, y13));
      }
      next2.push(q3);
    }
    while (q3 = next2.pop()) {
      callback(q3.node, q3.x0, q3.y0, q3.x1, q3.y1);
    }
    return this;
  }

  // node_modules/d3-quadtree/src/x.js
  function defaultX(d3) {
    return d3[0];
  }
  function x_default(_) {
    return arguments.length ? (this._x = _, this) : this._x;
  }

  // node_modules/d3-quadtree/src/y.js
  function defaultY(d3) {
    return d3[1];
  }
  function y_default(_) {
    return arguments.length ? (this._y = _, this) : this._y;
  }

  // node_modules/d3-quadtree/src/quadtree.js
  function quadtree(nodes, x7, y7) {
    var tree = new Quadtree(x7 == null ? defaultX : x7, y7 == null ? defaultY : y7, NaN, NaN, NaN, NaN);
    return nodes == null ? tree : tree.addAll(nodes);
  }
  function Quadtree(x7, y7, x0, y0, x13, y13) {
    this._x = x7;
    this._y = y7;
    this._x0 = x0;
    this._y0 = y0;
    this._x1 = x13;
    this._y1 = y13;
    this._root = void 0;
  }
  function leaf_copy(leaf) {
    var copy4 = { data: leaf.data }, next2 = copy4;
    while (leaf = leaf.next) next2 = next2.next = { data: leaf.data };
    return copy4;
  }
  var treeProto = quadtree.prototype = Quadtree.prototype;
  treeProto.copy = function() {
    var copy4 = new Quadtree(this._x, this._y, this._x0, this._y0, this._x1, this._y1), node = this._root, nodes, child;
    if (!node) return copy4;
    if (!node.length) return copy4._root = leaf_copy(node), copy4;
    nodes = [{ source: node, target: copy4._root = new Array(4) }];
    while (node = nodes.pop()) {
      for (var i2 = 0; i2 < 4; ++i2) {
        if (child = node.source[i2]) {
          if (child.length) nodes.push({ source: child, target: node.target[i2] = new Array(4) });
          else node.target[i2] = leaf_copy(child);
        }
      }
    }
    return copy4;
  };
  treeProto.add = add_default;
  treeProto.addAll = addAll;
  treeProto.cover = cover_default;
  treeProto.data = data_default;
  treeProto.extent = extent_default;
  treeProto.find = find_default;
  treeProto.remove = remove_default;
  treeProto.removeAll = removeAll;
  treeProto.root = root_default;
  treeProto.size = size_default;
  treeProto.visit = visit_default;
  treeProto.visitAfter = visitAfter_default;
  treeProto.x = x_default;
  treeProto.y = y_default;

  // node_modules/d3-force/src/constant.js
  function constant_default(x7) {
    return function() {
      return x7;
    };
  }

  // node_modules/d3-force/src/jiggle.js
  function jiggle_default(random2) {
    return (random2() - 0.5) * 1e-6;
  }

  // node_modules/d3-force/src/collide.js
  function x2(d3) {
    return d3.x + d3.vx;
  }
  function y2(d3) {
    return d3.y + d3.vy;
  }
  function collide_default(radius) {
    var nodes, radii, random2, strength = 1, iterations = 1;
    if (typeof radius !== "function") radius = constant_default(radius == null ? 1 : +radius);
    function force2() {
      var i2, n = nodes.length, tree, node, xi, yi, ri, ri2;
      for (var k = 0; k < iterations; ++k) {
        tree = quadtree(nodes, x2, y2).visitAfter(prepare);
        for (i2 = 0; i2 < n; ++i2) {
          node = nodes[i2];
          ri = radii[node.index], ri2 = ri * ri;
          xi = node.x + node.vx;
          yi = node.y + node.vy;
          tree.visit(apply5);
        }
      }
      function apply5(quad, x0, y0, x13, y13) {
        var data = quad.data, rj = quad.r, r8 = ri + rj;
        if (data) {
          if (data.index > node.index) {
            var x7 = xi - data.x - data.vx, y7 = yi - data.y - data.vy, l2 = x7 * x7 + y7 * y7;
            if (l2 < r8 * r8) {
              if (x7 === 0) x7 = jiggle_default(random2), l2 += x7 * x7;
              if (y7 === 0) y7 = jiggle_default(random2), l2 += y7 * y7;
              l2 = (r8 - (l2 = Math.sqrt(l2))) / l2 * strength;
              node.vx += (x7 *= l2) * (r8 = (rj *= rj) / (ri2 + rj));
              node.vy += (y7 *= l2) * r8;
              data.vx -= x7 * (r8 = 1 - r8);
              data.vy -= y7 * r8;
            }
          }
          return;
        }
        return x0 > xi + r8 || x13 < xi - r8 || y0 > yi + r8 || y13 < yi - r8;
      }
    }
    function prepare(quad) {
      if (quad.data) return quad.r = radii[quad.data.index];
      for (var i2 = quad.r = 0; i2 < 4; ++i2) {
        if (quad[i2] && quad[i2].r > quad.r) {
          quad.r = quad[i2].r;
        }
      }
    }
    function initialize() {
      if (!nodes) return;
      var i2, n = nodes.length, node;
      radii = new Array(n);
      for (i2 = 0; i2 < n; ++i2) node = nodes[i2], radii[node.index] = +radius(node, i2, nodes);
    }
    force2.initialize = function(_nodes, _random) {
      nodes = _nodes;
      random2 = _random;
      initialize();
    };
    force2.iterations = function(_) {
      return arguments.length ? (iterations = +_, force2) : iterations;
    };
    force2.strength = function(_) {
      return arguments.length ? (strength = +_, force2) : strength;
    };
    force2.radius = function(_) {
      return arguments.length ? (radius = typeof _ === "function" ? _ : constant_default(+_), initialize(), force2) : radius;
    };
    return force2;
  }

  // node_modules/d3-force/src/link.js
  function index4(d3) {
    return d3.index;
  }
  function find3(nodeById, nodeId) {
    var node = nodeById.get(nodeId);
    if (!node) throw new Error("node not found: " + nodeId);
    return node;
  }
  function link_default(links) {
    var id4 = index4, strength = defaultStrength, strengths, distance = constant_default(30), distances, nodes, count, bias, random2, iterations = 1;
    if (links == null) links = [];
    function defaultStrength(link4) {
      return 1 / Math.min(count[link4.source.index], count[link4.target.index]);
    }
    function force2(alpha) {
      for (var k = 0, n = links.length; k < iterations; ++k) {
        for (var i2 = 0, link4, source3, target7, x7, y7, l2, b2; i2 < n; ++i2) {
          link4 = links[i2], source3 = link4.source, target7 = link4.target;
          x7 = target7.x + target7.vx - source3.x - source3.vx || jiggle_default(random2);
          y7 = target7.y + target7.vy - source3.y - source3.vy || jiggle_default(random2);
          l2 = Math.sqrt(x7 * x7 + y7 * y7);
          l2 = (l2 - distances[i2]) / l2 * alpha * strengths[i2];
          x7 *= l2, y7 *= l2;
          target7.vx -= x7 * (b2 = bias[i2]);
          target7.vy -= y7 * b2;
          source3.vx += x7 * (b2 = 1 - b2);
          source3.vy += y7 * b2;
        }
      }
    }
    function initialize() {
      if (!nodes) return;
      var i2, n = nodes.length, m2 = links.length, nodeById = new Map(nodes.map((d3, i3) => [id4(d3, i3, nodes), d3])), link4;
      for (i2 = 0, count = new Array(n); i2 < m2; ++i2) {
        link4 = links[i2], link4.index = i2;
        if (typeof link4.source !== "object") link4.source = find3(nodeById, link4.source);
        if (typeof link4.target !== "object") link4.target = find3(nodeById, link4.target);
        count[link4.source.index] = (count[link4.source.index] || 0) + 1;
        count[link4.target.index] = (count[link4.target.index] || 0) + 1;
      }
      for (i2 = 0, bias = new Array(m2); i2 < m2; ++i2) {
        link4 = links[i2], bias[i2] = count[link4.source.index] / (count[link4.source.index] + count[link4.target.index]);
      }
      strengths = new Array(m2), initializeStrength();
      distances = new Array(m2), initializeDistance();
    }
    function initializeStrength() {
      if (!nodes) return;
      for (var i2 = 0, n = links.length; i2 < n; ++i2) {
        strengths[i2] = +strength(links[i2], i2, links);
      }
    }
    function initializeDistance() {
      if (!nodes) return;
      for (var i2 = 0, n = links.length; i2 < n; ++i2) {
        distances[i2] = +distance(links[i2], i2, links);
      }
    }
    force2.initialize = function(_nodes, _random) {
      nodes = _nodes;
      random2 = _random;
      initialize();
    };
    force2.links = function(_) {
      return arguments.length ? (links = _, initialize(), force2) : links;
    };
    force2.id = function(_) {
      return arguments.length ? (id4 = _, force2) : id4;
    };
    force2.iterations = function(_) {
      return arguments.length ? (iterations = +_, force2) : iterations;
    };
    force2.strength = function(_) {
      return arguments.length ? (strength = typeof _ === "function" ? _ : constant_default(+_), initializeStrength(), force2) : strength;
    };
    force2.distance = function(_) {
      return arguments.length ? (distance = typeof _ === "function" ? _ : constant_default(+_), initializeDistance(), force2) : distance;
    };
    return force2;
  }

  // node_modules/d3-force/src/simulation.js
  function x3(d3) {
    return d3.x;
  }
  function y3(d3) {
    return d3.y;
  }
  var initialAngle = Math.PI * (3 - Math.sqrt(5));

  // node_modules/d3-force/src/manyBody.js
  function manyBody_default() {
    var nodes, node, random2, alpha, strength = constant_default(-30), strengths, distanceMin2 = 1, distanceMax2 = Infinity, theta2 = 0.81;
    function force2(_) {
      var i2, n = nodes.length, tree = quadtree(nodes, x3, y3).visitAfter(accumulate);
      for (alpha = _, i2 = 0; i2 < n; ++i2) node = nodes[i2], tree.visit(apply5);
    }
    function initialize() {
      if (!nodes) return;
      var i2, n = nodes.length, node2;
      strengths = new Array(n);
      for (i2 = 0; i2 < n; ++i2) node2 = nodes[i2], strengths[node2.index] = +strength(node2, i2, nodes);
    }
    function accumulate(quad) {
      var strength2 = 0, q3, c2, weight = 0, x7, y7, i2;
      if (quad.length) {
        for (x7 = y7 = i2 = 0; i2 < 4; ++i2) {
          if ((q3 = quad[i2]) && (c2 = Math.abs(q3.value))) {
            strength2 += q3.value, weight += c2, x7 += c2 * q3.x, y7 += c2 * q3.y;
          }
        }
        quad.x = x7 / weight;
        quad.y = y7 / weight;
      } else {
        q3 = quad;
        q3.x = q3.data.x;
        q3.y = q3.data.y;
        do
          strength2 += strengths[q3.data.index];
        while (q3 = q3.next);
      }
      quad.value = strength2;
    }
    function apply5(quad, x13, _, x24) {
      if (!quad.value) return true;
      var x7 = quad.x - node.x, y7 = quad.y - node.y, w = x24 - x13, l2 = x7 * x7 + y7 * y7;
      if (w * w / theta2 < l2) {
        if (l2 < distanceMax2) {
          if (x7 === 0) x7 = jiggle_default(random2), l2 += x7 * x7;
          if (y7 === 0) y7 = jiggle_default(random2), l2 += y7 * y7;
          if (l2 < distanceMin2) l2 = Math.sqrt(distanceMin2 * l2);
          node.vx += x7 * quad.value * alpha / l2;
          node.vy += y7 * quad.value * alpha / l2;
        }
        return true;
      } else if (quad.length || l2 >= distanceMax2) return;
      if (quad.data !== node || quad.next) {
        if (x7 === 0) x7 = jiggle_default(random2), l2 += x7 * x7;
        if (y7 === 0) y7 = jiggle_default(random2), l2 += y7 * y7;
        if (l2 < distanceMin2) l2 = Math.sqrt(distanceMin2 * l2);
      }
      do
        if (quad.data !== node) {
          w = strengths[quad.data.index] * alpha / l2;
          node.vx += x7 * w;
          node.vy += y7 * w;
        }
      while (quad = quad.next);
    }
    force2.initialize = function(_nodes, _random) {
      nodes = _nodes;
      random2 = _random;
      initialize();
    };
    force2.strength = function(_) {
      return arguments.length ? (strength = typeof _ === "function" ? _ : constant_default(+_), initialize(), force2) : strength;
    };
    force2.distanceMin = function(_) {
      return arguments.length ? (distanceMin2 = _ * _, force2) : Math.sqrt(distanceMin2);
    };
    force2.distanceMax = function(_) {
      return arguments.length ? (distanceMax2 = _ * _, force2) : Math.sqrt(distanceMax2);
    };
    force2.theta = function(_) {
      return arguments.length ? (theta2 = _ * _, force2) : Math.sqrt(theta2);
    };
    return force2;
  }

  // node_modules/d3-force/src/radial.js
  function radial_default(radius, x7, y7) {
    var nodes, strength = constant_default(0.1), strengths, radiuses;
    if (typeof radius !== "function") radius = constant_default(+radius);
    if (x7 == null) x7 = 0;
    if (y7 == null) y7 = 0;
    function force2(alpha) {
      for (var i2 = 0, n = nodes.length; i2 < n; ++i2) {
        var node = nodes[i2], dx = node.x - x7 || 1e-6, dy = node.y - y7 || 1e-6, r8 = Math.sqrt(dx * dx + dy * dy), k = (radiuses[i2] - r8) * strengths[i2] * alpha / r8;
        node.vx += dx * k;
        node.vy += dy * k;
      }
    }
    function initialize() {
      if (!nodes) return;
      var i2, n = nodes.length;
      strengths = new Array(n);
      radiuses = new Array(n);
      for (i2 = 0; i2 < n; ++i2) {
        radiuses[i2] = +radius(nodes[i2], i2, nodes);
        strengths[i2] = isNaN(radiuses[i2]) ? 0 : +strength(nodes[i2], i2, nodes);
      }
    }
    force2.initialize = function(_) {
      nodes = _, initialize();
    };
    force2.strength = function(_) {
      return arguments.length ? (strength = typeof _ === "function" ? _ : constant_default(+_), initialize(), force2) : strength;
    };
    force2.radius = function(_) {
      return arguments.length ? (radius = typeof _ === "function" ? _ : constant_default(+_), initialize(), force2) : radius;
    };
    force2.x = function(_) {
      return arguments.length ? (x7 = +_, force2) : x7;
    };
    force2.y = function(_) {
      return arguments.length ? (y7 = +_, force2) : y7;
    };
    return force2;
  }

  // node_modules/d3-force/src/x.js
  function x_default2(x7) {
    var strength = constant_default(0.1), nodes, strengths, xz;
    if (typeof x7 !== "function") x7 = constant_default(x7 == null ? 0 : +x7);
    function force2(alpha) {
      for (var i2 = 0, n = nodes.length, node; i2 < n; ++i2) {
        node = nodes[i2], node.vx += (xz[i2] - node.x) * strengths[i2] * alpha;
      }
    }
    function initialize() {
      if (!nodes) return;
      var i2, n = nodes.length;
      strengths = new Array(n);
      xz = new Array(n);
      for (i2 = 0; i2 < n; ++i2) {
        strengths[i2] = isNaN(xz[i2] = +x7(nodes[i2], i2, nodes)) ? 0 : +strength(nodes[i2], i2, nodes);
      }
    }
    force2.initialize = function(_) {
      nodes = _;
      initialize();
    };
    force2.strength = function(_) {
      return arguments.length ? (strength = typeof _ === "function" ? _ : constant_default(+_), initialize(), force2) : strength;
    };
    force2.x = function(_) {
      return arguments.length ? (x7 = typeof _ === "function" ? _ : constant_default(+_), initialize(), force2) : x7;
    };
    return force2;
  }

  // node_modules/d3-force/src/y.js
  function y_default2(y7) {
    var strength = constant_default(0.1), nodes, strengths, yz;
    if (typeof y7 !== "function") y7 = constant_default(y7 == null ? 0 : +y7);
    function force2(alpha) {
      for (var i2 = 0, n = nodes.length, node; i2 < n; ++i2) {
        node = nodes[i2], node.vy += (yz[i2] - node.y) * strengths[i2] * alpha;
      }
    }
    function initialize() {
      if (!nodes) return;
      var i2, n = nodes.length;
      strengths = new Array(n);
      yz = new Array(n);
      for (i2 = 0; i2 < n; ++i2) {
        strengths[i2] = isNaN(yz[i2] = +y7(nodes[i2], i2, nodes)) ? 0 : +strength(nodes[i2], i2, nodes);
      }
    }
    force2.initialize = function(_) {
      nodes = _;
      initialize();
    };
    force2.strength = function(_) {
      return arguments.length ? (strength = typeof _ === "function" ? _ : constant_default(+_), initialize(), force2) : strength;
    };
    force2.y = function(_) {
      return arguments.length ? (y7 = typeof _ === "function" ? _ : constant_default(+_), initialize(), force2) : y7;
    };
    return force2;
  }

  // output/Hylograph.ForceEngine.Core/foreign.js
  function createManyBody_(config) {
    const force2 = manyBody_default().strength(config.strength).theta(config.theta).distanceMin(config.distanceMin).distanceMax(config.distanceMax);
    return force2;
  }
  function createCollide_(config) {
    const force2 = collide_default().radius(config.radius).strength(config.strength).iterations(config.iterations);
    return force2;
  }
  function createLink_(config) {
    const force2 = link_default().id((d3) => d3.id).distance(config.distance).strength(config.strength).iterations(config.iterations);
    return force2;
  }
  function createCenter_(config) {
    const force2 = center_default(config.x, config.y).strength(config.strength);
    return force2;
  }
  function createForceX_(config) {
    const force2 = x_default2(config.x).strength(config.strength);
    return force2;
  }
  function createForceY_(config) {
    const force2 = y_default2(config.y).strength(config.strength);
    return force2;
  }
  function createRadial_(config) {
    const force2 = radial_default(config.radius, config.x, config.y).strength(config.strength);
    return force2;
  }
  function createManyBodyFiltered_(config) {
    const force2 = manyBody_default().strength(function(d3) {
      return config.filter(d3) ? config.strength : 0;
    }).theta(config.theta).distanceMin(config.distanceMin).distanceMax(config.distanceMax);
    return force2;
  }
  function createRadialFiltered_(config) {
    const force2 = radial_default(config.radius, config.x, config.y).strength(function(d3) {
      return config.filter(d3) ? config.strength : 0;
    });
    return force2;
  }
  function createCollideDynamic_(config) {
    const force2 = collide_default().radius(function(d3) {
      return config.radiusAccessor(d3);
    }).strength(config.strength).iterations(config.iterations);
    return force2;
  }
  function createForceXDynamic_(config) {
    const force2 = x_default2().x(function(d3) {
      return config.xAccessor(d3);
    }).strength(config.strength);
    return force2;
  }
  function createForceYDynamic_(config) {
    const force2 = y_default2().y(function(d3) {
      return config.yAccessor(d3);
    }).strength(config.strength);
    return force2;
  }
  function createForceXGrid_(strength) {
    return x_default2().x((d3) => d3.gridX).strength(strength);
  }
  function createForceYGrid_(strength) {
    return y_default2().y((d3) => d3.gridY).strength(strength);
  }
  function initializeForce_(force2) {
    return function(nodes) {
      return function() {
        if (force2.initialize) {
          force2.initialize(nodes, Math.random);
        }
        return force2;
      };
    };
  }
  function initializeLinkForce_(force2) {
    return function(nodes) {
      return function(links) {
        return function() {
          if (force2.initialize) {
            force2.initialize(nodes, Math.random);
          }
          const linksCopy = links.map((l2) => ({ ...l2 }));
          force2.links(linksCopy);
          return force2;
        };
      };
    };
  }
  function applyForce_(force2) {
    return function(alpha) {
      return function() {
        force2(alpha);
      };
    };
  }
  function integratePositions_(nodes) {
    return function(velocityDecay) {
      return function() {
        for (let i2 = 0; i2 < nodes.length; i2++) {
          const node = nodes[i2];
          if (node.fx != null) {
            node.x = node.fx;
            node.vx = 0;
          } else {
            node.vx *= velocityDecay;
            node.x += node.vx;
          }
          if (node.fy != null) {
            node.y = node.fy;
            node.vy = 0;
          } else {
            node.vy *= velocityDecay;
            node.y += node.vy;
          }
        }
      };
    };
  }
  function decayAlpha_(alpha) {
    return function(alphaMin) {
      return function(alphaDecay) {
        return function(alphaTarget) {
          const newAlpha = alpha + (alphaTarget - alpha) * alphaDecay;
          return newAlpha < alphaMin ? 0 : newAlpha;
        };
      };
    };
  }
  function initializeNodes_(nodes) {
    return function() {
      for (let i2 = 0; i2 < nodes.length; i2++) {
        const node = nodes[i2];
        node.index = i2;
        if (node.vx === void 0) node.vx = 0;
        if (node.vy === void 0) node.vy = 0;
        if (node.x === void 0) node.x = Math.random() * 100 - 50;
        if (node.y === void 0) node.y = Math.random() * 100 - 50;
      }
    };
  }
  var USE_SETTIMEOUT = true;
  var FRAME_TIME = 8;
  function requestAnimationFrame_(callback) {
    return function() {
      let id4;
      const handler3 = function(timestamp) {
        callback(timestamp || performance.now())();
      };
      if (USE_SETTIMEOUT) {
        id4 = setTimeout(handler3, FRAME_TIME);
        return function() {
          clearTimeout(id4);
        };
      } else {
        id4 = requestAnimationFrame(handler3);
        return function() {
          cancelAnimationFrame(id4);
        };
      }
    };
  }
  function newCancelRef() {
    return function() {
      return { cancel: function() {
      } };
    };
  }
  function setCancelRef(ref2) {
    return function(cancel) {
      return function() {
        ref2.cancel = cancel;
      };
    };
  }
  function getCancelRef(ref2) {
    return function() {
      return ref2.cancel;
    };
  }

  // output/Hylograph.ForceEngine.Core/index.js
  var bind2 = /* @__PURE__ */ bind(bindEffect);
  var when2 = /* @__PURE__ */ when(applicativeEffect);
  var identity7 = /* @__PURE__ */ identity(categoryFn);
  var for_2 = /* @__PURE__ */ for_(applicativeEffect)(foldableArray);
  var startAnimation = function(onFrame) {
    return function __do7() {
      var cancelRef = newCancelRef();
      var loop2 = function(timestamp) {
        return function __do8() {
          var $$continue = onFrame(timestamp)();
          return when2($$continue)(function __do9() {
            var cancel2 = requestAnimationFrame_(loop2)();
            return setCancelRef(cancelRef)(cancel2)();
          })();
        };
      };
      var cancel = requestAnimationFrame_(loop2)();
      setCancelRef(cancelRef)(cancel)();
      return bind2(getCancelRef(cancelRef))(identity7);
    };
  };
  var integratePositions = integratePositions_;
  var initializeNodes = initializeNodes_;
  var initializeLinkForce = initializeLinkForce_;
  var initializeForce = initializeForce_;
  var decayAlpha = decayAlpha_;
  var createRadialFiltered = createRadialFiltered_;
  var createRadial = createRadial_;
  var createManyBodyFiltered = createManyBodyFiltered_;
  var createManyBody = createManyBody_;
  var createLink = createLink_;
  var createForceYGrid = createForceYGrid_;
  var createForceYDynamic = createForceYDynamic_;
  var createForceY = createForceY_;
  var createForceXGrid = createForceXGrid_;
  var createForceXDynamic = createForceXDynamic_;
  var createForceX = createForceX_;
  var createCollideDynamic = createCollideDynamic_;
  var createCollide = createCollide_;
  var createCenter = createCenter_;
  var applyForce = applyForce_;
  var applyForces = function(forces) {
    return function(alpha) {
      return for_2(forces)(function(f) {
        return applyForce(f)(alpha);
      });
    };
  };

  // output/Hylograph.ForceEngine.Setup/index.js
  var map12 = /* @__PURE__ */ map(functorArray);
  var $$delete4 = /* @__PURE__ */ $$delete(ordString);
  var pure3 = /* @__PURE__ */ pure(applicativeEffect);
  var fromFoldable5 = /* @__PURE__ */ fromFoldable4(foldableArray);
  var fromFoldable1 = /* @__PURE__ */ fromFoldable5(ordInt);
  var member3 = /* @__PURE__ */ member2(ordInt);
  var fromFoldable22 = /* @__PURE__ */ fromFoldable2(ordInt)(foldableArray);
  var lookup2 = /* @__PURE__ */ lookup(ordInt);
  var ordTuple2 = /* @__PURE__ */ ordTuple(ordInt)(ordInt);
  var fromFoldable32 = /* @__PURE__ */ fromFoldable5(ordTuple2);
  var difference4 = /* @__PURE__ */ difference2(ordTuple2);
  var member1 = /* @__PURE__ */ member2(ordTuple2);
  var intersection3 = /* @__PURE__ */ intersection2(ordTuple2);
  var fromFoldable42 = /* @__PURE__ */ fromFoldable5(ordString);
  var fromFoldable52 = /* @__PURE__ */ fromFoldable4(foldableSet)(ordString);
  var difference1 = /* @__PURE__ */ difference2(ordString);
  var for_3 = /* @__PURE__ */ for_(applicativeEffect)(foldableArray);
  var toUnfoldable5 = /* @__PURE__ */ toUnfoldable3(unfoldableArray);
  var insert4 = /* @__PURE__ */ insert(ordString);
  var Static = /* @__PURE__ */ (function() {
    function Static2(value0) {
      this.value0 = value0;
    }
    ;
    Static2.create = function(value0) {
      return new Static2(value0);
    };
    return Static2;
  })();
  var Dynamic = /* @__PURE__ */ (function() {
    function Dynamic2(value0) {
      this.value0 = value0;
    }
    ;
    Dynamic2.create = function(value0) {
      return new Dynamic2(value0);
    };
    return Dynamic2;
  })();
  var ForceManyBody = /* @__PURE__ */ (function() {
    function ForceManyBody2() {
    }
    ;
    ForceManyBody2.value = new ForceManyBody2();
    return ForceManyBody2;
  })();
  var ForceCollide = /* @__PURE__ */ (function() {
    function ForceCollide3() {
    }
    ;
    ForceCollide3.value = new ForceCollide3();
    return ForceCollide3;
  })();
  var ForceLink = /* @__PURE__ */ (function() {
    function ForceLink3() {
    }
    ;
    ForceLink3.value = new ForceLink3();
    return ForceLink3;
  })();
  var ForceCenter = /* @__PURE__ */ (function() {
    function ForceCenter2() {
    }
    ;
    ForceCenter2.value = new ForceCenter2();
    return ForceCenter2;
  })();
  var ForcePositionX = /* @__PURE__ */ (function() {
    function ForcePositionX2() {
    }
    ;
    ForcePositionX2.value = new ForcePositionX2();
    return ForcePositionX2;
  })();
  var ForcePositionY = /* @__PURE__ */ (function() {
    function ForcePositionY2() {
    }
    ;
    ForcePositionY2.value = new ForcePositionY2();
    return ForcePositionY2;
  })();
  var ForceRadial = /* @__PURE__ */ (function() {
    function ForceRadial2() {
    }
    ;
    ForceRadial2.value = new ForceRadial2();
    return ForceRadial2;
  })();
  var withY = function(v2) {
    return function(fc) {
      return {
        name: fc.name,
        forceType: fc.forceType,
        strength: fc.strength,
        radius: fc.radius,
        x: fc.x,
        distance: fc.distance,
        theta: fc.theta,
        distanceMin: fc.distanceMin,
        distanceMax: fc.distanceMax,
        iterations: fc.iterations,
        filter: fc.filter,
        y: v2
      };
    };
  };
  var withX = function(v2) {
    return function(fc) {
      return {
        name: fc.name,
        forceType: fc.forceType,
        strength: fc.strength,
        radius: fc.radius,
        y: fc.y,
        distance: fc.distance,
        theta: fc.theta,
        distanceMin: fc.distanceMin,
        distanceMax: fc.distanceMax,
        iterations: fc.iterations,
        filter: fc.filter,
        x: v2
      };
    };
  };
  var withStrength = function(v2) {
    return function(fc) {
      return {
        name: fc.name,
        forceType: fc.forceType,
        radius: fc.radius,
        x: fc.x,
        y: fc.y,
        distance: fc.distance,
        theta: fc.theta,
        distanceMin: fc.distanceMin,
        distanceMax: fc.distanceMax,
        iterations: fc.iterations,
        filter: fc.filter,
        strength: v2
      };
    };
  };
  var withRadius = function(v2) {
    return function(fc) {
      return {
        name: fc.name,
        forceType: fc.forceType,
        strength: fc.strength,
        x: fc.x,
        y: fc.y,
        distance: fc.distance,
        theta: fc.theta,
        distanceMin: fc.distanceMin,
        distanceMax: fc.distanceMax,
        iterations: fc.iterations,
        filter: fc.filter,
        radius: v2
      };
    };
  };
  var withDistance = function(v2) {
    return function(fc) {
      return {
        name: fc.name,
        forceType: fc.forceType,
        strength: fc.strength,
        radius: fc.radius,
        x: fc.x,
        y: fc.y,
        theta: fc.theta,
        distanceMin: fc.distanceMin,
        distanceMax: fc.distanceMax,
        iterations: fc.iterations,
        filter: fc.filter,
        distance: v2
      };
    };
  };
  var valueToNumber = function(v2) {
    if (v2 instanceof Static) {
      return v2.value0;
    }
    ;
    if (v2 instanceof Dynamic) {
      return 0;
    }
    ;
    throw new Error("Failed pattern match at Hylograph.ForceEngine.Setup (line 127, column 1 - line 127, column 58): " + [v2.constructor.name]);
  };
  var $$static = /* @__PURE__ */ (function() {
    return Static.create;
  })();
  var removeForce = function(name16) {
    return function(s2) {
      return {
        name: s2.name,
        params: s2.params,
        forces: filter(function(fc) {
          return fc.name !== name16;
        })(s2.forces)
      };
    };
  };
  var mergeSimulationState = function(current) {
    return function(desired) {
      var $74 = {};
      for (var $75 in desired) {
        if ({}.hasOwnProperty.call(desired, $75)) {
          $74[$75] = desired[$75];
        }
        ;
      }
      ;
      $74.x = current.x;
      $74.y = current.y;
      $74.vx = current.vx;
      $74.vy = current.vy;
      $74.fx = current.fx;
      $74.fy = current.fy;
      return $74;
    };
  };
  var getParams = function(s2) {
    return s2.params;
  };
  var getForces = function(s2) {
    return s2.forces;
  };
  var eqForceType = {
    eq: function(x7) {
      return function(y7) {
        if (x7 instanceof ForceManyBody && y7 instanceof ForceManyBody) {
          return true;
        }
        ;
        if (x7 instanceof ForceCollide && y7 instanceof ForceCollide) {
          return true;
        }
        ;
        if (x7 instanceof ForceLink && y7 instanceof ForceLink) {
          return true;
        }
        ;
        if (x7 instanceof ForceCenter && y7 instanceof ForceCenter) {
          return true;
        }
        ;
        if (x7 instanceof ForcePositionX && y7 instanceof ForcePositionX) {
          return true;
        }
        ;
        if (x7 instanceof ForcePositionY && y7 instanceof ForcePositionY) {
          return true;
        }
        ;
        if (x7 instanceof ForceRadial && y7 instanceof ForceRadial) {
          return true;
        }
        ;
        return false;
      };
    }
  };
  var defaultParams = {
    alpha: 1,
    alphaMin: 1e-3,
    alphaDecay: 0.01,
    alphaTarget: 0,
    velocityDecay: 0.4
  };
  var setup = function(name16) {
    return function(forces) {
      return {
        name: name16,
        forces,
        params: defaultParams
      };
    };
  };
  var defaultForceConfig = function(name16) {
    return function(forceType) {
      return {
        name: name16,
        forceType,
        strength: new Static(1),
        radius: new Static(1),
        x: new Static(0),
        y: new Static(0),
        distance: new Static(30),
        theta: 0.9,
        distanceMin: 1,
        distanceMax: 1e10,
        iterations: 1,
        filter: Nothing.value
      };
    };
  };
  var link = function(name16) {
    return defaultForceConfig(name16)(ForceLink.value);
  };
  var manyBody = function(name16) {
    var v2 = defaultForceConfig(name16)(ForceManyBody.value);
    return {
      name: v2.name,
      forceType: v2.forceType,
      radius: v2.radius,
      x: v2.x,
      y: v2.y,
      distance: v2.distance,
      theta: v2.theta,
      distanceMin: v2.distanceMin,
      distanceMax: v2.distanceMax,
      iterations: v2.iterations,
      filter: v2.filter,
      strength: new Static(-30)
    };
  };
  var positionX = function(name16) {
    var v2 = defaultForceConfig(name16)(ForcePositionX.value);
    return {
      name: v2.name,
      forceType: v2.forceType,
      radius: v2.radius,
      y: v2.y,
      distance: v2.distance,
      theta: v2.theta,
      distanceMin: v2.distanceMin,
      distanceMax: v2.distanceMax,
      iterations: v2.iterations,
      filter: v2.filter,
      strength: new Static(0.1),
      x: new Static(0)
    };
  };
  var positionY = function(name16) {
    var v2 = defaultForceConfig(name16)(ForcePositionY.value);
    return {
      name: v2.name,
      forceType: v2.forceType,
      radius: v2.radius,
      x: v2.x,
      distance: v2.distance,
      theta: v2.theta,
      distanceMin: v2.distanceMin,
      distanceMax: v2.distanceMax,
      iterations: v2.iterations,
      filter: v2.filter,
      strength: new Static(0.1),
      y: new Static(0)
    };
  };
  var createForceHandle = function(fc) {
    return pure3((function() {
      if (fc.forceType instanceof ForceManyBody) {
        if (fc.filter instanceof Just) {
          return createManyBodyFiltered({
            strength: valueToNumber(fc.strength),
            theta: fc.theta,
            distanceMin: fc.distanceMin,
            distanceMax: fc.distanceMax,
            filter: fc.filter.value0
          });
        }
        ;
        if (fc.filter instanceof Nothing) {
          return createManyBody({
            strength: valueToNumber(fc.strength),
            theta: fc.theta,
            distanceMin: fc.distanceMin,
            distanceMax: fc.distanceMax
          });
        }
        ;
        throw new Error("Failed pattern match at Hylograph.ForceEngine.Setup (line 439, column 20 - line 454, column 8): " + [fc.filter.constructor.name]);
      }
      ;
      if (fc.forceType instanceof ForceCollide) {
        if (fc.radius instanceof Static) {
          return createCollide({
            radius: fc.radius.value0,
            strength: valueToNumber(fc.strength),
            iterations: fc.iterations
          });
        }
        ;
        if (fc.radius instanceof Dynamic) {
          return createCollideDynamic({
            radiusAccessor: fc.radius.value0,
            strength: valueToNumber(fc.strength),
            iterations: fc.iterations
          });
        }
        ;
        throw new Error("Failed pattern match at Hylograph.ForceEngine.Setup (line 456, column 19 - line 466, column 8): " + [fc.radius.constructor.name]);
      }
      ;
      if (fc.forceType instanceof ForceLink) {
        return createLink({
          distance: valueToNumber(fc.distance),
          strength: valueToNumber(fc.strength),
          iterations: fc.iterations
        });
      }
      ;
      if (fc.forceType instanceof ForceCenter) {
        return createCenter({
          x: valueToNumber(fc.x),
          y: valueToNumber(fc.y),
          strength: valueToNumber(fc.strength)
        });
      }
      ;
      if (fc.forceType instanceof ForcePositionX) {
        if (fc.x instanceof Static) {
          return createForceX({
            x: fc.x.value0,
            strength: valueToNumber(fc.strength)
          });
        }
        ;
        if (fc.x instanceof Dynamic) {
          return createForceXDynamic({
            xAccessor: fc.x.value0,
            strength: valueToNumber(fc.strength)
          });
        }
        ;
        throw new Error("Failed pattern match at Hylograph.ForceEngine.Setup (line 482, column 21 - line 490, column 8): " + [fc.x.constructor.name]);
      }
      ;
      if (fc.forceType instanceof ForcePositionY) {
        if (fc.y instanceof Static) {
          return createForceY({
            y: fc.y.value0,
            strength: valueToNumber(fc.strength)
          });
        }
        ;
        if (fc.y instanceof Dynamic) {
          return createForceYDynamic({
            yAccessor: fc.y.value0,
            strength: valueToNumber(fc.strength)
          });
        }
        ;
        throw new Error("Failed pattern match at Hylograph.ForceEngine.Setup (line 492, column 21 - line 500, column 8): " + [fc.y.constructor.name]);
      }
      ;
      if (fc.forceType instanceof ForceRadial) {
        if (fc.filter instanceof Just) {
          return createRadialFiltered({
            radius: valueToNumber(fc.radius),
            x: valueToNumber(fc.x),
            y: valueToNumber(fc.y),
            strength: valueToNumber(fc.strength),
            filter: fc.filter.value0
          });
        }
        ;
        if (fc.filter instanceof Nothing) {
          return createRadial({
            radius: valueToNumber(fc.radius),
            x: valueToNumber(fc.x),
            y: valueToNumber(fc.y),
            strength: valueToNumber(fc.strength)
          });
        }
        ;
        throw new Error("Failed pattern match at Hylograph.ForceEngine.Setup (line 502, column 18 - line 517, column 8): " + [fc.filter.constructor.name]);
      }
      ;
      throw new Error("Failed pattern match at Hylograph.ForceEngine.Setup (line 438, column 31 - line 517, column 8): " + [fc.forceType.constructor.name]);
    })());
  };
  var computeNodeGUP = function(currentNodes) {
    return function(desiredNodes) {
      var desiredIds = fromFoldable1(map12(function(v2) {
        return v2.id;
      })(desiredNodes));
      var exited = filter(function(n) {
        return !member3(n.id)(desiredIds);
      })(currentNodes);
      var currentById = fromFoldable22(map12(function(n) {
        return new Tuple(n.id, n);
      })(currentNodes));
      var processDesired = function(desired) {
        var v2 = lookup2(desired.id)(currentById);
        if (v2 instanceof Nothing) {
          return {
            node: desired,
            isEnter: true
          };
        }
        ;
        if (v2 instanceof Just) {
          return {
            node: mergeSimulationState(v2.value0)(desired),
            isEnter: false
          };
        }
        ;
        throw new Error("Failed pattern match at Hylograph.ForceEngine.Setup (line 680, column 7 - line 686, column 73): " + [v2.constructor.name]);
      };
      var processed = map12(processDesired)(desiredNodes);
      var entered = map12(function(v2) {
        return v2.node;
      })(filter(function(v2) {
        return v2.isEnter;
      })(processed));
      var merged = map12(function(v2) {
        return v2.node;
      })(processed);
      var updated = map12(function(v2) {
        return v2.node;
      })(filter(function($97) {
        return !(function(v2) {
          return v2.isEnter;
        })($97);
      })(processed));
      return {
        entered,
        updated,
        exited,
        merged
      };
    };
  };
  var computeLinkGUP = function(currentLinks) {
    return function(desiredLinks) {
      var linkKey2 = function(l2) {
        return new Tuple(l2.source, l2.target);
      };
      var desiredKeys = fromFoldable32(map12(linkKey2)(desiredLinks));
      var currentKeys = fromFoldable32(map12(linkKey2)(currentLinks));
      var enterKeys = difference4(desiredKeys)(currentKeys);
      var entered = filter(function(l2) {
        return member1(linkKey2(l2))(enterKeys);
      })(desiredLinks);
      var exitKeys = difference4(currentKeys)(desiredKeys);
      var exited = filter(function(l2) {
        return member1(linkKey2(l2))(exitKeys);
      })(currentLinks);
      var updateKeys = intersection3(desiredKeys)(currentKeys);
      var updated = filter(function(l2) {
        return member1(linkKey2(l2))(updateKeys);
      })(desiredLinks);
      return {
        entered,
        updated,
        exited
      };
    };
  };
  var collide = function(name16) {
    return defaultForceConfig(name16)(ForceCollide.value);
  };
  var applySetup = function(setupConfig) {
    return function(sim) {
      return function __do7() {
        var nodes = read(sim.nodes)();
        var links = read(sim.links)();
        var currentForces = read(sim.forces)();
        var desiredNames = fromFoldable42(map12(function(v2) {
          return v2.name;
        })(setupConfig.forces));
        var currentNames = fromFoldable52(keys2(currentForces));
        var toRemove = difference1(currentNames)(desiredNames);
        for_3(toUnfoldable5(toRemove))(function(name16) {
          return modify_2($$delete4(name16))(sim.forces);
        })();
        for_3(setupConfig.forces)(function(fc) {
          return function __do8() {
            var handle = createForceHandle(fc)();
            (function() {
              if (fc.forceType instanceof ForceLink) {
                return initializeLinkForce(handle)(nodes)(links)();
              }
              ;
              return initializeForce(handle)(nodes)();
            })();
            return modify_2(insert4(fc.name)(handle))(sim.forces)();
          };
        })();
        return write(setupConfig.params.alpha)(sim.alpha)();
      };
    };
  };
  var applySetupWithData = function(setupConfig) {
    return function(desiredNodes) {
      return function(desiredLinks) {
        return function(sim) {
          return function __do7() {
            var currentNodes = read(sim.nodes)();
            var currentLinks = read(sim.links)();
            var nodeResult = computeNodeGUP(currentNodes)(desiredNodes);
            write(nodeResult.merged)(sim.nodes)();
            initializeNodes(nodeResult.merged)();
            var linkResult = computeLinkGUP(currentLinks)(desiredLinks);
            write(desiredLinks)(sim.links)();
            applySetup(setupConfig)(sim)();
            return {
              nodes: {
                entered: nodeResult.entered,
                updated: nodeResult.updated,
                exited: nodeResult.exited
              },
              links: {
                entered: linkResult.entered,
                updated: linkResult.updated,
                exited: linkResult.exited
              }
            };
          };
        };
      };
    };
  };
  var addForce = function(fc) {
    return function(s2) {
      return {
        name: s2.name,
        params: s2.params,
        forces: snoc(s2.forces)(fc)
      };
    };
  };

  // output/Hylograph.Internal.Behavior.Types/index.js
  var OnHover = /* @__PURE__ */ (function() {
    function OnHover2() {
    }
    ;
    OnHover2.value = new OnHover2();
    return OnHover2;
  })();
  var WhenPrimary = /* @__PURE__ */ (function() {
    function WhenPrimary2() {
    }
    ;
    WhenPrimary2.value = new WhenPrimary2();
    return WhenPrimary2;
  })();
  var WhenRelated = /* @__PURE__ */ (function() {
    function WhenRelated2() {
    }
    ;
    WhenRelated2.value = new WhenRelated2();
    return WhenRelated2;
  })();
  var ScaleExtent = /* @__PURE__ */ (function() {
    function ScaleExtent2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    ScaleExtent2.create = function(value0) {
      return function(value1) {
        return new ScaleExtent2(value0, value1);
      };
    };
    return ScaleExtent2;
  })();
  var Primary = /* @__PURE__ */ (function() {
    function Primary3() {
    }
    ;
    Primary3.value = new Primary3();
    return Primary3;
  })();
  var Related = /* @__PURE__ */ (function() {
    function Related3() {
    }
    ;
    Related3.value = new Related3();
    return Related3;
  })();
  var Upstream = /* @__PURE__ */ (function() {
    function Upstream2() {
    }
    ;
    Upstream2.value = new Upstream2();
    return Upstream2;
  })();
  var Downstream = /* @__PURE__ */ (function() {
    function Downstream2() {
    }
    ;
    Downstream2.value = new Downstream2();
    return Downstream2;
  })();
  var Dimmed = /* @__PURE__ */ (function() {
    function Dimmed3() {
    }
    ;
    Dimmed3.value = new Dimmed3();
    return Dimmed3;
  })();
  var Neutral = /* @__PURE__ */ (function() {
    function Neutral3() {
    }
    ;
    Neutral3.value = new Neutral3();
    return Neutral3;
  })();
  var SimpleDrag = /* @__PURE__ */ (function() {
    function SimpleDrag2() {
    }
    ;
    SimpleDrag2.value = new SimpleDrag2();
    return SimpleDrag2;
  })();
  var SimulationDrag = /* @__PURE__ */ (function() {
    function SimulationDrag2(value0) {
      this.value0 = value0;
    }
    ;
    SimulationDrag2.create = function(value0) {
      return new SimulationDrag2(value0);
    };
    return SimulationDrag2;
  })();
  var SimulationDragNested = /* @__PURE__ */ (function() {
    function SimulationDragNested2(value0) {
      this.value0 = value0;
    }
    ;
    SimulationDragNested2.create = function(value0) {
      return new SimulationDragNested2(value0);
    };
    return SimulationDragNested2;
  })();
  var Zoom = /* @__PURE__ */ (function() {
    function Zoom2(value0) {
      this.value0 = value0;
    }
    ;
    Zoom2.create = function(value0) {
      return new Zoom2(value0);
    };
    return Zoom2;
  })();
  var Drag = /* @__PURE__ */ (function() {
    function Drag2(value0) {
      this.value0 = value0;
    }
    ;
    Drag2.create = function(value0) {
      return new Drag2(value0);
    };
    return Drag2;
  })();
  var Click = /* @__PURE__ */ (function() {
    function Click2(value0) {
      this.value0 = value0;
    }
    ;
    Click2.create = function(value0) {
      return new Click2(value0);
    };
    return Click2;
  })();
  var ClickWithDatum = /* @__PURE__ */ (function() {
    function ClickWithDatum2(value0) {
      this.value0 = value0;
    }
    ;
    ClickWithDatum2.create = function(value0) {
      return new ClickWithDatum2(value0);
    };
    return ClickWithDatum2;
  })();
  var MouseEnter = /* @__PURE__ */ (function() {
    function MouseEnter2(value0) {
      this.value0 = value0;
    }
    ;
    MouseEnter2.create = function(value0) {
      return new MouseEnter2(value0);
    };
    return MouseEnter2;
  })();
  var MouseLeave = /* @__PURE__ */ (function() {
    function MouseLeave2(value0) {
      this.value0 = value0;
    }
    ;
    MouseLeave2.create = function(value0) {
      return new MouseLeave2(value0);
    };
    return MouseLeave2;
  })();
  var Highlight = /* @__PURE__ */ (function() {
    function Highlight2(value0) {
      this.value0 = value0;
    }
    ;
    Highlight2.create = function(value0) {
      return new Highlight2(value0);
    };
    return Highlight2;
  })();
  var CoordinatedHighlight = /* @__PURE__ */ (function() {
    function CoordinatedHighlight2(value0) {
      this.value0 = value0;
    }
    ;
    CoordinatedHighlight2.create = function(value0) {
      return new CoordinatedHighlight2(value0);
    };
    return CoordinatedHighlight2;
  })();
  var MouseMoveWithInfo = /* @__PURE__ */ (function() {
    function MouseMoveWithInfo2(value0) {
      this.value0 = value0;
    }
    ;
    MouseMoveWithInfo2.create = function(value0) {
      return new MouseMoveWithInfo2(value0);
    };
    return MouseMoveWithInfo2;
  })();
  var MouseEnterWithInfo = /* @__PURE__ */ (function() {
    function MouseEnterWithInfo2(value0) {
      this.value0 = value0;
    }
    ;
    MouseEnterWithInfo2.create = function(value0) {
      return new MouseEnterWithInfo2(value0);
    };
    return MouseEnterWithInfo2;
  })();
  var MouseLeaveWithInfo = /* @__PURE__ */ (function() {
    function MouseLeaveWithInfo2(value0) {
      this.value0 = value0;
    }
    ;
    MouseLeaveWithInfo2.create = function(value0) {
      return new MouseLeaveWithInfo2(value0);
    };
    return MouseLeaveWithInfo2;
  })();
  var MouseDown = /* @__PURE__ */ (function() {
    function MouseDown2(value0) {
      this.value0 = value0;
    }
    ;
    MouseDown2.create = function(value0) {
      return new MouseDown2(value0);
    };
    return MouseDown2;
  })();
  var MouseDownWithInfo = /* @__PURE__ */ (function() {
    function MouseDownWithInfo2(value0) {
      this.value0 = value0;
    }
    ;
    MouseDownWithInfo2.create = function(value0) {
      return new MouseDownWithInfo2(value0);
    };
    return MouseDownWithInfo2;
  })();
  var simulationDragNested = /* @__PURE__ */ (function() {
    return SimulationDragNested.create;
  })();
  var defaultZoom = function(scaleExtent) {
    return function(targetSelector) {
      return {
        scaleExtent,
        targetSelector
      };
    };
  };

  // output/Hylograph.HATS/index.js
  var show5 = /* @__PURE__ */ show(showNumber);
  var append5 = /* @__PURE__ */ append(semigroupArray);
  var DepthFirst = /* @__PURE__ */ (function() {
    function DepthFirst2() {
    }
    ;
    DepthFirst2.value = new DepthFirst2();
    return DepthFirst2;
  })();
  var BreadthFirst = /* @__PURE__ */ (function() {
    function BreadthFirst2() {
    }
    ;
    BreadthFirst2.value = new BreadthFirst2();
    return BreadthFirst2;
  })();
  var ThunkedMouseEnter = /* @__PURE__ */ (function() {
    function ThunkedMouseEnter2(value0) {
      this.value0 = value0;
    }
    ;
    ThunkedMouseEnter2.create = function(value0) {
      return new ThunkedMouseEnter2(value0);
    };
    return ThunkedMouseEnter2;
  })();
  var ThunkedMouseLeave = /* @__PURE__ */ (function() {
    function ThunkedMouseLeave2(value0) {
      this.value0 = value0;
    }
    ;
    ThunkedMouseLeave2.create = function(value0) {
      return new ThunkedMouseLeave2(value0);
    };
    return ThunkedMouseLeave2;
  })();
  var ThunkedClick = /* @__PURE__ */ (function() {
    function ThunkedClick2(value0) {
      this.value0 = value0;
    }
    ;
    ThunkedClick2.create = function(value0) {
      return new ThunkedClick2(value0);
    };
    return ThunkedClick2;
  })();
  var ThunkedDrag = /* @__PURE__ */ (function() {
    function ThunkedDrag2(value0) {
      this.value0 = value0;
    }
    ;
    ThunkedDrag2.create = function(value0) {
      return new ThunkedDrag2(value0);
    };
    return ThunkedDrag2;
  })();
  var ThunkedZoom = /* @__PURE__ */ (function() {
    function ThunkedZoom2(value0) {
      this.value0 = value0;
    }
    ;
    ThunkedZoom2.create = function(value0) {
      return new ThunkedZoom2(value0);
    };
    return ThunkedZoom2;
  })();
  var ThunkedCoordinatedHighlight = /* @__PURE__ */ (function() {
    function ThunkedCoordinatedHighlight2(value0) {
      this.value0 = value0;
    }
    ;
    ThunkedCoordinatedHighlight2.create = function(value0) {
      return new ThunkedCoordinatedHighlight2(value0);
    };
    return ThunkedCoordinatedHighlight2;
  })();
  var ThunkedCoordinatedInteraction = /* @__PURE__ */ (function() {
    function ThunkedCoordinatedInteraction2(value0) {
      this.value0 = value0;
    }
    ;
    ThunkedCoordinatedInteraction2.create = function(value0) {
      return new ThunkedCoordinatedInteraction2(value0);
    };
    return ThunkedCoordinatedInteraction2;
  })();
  var ThunkedBrush = /* @__PURE__ */ (function() {
    function ThunkedBrush2(value0) {
      this.value0 = value0;
    }
    ;
    ThunkedBrush2.create = function(value0) {
      return new ThunkedBrush2(value0);
    };
    return ThunkedBrush2;
  })();
  var FromArray = /* @__PURE__ */ (function() {
    function FromArray2(value0) {
      this.value0 = value0;
    }
    ;
    FromArray2.create = function(value0) {
      return new FromArray2(value0);
    };
    return FromArray2;
  })();
  var FromTree = /* @__PURE__ */ (function() {
    function FromTree2(value0) {
      this.value0 = value0;
    }
    ;
    FromTree2.create = function(value0) {
      return new FromTree2(value0);
    };
    return FromTree2;
  })();
  var WithContext = /* @__PURE__ */ (function() {
    function WithContext2(value0) {
      this.value0 = value0;
    }
    ;
    WithContext2.create = function(value0) {
      return new WithContext2(value0);
    };
    return WithContext2;
  })();
  var StaticAttr2 = /* @__PURE__ */ (function() {
    function StaticAttr3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    StaticAttr3.create = function(value0) {
      return function(value1) {
        return new StaticAttr3(value0, value1);
      };
    };
    return StaticAttr3;
  })();
  var ThunkedAttr = /* @__PURE__ */ (function() {
    function ThunkedAttr2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    ThunkedAttr2.create = function(value0) {
      return function(value1) {
        return new ThunkedAttr2(value0, value1);
      };
    };
    return ThunkedAttr2;
  })();
  var Siblings = /* @__PURE__ */ (function() {
    function Siblings2() {
    }
    ;
    Siblings2.value = new Siblings2();
    return Siblings2;
  })();
  var Elem = /* @__PURE__ */ (function() {
    function Elem3(value0) {
      this.value0 = value0;
    }
    ;
    Elem3.create = function(value0) {
      return new Elem3(value0);
    };
    return Elem3;
  })();
  var MkFold = /* @__PURE__ */ (function() {
    function MkFold2(value0) {
      this.value0 = value0;
    }
    ;
    MkFold2.create = function(value0) {
      return new MkFold2(value0);
    };
    return MkFold2;
  })();
  var Empty = /* @__PURE__ */ (function() {
    function Empty3() {
    }
    ;
    Empty3.value = new Empty3();
    return Empty3;
  })();
  var staticStr = function(name16) {
    return function(value18) {
      return new StaticAttr2(name16, value18);
    };
  };
  var staticNum = function(name16) {
    return function(value18) {
      return new StaticAttr2(name16, show5(value18));
    };
  };
  var runSomeFold = function(v2) {
    return function(k) {
      return v2(k);
    };
  };
  var onZoom = /* @__PURE__ */ (function() {
    return ThunkedZoom.create;
  })();
  var onDrag = /* @__PURE__ */ (function() {
    return ThunkedDrag.create;
  })();
  var mkSomeFold = function(spec) {
    return function(k) {
      return k(spec);
    };
  };
  var withBehaviors = function(bs) {
    return function(v2) {
      if (v2 instanceof Elem) {
        return new Elem({
          elemType: v2.value0.elemType,
          attrs: v2.value0.attrs,
          children: v2.value0.children,
          behaviors: append5(v2.value0.behaviors)(bs)
        });
      }
      ;
      if (v2 instanceof MkFold) {
        return runSomeFold(v2.value0)(function(spec) {
          return new MkFold(mkSomeFold({
            name: spec.name,
            elementType: spec.elementType,
            enumerate: spec.enumerate,
            assemble: spec.assemble,
            keyFn: spec.keyFn,
            gup: spec.gup,
            template: function(datum) {
              return withBehaviors(bs)(spec.template(datum));
            }
          }));
        });
      }
      ;
      if (v2 instanceof Empty) {
        return Empty.value;
      }
      ;
      throw new Error("Failed pattern match at Hylograph.HATS (line 489, column 20 - line 494, column 17): " + [v2.constructor.name]);
    };
  };
  var forEachWithGUP = function(name16) {
    return function(elementType) {
      return function(items2) {
        return function(keyFn) {
          return function(template) {
            return function(gupSpec) {
              return new MkFold(mkSomeFold({
                name: name16,
                elementType,
                enumerate: new FromArray(items2),
                assemble: Siblings.value,
                keyFn,
                template,
                gup: new Just(gupSpec)
              }));
            };
          };
        };
      };
    };
  };
  var forEach = function(name16) {
    return function(elementType) {
      return function(items2) {
        return function(keyFn) {
          return function(template) {
            return new MkFold(mkSomeFold({
              name: name16,
              elementType,
              enumerate: new FromArray(items2),
              assemble: Siblings.value,
              keyFn,
              template,
              gup: Nothing.value
            }));
          };
        };
      };
    };
  };
  var elem4 = function(elemType) {
    return function(attrs) {
      return function(children2) {
        return new Elem({
          elemType,
          attrs,
          children: children2,
          behaviors: []
        });
      };
    };
  };

  // output/Hylograph.HATS.Friendly/index.js
  var show6 = /* @__PURE__ */ show(showNumber);
  var y22 = /* @__PURE__ */ staticNum("y2");
  var y1 = /* @__PURE__ */ staticNum("y1");
  var y4 = /* @__PURE__ */ staticNum("y");
  var x22 = /* @__PURE__ */ staticNum("x2");
  var x1 = /* @__PURE__ */ staticNum("x1");
  var x4 = /* @__PURE__ */ staticNum("x");
  var width2 = /* @__PURE__ */ staticNum("width");
  var viewBox2 = function(minX) {
    return function(minY) {
      return function(w) {
        return function(h7) {
          return staticStr("viewBox")(show6(minX) + (" " + (show6(minY) + (" " + (show6(w) + (" " + show6(h7)))))));
        };
      };
    };
  };
  var textAnchor2 = /* @__PURE__ */ staticStr("text-anchor");
  var style = /* @__PURE__ */ staticStr("style");
  var strokeWidth2 = /* @__PURE__ */ staticNum("stroke-width");
  var stroke2 = /* @__PURE__ */ staticStr("stroke");
  var r2 = /* @__PURE__ */ staticNum("r");
  var preserveAspectRatio = /* @__PURE__ */ staticStr("preserveAspectRatio");
  var opacity = /* @__PURE__ */ staticStr("opacity");
  var height2 = /* @__PURE__ */ staticNum("height");
  var fontSize2 = /* @__PURE__ */ staticStr("font-size");
  var fill2 = /* @__PURE__ */ staticStr("fill");
  var d = /* @__PURE__ */ staticStr("d");
  var cy2 = /* @__PURE__ */ staticNum("cy");
  var cx2 = /* @__PURE__ */ staticNum("cx");
  var class_ = /* @__PURE__ */ staticStr("class");
  var attr2 = staticStr;

  // output/Hylograph.Interaction.Pointer/foreign.js
  function attachSimpleDrag_(element4) {
    return () => () => {
      let isDragging = false;
      let transform7 = { x: 0, y: 0 };
      function handlePointerDown(event) {
        if (event.button !== 0) return;
        isDragging = true;
        element4.setPointerCapture(event.pointerId);
        event.preventDefault();
        event.stopPropagation();
        if (element4.parentNode) {
          element4.parentNode.appendChild(element4);
        }
        element4.style.cursor = "grabbing";
      }
      function handlePointerMove(event) {
        if (!isDragging) return;
        const svg2 = element4.ownerSVGElement;
        if (svg2) {
          const pt = svg2.createSVGPoint();
          const ctm = svg2.getScreenCTM();
          if (ctm) {
            pt.x = event.movementX;
            pt.y = event.movementY;
            const scale = ctm.a;
            transform7.x += event.movementX / scale;
            transform7.y += event.movementY / scale;
          } else {
            transform7.x += event.movementX;
            transform7.y += event.movementY;
          }
        } else {
          transform7.x += event.movementX;
          transform7.y += event.movementY;
        }
        element4.setAttribute("transform", `translate(${transform7.x},${transform7.y})`);
      }
      function handlePointerUp(event) {
        if (!isDragging) return;
        isDragging = false;
        element4.releasePointerCapture(event.pointerId);
        element4.style.cursor = "grab";
      }
      function handlePointerCancel(event) {
        if (!isDragging) return;
        isDragging = false;
        element4.releasePointerCapture(event.pointerId);
        element4.style.cursor = "grab";
      }
      function handleDragStart(event) {
        event.preventDefault();
      }
      element4.addEventListener("pointerdown", handlePointerDown);
      element4.addEventListener("pointermove", handlePointerMove);
      element4.addEventListener("pointerup", handlePointerUp);
      element4.addEventListener("pointercancel", handlePointerCancel);
      element4.addEventListener("dragstart", handleDragStart);
      element4.style.cursor = "grab";
      element4.style.touchAction = "none";
      return element4;
    };
  }
  var simulationRegistry = /* @__PURE__ */ new Map();
  function registerSimulationForPointer_(simId) {
    return (reheatFn) => () => {
      simulationRegistry.set(simId, { reheat: reheatFn });
    };
  }
  function unregisterSimulationForPointer_(simId) {
    return () => {
      simulationRegistry.delete(simId);
    };
  }
  function getSimulationReheat(simId) {
    const sim = simulationRegistry.get(simId);
    return sim ? sim.reheat : null;
  }
  function attachSimulationDragById_(element4) {
    return (simId) => () => {
      let isDragging = false;
      function handlePointerDown(event) {
        if (event.button !== 0) return;
        isDragging = true;
        element4.setPointerCapture(event.pointerId);
        event.preventDefault();
        const node = element4.__data__;
        if (!node) {
          console.warn("[PointerDrag] No datum on element");
          return;
        }
        const reheat4 = getSimulationReheat(simId);
        if (reheat4) {
          reheat4();
        } else {
          console.warn(`[PointerDrag] No simulation registered with ID: ${simId}`);
        }
        node.fx = node.x;
        node.fy = node.y;
        element4.style.cursor = "grabbing";
      }
      function handlePointerMove(event) {
        if (!isDragging) return;
        const node = element4.__data__;
        if (!node) return;
        const svg2 = element4.ownerSVGElement;
        if (svg2) {
          const pt = svg2.createSVGPoint();
          pt.x = event.clientX;
          pt.y = event.clientY;
          const parentGroup = element4.parentElement;
          const ctm = parentGroup?.getScreenCTM?.() || svg2.getScreenCTM();
          if (ctm) {
            const svgPt = pt.matrixTransform(ctm.inverse());
            node.fx = svgPt.x;
            node.fy = svgPt.y;
          }
        } else {
          node.fx = event.clientX;
          node.fy = event.clientY;
        }
      }
      function handlePointerUp(event) {
        if (!isDragging) return;
        isDragging = false;
        element4.releasePointerCapture(event.pointerId);
        const node = element4.__data__;
        if (node) {
          node.fx = null;
          node.fy = null;
        }
        element4.style.cursor = "grab";
      }
      function handleDragStart(event) {
        event.preventDefault();
      }
      element4.addEventListener("pointerdown", handlePointerDown);
      element4.addEventListener("pointermove", handlePointerMove);
      element4.addEventListener("pointerup", handlePointerUp);
      element4.addEventListener("pointercancel", handlePointerUp);
      element4.addEventListener("dragstart", handleDragStart);
      element4.style.cursor = "grab";
      element4.style.touchAction = "none";
      return element4;
    };
  }
  function attachSimulationDragNestedById_(element4) {
    return (simId) => () => {
      let isDragging = false;
      function handlePointerDown(event) {
        if (event.button !== 0) return;
        isDragging = true;
        element4.setPointerCapture(event.pointerId);
        event.preventDefault();
        const datum = element4.__data__;
        const node = datum?.node;
        if (!node) {
          console.warn("[PointerDragNested] No datum.node on element");
          return;
        }
        const reheat4 = getSimulationReheat(simId);
        if (reheat4) {
          reheat4();
        } else {
          console.warn(`[PointerDragNested] No simulation registered with ID: ${simId}`);
        }
        node.fx = node.x;
        node.fy = node.y;
        element4.style.cursor = "grabbing";
      }
      function handlePointerMove(event) {
        if (!isDragging) return;
        const datum = element4.__data__;
        const node = datum?.node;
        if (!node) return;
        const svg2 = element4.ownerSVGElement;
        if (svg2) {
          const pt = svg2.createSVGPoint();
          pt.x = event.clientX;
          pt.y = event.clientY;
          const parentGroup = element4.parentElement;
          const ctm = parentGroup?.getScreenCTM?.() || svg2.getScreenCTM();
          if (ctm) {
            const svgPt = pt.matrixTransform(ctm.inverse());
            node.fx = svgPt.x;
            node.fy = svgPt.y;
          }
        } else {
          node.fx = event.clientX;
          node.fy = event.clientY;
        }
      }
      function handlePointerUp(event) {
        if (!isDragging) return;
        isDragging = false;
        element4.releasePointerCapture(event.pointerId);
        const datum = element4.__data__;
        const node = datum?.node;
        if (node) {
          node.fx = null;
          node.fy = null;
        }
        element4.style.cursor = "grab";
      }
      function handleDragStart(event) {
        event.preventDefault();
      }
      element4.addEventListener("pointerdown", handlePointerDown);
      element4.addEventListener("pointermove", handlePointerMove);
      element4.addEventListener("pointerup", handlePointerUp);
      element4.addEventListener("pointercancel", handlePointerUp);
      element4.addEventListener("dragstart", handleDragStart);
      element4.style.cursor = "grab";
      element4.style.touchAction = "none";
      return element4;
    };
  }

  // output/Hylograph.Interaction.Zoom/foreign.js
  var ZoomTransform = class _ZoomTransform {
    constructor(k, x7, y7) {
      this.k = k;
      this.x = x7;
      this.y = y7;
    }
    /**
     * Returns a new transform scaled by k
     */
    scale(k) {
      return k === 1 ? this : new _ZoomTransform(this.k * k, this.x, this.y);
    }
    /**
     * Returns a new transform translated by (x, y) in local coordinates
     */
    translate(x7, y7) {
      return x7 === 0 && y7 === 0 ? this : new _ZoomTransform(this.k, this.x + this.k * x7, this.y + this.k * y7);
    }
    /**
     * Apply transform to a point [x, y] -> [x', y']
     */
    apply(point3) {
      return [point3[0] * this.k + this.x, point3[1] * this.k + this.y];
    }
    /**
     * Apply inverse transform to get original coordinates
     */
    applyX(x7) {
      return x7 * this.k + this.x;
    }
    applyY(y7) {
      return y7 * this.k + this.y;
    }
    /**
     * Invert: given transformed point, return original point
     */
    invert(point3) {
      return [(point3[0] - this.x) / this.k, (point3[1] - this.y) / this.k];
    }
    invertX(x7) {
      return (x7 - this.x) / this.k;
    }
    invertY(y7) {
      return (y7 - this.y) / this.k;
    }
    /**
     * Rescale a scale's domain according to this transform
     */
    rescaleX(x7) {
      return x7.copy().domain(x7.range().map(this.invertX, this).map(x7.invert, x7));
    }
    rescaleY(y7) {
      return y7.copy().domain(y7.range().map(this.invertY, this).map(y7.invert, y7));
    }
    toString() {
      return `translate(${this.x},${this.y}) scale(${this.k})`;
    }
  };
  var identity8 = new ZoomTransform(1, 0, 0);
  function constrain(transform7, extent, translateExtent) {
    const dx0 = transform7.invertX(extent[0][0]) - translateExtent[0][0];
    const dx1 = transform7.invertX(extent[1][0]) - translateExtent[1][0];
    const dy0 = transform7.invertY(extent[0][1]) - translateExtent[0][1];
    const dy1 = transform7.invertY(extent[1][1]) - translateExtent[1][1];
    let x7 = transform7.x;
    let y7 = transform7.y;
    if (dx1 > dx0) {
      x7 += (dx0 + dx1) / 2 * transform7.k;
    } else if (dx0 < 0) {
      x7 -= dx0 * transform7.k;
    } else if (dx1 > 0) {
      x7 -= dx1 * transform7.k;
    }
    if (dy1 > dy0) {
      y7 += (dy0 + dy1) / 2 * transform7.k;
    } else if (dy0 < 0) {
      y7 -= dy0 * transform7.k;
    } else if (dy1 > 0) {
      y7 -= dy1 * transform7.k;
    }
    return x7 === transform7.x && y7 === transform7.y ? transform7 : new ZoomTransform(transform7.k, x7, y7);
  }
  function zoomAround(transform7, point3, newK) {
    const p2 = transform7.invert(point3);
    const t2 = transform7.scale(newK / transform7.k);
    return new ZoomTransform(
      t2.k,
      point3[0] - p2[0] * t2.k,
      point3[1] - p2[1] * t2.k
    );
  }
  function attachNativeZoom_(element4) {
    return (config) => () => {
      const scaleMin = config.scaleMin || 0.1;
      const scaleMax = config.scaleMax || 10;
      const targetSelector = config.targetSelector;
      let transform7 = config.initialTransform ? new ZoomTransform(
        config.initialTransform.k,
        config.initialTransform.x,
        config.initialTransform.y
      ) : identity8;
      let extent = null;
      function getExtent() {
        if (!extent) {
          const rect2 = element4.getBoundingClientRect();
          extent = [[0, 0], [rect2.width, rect2.height]];
        }
        return extent;
      }
      function toSVGCoords(clientX2, clientY2) {
        const svg2 = element4.ownerSVGElement || element4;
        if (svg2.createSVGPoint) {
          const pt = svg2.createSVGPoint();
          pt.x = clientX2;
          pt.y = clientY2;
          const ctm = svg2.getScreenCTM();
          if (ctm) {
            const inv = ctm.inverse();
            const svgPt = pt.matrixTransform(inv);
            return [svgPt.x, svgPt.y];
          }
        }
        const rect2 = element4.getBoundingClientRect();
        return [clientX2 - rect2.left, clientY2 - rect2.top];
      }
      function toSVGDelta(screenDx, screenDy) {
        const svg2 = element4.ownerSVGElement || element4;
        if (svg2.getScreenCTM) {
          const ctm = svg2.getScreenCTM();
          if (ctm) {
            const scale = ctm.a;
            return [screenDx / scale, screenDy / scale];
          }
        }
        return [screenDx, screenDy];
      }
      let translateExtent = config.translateExtent || null;
      const infiniteExtent = [[-Infinity, -Infinity], [Infinity, Infinity]];
      function applyTransform() {
        const target7 = element4.querySelector(targetSelector);
        if (target7) {
          target7.setAttribute("transform", transform7.toString());
        }
        element4.__zoom = transform7;
        if (config.onZoom) {
          config.onZoom({ k: transform7.k, x: transform7.x, y: transform7.y })();
        }
      }
      function setTransform(newTransform) {
        const k = Math.max(scaleMin, Math.min(scaleMax, newTransform.k));
        newTransform = new ZoomTransform(k, newTransform.x, newTransform.y);
        if (translateExtent) {
          newTransform = constrain(newTransform, getExtent(), translateExtent);
        }
        transform7 = newTransform;
        applyTransform();
      }
      function handleWheel(event) {
        event.preventDefault();
        const point3 = toSVGCoords(event.clientX, event.clientY);
        const factor = Math.pow(2, -event.deltaY * 2e-3);
        const newK = Math.max(scaleMin, Math.min(scaleMax, transform7.k * factor));
        if (Math.abs(newK - transform7.k) < 1e-3) return;
        const newTransform = zoomAround(transform7, point3, newK);
        setTransform(newTransform);
      }
      let isPanning = false;
      let panStart = null;
      let transformAtPanStart = null;
      function handlePointerDown(event) {
        if (event.button !== 0) return;
        const target7 = event.target;
        const isPanTarget = target7 === element4 || // SVG element itself
        target7.tagName === "svg" || target7.classList.contains("zoom-background") || target7.classList.contains("zoom-group");
        if (!isPanTarget) {
          return;
        }
        isPanning = true;
        panStart = [event.clientX, event.clientY];
        transformAtPanStart = transform7;
        element4.setPointerCapture(event.pointerId);
        element4.style.cursor = "grabbing";
      }
      function handlePointerMove(event) {
        if (!isPanning) return;
        const screenDx = event.clientX - panStart[0];
        const screenDy = event.clientY - panStart[1];
        const [dx, dy] = toSVGDelta(screenDx, screenDy);
        const newTransform = new ZoomTransform(
          transformAtPanStart.k,
          transformAtPanStart.x + dx,
          transformAtPanStart.y + dy
        );
        setTransform(newTransform);
      }
      function handlePointerUp(event) {
        if (!isPanning) return;
        isPanning = false;
        element4.releasePointerCapture(event.pointerId);
        element4.style.cursor = "grab";
      }
      let gestureStartTransform = null;
      let gestureStartCenter = null;
      function handleGestureStart(event) {
        event.preventDefault();
        gestureStartTransform = transform7;
        const rect2 = element4.getBoundingClientRect();
        const screenCenterX = rect2.left + rect2.width / 2;
        const screenCenterY = rect2.top + rect2.height / 2;
        gestureStartCenter = toSVGCoords(screenCenterX, screenCenterY);
      }
      function handleGestureChange(event) {
        event.preventDefault();
        if (!gestureStartTransform) return;
        const newK = gestureStartTransform.k * event.scale;
        const newTransform = zoomAround(gestureStartTransform, gestureStartCenter, newK);
        setTransform(newTransform);
      }
      function handleGestureEnd(event) {
        event.preventDefault();
        gestureStartTransform = null;
      }
      element4.addEventListener("wheel", handleWheel, { passive: false });
      element4.addEventListener("pointerdown", handlePointerDown);
      element4.addEventListener("pointermove", handlePointerMove);
      element4.addEventListener("pointerup", handlePointerUp);
      element4.addEventListener("pointercancel", handlePointerUp);
      element4.addEventListener("gesturestart", handleGestureStart);
      element4.addEventListener("gesturechange", handleGestureChange);
      element4.addEventListener("gestureend", handleGestureEnd);
      element4.style.cursor = "grab";
      element4.style.touchAction = "none";
      if (config.initialTransform) {
        applyTransform();
      }
      const handle = {
        // Get current transform
        getTransform: () => ({ k: transform7.k, x: transform7.x, y: transform7.y }),
        // Set transform directly
        setTransform: (t2) => () => {
          setTransform(new ZoomTransform(t2.k, t2.x, t2.y));
        },
        // Reset to identity
        resetZoom: () => {
          setTransform(identity8);
        },
        // Zoom to specific scale at point
        zoomTo: (k) => (point3) => () => {
          const newTransform = zoomAround(transform7, [point3.x, point3.y], k);
          setTransform(newTransform);
        },
        // Zoom in/out by factor at center
        zoomBy: (factor) => () => {
          const rect2 = element4.getBoundingClientRect();
          const screenCenterX = rect2.left + rect2.width / 2;
          const screenCenterY = rect2.top + rect2.height / 2;
          const center2 = toSVGCoords(screenCenterX, screenCenterY);
          const newK = transform7.k * factor;
          const newTransform = zoomAround(transform7, center2, newK);
          setTransform(newTransform);
        },
        // Cleanup
        destroy: () => {
          element4.removeEventListener("wheel", handleWheel);
          element4.removeEventListener("pointerdown", handlePointerDown);
          element4.removeEventListener("pointermove", handlePointerMove);
          element4.removeEventListener("pointerup", handlePointerUp);
          element4.removeEventListener("pointercancel", handlePointerUp);
          element4.removeEventListener("gesturestart", handleGestureStart);
          element4.removeEventListener("gesturechange", handleGestureChange);
          element4.removeEventListener("gestureend", handleGestureEnd);
          element4.style.cursor = "";
          element4.style.touchAction = "";
        }
      };
      return handle;
    };
  }
  function attachZoomNative_(element4) {
    return (scaleMin) => (scaleMax) => (targetSelector) => () => {
      return attachNativeZoom_(element4)({
        scaleMin,
        scaleMax,
        targetSelector,
        initialTransform: null,
        translateExtent: null,
        onZoom: null
      })();
    };
  }

  // output/Hylograph.HATS.InterpreterTick/foreign.js
  var selectElement = (selector) => (doc) => () => {
    return doc.querySelector(selector);
  };
  var setAttribute = (el) => (name16) => (value18) => () => {
    if (name16 === "textContent") {
      el.textContent = value18;
    } else if (name16.startsWith("xlink:")) {
      el.setAttributeNS("http://www.w3.org/1999/xlink", name16, value18);
    } else if (name16.startsWith("xml:")) {
      el.setAttributeNS("http://www.w3.org/XML/1998/namespace", name16, value18);
    } else {
      el.setAttribute(name16, value18);
    }
  };
  var getAttribute = (el) => (name16) => () => {
    if (name16 === "textContent") {
      return el.textContent || "";
    }
    return el.getAttribute(name16) || "";
  };
  var bindDatum = (el) => (datum) => () => {
    el.__data__ = datum;
  };
  var setKey = (el) => (key) => () => {
    el.setAttribute("data-hats-key", key);
  };
  var setFoldName = (el) => (foldName) => () => {
    el.setAttribute("data-hats-fold", foldName);
  };
  var getKey = (el) => () => {
    return el.getAttribute("data-hats-key") || "";
  };
  var getChildElements = (parent2) => () => {
    return Array.from(parent2.children);
  };
  var getChildElementsForFold = (parent2) => (tagName2) => (foldName) => () => {
    const children2 = Array.from(parent2.children);
    return children2.filter(
      (el) => el.tagName.toLowerCase() === tagName2 && el.getAttribute("data-hats-fold") === foldName
    );
  };
  var removeElement = (el) => () => {
    if (el.parentNode) {
      el.parentNode.removeChild(el);
    }
  };
  var attachMouseEnterThunked = (el) => (handler3) => () => {
    el.addEventListener("mouseenter", function(event) {
      handler3()();
    });
  };
  var attachMouseLeaveThunked = (el) => (handler3) => () => {
    el.addEventListener("mouseleave", function(event) {
      handler3()();
    });
  };
  var attachClickThunked = (el) => (handler3) => () => {
    el.addEventListener("click", function(event) {
      event.stopPropagation();
      handler3()();
    });
    el.style.cursor = "pointer";
  };
  var attachZoom = (el) => (scaleMin) => (scaleMax) => (targetSelector) => () => {
    attachZoomNative_(el)(scaleMin)(scaleMax)(targetSelector)();
  };
  var attachSimpleDrag = (el) => () => {
    attachSimpleDrag_(el)()();
  };
  var attachSimulationDragById = (el) => (simId) => () => {
    attachSimulationDragById_(el)(simId)();
  };
  var attachSimulationDragNestedById = (el) => (simId) => () => {
    attachSimulationDragNestedById_(el)(simId)();
  };
  var hatsHighlightRegistry = /* @__PURE__ */ new Map();
  var HIGHLIGHT_PRIMARY = "highlight-primary";
  var HIGHLIGHT_RELATED = "highlight-related";
  var HIGHLIGHT_DIMMED = "highlight-dimmed";
  var HIGHLIGHT_UPSTREAM = "highlight-upstream";
  var HIGHLIGHT_DOWNSTREAM = "highlight-downstream";
  var ALL_HIGHLIGHT_CLASSES = [HIGHLIGHT_PRIMARY, HIGHLIGHT_RELATED, HIGHLIGHT_DIMMED, HIGHLIGHT_UPSTREAM, HIGHLIGHT_DOWNSTREAM];
  var HC_PRIMARY = 0;
  var HC_RELATED = 1;
  var HC_DIMMED = 2;
  var HC_NEUTRAL = 3;
  var HC_UPSTREAM = 4;
  var HC_DOWNSTREAM = 5;
  function getHatsHighlightGroup(groupName) {
    const key = groupName || "_global";
    if (!hatsHighlightRegistry.has(key)) {
      hatsHighlightRegistry.set(key, []);
    }
    return hatsHighlightRegistry.get(key);
  }
  var TT_ON_HOVER = 0;
  var TT_WHEN_PRIMARY = 1;
  var TT_WHEN_RELATED = 2;
  var hatsTooltipContainer = null;
  var hatsElementTooltips = /* @__PURE__ */ new Map();
  function getHatsTooltipContainer() {
    if (!hatsTooltipContainer) {
      hatsTooltipContainer = document.createElement("div");
      hatsTooltipContainer.className = "hats-tooltip-container";
      hatsTooltipContainer.style.cssText = "position: fixed; top: 0; left: 0; pointer-events: none; z-index: 10000;";
      document.body.appendChild(hatsTooltipContainer);
    }
    return hatsTooltipContainer;
  }
  function createHatsTooltip() {
    const tooltip = document.createElement("div");
    tooltip.className = "hats-tooltip";
    tooltip.style.cssText = `
    position: absolute;
    background: rgba(45, 45, 45, 0.85);
    color: #f0f0f0;
    padding: 10px 16px;
    font-size: 13px;
    font-weight: 500;
    font-family: 'Courier New', Courier, monospace;
    white-space: pre-line;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s ease-in-out;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    border: none;
    border-radius: 4px;
    min-width: 280px;
    max-width: 480px;
    line-height: 1.6;
    backdrop-filter: blur(8px);
    -webkit-backdrop-filter: blur(8px);
  `;
    getHatsTooltipContainer().appendChild(tooltip);
    return tooltip;
  }
  function positionHatsTooltip(tooltip, event) {
    const x7 = event.clientX + 15;
    const y7 = event.clientY - 10;
    tooltip.style.left = `${x7}px`;
    tooltip.style.top = `${y7}px`;
  }
  function showHatsTooltip(tooltip, content6) {
    tooltip.textContent = content6;
    tooltip.style.opacity = "1";
  }
  function hideHatsTooltip(tooltip) {
    if (tooltip) {
      tooltip.style.opacity = "0";
    }
  }
  var attachCoordinatedHighlightThunked = (element4) => (identifyThunk) => (classifyFn) => (groupName) => (tooltipContentThunk) => (tooltipTrigger) => () => {
    const group4 = groupName;
    const entry = { element: element4, identifyThunk, classifyFn, tooltipContentThunk, tooltipTrigger };
    getHatsHighlightGroup(group4).push(entry);
    element4.addEventListener("mouseenter", function(event) {
      const hoveredId = identifyThunk();
      applyHatsHighlightsWithTooltips(group4, hoveredId, element4, event);
    });
    element4.addEventListener("mouseleave", function(event) {
      clearHatsHighlightsInGroupWithTooltips(group4);
    });
  };
  function applyHatsHighlightsWithTooltips(groupName, hoveredId, triggerElement, event) {
    const group4 = getHatsHighlightGroup(groupName);
    group4.forEach((entry) => {
      const { element: element4, classifyFn, tooltipContentThunk, tooltipTrigger } = entry;
      ALL_HIGHLIGHT_CLASSES.forEach((cls) => element4.classList.remove(cls));
      const classification = classifyFn(hoveredId);
      switch (classification) {
        case HC_PRIMARY:
          element4.classList.add("highlight-primary");
          break;
        case HC_RELATED:
          element4.classList.add("highlight-related");
          break;
        case HC_UPSTREAM:
          element4.classList.add("highlight-upstream");
          break;
        case HC_DOWNSTREAM:
          element4.classList.add("highlight-downstream");
          break;
        case HC_DIMMED:
          element4.classList.add("highlight-dimmed");
          break;
        case HC_NEUTRAL:
        default:
          break;
      }
      if (tooltipContentThunk) {
        const shouldShow = tooltipTrigger === TT_ON_HOVER && element4 === triggerElement || tooltipTrigger === TT_WHEN_PRIMARY && classification === HC_PRIMARY || tooltipTrigger === TT_WHEN_RELATED && (classification === HC_PRIMARY || classification === HC_RELATED);
        if (shouldShow) {
          let tooltip = hatsElementTooltips.get(element4);
          if (!tooltip) {
            tooltip = createHatsTooltip();
            hatsElementTooltips.set(element4, tooltip);
          }
          const content6 = tooltipContentThunk();
          showHatsTooltip(tooltip, content6);
          if (tooltipTrigger === TT_ON_HOVER && event) {
            positionHatsTooltip(tooltip, event);
          }
        } else {
          const tooltip = hatsElementTooltips.get(element4);
          if (tooltip) {
            hideHatsTooltip(tooltip);
          }
        }
      }
    });
  }
  function clearHatsHighlightsInGroupWithTooltips(groupName) {
    const group4 = getHatsHighlightGroup(groupName);
    group4.forEach((entry) => {
      ALL_HIGHLIGHT_CLASSES.forEach((cls) => entry.element.classList.remove(cls));
      const tooltip = hatsElementTooltips.get(entry.element);
      if (tooltip) {
        hideHatsTooltip(tooltip);
      }
    });
  }
  var coordInteractionRegistry = /* @__PURE__ */ new Map();
  var IS_PRIMARY = 0;
  var IS_RELATED = 1;
  var IS_SELECTED = 2;
  var IS_DIMMED = 3;
  var IS_NEUTRAL = 4;
  var COORD_PRIMARY = "coord-primary";
  var COORD_RELATED = "coord-related";
  var COORD_SELECTED = "coord-selected";
  var COORD_DIMMED = "coord-dimmed";
  var ALL_COORD_CLASSES = [COORD_PRIMARY, COORD_RELATED, COORD_SELECTED, COORD_DIMMED];
  function getCoordInteractionGroup(groupName) {
    const key = groupName || "_global";
    if (!coordInteractionRegistry.has(key)) {
      coordInteractionRegistry.set(key, []);
    }
    return coordInteractionRegistry.get(key);
  }
  function applyStateClass(element4, state3) {
    ALL_COORD_CLASSES.forEach((cls) => element4.classList.remove(cls));
    switch (state3) {
      case IS_PRIMARY:
        element4.classList.add(COORD_PRIMARY);
        break;
      case IS_RELATED:
        element4.classList.add(COORD_RELATED);
        break;
      case IS_SELECTED:
        element4.classList.add(COORD_SELECTED);
        break;
      case IS_DIMMED:
        element4.classList.add(COORD_DIMMED);
        break;
      case IS_NEUTRAL:
      default:
        break;
    }
  }
  function applyHoverInteraction(groupName, hoveredId) {
    const group4 = getCoordInteractionGroup(groupName);
    group4.forEach((entry) => {
      const state3 = entry.respondToHover(hoveredId);
      applyStateClass(entry.element, state3);
    });
  }
  function applyBrushInteraction(groupName, box, sourceCell) {
    const group4 = getCoordInteractionGroup(groupName);
    const selectedIds = /* @__PURE__ */ new Set();
    group4.forEach((entry) => {
      if (entry.getPosition) {
        const pos = entry.getPosition();
        const elementCell = entry.element.closest('g[id^="cell-"]');
        if (elementCell === sourceCell) {
          if (pos.x >= box.x0 && pos.x <= box.x1 && pos.y >= box.y0 && pos.y <= box.y1) {
            const id4 = entry.identifyThunk();
            selectedIds.add(id4);
          }
        }
      }
    });
    group4.forEach((entry) => {
      const id4 = entry.identifyThunk();
      let state3;
      if (selectedIds.size === 0) {
        state3 = IS_NEUTRAL;
      } else if (selectedIds.has(id4)) {
        state3 = IS_SELECTED;
      } else {
        state3 = IS_DIMMED;
      }
      applyStateClass(entry.element, state3);
    });
  }
  function applyClearInteraction(groupName) {
    const group4 = getCoordInteractionGroup(groupName);
    group4.forEach((entry) => {
      const state3 = entry.respondToClear();
      applyStateClass(entry.element, state3);
    });
  }
  var attachCoordinatedInteractionThunked = (element4) => (identifyThunk) => (respondToHover) => (respondToBrush) => (respondToClear) => (positionThunk) => (groupName) => () => {
    const group4 = groupName;
    const getPosition = positionThunk && positionThunk.value0 ? positionThunk.value0 : null;
    const entry = { element: element4, identifyThunk, respondToHover, respondToBrush, respondToClear, getPosition };
    getCoordInteractionGroup(group4).push(entry);
    element4.addEventListener("mouseenter", function(event) {
      const hoveredId = identifyThunk();
      applyHoverInteraction(group4, hoveredId);
    });
    element4.addEventListener("mouseleave", function(event) {
      applyClearInteraction(group4);
    });
  };
  var activeBrushes = /* @__PURE__ */ new Map();
  var attachCoordinatedBrushThunked = (element4) => (extent) => (groupName) => () => {
    const group4 = groupName;
    let brushRect = null;
    function getBrushRect() {
      if (!brushRect) {
        brushRect = element4.querySelector(".brush-background");
        if (brushRect) {
          brushRect.style.fill = "transparent";
          brushRect.style.stroke = "transparent";
          brushRect.style.strokeWidth = "1";
        }
      }
      return brushRect;
    }
    const ns = "http://www.w3.org/2000/svg";
    const selectionRect = document.createElementNS(ns, "rect");
    selectionRect.setAttribute("class", "brush-selection-overlay");
    selectionRect.setAttribute("fill", "rgba(100, 100, 200, 0.2)");
    selectionRect.setAttribute("stroke", "#6666cc");
    selectionRect.setAttribute("stroke-width", "1");
    selectionRect.setAttribute("visibility", "hidden");
    selectionRect.setAttribute("pointer-events", "none");
    const cellGroup = element4.parentElement;
    if (cellGroup) {
      cellGroup.appendChild(selectionRect);
    }
    let isDragging = false;
    let startX = 0;
    let startY = 0;
    let lastBrushTime = 0;
    let pendingBrushFrame = null;
    const BRUSH_THROTTLE_MS = 150;
    function getLocalCoords(event) {
      const svg2 = element4.closest("svg");
      if (!svg2) return { x: event.clientX, y: event.clientY };
      const pt = svg2.createSVGPoint();
      pt.x = event.clientX;
      pt.y = event.clientY;
      const parent2 = element4.parentElement;
      const ctm = parent2 && parent2.getScreenCTM ? parent2.getScreenCTM() : svg2.getScreenCTM();
      if (!ctm) return { x: event.clientX, y: event.clientY };
      const localP = pt.matrixTransform(ctm.inverse());
      return { x: localP.x, y: localP.y };
    }
    element4.addEventListener("pointerdown", function(event) {
      if (event.button !== 0) return;
      const rect2 = getBrushRect();
      if (event.target !== element4 && event.target !== rect2) return;
      isDragging = true;
      const coords2 = getLocalCoords(event);
      startX = Math.max(extent.x0, Math.min(extent.x1, coords2.x));
      startY = Math.max(extent.y0, Math.min(extent.y1, coords2.y));
      selectionRect.setAttribute("x", startX);
      selectionRect.setAttribute("y", startY);
      selectionRect.setAttribute("width", 0);
      selectionRect.setAttribute("height", 0);
      selectionRect.setAttribute("visibility", "visible");
      element4.setPointerCapture(event.pointerId);
      event.preventDefault();
    });
    element4.addEventListener("pointermove", function(event) {
      if (!isDragging) return;
      const coords2 = getLocalCoords(event);
      const currentX = Math.max(extent.x0, Math.min(extent.x1, coords2.x));
      const currentY = Math.max(extent.y0, Math.min(extent.y1, coords2.y));
      const x7 = Math.min(startX, currentX);
      const y7 = Math.min(startY, currentY);
      const width14 = Math.abs(currentX - startX);
      const height14 = Math.abs(currentY - startY);
      selectionRect.setAttribute("x", x7);
      selectionRect.setAttribute("y", y7);
      selectionRect.setAttribute("width", width14);
      selectionRect.setAttribute("height", height14);
      const box = { x0: x7, y0: y7, x1: x7 + width14, y1: y7 + height14 };
      const sourceCell = element4.closest('g[id^="cell-"]');
      const now2 = performance.now();
      if (now2 - lastBrushTime >= BRUSH_THROTTLE_MS) {
        lastBrushTime = now2;
        if (pendingBrushFrame) {
          cancelAnimationFrame(pendingBrushFrame);
          pendingBrushFrame = null;
        }
        applyBrushInteraction(group4, box, sourceCell);
      } else if (!pendingBrushFrame) {
        pendingBrushFrame = requestAnimationFrame(() => {
          pendingBrushFrame = null;
          lastBrushTime = performance.now();
          applyBrushInteraction(group4, box, sourceCell);
        });
      }
    });
    element4.addEventListener("pointerup", function(event) {
      if (!isDragging) return;
      isDragging = false;
      element4.releasePointerCapture(event.pointerId);
    });
    element4.addEventListener("click", function(event) {
      const rect2 = getBrushRect();
      if (event.target !== element4 && event.target !== rect2) return;
      selectionRect.setAttribute("visibility", "hidden");
      applyClearInteraction(group4);
    });
    const handle = { element: element4, selectionRect, group: group4 };
    if (!activeBrushes.has(group4)) {
      activeBrushes.set(group4, []);
    }
    activeBrushes.get(group4).push(handle);
  };

  // output/Hylograph.HATS.Transitions/foreign.js
  var setAttribute2 = (el) => (name16) => (value18) => () => {
    if (name16 === "textContent") {
      el.textContent = value18;
    } else if (name16.startsWith("xlink:")) {
      el.setAttributeNS("http://www.w3.org/1999/xlink", name16, value18);
    } else {
      el.setAttribute(name16, value18);
    }
  };
  var removeElement2 = (el) => () => {
    if (el.parentNode) {
      el.parentNode.removeChild(el);
    }
  };

  // output/Hylograph.Internal.Transition.Types/index.js
  var Linear2 = /* @__PURE__ */ (function() {
    function Linear3() {
    }
    ;
    Linear3.value = new Linear3();
    return Linear3;
  })();
  var Cubic = /* @__PURE__ */ (function() {
    function Cubic2() {
    }
    ;
    Cubic2.value = new Cubic2();
    return Cubic2;
  })();
  var CubicIn2 = /* @__PURE__ */ (function() {
    function CubicIn3() {
    }
    ;
    CubicIn3.value = new CubicIn3();
    return CubicIn3;
  })();
  var CubicOut2 = /* @__PURE__ */ (function() {
    function CubicOut3() {
    }
    ;
    CubicOut3.value = new CubicOut3();
    return CubicOut3;
  })();
  var CubicInOut2 = /* @__PURE__ */ (function() {
    function CubicInOut3() {
    }
    ;
    CubicInOut3.value = new CubicInOut3();
    return CubicInOut3;
  })();
  var Quad = /* @__PURE__ */ (function() {
    function Quad2() {
    }
    ;
    Quad2.value = new Quad2();
    return Quad2;
  })();
  var QuadIn2 = /* @__PURE__ */ (function() {
    function QuadIn3() {
    }
    ;
    QuadIn3.value = new QuadIn3();
    return QuadIn3;
  })();
  var QuadOut2 = /* @__PURE__ */ (function() {
    function QuadOut3() {
    }
    ;
    QuadOut3.value = new QuadOut3();
    return QuadOut3;
  })();
  var QuadInOut2 = /* @__PURE__ */ (function() {
    function QuadInOut3() {
    }
    ;
    QuadInOut3.value = new QuadInOut3();
    return QuadInOut3;
  })();
  var Sin = /* @__PURE__ */ (function() {
    function Sin2() {
    }
    ;
    Sin2.value = new Sin2();
    return Sin2;
  })();
  var SinIn2 = /* @__PURE__ */ (function() {
    function SinIn3() {
    }
    ;
    SinIn3.value = new SinIn3();
    return SinIn3;
  })();
  var SinOut2 = /* @__PURE__ */ (function() {
    function SinOut3() {
    }
    ;
    SinOut3.value = new SinOut3();
    return SinOut3;
  })();
  var SinInOut2 = /* @__PURE__ */ (function() {
    function SinInOut3() {
    }
    ;
    SinInOut3.value = new SinInOut3();
    return SinInOut3;
  })();
  var Exp = /* @__PURE__ */ (function() {
    function Exp2() {
    }
    ;
    Exp2.value = new Exp2();
    return Exp2;
  })();
  var ExpIn2 = /* @__PURE__ */ (function() {
    function ExpIn3() {
    }
    ;
    ExpIn3.value = new ExpIn3();
    return ExpIn3;
  })();
  var ExpOut2 = /* @__PURE__ */ (function() {
    function ExpOut3() {
    }
    ;
    ExpOut3.value = new ExpOut3();
    return ExpOut3;
  })();
  var ExpInOut2 = /* @__PURE__ */ (function() {
    function ExpInOut3() {
    }
    ;
    ExpInOut3.value = new ExpInOut3();
    return ExpInOut3;
  })();
  var Circle2 = /* @__PURE__ */ (function() {
    function Circle3() {
    }
    ;
    Circle3.value = new Circle3();
    return Circle3;
  })();
  var CircleIn2 = /* @__PURE__ */ (function() {
    function CircleIn3() {
    }
    ;
    CircleIn3.value = new CircleIn3();
    return CircleIn3;
  })();
  var CircleOut2 = /* @__PURE__ */ (function() {
    function CircleOut3() {
    }
    ;
    CircleOut3.value = new CircleOut3();
    return CircleOut3;
  })();
  var CircleInOut2 = /* @__PURE__ */ (function() {
    function CircleInOut3() {
    }
    ;
    CircleInOut3.value = new CircleInOut3();
    return CircleInOut3;
  })();
  var Elastic = /* @__PURE__ */ (function() {
    function Elastic2() {
    }
    ;
    Elastic2.value = new Elastic2();
    return Elastic2;
  })();
  var ElasticIn2 = /* @__PURE__ */ (function() {
    function ElasticIn3() {
    }
    ;
    ElasticIn3.value = new ElasticIn3();
    return ElasticIn3;
  })();
  var ElasticOut2 = /* @__PURE__ */ (function() {
    function ElasticOut3() {
    }
    ;
    ElasticOut3.value = new ElasticOut3();
    return ElasticOut3;
  })();
  var ElasticInOut2 = /* @__PURE__ */ (function() {
    function ElasticInOut3() {
    }
    ;
    ElasticInOut3.value = new ElasticInOut3();
    return ElasticInOut3;
  })();
  var Back = /* @__PURE__ */ (function() {
    function Back2() {
    }
    ;
    Back2.value = new Back2();
    return Back2;
  })();
  var BackIn2 = /* @__PURE__ */ (function() {
    function BackIn3() {
    }
    ;
    BackIn3.value = new BackIn3();
    return BackIn3;
  })();
  var BackOut2 = /* @__PURE__ */ (function() {
    function BackOut3() {
    }
    ;
    BackOut3.value = new BackOut3();
    return BackOut3;
  })();
  var BackInOut2 = /* @__PURE__ */ (function() {
    function BackInOut3() {
    }
    ;
    BackInOut3.value = new BackInOut3();
    return BackInOut3;
  })();
  var Bounce = /* @__PURE__ */ (function() {
    function Bounce2() {
    }
    ;
    Bounce2.value = new Bounce2();
    return Bounce2;
  })();
  var BounceIn2 = /* @__PURE__ */ (function() {
    function BounceIn3() {
    }
    ;
    BounceIn3.value = new BounceIn3();
    return BounceIn3;
  })();
  var BounceOut2 = /* @__PURE__ */ (function() {
    function BounceOut3() {
    }
    ;
    BounceOut3.value = new BounceOut3();
    return BounceOut3;
  })();
  var BounceInOut2 = /* @__PURE__ */ (function() {
    function BounceInOut3() {
    }
    ;
    BounceInOut3.value = new BounceInOut3();
    return BounceInOut3;
  })();
  var showEasing = {
    show: function(v2) {
      if (v2 instanceof Linear2) {
        return "linear";
      }
      ;
      if (v2 instanceof Cubic) {
        return "cubic";
      }
      ;
      if (v2 instanceof CubicIn2) {
        return "cubicIn";
      }
      ;
      if (v2 instanceof CubicOut2) {
        return "cubicOut";
      }
      ;
      if (v2 instanceof CubicInOut2) {
        return "cubicInOut";
      }
      ;
      if (v2 instanceof Quad) {
        return "quad";
      }
      ;
      if (v2 instanceof QuadIn2) {
        return "quadIn";
      }
      ;
      if (v2 instanceof QuadOut2) {
        return "quadOut";
      }
      ;
      if (v2 instanceof QuadInOut2) {
        return "quadInOut";
      }
      ;
      if (v2 instanceof Sin) {
        return "sin";
      }
      ;
      if (v2 instanceof SinIn2) {
        return "sinIn";
      }
      ;
      if (v2 instanceof SinOut2) {
        return "sinOut";
      }
      ;
      if (v2 instanceof SinInOut2) {
        return "sinInOut";
      }
      ;
      if (v2 instanceof Exp) {
        return "exp";
      }
      ;
      if (v2 instanceof ExpIn2) {
        return "expIn";
      }
      ;
      if (v2 instanceof ExpOut2) {
        return "expOut";
      }
      ;
      if (v2 instanceof ExpInOut2) {
        return "expInOut";
      }
      ;
      if (v2 instanceof Circle2) {
        return "circle";
      }
      ;
      if (v2 instanceof CircleIn2) {
        return "circleIn";
      }
      ;
      if (v2 instanceof CircleOut2) {
        return "circleOut";
      }
      ;
      if (v2 instanceof CircleInOut2) {
        return "circleInOut";
      }
      ;
      if (v2 instanceof Elastic) {
        return "elastic";
      }
      ;
      if (v2 instanceof ElasticIn2) {
        return "elasticIn";
      }
      ;
      if (v2 instanceof ElasticOut2) {
        return "elasticOut";
      }
      ;
      if (v2 instanceof ElasticInOut2) {
        return "elasticInOut";
      }
      ;
      if (v2 instanceof Back) {
        return "back";
      }
      ;
      if (v2 instanceof BackIn2) {
        return "backIn";
      }
      ;
      if (v2 instanceof BackOut2) {
        return "backOut";
      }
      ;
      if (v2 instanceof BackInOut2) {
        return "backInOut";
      }
      ;
      if (v2 instanceof Bounce) {
        return "bounce";
      }
      ;
      if (v2 instanceof BounceIn2) {
        return "bounceIn";
      }
      ;
      if (v2 instanceof BounceOut2) {
        return "bounceOut";
      }
      ;
      if (v2 instanceof BounceInOut2) {
        return "bounceInOut";
      }
      ;
      throw new Error("Failed pattern match at Hylograph.Internal.Transition.Types (line 102, column 1 - line 135, column 35): " + [v2.constructor.name]);
    }
  };
  var transitionWith = /* @__PURE__ */ identity(categoryFn);

  // output/Hylograph.Transition.Tick/index.js
  var linear = function(t2) {
    return t2;
  };
  var lerp = function(start4) {
    return function(end2) {
      return function(t2) {
        return start4 + (end2 - start4) * t2;
      };
    };
  };
  var elasticC5 = /* @__PURE__ */ (function() {
    return 2 * pi / 4.5;
  })();
  var elasticC4 = /* @__PURE__ */ (function() {
    return 2 * pi / 3;
  })();
  var easeOutSin = function(t2) {
    return sin(t2 * pi / 2);
  };
  var easeOutQuad = function(t2) {
    return 1 - (1 - t2) * (1 - t2);
  };
  var easeOutExp = function(t2) {
    var $21 = t2 === 1;
    if ($21) {
      return 1;
    }
    ;
    return 1 - pow(2)(-10 * t2);
  };
  var easeOutElastic = function(t2) {
    var $22 = t2 === 0;
    if ($22) {
      return 0;
    }
    ;
    var $23 = t2 === 1;
    if ($23) {
      return 1;
    }
    ;
    return pow(2)(-10 * t2) * sin((t2 * 10 - 0.75) * elasticC4) + 1;
  };
  var easeOutCubic = function(t2) {
    return 1 - (1 - t2) * (1 - t2) * (1 - t2);
  };
  var easeOutCircle = function(t2) {
    return sqrt(1 - (t2 - 1) * (t2 - 1));
  };
  var easeInSin = function(t2) {
    return 1 - cos(t2 * pi / 2);
  };
  var easeInQuad = function(t2) {
    return t2 * t2;
  };
  var easeInOutSin = function(t2) {
    return -(cos(pi * t2) - 1) / 2;
  };
  var easeInOutQuad = function(t2) {
    var $24 = t2 < 0.5;
    if ($24) {
      return 2 * t2 * t2;
    }
    ;
    return 1 - (-2 * t2 + 2) * (-2 * t2 + 2) / 2;
  };
  var easeInOutExp = function(t2) {
    var $25 = t2 === 0;
    if ($25) {
      return 0;
    }
    ;
    var $26 = t2 === 1;
    if ($26) {
      return 1;
    }
    ;
    var $27 = t2 < 0.5;
    if ($27) {
      return pow(2)(20 * t2 - 10) / 2;
    }
    ;
    return (2 - pow(2)(-20 * t2 + 10)) / 2;
  };
  var easeInOutElastic = function(t2) {
    var $28 = t2 === 0;
    if ($28) {
      return 0;
    }
    ;
    var $29 = t2 === 1;
    if ($29) {
      return 1;
    }
    ;
    var $30 = t2 < 0.5;
    if ($30) {
      return -(pow(2)(20 * t2 - 10) * sin((20 * t2 - 11.125) * elasticC5)) / 2;
    }
    ;
    return pow(2)(-20 * t2 + 10) * sin((20 * t2 - 11.125) * elasticC5) / 2 + 1;
  };
  var easeInOutCubic = function(t2) {
    var $31 = t2 < 0.5;
    if ($31) {
      return 4 * t2 * t2 * t2;
    }
    ;
    return 1 - (-2 * t2 + 2) * (-2 * t2 + 2) * (-2 * t2 + 2) / 2;
  };
  var easeInOutCircle = function(t2) {
    var $32 = t2 < 0.5;
    if ($32) {
      return (1 - sqrt(1 - 2 * t2 * (2 * t2))) / 2;
    }
    ;
    return (sqrt(1 - (-2 * t2 + 2) * (-2 * t2 + 2)) + 1) / 2;
  };
  var easeInExp = function(t2) {
    var $33 = t2 === 0;
    if ($33) {
      return 0;
    }
    ;
    return pow(2)(10 * (t2 - 1));
  };
  var easeInElastic = function(t2) {
    var $34 = t2 === 0;
    if ($34) {
      return 0;
    }
    ;
    var $35 = t2 === 1;
    if ($35) {
      return 1;
    }
    ;
    return -pow(2)(10 * t2 - 10) * sin((t2 * 10 - 10.75) * elasticC4);
  };
  var easeInCubic = function(t2) {
    return t2 * t2 * t2;
  };
  var easeInCircle = function(t2) {
    return 1 - sqrt(1 - t2 * t2);
  };
  var bounceN1 = 7.5625;
  var bounceD1 = 2.75;
  var easeOutBounce = function(t2) {
    var $36 = t2 < 1 / bounceD1;
    if ($36) {
      return bounceN1 * t2 * t2;
    }
    ;
    var $37 = t2 < 2 / bounceD1;
    if ($37) {
      var t$prime = t2 - 1.5 / bounceD1;
      return bounceN1 * t$prime * t$prime + 0.75;
    }
    ;
    var $38 = t2 < 2.5 / bounceD1;
    if ($38) {
      var t$prime = t2 - 2.25 / bounceD1;
      return bounceN1 * t$prime * t$prime + 0.9375;
    }
    ;
    var t$prime = t2 - 2.625 / bounceD1;
    return bounceN1 * t$prime * t$prime + 0.984375;
  };
  var easeInBounce = function(t2) {
    return 1 - easeOutBounce(1 - t2);
  };
  var easeInOutBounce = function(t2) {
    var $39 = t2 < 0.5;
    if ($39) {
      return (1 - easeOutBounce(1 - 2 * t2)) / 2;
    }
    ;
    return (1 + easeOutBounce(2 * t2 - 1)) / 2;
  };
  var backC1 = 1.70158;
  var backC2 = /* @__PURE__ */ (function() {
    return backC1 * 1.525;
  })();
  var easeInOutBack = function(t2) {
    var $40 = t2 < 0.5;
    if ($40) {
      return 2 * t2 * (2 * t2) * ((backC2 + 1) * 2 * t2 - backC2) / 2;
    }
    ;
    return ((2 * t2 - 2) * (2 * t2 - 2) * ((backC2 + 1) * (t2 * 2 - 2) + backC2) + 2) / 2;
  };
  var backC3 = /* @__PURE__ */ (function() {
    return backC1 + 1;
  })();
  var easeInBack = function(t2) {
    return backC3 * t2 * t2 * t2 - backC1 * t2 * t2;
  };
  var easeOutBack = function(t2) {
    var t$prime = t2 - 1;
    return 1 + backC3 * t$prime * t$prime * t$prime + backC1 * t$prime * t$prime;
  };

  // output/Hylograph.HATS.Transitions/index.js
  var max4 = /* @__PURE__ */ max(ordNumber);
  var min4 = /* @__PURE__ */ min(ordNumber);
  var all3 = /* @__PURE__ */ all(foldableArray)(heytingAlgebraBoolean);
  var show7 = /* @__PURE__ */ show(showNumber);
  var map13 = /* @__PURE__ */ map(functorArray);
  var traverse2 = /* @__PURE__ */ traverse(traversableArray)(applicativeEffect);
  var Running = /* @__PURE__ */ (function() {
    function Running2(value0) {
      this.value0 = value0;
    }
    ;
    Running2.create = function(value0) {
      return new Running2(value0);
    };
    return Running2;
  })();
  var Complete = /* @__PURE__ */ (function() {
    function Complete3() {
    }
    ;
    Complete3.value = new Complete3();
    return Complete3;
  })();
  var toTickEasing = function(v2) {
    if (v2 instanceof Nothing) {
      return easeOutCubic;
    }
    ;
    if (v2 instanceof Just) {
      if (v2.value0 instanceof Linear2) {
        return linear;
      }
      ;
      if (v2.value0 instanceof Cubic) {
        return easeOutCubic;
      }
      ;
      if (v2.value0 instanceof CubicIn2) {
        return easeInCubic;
      }
      ;
      if (v2.value0 instanceof CubicOut2) {
        return easeOutCubic;
      }
      ;
      if (v2.value0 instanceof CubicInOut2) {
        return easeInOutCubic;
      }
      ;
      if (v2.value0 instanceof Quad) {
        return easeOutQuad;
      }
      ;
      if (v2.value0 instanceof QuadIn2) {
        return easeInQuad;
      }
      ;
      if (v2.value0 instanceof QuadOut2) {
        return easeOutQuad;
      }
      ;
      if (v2.value0 instanceof QuadInOut2) {
        return easeInOutQuad;
      }
      ;
      if (v2.value0 instanceof Sin) {
        return easeOutSin;
      }
      ;
      if (v2.value0 instanceof SinIn2) {
        return easeInSin;
      }
      ;
      if (v2.value0 instanceof SinOut2) {
        return easeOutSin;
      }
      ;
      if (v2.value0 instanceof SinInOut2) {
        return easeInOutSin;
      }
      ;
      if (v2.value0 instanceof Exp) {
        return easeOutExp;
      }
      ;
      if (v2.value0 instanceof ExpIn2) {
        return easeInExp;
      }
      ;
      if (v2.value0 instanceof ExpOut2) {
        return easeOutExp;
      }
      ;
      if (v2.value0 instanceof ExpInOut2) {
        return easeInOutExp;
      }
      ;
      if (v2.value0 instanceof Circle2) {
        return easeOutCircle;
      }
      ;
      if (v2.value0 instanceof CircleIn2) {
        return easeInCircle;
      }
      ;
      if (v2.value0 instanceof CircleOut2) {
        return easeOutCircle;
      }
      ;
      if (v2.value0 instanceof CircleInOut2) {
        return easeInOutCircle;
      }
      ;
      if (v2.value0 instanceof Elastic) {
        return easeOutElastic;
      }
      ;
      if (v2.value0 instanceof ElasticIn2) {
        return easeInElastic;
      }
      ;
      if (v2.value0 instanceof ElasticOut2) {
        return easeOutElastic;
      }
      ;
      if (v2.value0 instanceof ElasticInOut2) {
        return easeInOutElastic;
      }
      ;
      if (v2.value0 instanceof Back) {
        return easeOutBack;
      }
      ;
      if (v2.value0 instanceof BackIn2) {
        return easeInBack;
      }
      ;
      if (v2.value0 instanceof BackOut2) {
        return easeOutBack;
      }
      ;
      if (v2.value0 instanceof BackInOut2) {
        return easeInOutBack;
      }
      ;
      if (v2.value0 instanceof Bounce) {
        return easeOutBounce;
      }
      ;
      if (v2.value0 instanceof BounceIn2) {
        return easeInBounce;
      }
      ;
      if (v2.value0 instanceof BounceOut2) {
        return easeOutBounce;
      }
      ;
      if (v2.value0 instanceof BounceInOut2) {
        return easeInOutBounce;
      }
      ;
      throw new Error("Failed pattern match at Hylograph.HATS.Transitions (line 187, column 13 - line 220, column 45): " + [v2.value0.constructor.name]);
    }
    ;
    throw new Error("Failed pattern match at Hylograph.HATS.Transitions (line 185, column 16 - line 220, column 45): " + [v2.constructor.name]);
  };
  var tickAttr = function(deltaMs) {
    return function(attr10) {
      return {
        attrName: attr10.attrName,
        from: attr10.from,
        to: attr10.to,
        duration: attr10.duration,
        delay: attr10.delay,
        easing: attr10.easing,
        elapsed: attr10.elapsed + deltaMs
      };
    };
  };
  var currentAttrValue = function(attr10) {
    var effectiveElapsed = max4(0)(attr10.elapsed - attr10.delay);
    var rawProgress = (function() {
      var $25 = attr10.duration <= 0;
      if ($25) {
        return 1;
      }
      ;
      return min4(1)(effectiveElapsed / attr10.duration);
    })();
    var easedProgress = attr10.easing(rawProgress);
    return lerp(attr10.from)(attr10.to)(easedProgress);
  };
  var attrComplete = function(attr10) {
    return attr10.elapsed >= attr10.duration + attr10.delay;
  };
  var elementComplete = function(et) {
    return all3(attrComplete)(et.attrs);
  };
  var applyAttr = function(el) {
    return function(attr10) {
      var value18 = currentAttrValue(attr10);
      return setAttribute2(el)(attr10.attrName)(show7(value18));
    };
  };
  var tickElement = function(deltaMs) {
    return function(et) {
      var attrs$prime = map13(tickAttr(deltaMs))(et.attrs);
      return function __do7() {
        traverse2(applyAttr(et.element))(attrs$prime)();
        return {
          element: et.element,
          attrs: attrs$prime
        };
      };
    };
  };
  var tickTransitions = function(deltaMs) {
    return function(v2) {
      return function __do7() {
        var entering$prime = traverse2(tickElement(deltaMs))(v2.entering)();
        var activeEntering = filter(function($30) {
          return !elementComplete($30);
        })(entering$prime);
        var updating$prime = traverse2(tickElement(deltaMs))(v2.updating)();
        var activeUpdating = filter(function($31) {
          return !elementComplete($31);
        })(updating$prime);
        var exiting$prime = traverse2(tickElement(deltaMs))(v2.exiting)();
        var completedExits = filter(elementComplete)(exiting$prime);
        var activeExiting = filter(function($32) {
          return !elementComplete($32);
        })(exiting$prime);
        traverse2(function(et) {
          return removeElement2(et.element);
        })(completedExits)();
        var $29 = $$null(activeEntering) && ($$null(activeUpdating) && $$null(activeExiting));
        if ($29) {
          return Complete.value;
        }
        ;
        return new Running({
          entering: activeEntering,
          updating: activeUpdating,
          exiting: activeExiting
        });
      };
    };
  };

  // output/Hylograph.Interaction.Coordinated/index.js
  var Primary2 = /* @__PURE__ */ (function() {
    function Primary3() {
    }
    ;
    Primary3.value = new Primary3();
    return Primary3;
  })();
  var Related2 = /* @__PURE__ */ (function() {
    function Related3() {
    }
    ;
    Related3.value = new Related3();
    return Related3;
  })();
  var Selected = /* @__PURE__ */ (function() {
    function Selected2() {
    }
    ;
    Selected2.value = new Selected2();
    return Selected2;
  })();
  var Dimmed2 = /* @__PURE__ */ (function() {
    function Dimmed3() {
    }
    ;
    Dimmed3.value = new Dimmed3();
    return Dimmed3;
  })();
  var Neutral2 = /* @__PURE__ */ (function() {
    function Neutral3() {
    }
    ;
    Neutral3.value = new Neutral3();
    return Neutral3;
  })();
  var HoverTrigger = /* @__PURE__ */ (function() {
    function HoverTrigger2(value0) {
      this.value0 = value0;
    }
    ;
    HoverTrigger2.create = function(value0) {
      return new HoverTrigger2(value0);
    };
    return HoverTrigger2;
  })();
  var BrushTrigger = /* @__PURE__ */ (function() {
    function BrushTrigger2(value0) {
      this.value0 = value0;
    }
    ;
    BrushTrigger2.create = function(value0) {
      return new BrushTrigger2(value0);
    };
    return BrushTrigger2;
  })();
  var ClearTrigger = /* @__PURE__ */ (function() {
    function ClearTrigger2() {
    }
    ;
    ClearTrigger2.value = new ClearTrigger2();
    return ClearTrigger2;
  })();

  // output/Hylograph.Internal.Selection.Operations/foreign.js
  function getElementData_(element4) {
    return function() {
      return element4.__data__;
    };
  }
  function setElementData_(datum) {
    return function(element4) {
      return function() {
        element4.__data__ = datum;
      };
    };
  }
  function setTextContent_(text13) {
    return function(element4) {
      return function() {
        element4.textContent = text13;
      };
    };
  }
  function offsetX(event) {
    return event.offsetX;
  }
  function offsetY(event) {
    return event.offsetY;
  }
  function clearElement_(selector) {
    return function() {
      const el = document.querySelector(selector);
      if (el) {
        el.innerHTML = "";
      }
    };
  }
  function jsonStringify_(value18) {
    return JSON.stringify(value18);
  }

  // output/Effect.Class/index.js
  var monadEffectEffect = {
    liftEffect: /* @__PURE__ */ identity(categoryFn),
    Monad0: function() {
      return monadEffect;
    }
  };
  var liftEffect = function(dict) {
    return dict.liftEffect;
  };

  // output/Effect.Console/foreign.js
  var log2 = function(s2) {
    return function() {
      console.log(s2);
    };
  };
  var warn = function(s2) {
    return function() {
      console.warn(s2);
    };
  };

  // output/Effect.Class.Console/index.js
  var log3 = function(dictMonadEffect) {
    var $67 = liftEffect(dictMonadEffect);
    return function($68) {
      return $67(log2($68));
    };
  };

  // output/Hylograph.Internal.Behavior.FFI/foreign.js
  function registerSimulation_(simId) {
    return (reheatFn) => () => {
      registerSimulationForPointer_(simId)(reheatFn)();
    };
  }
  function unregisterSimulation_(simId) {
    return () => {
      unregisterSimulationForPointer_(simId)();
    };
  }
  function attachSimulationDragById_2(element4) {
    return (simId) => () => {
      return attachSimulationDragById_(element4)(simId)();
    };
  }
  function attachSimulationDragNestedById_2(element4) {
    return (simId) => () => {
      return attachSimulationDragNestedById_(element4)(simId)();
    };
  }
  function attachZoom_(element4) {
    return (scaleMin) => (scaleMax) => (targetSelector) => () => {
      attachZoomNative_(element4)(scaleMin)(scaleMax)(targetSelector)();
      return element4;
    };
  }
  function attachSimpleDrag_2(element4) {
    return () => () => {
      return attachSimpleDrag_(element4)()();
    };
  }
  function attachClick_(element4) {
    return (handler3) => () => {
      element4.addEventListener("click", function(event) {
        event.stopPropagation();
        handler3();
      });
      element4.style.cursor = "pointer";
      return element4;
    };
  }
  function attachClickWithDatum_(element4) {
    return (handler3) => () => {
      element4.addEventListener("click", function(event) {
        event.stopPropagation();
        const d3 = this.__data__;
        handler3(d3)();
      });
      element4.style.cursor = "pointer";
      return element4;
    };
  }
  function attachMouseEnter_(element4) {
    return (handler3) => () => {
      element4.addEventListener("mouseenter", function(event) {
        const d3 = this.__data__;
        handler3(d3)();
      });
      return element4;
    };
  }
  function attachMouseLeave_(element4) {
    return (handler3) => () => {
      element4.addEventListener("mouseleave", function(event) {
        const d3 = this.__data__;
        handler3(d3)();
      });
      return element4;
    };
  }
  function attachHighlight_(element4) {
    return (enterStyles) => (leaveStyles) => () => {
      element4.addEventListener("mouseenter", function(event) {
        if (this.parentNode) {
          this.parentNode.appendChild(this);
        }
        enterStyles.forEach((style4) => {
          this.setAttribute(style4.attr, style4.value);
        });
      });
      element4.addEventListener("mouseleave", function(event) {
        leaveStyles.forEach((style4) => {
          this.setAttribute(style4.attr, style4.value);
        });
      });
      return element4;
    };
  }
  function attachMouseMoveWithEvent_(element4) {
    return (handler3) => () => {
      element4.addEventListener("mousemove", function(event) {
        const datum = this.__data__;
        handler3(datum, event);
      });
      return element4;
    };
  }
  function attachMouseEnterWithEvent_(element4) {
    return (handler3) => () => {
      element4.addEventListener("mouseenter", function(event) {
        const datum = this.__data__;
        handler3(datum, event);
      });
      return element4;
    };
  }
  function attachMouseLeaveWithEvent_(element4) {
    return (handler3) => () => {
      element4.addEventListener("mouseleave", function(event) {
        const datum = this.__data__;
        handler3(datum, event);
      });
      return element4;
    };
  }
  function attachMouseDown_(element4) {
    return (handler3) => () => {
      element4.addEventListener("mousedown", function(event) {
        handler3();
      });
      return element4;
    };
  }
  function attachMouseDownWithEvent_(element4) {
    return (handler3) => () => {
      element4.addEventListener("mousedown", function(event) {
        const datum = this.__data__;
        handler3(datum, event);
      });
      return element4;
    };
  }
  var highlightRegistry = /* @__PURE__ */ new Map();
  var HIGHLIGHT_PRIMARY2 = "highlight-primary";
  var HIGHLIGHT_RELATED2 = "highlight-related";
  var HIGHLIGHT_DIMMED2 = "highlight-dimmed";
  var HIGHLIGHT_UPSTREAM2 = "highlight-upstream";
  var HIGHLIGHT_DOWNSTREAM2 = "highlight-downstream";
  var ALL_HIGHLIGHT_CLASSES2 = [HIGHLIGHT_PRIMARY2, HIGHLIGHT_RELATED2, HIGHLIGHT_DIMMED2, HIGHLIGHT_UPSTREAM2, HIGHLIGHT_DOWNSTREAM2];
  var HC_PRIMARY2 = 0;
  var HC_RELATED2 = 1;
  var HC_DIMMED2 = 2;
  var HC_NEUTRAL2 = 3;
  var HC_UPSTREAM2 = 4;
  var HC_DOWNSTREAM2 = 5;
  var TT_ON_HOVER2 = 0;
  var TT_WHEN_PRIMARY2 = 1;
  var TT_WHEN_RELATED2 = 2;
  var tooltipContainer = null;
  var elementTooltips = /* @__PURE__ */ new Map();
  function getTooltipContainer() {
    if (!tooltipContainer) {
      tooltipContainer = document.createElement("div");
      tooltipContainer.className = "coordinated-tooltip-container";
      tooltipContainer.style.cssText = "position: fixed; top: 0; left: 0; pointer-events: none; z-index: 10000;";
      document.body.appendChild(tooltipContainer);
    }
    return tooltipContainer;
  }
  function createTooltipElement() {
    const tooltip = document.createElement("div");
    tooltip.className = "coordinated-tooltip";
    tooltip.style.cssText = `
    position: absolute;
    background: rgba(15, 23, 42, 0.95);
    color: #e2e8f0;
    padding: 6px 10px;
    border-radius: 4px;
    font-size: 12px;
    font-family: system-ui, -apple-system, sans-serif;
    white-space: nowrap;
    pointer-events: none;
    opacity: 0;
    transition: opacity 0.15s ease-in-out;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    border: 1px solid rgba(148, 163, 184, 0.2);
  `;
    getTooltipContainer().appendChild(tooltip);
    return tooltip;
  }
  function positionTooltipNearElement(tooltip, targetElement) {
    const rect2 = targetElement.getBoundingClientRect();
    const tooltipRect = tooltip.getBoundingClientRect();
    let x7 = rect2.left + rect2.width / 2 - tooltipRect.width / 2;
    let y7 = rect2.top - tooltipRect.height - 8;
    x7 = Math.max(8, Math.min(x7, window.innerWidth - tooltipRect.width - 8));
    if (y7 < 8) {
      y7 = rect2.bottom + 8;
    }
    tooltip.style.left = `${x7}px`;
    tooltip.style.top = `${y7}px`;
  }
  function positionTooltipAtMouse(tooltip, event) {
    const x7 = event.clientX + 12;
    const y7 = event.clientY - 8;
    tooltip.style.left = `${x7}px`;
    tooltip.style.top = `${y7}px`;
  }
  function showTooltip(tooltip, content6) {
    tooltip.textContent = content6;
    tooltip.style.opacity = "1";
  }
  function hideTooltip(tooltip) {
    if (tooltip) {
      tooltip.style.opacity = "0";
    }
  }
  function getHighlightGroup(groupName) {
    const key = groupName || "_global";
    if (!highlightRegistry.has(key)) {
      highlightRegistry.set(key, []);
    }
    return highlightRegistry.get(key);
  }
  function applyHighlights(groupName, hoveredId, triggerElement, event) {
    const group4 = getHighlightGroup(groupName);
    group4.forEach((entry) => {
      const { element: element4, classifyFn, tooltipContentFn, tooltipTrigger } = entry;
      const datum = element4.__data__;
      ALL_HIGHLIGHT_CLASSES2.forEach((cls) => element4.classList.remove(cls));
      if (!datum) {
        return;
      }
      const classification = classifyFn(hoveredId)(datum);
      switch (classification) {
        case HC_PRIMARY2:
          element4.classList.add(HIGHLIGHT_PRIMARY2);
          break;
        case HC_RELATED2:
          element4.classList.add(HIGHLIGHT_RELATED2);
          break;
        case HC_DIMMED2:
          element4.classList.add(HIGHLIGHT_DIMMED2);
          break;
        case HC_UPSTREAM2:
          element4.classList.add(HIGHLIGHT_UPSTREAM2);
          break;
        case HC_DOWNSTREAM2:
          element4.classList.add(HIGHLIGHT_DOWNSTREAM2);
          break;
        case HC_NEUTRAL2:
        default:
          break;
      }
      if (tooltipContentFn) {
        const content6 = tooltipContentFn(datum);
        const shouldShow = tooltipTrigger === TT_ON_HOVER2 && element4 === triggerElement || tooltipTrigger === TT_WHEN_PRIMARY2 && classification === HC_PRIMARY2 || tooltipTrigger === TT_WHEN_RELATED2 && (classification === HC_PRIMARY2 || classification === HC_RELATED2);
        if (shouldShow) {
          let tooltip = elementTooltips.get(element4);
          if (!tooltip) {
            tooltip = createTooltipElement();
            elementTooltips.set(element4, tooltip);
          }
          showTooltip(tooltip, content6);
          if (tooltipTrigger === TT_ON_HOVER2 && event) {
            positionTooltipAtMouse(tooltip, event);
          } else {
            positionTooltipNearElement(tooltip, element4);
          }
        } else {
          const tooltip = elementTooltips.get(element4);
          if (tooltip) {
            hideTooltip(tooltip);
          }
        }
      }
    });
  }
  function clearHighlightsInGroup(groupName) {
    const group4 = getHighlightGroup(groupName);
    group4.forEach((entry) => {
      ALL_HIGHLIGHT_CLASSES2.forEach((cls) => entry.element.classList.remove(cls));
      const tooltip = elementTooltips.get(entry.element);
      if (tooltip) {
        hideTooltip(tooltip);
      }
    });
  }
  function attachCoordinatedHighlight_(element4) {
    return (identifyFn) => (classifyFn) => (groupName) => (tooltipContentFn) => (tooltipTrigger) => () => {
      const group4 = groupName;
      const groupKey = group4 || "_global";
      const entry = { element: element4, identifyFn, classifyFn, tooltipContentFn, tooltipTrigger };
      getHighlightGroup(group4).push(entry);
      element4.addEventListener("mouseenter", function(event) {
        const d3 = this.__data__;
        if (!d3) return;
        const id4 = identifyFn(d3);
        applyHighlights(group4, id4, element4, event);
      });
      element4.addEventListener("mouseleave", function(event) {
        clearHighlightsInGroup(group4);
      });
      return element4;
    };
  }

  // output/Hylograph.Internal.Selection.Join/index.js
  var unsafeIndex2 = /* @__PURE__ */ unsafeIndex();
  var foldlWithIndex2 = /* @__PURE__ */ foldlWithIndex(foldableWithIndexArray);
  var computeJoinWithKey = function(dictEq) {
    var eq9 = eq(dictEq);
    return function(newData) {
      return function(oldBindings) {
        return function(keyFn) {
          var processNewDatum = function(newIndex) {
            return function(state3) {
              return function(datum) {
                var newKey = keyFn(datum);
                var v2 = findIndex(function(v1) {
                  return eq9(keyFn(v1.datum))(newKey);
                })(state3.remainingOld);
                if (v2 instanceof Nothing) {
                  var enterBinding = {
                    datum,
                    newIndex
                  };
                  return {
                    remainingOld: state3.remainingOld,
                    matchedIndices: state3.matchedIndices,
                    update: state3.update,
                    enter: cons(enterBinding)(state3.enter)
                  };
                }
                ;
                if (v2 instanceof Just) {
                  var newRemaining = fromMaybe(state3.remainingOld)(deleteAt(v2.value0)(state3.remainingOld));
                  var matched = unsafeIndex2(state3.remainingOld)(v2.value0);
                  var updateBinding = {
                    element: matched.element,
                    oldDatum: datum,
                    newDatum: datum,
                    newIndex
                  };
                  return {
                    enter: state3.enter,
                    update: cons(updateBinding)(state3.update),
                    remainingOld: newRemaining,
                    matchedIndices: cons(v2.value0)(state3.matchedIndices)
                  };
                }
                ;
                throw new Error("Failed pattern match at Hylograph.Internal.Selection.Join (line 181, column 9 - line 203, column 18): " + [v2.constructor.name]);
              };
            };
          };
          var matchResult = foldlWithIndex2(processNewDatum)({
            remainingOld: oldBindings,
            enter: [],
            update: [],
            matchedIndices: []
          })(newData);
          return {
            enter: reverse(matchResult.enter),
            update: reverse(matchResult.update),
            exit: matchResult.remainingOld
          };
        };
      };
    };
  };
  var computeJoin = function(dictEq) {
    var eq9 = eq(dictEq);
    return function(newData) {
      return function(oldBindings) {
        var processNewDatum = function(newIndex) {
          return function(state3) {
            return function(datum) {
              var v2 = findIndex(function(v1) {
                return eq9(v1.datum)(datum);
              })(state3.remainingOld);
              if (v2 instanceof Nothing) {
                var enterBinding = {
                  datum,
                  newIndex
                };
                return {
                  remainingOld: state3.remainingOld,
                  matchedIndices: state3.matchedIndices,
                  update: state3.update,
                  enter: cons(enterBinding)(state3.enter)
                };
              }
              ;
              if (v2 instanceof Just) {
                var newRemaining = fromMaybe(state3.remainingOld)(deleteAt(v2.value0)(state3.remainingOld));
                var matched = unsafeIndex2(state3.remainingOld)(v2.value0);
                var updateBinding = {
                  element: matched.element,
                  oldDatum: datum,
                  newDatum: datum,
                  newIndex
                };
                return {
                  enter: state3.enter,
                  update: cons(updateBinding)(state3.update),
                  remainingOld: newRemaining,
                  matchedIndices: cons(v2.value0)(state3.matchedIndices)
                };
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Join (line 114, column 7 - line 136, column 16): " + [v2.constructor.name]);
            };
          };
        };
        var matchResult = foldlWithIndex2(processNewDatum)({
          remainingOld: oldBindings,
          enter: [],
          update: [],
          matchedIndices: []
        })(newData);
        return {
          enter: reverse(matchResult.enter),
          update: reverse(matchResult.update),
          exit: matchResult.remainingOld
        };
      };
    };
  };

  // output/Hylograph.Internal.Transition.FFI/foreign.js
  function createTransition_(duration2) {
    return function(delay2) {
      return function(easingName) {
        return function(element4) {
          return function() {
            const handle = {
              element: element4,
              duration: duration2,
              delay: delay2 ?? 0,
              easing: mapEasingToCss(easingName),
              attrs: [],
              // [{name, value}] collected via transitionSetAttribute_
              removeOnEnd: false,
              // set by transitionRemove_
              committed: false,
              animation: null
            };
            queueMicrotask(() => commitTransition(handle));
            return handle;
          };
        };
      };
    };
  }
  function transitionSetAttribute_(name16) {
    return function(value18) {
      return function(handle) {
        return function() {
          if (handle.committed) {
            setElementProperty(handle.element, name16, value18);
            return;
          }
          handle.attrs.push({ name: name16, value: value18 });
        };
      };
    };
  }
  function transitionRemove_(handle) {
    return function() {
      handle.removeOnEnd = true;
    };
  }
  function commitTransition(handle) {
    if (handle.committed) return;
    handle.committed = true;
    const { element: element4, duration: duration2, delay: delay2, easing, attrs, removeOnEnd } = handle;
    if (attrs.length === 0) {
      if (removeOnEnd) {
        setTimeout(() => element4.remove(), delay2);
      }
      return;
    }
    const animatableAttrs = [];
    const propertyAttrs = [];
    for (const { name: name16, value: value18 } of attrs) {
      if (isNonAnimatableProperty(name16)) {
        propertyAttrs.push({ name: name16, value: value18 });
      } else {
        animatableAttrs.push({ name: name16, value: value18 });
      }
    }
    for (const { name: name16, value: value18 } of propertyAttrs) {
      setElementProperty(element4, name16, value18);
    }
    if (animatableAttrs.length === 0) {
      if (removeOnEnd) {
        setTimeout(() => element4.remove(), delay2 + duration2);
      }
      return;
    }
    const fromFrame = {};
    const toFrame = {};
    for (const { name: name16, value: value18 } of animatableAttrs) {
      const currentValue = element4.getAttribute(name16) ?? getDefaultAttrValue(name16);
      const cssName = attrToCssProp(name16);
      fromFrame[cssName] = toAnimatableValue(currentValue);
      toFrame[cssName] = toAnimatableValue(value18);
    }
    try {
      const animation = element4.animate(
        [fromFrame, toFrame],
        {
          duration: duration2,
          delay: delay2,
          easing,
          fill: "forwards"
          // Keep final values
        }
      );
      handle.animation = animation;
      animation.onfinish = () => {
        for (const { name: name16, value: value18 } of animatableAttrs) {
          element4.setAttribute(name16, value18);
        }
        animation.cancel();
        if (removeOnEnd) {
          element4.remove();
        }
      };
    } catch (e) {
      for (const { name: name16, value: value18 } of animatableAttrs) {
        element4.setAttribute(name16, value18);
      }
      if (removeOnEnd) {
        setTimeout(() => element4.remove(), delay2 + duration2);
      }
    }
  }
  function isNonAnimatableProperty(name16) {
    return name16 === "textContent" || name16 === "innerHTML" || name16 === "innerText";
  }
  function toAnimatableValue(value18) {
    if (typeof value18 === "number") return value18;
    const num7 = parseFloat(value18);
    if (!isNaN(num7) && isFinite(num7)) {
      const trimmed = String(value18).trim();
      if (trimmed === String(num7) || trimmed === num7.toFixed(0) || /^-?\d+\.?\d*$/.test(trimmed)) {
        return num7;
      }
    }
    return value18;
  }
  function setElementProperty(element4, name16, value18) {
    if (name16 === "textContent") {
      element4.textContent = value18;
    } else if (name16 === "innerHTML") {
      element4.innerHTML = value18;
    } else if (name16 === "innerText") {
      element4.innerText = value18;
    } else {
      element4.setAttribute(name16, value18);
    }
  }
  function mapEasingToCss(name16) {
    if (!name16) return "ease-out";
    const easingMap = {
      // Linear
      "linear": "linear",
      // Polynomial (Quad) - CSS ease equivalents
      "quad": "ease-out",
      "quadIn": "ease-in",
      "quadOut": "ease-out",
      "quadInOut": "ease-in-out",
      // Cubic - CSS ease equivalents (very close)
      "cubic": "cubic-bezier(0.215, 0.61, 0.355, 1)",
      "cubicIn": "cubic-bezier(0.55, 0.055, 0.675, 0.19)",
      "cubicOut": "cubic-bezier(0.215, 0.61, 0.355, 1)",
      "cubicInOut": "cubic-bezier(0.645, 0.045, 0.355, 1)",
      // Sinusoidal
      "sin": "cubic-bezier(0.39, 0.575, 0.565, 1)",
      "sinIn": "cubic-bezier(0.47, 0, 0.745, 0.715)",
      "sinOut": "cubic-bezier(0.39, 0.575, 0.565, 1)",
      "sinInOut": "cubic-bezier(0.445, 0.05, 0.55, 0.95)",
      // Exponential
      "exp": "cubic-bezier(0.19, 1, 0.22, 1)",
      "expIn": "cubic-bezier(0.95, 0.05, 0.795, 0.035)",
      "expOut": "cubic-bezier(0.19, 1, 0.22, 1)",
      "expInOut": "cubic-bezier(1, 0, 0, 1)",
      // Circular
      "circle": "cubic-bezier(0.075, 0.82, 0.165, 1)",
      "circleIn": "cubic-bezier(0.6, 0.04, 0.98, 0.335)",
      "circleOut": "cubic-bezier(0.075, 0.82, 0.165, 1)",
      "circleInOut": "cubic-bezier(0.785, 0.135, 0.15, 0.86)",
      // These don't have CSS equivalents - use approximations
      "elastic": "cubic-bezier(0.68, -0.55, 0.265, 1.55)",
      "elasticIn": "cubic-bezier(0.6, -0.28, 0.735, 0.045)",
      "elasticOut": "cubic-bezier(0.175, 0.885, 0.32, 1.275)",
      "elasticInOut": "cubic-bezier(0.68, -0.55, 0.265, 1.55)",
      "back": "cubic-bezier(0.175, 0.885, 0.32, 1.275)",
      "backIn": "cubic-bezier(0.6, -0.28, 0.735, 0.045)",
      "backOut": "cubic-bezier(0.175, 0.885, 0.32, 1.275)",
      "backInOut": "cubic-bezier(0.68, -0.55, 0.265, 1.55)",
      "bounce": "ease-out",
      "bounceIn": "ease-in",
      "bounceOut": "ease-out",
      "bounceInOut": "ease-in-out"
    };
    return easingMap[name16] || "ease-out";
  }
  function attrToCssProp(name16) {
    const mapping = {
      "fill": "fill",
      "stroke": "stroke",
      "opacity": "opacity",
      "fill-opacity": "fillOpacity",
      "stroke-opacity": "strokeOpacity",
      "stroke-width": "strokeWidth",
      "transform": "transform",
      // Positional attributes are camelCased in Web Animations
      "cx": "cx",
      "cy": "cy",
      "r": "r",
      "x": "x",
      "y": "y",
      "x1": "x1",
      "y1": "y1",
      "x2": "x2",
      "y2": "y2",
      "width": "width",
      "height": "height",
      "rx": "rx",
      "ry": "ry",
      "d": "d"
    };
    return mapping[name16] || name16;
  }
  function getDefaultAttrValue(name16) {
    const defaults = {
      "opacity": "1",
      "fill-opacity": "1",
      "stroke-opacity": "1",
      "stroke-width": "1",
      "r": "0",
      "cx": "0",
      "cy": "0",
      "x": "0",
      "y": "0",
      "width": "0",
      "height": "0"
    };
    return defaults[name16] || "0";
  }

  // output/Hylograph.Internal.Transition.FFI/index.js
  var map14 = /* @__PURE__ */ map(functorMaybe);
  var maybeEasingToNullable = /* @__PURE__ */ (function() {
    var $6 = map14(show(showEasing));
    return function($7) {
      return toNullable($6($7));
    };
  })();

  // output/Partial.Unsafe/foreign.js
  var _unsafePartial = function(f) {
    return f();
  };

  // output/Partial/foreign.js
  var _crashWith = function(msg) {
    throw new Error(msg);
  };

  // output/Partial/index.js
  var crashWith = function() {
    return _crashWith;
  };

  // output/Partial.Unsafe/index.js
  var crashWith2 = /* @__PURE__ */ crashWith();
  var unsafePartial = _unsafePartial;
  var unsafeCrashWith = function(msg) {
    return unsafePartial(function() {
      return crashWith2(msg);
    });
  };

  // output/Web.DOM.Document/foreign.js
  var getEffProp = function(name16) {
    return function(doc) {
      return function() {
        return doc[name16];
      };
    };
  };
  var url = getEffProp("URL");
  var documentURI = getEffProp("documentURI");
  var origin = getEffProp("origin");
  var compatMode = getEffProp("compatMode");
  var characterSet = getEffProp("characterSet");
  var contentType = getEffProp("contentType");
  var _documentElement = getEffProp("documentElement");
  function createElement(localName2) {
    return function(doc) {
      return function() {
        return doc.createElement(localName2);
      };
    };
  }
  function _createElementNS(ns) {
    return function(qualifiedName) {
      return function(doc) {
        return function() {
          return doc.createElementNS(ns, qualifiedName);
        };
      };
    };
  }

  // output/Web.Internal.FFI/foreign.js
  function _unsafeReadProtoTagged(nothing, just, name16, value18) {
    if (typeof window !== "undefined") {
      var ty = window[name16];
      if (ty != null && value18 instanceof ty) {
        return just(value18);
      }
    }
    var obj = value18;
    while (obj != null) {
      var proto = Object.getPrototypeOf(obj);
      var constructorName = proto.constructor.name;
      if (constructorName === name16) {
        return just(value18);
      } else if (constructorName === "Object") {
        return nothing;
      }
      obj = proto;
    }
    return nothing;
  }

  // output/Web.Internal.FFI/index.js
  var unsafeReadProtoTagged = function(name16) {
    return function(value18) {
      return _unsafeReadProtoTagged(Nothing.value, Just.create, name16, value18);
    };
  };

  // output/Web.DOM.Document/index.js
  var toParentNode = unsafeCoerce2;
  var createElementNS = function($6) {
    return _createElementNS(toNullable($6));
  };

  // output/Web.DOM.Element/foreign.js
  var getProp = function(name16) {
    return function(doctype) {
      return doctype[name16];
    };
  };
  var _namespaceURI = getProp("namespaceURI");
  var _prefix = getProp("prefix");
  var localName = getProp("localName");
  var tagName = getProp("tagName");
  function setAttribute3(name16) {
    return function(value18) {
      return function(element4) {
        return function() {
          element4.setAttribute(name16, value18);
        };
      };
    };
  }
  function _getAttribute(name16) {
    return function(element4) {
      return function() {
        return element4.getAttribute(name16);
      };
    };
  }

  // output/Web.DOM.ParentNode/foreign.js
  var getEffProp2 = function(name16) {
    return function(node) {
      return function() {
        return node[name16];
      };
    };
  };
  var children = getEffProp2("children");
  var _firstElementChild = getEffProp2("firstElementChild");
  var _lastElementChild = getEffProp2("lastElementChild");
  var childElementCount = getEffProp2("childElementCount");
  function _querySelector(selector) {
    return function(node) {
      return function() {
        return node.querySelector(selector);
      };
    };
  }
  function querySelectorAll(selector) {
    return function(node) {
      return function() {
        return node.querySelectorAll(selector);
      };
    };
  }

  // output/Web.DOM.ParentNode/index.js
  var map15 = /* @__PURE__ */ map(functorEffect);
  var querySelector = function(qs) {
    var $2 = map15(toMaybe);
    var $3 = _querySelector(qs);
    return function($4) {
      return $2($3($4));
    };
  };

  // output/Web.DOM.Element/index.js
  var map16 = /* @__PURE__ */ map(functorEffect);
  var toParentNode2 = unsafeCoerce2;
  var toNode = unsafeCoerce2;
  var getAttribute2 = function(attr10) {
    var $6 = map16(toMaybe);
    var $7 = _getAttribute(attr10);
    return function($8) {
      return $6($7($8));
    };
  };
  var fromNode = /* @__PURE__ */ unsafeReadProtoTagged("Element");

  // output/Web.DOM.Node/foreign.js
  var getEffProp3 = function(name16) {
    return function(node) {
      return function() {
        return node[name16];
      };
    };
  };
  var baseURI = getEffProp3("baseURI");
  var _ownerDocument = getEffProp3("ownerDocument");
  var _parentNode = getEffProp3("parentNode");
  var _parentElement = getEffProp3("parentElement");
  var childNodes = getEffProp3("childNodes");
  var _firstChild = getEffProp3("firstChild");
  var _lastChild = getEffProp3("lastChild");
  var _previousSibling = getEffProp3("previousSibling");
  var _nextSibling = getEffProp3("nextSibling");
  var _nodeValue = getEffProp3("nodeValue");
  var textContent2 = getEffProp3("textContent");
  function setTextContent(value18) {
    return function(node) {
      return function() {
        node.textContent = value18;
      };
    };
  }
  function insertBefore(node1) {
    return function(node2) {
      return function(parent2) {
        return function() {
          parent2.insertBefore(node1, node2);
        };
      };
    };
  }
  function appendChild(node) {
    return function(parent2) {
      return function() {
        parent2.appendChild(node);
      };
    };
  }
  function removeChild(node) {
    return function(parent2) {
      return function() {
        parent2.removeChild(node);
      };
    };
  }

  // output/Web.DOM.Node/index.js
  var map17 = /* @__PURE__ */ map(functorEffect);
  var parentNode = /* @__PURE__ */ (function() {
    var $6 = map17(toMaybe);
    return function($7) {
      return $6(_parentNode($7));
    };
  })();
  var nextSibling = /* @__PURE__ */ (function() {
    var $15 = map17(toMaybe);
    return function($16) {
      return $15(_nextSibling($16));
    };
  })();

  // output/Web.DOM.NodeList/foreign.js
  function toArray2(list) {
    return function() {
      return [].slice.call(list);
    };
  }

  // output/Web.HTML/foreign.js
  var windowImpl = function() {
    return window;
  };

  // output/Web.HTML.HTMLDocument/foreign.js
  function _readyState(doc) {
    return doc.readyState;
  }

  // output/Web.HTML.HTMLDocument.ReadyState/index.js
  var Loading = /* @__PURE__ */ (function() {
    function Loading2() {
    }
    ;
    Loading2.value = new Loading2();
    return Loading2;
  })();
  var Interactive = /* @__PURE__ */ (function() {
    function Interactive2() {
    }
    ;
    Interactive2.value = new Interactive2();
    return Interactive2;
  })();
  var Complete2 = /* @__PURE__ */ (function() {
    function Complete3() {
    }
    ;
    Complete3.value = new Complete3();
    return Complete3;
  })();
  var parse = function(v2) {
    if (v2 === "loading") {
      return new Just(Loading.value);
    }
    ;
    if (v2 === "interactive") {
      return new Just(Interactive.value);
    }
    ;
    if (v2 === "complete") {
      return new Just(Complete2.value);
    }
    ;
    return Nothing.value;
  };

  // output/Web.HTML.HTMLDocument/index.js
  var map18 = /* @__PURE__ */ map(functorEffect);
  var toParentNode3 = unsafeCoerce2;
  var toDocument = unsafeCoerce2;
  var readyState = function(doc) {
    return map18((function() {
      var $4 = fromMaybe(Loading.value);
      return function($5) {
        return $4(parse($5));
      };
    })())(function() {
      return _readyState(doc);
    });
  };

  // output/Web.HTML.HTMLElement/foreign.js
  function _read(nothing, just, value18) {
    var tag = Object.prototype.toString.call(value18);
    if (tag.indexOf("[object HTML") === 0 && tag.indexOf("Element]") === tag.length - 8) {
      return just(value18);
    } else {
      return nothing;
    }
  }

  // output/Web.HTML.HTMLElement/index.js
  var toNode2 = unsafeCoerce2;
  var fromElement = function(x7) {
    return _read(Nothing.value, Just.create, x7);
  };

  // output/Web.HTML.Location/foreign.js
  function hash(location2) {
    return function() {
      return location2.hash;
    };
  }
  function setHash(hash2) {
    return function(location2) {
      return function() {
        location2.hash = hash2;
      };
    };
  }

  // output/Web.HTML.Window/foreign.js
  function document2(window2) {
    return function() {
      return window2.document;
    };
  }
  function location(window2) {
    return function() {
      return window2.location;
    };
  }
  function scroll(xCoord) {
    return function(yCoord) {
      return function(window2) {
        return function() {
          window2.scroll(xCoord, yCoord);
        };
      };
    };
  }

  // output/Web.HTML.Window/index.js
  var toEventTarget = unsafeCoerce2;

  // output/Web.UIEvent.MouseEvent/foreign.js
  function clientX(e) {
    return e.clientX;
  }
  function clientY(e) {
    return e.clientY;
  }
  function pageX(e) {
    return e.pageX;
  }
  function pageY(e) {
    return e.pageY;
  }

  // output/Hylograph.Internal.Selection.Operations/index.js
  var bind3 = /* @__PURE__ */ bind(bindEffect);
  var pure4 = /* @__PURE__ */ pure(applicativeEffect);
  var traverse3 = /* @__PURE__ */ traverse(traversableArray)(applicativeEffect);
  var discard2 = /* @__PURE__ */ discard(discardUnit);
  var map19 = /* @__PURE__ */ map(functorArray);
  var traverse_2 = /* @__PURE__ */ traverse_(applicativeEffect)(foldableArray);
  var append12 = /* @__PURE__ */ append(semigroupArray);
  var mapFlipped1 = /* @__PURE__ */ mapFlipped(functorMaybe);
  var compare2 = /* @__PURE__ */ compare(ordInt);
  var mapFlipped2 = /* @__PURE__ */ mapFlipped(functorArray);
  var show8 = /* @__PURE__ */ show(showNumber);
  var show1 = /* @__PURE__ */ show(showBoolean);
  var unwrap2 = /* @__PURE__ */ unwrap();
  var traverseWithIndex_2 = /* @__PURE__ */ traverseWithIndex_(applicativeEffect)(foldableWithIndexArray);
  var $$void5 = /* @__PURE__ */ $$void(functorEffect);
  var unsafeIndex3 = /* @__PURE__ */ unsafeIndex();
  var traverseWithIndex2 = /* @__PURE__ */ traverseWithIndex(traversableWithIndexArray)(applicativeEffect);
  var mod3 = /* @__PURE__ */ mod(euclideanRingInt);
  var union2 = /* @__PURE__ */ union(ordString);
  var insert5 = /* @__PURE__ */ insert(ordString);
  var liftEffect2 = /* @__PURE__ */ liftEffect(monadEffectEffect);
  var log4 = /* @__PURE__ */ log3(monadEffectEffect);
  var show22 = /* @__PURE__ */ show(showInt);
  var join2 = /* @__PURE__ */ join(bindArray);
  var tooltipTriggerToInt = function(v2) {
    if (v2 instanceof OnHover) {
      return 0;
    }
    ;
    if (v2 instanceof WhenPrimary) {
      return 1;
    }
    ;
    if (v2 instanceof WhenRelated) {
      return 2;
    }
    ;
    throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1004, column 1 - line 1004, column 45): " + [v2.constructor.name]);
  };
  var stringToElementType = function(v2) {
    if (v2 === "circle") {
      return Circle.value;
    }
    ;
    if (v2 === "rect") {
      return Rect.value;
    }
    ;
    if (v2 === "path") {
      return Path.value;
    }
    ;
    if (v2 === "line") {
      return Line.value;
    }
    ;
    if (v2 === "polygon") {
      return Polygon.value;
    }
    ;
    if (v2 === "text") {
      return Text.value;
    }
    ;
    if (v2 === "g") {
      return Group.value;
    }
    ;
    if (v2 === "svg") {
      return SVG.value;
    }
    ;
    if (v2 === "defs") {
      return Defs.value;
    }
    ;
    if (v2 === "linearGradient") {
      return LinearGradient.value;
    }
    ;
    if (v2 === "stop") {
      return Stop.value;
    }
    ;
    if (v2 === "pattern") {
      return PatternFill.value;
    }
    ;
    if (v2 === "div") {
      return Div.value;
    }
    ;
    if (v2 === "span") {
      return Span.value;
    }
    ;
    if (v2 === "table") {
      return Table.value;
    }
    ;
    if (v2 === "tr") {
      return Tr.value;
    }
    ;
    if (v2 === "td") {
      return Td.value;
    }
    ;
    if (v2 === "th") {
      return Th.value;
    }
    ;
    if (v2 === "tbody") {
      return Tbody.value;
    }
    ;
    if (v2 === "thead") {
      return Thead.value;
    }
    ;
    return Group.value;
  };
  var selectElement2 = function(dictMonadEffect) {
    var liftEffect12 = liftEffect(dictMonadEffect);
    return function(element4) {
      return liftEffect12(function __do7() {
        var htmlDoc = bind3(windowImpl)(document2)();
        var doc = toDocument(htmlDoc);
        return new EmptySelection({
          parentElements: [element4],
          document: doc
        });
      });
    };
  };
  var select3 = function(dictMonadEffect) {
    var liftEffect12 = liftEffect(dictMonadEffect);
    return function(selector) {
      return liftEffect12(function __do7() {
        var htmlDoc = bind3(windowImpl)(document2)();
        var doc = toDocument(htmlDoc);
        var parentNode3 = toParentNode3(htmlDoc);
        var maybeElement = querySelector(selector)(parentNode3)();
        if (maybeElement instanceof Nothing) {
          return new EmptySelection({
            parentElements: [],
            document: doc
          });
        }
        ;
        if (maybeElement instanceof Just) {
          return new EmptySelection({
            parentElements: [maybeElement.value0],
            document: doc
          });
        }
        ;
        throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 129, column 3 - line 137, column 8): " + [maybeElement.constructor.name]);
      });
    };
  };
  var remove = function(dictMonadEffect) {
    var liftEffect12 = liftEffect(dictMonadEffect);
    return function(v2) {
      return liftEffect12((function() {
        var v1 = (function() {
          if (v2 instanceof ExitingSelection) {
            return v2.value0;
          }
          ;
          throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 385, column 34 - line 386, column 30): " + [v2.constructor.name]);
        })();
        return traverse_2(function(element4) {
          var node = toNode(element4);
          return function __do7() {
            var maybeParent = parentNode(node)();
            if (maybeParent instanceof Just) {
              return removeChild(node)(maybeParent.value0)();
            }
            ;
            if (maybeParent instanceof Nothing) {
              return unit;
            }
            ;
            throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 390, column 5 - line 392, column 27): " + [maybeParent.constructor.name]);
          };
        })(v1.elements);
      })());
    };
  };
  var remove1 = /* @__PURE__ */ remove(monadEffectEffect);
  var querySelectorAllElements = function(selector) {
    return function(parents) {
      return function __do7() {
        var nodeArrays = traverse3(function(parent2) {
          var parentNode3 = toParentNode2(parent2);
          return function __do8() {
            var nodeList = querySelectorAll(selector)(parentNode3)();
            var nodes = toArray2(nodeList)();
            return mapMaybe(fromNode)(nodes);
          };
        })(parents)();
        return concat(nodeArrays);
      };
    };
  };
  var merge = function(dictMonadEffect) {
    var pure118 = pure(dictMonadEffect.Monad0().Applicative0());
    return function(v2) {
      return function(v1) {
        var v22 = (function() {
          if (v2 instanceof BoundSelection) {
            return v2.value0;
          }
          ;
          throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 647, column 68 - line 648, column 28): " + [v2.constructor.name]);
        })();
        var v3 = (function() {
          if (v1 instanceof BoundSelection) {
            return v1.value0;
          }
          ;
          throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 650, column 53 - line 651, column 28): " + [v1.constructor.name]);
        })();
        return pure118(new BoundSelection({
          elements: append12(v22.elements)(v3.elements),
          data: append12(v22.data)(v3.data),
          indices: Nothing.value,
          document: v22.document
        }));
      };
    };
  };
  var joinDataWithKey = function(dictMonadEffect) {
    var liftEffect12 = liftEffect(dictMonadEffect);
    return function(dictFoldable) {
      var fromFoldable27 = fromFoldable(dictFoldable);
      return function(dictEq) {
        var computeJoinWithKey2 = computeJoinWithKey(dictEq);
        return function(foldableData) {
          return function(keyFn) {
            return function(selector) {
              return function(v2) {
                return liftEffect12((function() {
                  var v1 = (function() {
                    if (v2 instanceof EmptySelection) {
                      return v2.value0;
                    }
                    ;
                    throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 771, column 55 - line 772, column 28): " + [v2.constructor.name]);
                  })();
                  return function __do7() {
                    var existingElements = querySelectorAllElements(selector)(v1.parentElements)();
                    var oldBindings = traverse3(function(element4) {
                      return function __do8() {
                        var nullableDatum = getElementData_(element4)();
                        var maybeDatum = toMaybe(nullableDatum);
                        return {
                          element: element4,
                          datum: maybeDatum
                        };
                      };
                    })(existingElements)();
                    var validOldBindings = mapMaybe(function(v22) {
                      return mapFlipped1(v22.datum)(function(d3) {
                        return {
                          element: v22.element,
                          datum: d3
                        };
                      });
                    })(oldBindings);
                    var newDataArray = fromFoldable27(foldableData);
                    var joinSets = computeJoinWithKey2(newDataArray)(validOldBindings)(keyFn);
                    var sortedEnter = sortBy(function(a3) {
                      return function(b2) {
                        return compare2(a3.newIndex)(b2.newIndex);
                      };
                    })(joinSets.enter);
                    var enterSelection = new PendingSelection({
                      parentElements: v1.parentElements,
                      pendingData: mapFlipped2(sortedEnter)(function(v22) {
                        return v22.datum;
                      }),
                      indices: new Just(mapFlipped2(sortedEnter)(function(v22) {
                        return v22.newIndex;
                      })),
                      document: v1.document
                    });
                    var sortedUpdate = sortBy(function(a3) {
                      return function(b2) {
                        return compare2(a3.newIndex)(b2.newIndex);
                      };
                    })(joinSets.update);
                    var updateSelection = new BoundSelection({
                      elements: mapFlipped2(sortedUpdate)(function(v22) {
                        return v22.element;
                      }),
                      data: mapFlipped2(sortedUpdate)(function(v22) {
                        return v22.newDatum;
                      }),
                      indices: new Just(mapFlipped2(sortedUpdate)(function(v22) {
                        return v22.newIndex;
                      })),
                      document: v1.document
                    });
                    var exitSelection = new ExitingSelection({
                      elements: mapFlipped2(joinSets.exit)(function(v22) {
                        return v22.element;
                      }),
                      data: mapFlipped2(joinSets.exit)(function(v22) {
                        return v22.datum;
                      }),
                      document: v1.document
                    });
                    return new JoinResult({
                      enter: enterSelection,
                      update: updateSelection,
                      exit: exitSelection
                    });
                  };
                })());
              };
            };
          };
        };
      };
    };
  };
  var joinDataWithKey1 = /* @__PURE__ */ joinDataWithKey(monadEffectEffect)(foldableArray)(eqString);
  var joinData2 = function(dictMonadEffect) {
    var liftEffect12 = liftEffect(dictMonadEffect);
    return function(dictFoldable) {
      var fromFoldable27 = fromFoldable(dictFoldable);
      return function(dictOrd) {
        var computeJoin2 = computeJoin(dictOrd.Eq0());
        return function(foldableData) {
          return function(selector) {
            return function(v2) {
              return liftEffect12((function() {
                var v1 = (function() {
                  if (v2 instanceof EmptySelection) {
                    return v2.value0;
                  }
                  ;
                  throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 682, column 55 - line 683, column 28): " + [v2.constructor.name]);
                })();
                return function __do7() {
                  var existingElements = querySelectorAllElements(selector)(v1.parentElements)();
                  var oldBindings = traverse3(function(element4) {
                    return function __do8() {
                      var nullableDatum = getElementData_(element4)();
                      var maybeDatum = toMaybe(nullableDatum);
                      return {
                        element: element4,
                        datum: maybeDatum
                      };
                    };
                  })(existingElements)();
                  var validOldBindings = mapMaybe(function(v22) {
                    return mapFlipped1(v22.datum)(function(d3) {
                      return {
                        element: v22.element,
                        datum: d3
                      };
                    });
                  })(oldBindings);
                  var newDataArray = fromFoldable27(foldableData);
                  var joinSets = computeJoin2(newDataArray)(validOldBindings);
                  var sortedEnter = sortBy(function(a3) {
                    return function(b2) {
                      return compare2(a3.newIndex)(b2.newIndex);
                    };
                  })(joinSets.enter);
                  var enterSelection = new PendingSelection({
                    parentElements: v1.parentElements,
                    pendingData: mapFlipped2(sortedEnter)(function(v22) {
                      return v22.datum;
                    }),
                    indices: new Just(mapFlipped2(sortedEnter)(function(v22) {
                      return v22.newIndex;
                    })),
                    document: v1.document
                  });
                  var sortedUpdate = sortBy(function(a3) {
                    return function(b2) {
                      return compare2(a3.newIndex)(b2.newIndex);
                    };
                  })(joinSets.update);
                  var updateSelection = new BoundSelection({
                    elements: mapFlipped2(sortedUpdate)(function(v22) {
                      return v22.element;
                    }),
                    data: mapFlipped2(sortedUpdate)(function(v22) {
                      return v22.newDatum;
                    }),
                    indices: new Just(mapFlipped2(sortedUpdate)(function(v22) {
                      return v22.newIndex;
                    })),
                    document: v1.document
                  });
                  var exitSelection = new ExitingSelection({
                    elements: mapFlipped2(joinSets.exit)(function(v22) {
                      return v22.element;
                    }),
                    data: mapFlipped2(joinSets.exit)(function(v22) {
                      return v22.datum;
                    }),
                    document: v1.document
                  });
                  return new JoinResult({
                    enter: enterSelection,
                    update: updateSelection,
                    exit: exitSelection
                  });
                };
              })());
            };
          };
        };
      };
    };
  };
  var joinData1 = /* @__PURE__ */ joinData2(monadEffectEffect)(foldableArray);
  var highlightClassToInt = function(v2) {
    if (v2 instanceof Primary) {
      return 0;
    }
    ;
    if (v2 instanceof Related) {
      return 1;
    }
    ;
    if (v2 instanceof Dimmed) {
      return 2;
    }
    ;
    if (v2 instanceof Neutral) {
      return 3;
    }
    ;
    if (v2 instanceof Upstream) {
      return 4;
    }
    ;
    if (v2 instanceof Downstream) {
      return 5;
    }
    ;
    throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 994, column 1 - line 994, column 45): " + [v2.constructor.name]);
  };
  var getExitingElementDatumPairs = function(v2) {
    var v1 = (function() {
      if (v2 instanceof ExitingSelection) {
        return v2.value0;
      }
      ;
      throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1350, column 52 - line 1351, column 30): " + [v2.constructor.name]);
    })();
    return zipWith(Tuple.create)(v1.elements)(v1.data);
  };
  var getElementsFromBoundSelection = function(v2) {
    if (v2 instanceof BoundSelection) {
      return v2.value0.elements;
    }
    ;
    throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1373, column 17 - line 1374, column 35): " + [v2.constructor.name]);
  };
  var getDocument = function(v2) {
    if (v2 instanceof EmptySelection) {
      return pure4(v2.value0.document);
    }
    ;
    if (v2 instanceof BoundSelection) {
      return pure4(v2.value0.document);
    }
    ;
    if (v2 instanceof PendingSelection) {
      return pure4(v2.value0.document);
    }
    ;
    if (v2 instanceof ExitingSelection) {
      return pure4(v2.value0.document);
    }
    ;
    throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 960, column 1 - line 960, column 82): " + [v2.constructor.name]);
  };
  var selectAll = function(dictMonadEffect) {
    var liftEffect12 = liftEffect(dictMonadEffect);
    return function(selector) {
      return function(v2) {
        return liftEffect12(function __do7() {
          var doc = getDocument(v2)();
          var parentElems = (function() {
            if (v2 instanceof EmptySelection) {
              return v2.value0.parentElements;
            }
            ;
            if (v2 instanceof BoundSelection) {
              return v2.value0.elements;
            }
            ;
            if (v2 instanceof PendingSelection) {
              return v2.value0.parentElements;
            }
            ;
            if (v2 instanceof ExitingSelection) {
              return v2.value0.elements;
            }
            ;
            throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 183, column 19 - line 187, column 48): " + [v2.constructor.name]);
          })();
          return new EmptySelection({
            parentElements: parentElems,
            document: doc
          });
        });
      };
    };
  };
  var selectAllWithData = function(dictMonadEffect) {
    var liftEffect12 = liftEffect(dictMonadEffect);
    return function(selector) {
      return function(v2) {
        return liftEffect12(function __do7() {
          var doc = getDocument(v2)();
          var elements = (function() {
            if (v2 instanceof EmptySelection) {
              return querySelectorAllElements(selector)(v2.value0.parentElements)();
            }
            ;
            if (v2 instanceof BoundSelection) {
              return querySelectorAllElements(selector)(v2.value0.elements)();
            }
            ;
            if (v2 instanceof PendingSelection) {
              return querySelectorAllElements(selector)(v2.value0.parentElements)();
            }
            ;
            if (v2 instanceof ExitingSelection) {
              return querySelectorAllElements(selector)(v2.value0.elements)();
            }
            ;
            throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 215, column 15 - line 223, column 50): " + [v2.constructor.name]);
          })();
          var dataArray = traverse3(function(el) {
            return function __do8() {
              var nullableDatum = getElementData_(el)();
              var v1 = toMaybe(nullableDatum);
              if (v1 instanceof Just) {
                return v1.value0;
              }
              ;
              if (v1 instanceof Nothing) {
                return unit;
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 229, column 16 - line 231, column 39): " + [v1.constructor.name]);
            };
          })(elements)();
          return new BoundSelection({
            elements,
            data: dataArray,
            indices: Nothing.value,
            document: doc
          });
        });
      };
    };
  };
  var getBoundElementDatumPairs = function(v2) {
    var v1 = (function() {
      if (v2 instanceof BoundSelection) {
        return v2.value0;
      }
      ;
      throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1362, column 52 - line 1363, column 28): " + [v2.constructor.name]);
    })();
    return zipWith(Tuple.create)(v1.elements)(v1.data);
  };
  var elementTypeToString = function(v2) {
    if (v2 instanceof Circle) {
      return "circle";
    }
    ;
    if (v2 instanceof Rect) {
      return "rect";
    }
    ;
    if (v2 instanceof Path) {
      return "path";
    }
    ;
    if (v2 instanceof Line) {
      return "line";
    }
    ;
    if (v2 instanceof Polygon) {
      return "polygon";
    }
    ;
    if (v2 instanceof Text) {
      return "text";
    }
    ;
    if (v2 instanceof Group) {
      return "g";
    }
    ;
    if (v2 instanceof SVG) {
      return "svg";
    }
    ;
    if (v2 instanceof Defs) {
      return "defs";
    }
    ;
    if (v2 instanceof LinearGradient) {
      return "linearGradient";
    }
    ;
    if (v2 instanceof Stop) {
      return "stop";
    }
    ;
    if (v2 instanceof PatternFill) {
      return "pattern";
    }
    ;
    if (v2 instanceof Div) {
      return "div";
    }
    ;
    if (v2 instanceof Span) {
      return "span";
    }
    ;
    if (v2 instanceof Table) {
      return "table";
    }
    ;
    if (v2 instanceof Tr) {
      return "tr";
    }
    ;
    if (v2 instanceof Td) {
      return "td";
    }
    ;
    if (v2 instanceof Th) {
      return "th";
    }
    ;
    if (v2 instanceof Tbody) {
      return "tbody";
    }
    ;
    if (v2 instanceof Thead) {
      return "thead";
    }
    ;
    throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1165, column 1 - line 1165, column 45): " + [v2.constructor.name]);
  };
  var createElementWithNS = function(elemType) {
    return function(doc) {
      var v2 = elementContext(elemType);
      if (v2 instanceof SVGContext) {
        return createElementNS(new Just("http://www.w3.org/2000/svg"))(elementTypeToString(elemType))(doc);
      }
      ;
      if (v2 instanceof HTMLContext) {
        return createElement(elementTypeToString(elemType))(doc);
      }
      ;
      throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 970, column 3 - line 976, column 64): " + [v2.constructor.name]);
    };
  };
  var clear2 = function(dictMonadEffect) {
    var liftEffect12 = liftEffect(dictMonadEffect);
    return function(selector) {
      return liftEffect12(clearElement_(selector));
    };
  };
  var attributeValueToString = function(v2) {
    if (v2 instanceof StringValue) {
      return v2.value0;
    }
    ;
    if (v2 instanceof NumberValue) {
      return show8(v2.value0);
    }
    ;
    if (v2 instanceof BooleanValue) {
      return show1(v2.value0);
    }
    ;
    throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1160, column 1 - line 1160, column 51): " + [v2.constructor.name]);
  };
  var applyTransitionToSingleElement = function(config) {
    return function(index7) {
      return function(element4) {
        return function(datum) {
          return function(attrs) {
            var baseDelay = maybe(0)(unwrap2)(config.delay);
            var stagger = fromMaybe(0)(config.staggerDelay);
            var effectiveDelay = baseDelay + toNumber(index7) * stagger;
            var delayNullable = toNullable(new Just(effectiveDelay));
            var easingNullable = maybeEasingToNullable(config.easing);
            return function __do7() {
              var transition = createTransition_(config.duration)(delayNullable)(easingNullable)(element4)();
              return traverse_2(function(attr10) {
                if (attr10 instanceof StaticAttr) {
                  return transitionSetAttribute_(attr10.value0)(attributeValueToString(attr10.value1))(transition);
                }
                ;
                if (attr10 instanceof DataAttr) {
                  return transitionSetAttribute_(attr10.value0)(attributeValueToString(attr10.value2(datum)))(transition);
                }
                ;
                if (attr10 instanceof IndexedAttr) {
                  return transitionSetAttribute_(attr10.value0)(attributeValueToString(attr10.value2(datum)(index7)))(transition);
                }
                ;
                if (attr10 instanceof AnimatedAttr) {
                  return pure4(unit);
                }
                ;
                if (attr10 instanceof AnimatedCompound) {
                  return pure4(unit);
                }
                ;
                throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1282, column 30 - line 1296, column 16): " + [attr10.constructor.name]);
              })(attrs)();
            };
          };
        };
      };
    };
  };
  var applyExitTransitionToElements = function(config) {
    return function(elementDatumPairs) {
      return function(attrs) {
        var baseDelay = maybe(0)(unwrap2)(config.delay);
        var stagger = fromMaybe(0)(config.staggerDelay);
        var easingNullable = maybeEasingToNullable(config.easing);
        return traverseWithIndex_2(function(index7) {
          return function(v2) {
            var effectiveDelay = baseDelay + toNumber(index7) * stagger;
            var delayNullable = toNullable(new Just(effectiveDelay));
            return function __do7() {
              var transition = createTransition_(config.duration)(delayNullable)(easingNullable)(v2.value0)();
              traverse_2(function(attr10) {
                if (attr10 instanceof StaticAttr) {
                  return transitionSetAttribute_(attr10.value0)(attributeValueToString(attr10.value1))(transition);
                }
                ;
                if (attr10 instanceof DataAttr) {
                  return transitionSetAttribute_(attr10.value0)(attributeValueToString(attr10.value2(v2.value1)))(transition);
                }
                ;
                if (attr10 instanceof IndexedAttr) {
                  return transitionSetAttribute_(attr10.value0)(attributeValueToString(attr10.value2(v2.value1)(index7)))(transition);
                }
                ;
                if (attr10 instanceof AnimatedAttr) {
                  return pure4(unit);
                }
                ;
                if (attr10 instanceof AnimatedCompound) {
                  return pure4(unit);
                }
                ;
                throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1324, column 32 - line 1338, column 18): " + [attr10.constructor.name]);
              })(attrs)();
              return transitionRemove_(transition)();
            };
          };
        })(elementDatumPairs);
      };
    };
  };
  var applyBehaviorToElement = function(v2) {
    return function(v1) {
      if (v2 instanceof Zoom) {
        return $$void5(attachZoom_(v1)(v2.value0.scaleExtent.value0)(v2.value0.scaleExtent.value1)(v2.value0.targetSelector));
      }
      ;
      if (v2 instanceof Drag && v2.value0 instanceof SimpleDrag) {
        return $$void5(attachSimpleDrag_2(v1)(unit));
      }
      ;
      if (v2 instanceof Drag && v2.value0 instanceof SimulationDrag) {
        return $$void5(attachSimulationDragById_2(v1)(v2.value0.value0));
      }
      ;
      if (v2 instanceof Drag && v2.value0 instanceof SimulationDragNested) {
        return $$void5(attachSimulationDragNestedById_2(v1)(v2.value0.value0));
      }
      ;
      if (v2 instanceof Click) {
        return $$void5(attachClick_(v1)(v2.value0));
      }
      ;
      if (v2 instanceof ClickWithDatum) {
        return $$void5(attachClickWithDatum_(v1)(v2.value0));
      }
      ;
      if (v2 instanceof MouseEnter) {
        return $$void5(attachMouseEnter_(v1)(v2.value0));
      }
      ;
      if (v2 instanceof MouseLeave) {
        return $$void5(attachMouseLeave_(v1)(v2.value0));
      }
      ;
      if (v2 instanceof Highlight) {
        return $$void5(attachHighlight_(v1)(v2.value0.enter)(v2.value0.leave));
      }
      ;
      if (v2 instanceof MouseMoveWithInfo) {
        return $$void5(attachMouseMoveWithEvent_(v1)(function(d3, evt) {
          return v2.value0({
            datum: d3,
            clientX: toNumber(clientX(evt)),
            clientY: toNumber(clientY(evt)),
            pageX: toNumber(pageX(evt)),
            pageY: toNumber(pageY(evt)),
            offsetX: offsetX(evt),
            offsetY: offsetY(evt)
          })();
        }));
      }
      ;
      if (v2 instanceof MouseEnterWithInfo) {
        return $$void5(attachMouseEnterWithEvent_(v1)(function(d3, evt) {
          return v2.value0({
            datum: d3,
            clientX: toNumber(clientX(evt)),
            clientY: toNumber(clientY(evt)),
            pageX: toNumber(pageX(evt)),
            pageY: toNumber(pageY(evt)),
            offsetX: offsetX(evt),
            offsetY: offsetY(evt)
          })();
        }));
      }
      ;
      if (v2 instanceof MouseLeaveWithInfo) {
        return $$void5(attachMouseLeaveWithEvent_(v1)(function(d3, evt) {
          return v2.value0({
            datum: d3,
            clientX: toNumber(clientX(evt)),
            clientY: toNumber(clientY(evt)),
            pageX: toNumber(pageX(evt)),
            pageY: toNumber(pageY(evt)),
            offsetX: offsetX(evt),
            offsetY: offsetY(evt)
          })();
        }));
      }
      ;
      if (v2 instanceof MouseDown) {
        return $$void5(attachMouseDown_(v1)(v2.value0));
      }
      ;
      if (v2 instanceof MouseDownWithInfo) {
        return $$void5(attachMouseDownWithEvent_(v1)(function(d3, evt) {
          return v2.value0({
            datum: d3,
            clientX: toNumber(clientX(evt)),
            clientY: toNumber(clientY(evt)),
            pageX: toNumber(pageX(evt)),
            pageY: toNumber(pageY(evt)),
            offsetX: offsetX(evt),
            offsetY: offsetY(evt)
          })();
        }));
      }
      ;
      if (v2 instanceof CoordinatedHighlight) {
        var tooltipTrigger = (function() {
          if (v2.value0.tooltip instanceof Just) {
            return tooltipTriggerToInt(v2.value0.tooltip.value0.showWhen);
          }
          ;
          if (v2.value0.tooltip instanceof Nothing) {
            return 0;
          }
          ;
          throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1088, column 22 - line 1090, column 19): " + [v2.value0.tooltip.constructor.name]);
        })();
        var tooltipContentFn = mapFlipped1(v2.value0.tooltip)(function(v22) {
          return v22.content;
        });
        var classifyAsInt = function(hoveredId) {
          return function(datum) {
            return highlightClassToInt(v2.value0.classify(hoveredId)(datum));
          };
        };
        return $$void5(attachCoordinatedHighlight_(v1)(v2.value0.identify)(classifyAsInt)(toNullable(v2.value0.group))(toNullable(tooltipContentFn))(tooltipTrigger));
      }
      ;
      throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1013, column 1 - line 1013, column 81): " + [v2.constructor.name, v1.constructor.name]);
    };
  };
  var on2 = function(behavior) {
    return function(v2) {
      var getElements = function(v1) {
        if (v1 instanceof EmptySelection) {
          return v1.value0.parentElements;
        }
        ;
        if (v1 instanceof BoundSelection) {
          return v1.value0.elements;
        }
        ;
        if (v1 instanceof PendingSelection) {
          return v1.value0.parentElements;
        }
        ;
        if (v1 instanceof ExitingSelection) {
          return v1.value0.elements;
        }
        ;
        throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1124, column 3 - line 1124, column 59): " + [v1.constructor.name]);
      };
      var elements = getElements(v2);
      return function __do7() {
        traverse_2(applyBehaviorToElement(behavior))(elements)();
        return v2;
      };
    };
  };
  var applyAttributes = function(element4) {
    return function(datum) {
      return function(index7) {
        return function(attrs) {
          return traverse_2(function(attr10) {
            if (attr10 instanceof StaticAttr) {
              var $451 = attr10.value0 === "textContent";
              if ($451) {
                return setTextContent_(attributeValueToString(attr10.value1))(element4);
              }
              ;
              return setAttribute3(attr10.value0)(attributeValueToString(attr10.value1))(element4);
            }
            ;
            if (attr10 instanceof DataAttr) {
              var val = attributeValueToString(attr10.value2(datum));
              var $454 = attr10.value0 === "textContent";
              if ($454) {
                return setTextContent_(val)(element4);
              }
              ;
              return setAttribute3(attr10.value0)(val)(element4);
            }
            ;
            if (attr10 instanceof IndexedAttr) {
              var val = attributeValueToString(attr10.value2(datum)(index7));
              var $458 = attr10.value0 === "textContent";
              if ($458) {
                return setTextContent_(val)(element4);
              }
              ;
              return setAttribute3(attr10.value0)(val)(element4);
            }
            ;
            if (attr10 instanceof AnimatedAttr) {
              return pure4(unit);
            }
            ;
            if (attr10 instanceof AnimatedCompound) {
              return pure4(unit);
            }
            ;
            throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1135, column 30 - line 1158, column 16): " + [attr10.constructor.name]);
          })(attrs);
        };
      };
    };
  };
  var applyPerDatumAttrs = function(dictMonadEffect) {
    var liftEffect12 = liftEffect(dictMonadEffect);
    return function(mkAttrs) {
      return function(v2) {
        return liftEffect12((function() {
          if (v2 instanceof BoundSelection) {
            var paired = zipWith(Tuple.create)(v2.value0.data)(v2.value0.elements);
            return function __do7() {
              traverseWithIndex_2(function(index7) {
                return function(v1) {
                  var attrs = mkAttrs(v1.value0);
                  return applyAttributes(v1.value1)(v1.value0)(index7)(attrs);
                };
              })(paired)();
              return v2;
            };
          }
          ;
          return pure4(v2);
        })());
      };
    };
  };
  var setAttrs = function(dictMonadEffect) {
    var liftEffect12 = liftEffect(dictMonadEffect);
    return function(attrs) {
      return function(v2) {
        return liftEffect12((function() {
          var v1 = (function() {
            if (v2 instanceof BoundSelection) {
              return v2.value0;
            }
            ;
            throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 321, column 76 - line 322, column 28): " + [v2.constructor.name]);
          })();
          var paired = zipWith(Tuple.create)(v1.data)(v1.elements);
          return function __do7() {
            traverseWithIndex_2(function(arrayIndex) {
              return function(v22) {
                var logicalIndex = (function() {
                  if (v1.indices instanceof Just) {
                    return unsafeIndex3(v1.indices.value0)(arrayIndex);
                  }
                  ;
                  if (v1.indices instanceof Nothing) {
                    return arrayIndex;
                  }
                  ;
                  throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 327, column 22 - line 329, column 30): " + [v1.indices.constructor.name]);
                })();
                return applyAttributes(v22.value1)(v22.value0)(logicalIndex)(attrs);
              };
            })(paired)();
            return new BoundSelection({
              elements: v1.elements,
              data: v1.data,
              indices: v1.indices,
              document: v1.document
            });
          };
        })());
      };
    };
  };
  var setAttrs1 = /* @__PURE__ */ setAttrs(monadEffectEffect);
  var setAttrsExit = function(dictMonadEffect) {
    var liftEffect12 = liftEffect(dictMonadEffect);
    return function(attrs) {
      return function(v2) {
        return liftEffect12((function() {
          var v1 = (function() {
            if (v2 instanceof ExitingSelection) {
              return v2.value0;
            }
            ;
            throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 356, column 67 - line 357, column 30): " + [v2.constructor.name]);
          })();
          var paired = zipWith(Tuple.create)(v1.data)(v1.elements);
          return function __do7() {
            traverseWithIndex_2(function(index7) {
              return function(v22) {
                return applyAttributes(v22.value1)(v22.value0)(index7)(attrs);
              };
            })(paired)();
            return new ExitingSelection({
              elements: v1.elements,
              data: v1.data,
              document: v1.document
            });
          };
        })());
      };
    };
  };
  var setAttrsExit1 = /* @__PURE__ */ setAttrsExit(monadEffectEffect);
  var updateElementFromTree = function(element4) {
    return function(datum) {
      return function(index7) {
        return function(tree) {
          return function(doc) {
            return function __do7() {
              setElementData_(datum)(element4)();
              if (tree instanceof Node2) {
                return applyAttributes(element4)(datum)(index7)(tree.value0.attrs)();
              }
              ;
              return unit;
            };
          };
        };
      };
    };
  };
  var renderTemplatesForBoundSelection = function(dictOrd) {
    return function(templateFn) {
      return function(boundSel) {
        var v2 = (function() {
          if (boundSel instanceof BoundSelection) {
            return boundSel.value0;
          }
          ;
          throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 2078, column 66 - line 2079, column 32): " + [boundSel.constructor.name]);
        })();
        return traverseWithIndex2(function(idx) {
          return function(datum) {
            var v1 = index(v2.elements)(idx);
            if (v1 instanceof Nothing) {
              return unsafeCrashWith("renderTemplatesForBoundSelection: index out of bounds");
            }
            ;
            if (v1 instanceof Just) {
              var tree = templateFn(datum);
              return function __do7() {
                updateElementFromTree(v1.value0)(datum)(idx)(tree)(v2.document)();
                return v1.value0;
              };
            }
            ;
            throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 2084, column 9 - line 2093, column 25): " + [v1.constructor.name]);
          };
        })(v2.data);
      };
    };
  };
  var appendChildWithDatum = function(dictMonadEffect) {
    var liftEffect12 = liftEffect(dictMonadEffect);
    return function(elemType) {
      return function(attrs) {
        return function(datumOpt) {
          return function(logicalIndex) {
            return function(v2) {
              return liftEffect12((function() {
                var v1 = (function() {
                  if (v2 instanceof EmptySelection) {
                    return v2.value0;
                  }
                  ;
                  throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 495, column 55 - line 496, column 28): " + [v2.constructor.name]);
                })();
                return function __do7() {
                  var elements = traverse3(function(parent2) {
                    return function __do8() {
                      var element4 = createElementWithNS(elemType)(v1.document)();
                      var datum = (function() {
                        if (datumOpt instanceof Just) {
                          return datumOpt.value0;
                        }
                        ;
                        if (datumOpt instanceof Nothing) {
                          return unit;
                        }
                        ;
                        throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 503, column 15 - line 505, column 49): " + [datumOpt.constructor.name]);
                      })();
                      applyAttributes(element4)(datum)(logicalIndex)(attrs)();
                      var elementNode = toNode(element4);
                      var parentNode3 = toNode(parent2);
                      appendChild(elementNode)(parentNode3)();
                      return element4;
                    };
                  })(v1.parentElements)();
                  return new EmptySelection({
                    parentElements: elements,
                    document: v1.document
                  });
                };
              })());
            };
          };
        };
      };
    };
  };
  var appendChildWithDatum1 = /* @__PURE__ */ appendChildWithDatum(monadEffectEffect);
  var renderTemplatesForPendingSelection = function(dictOrd) {
    return function(templateFn) {
      return function(pendingSel) {
        var v2 = (function() {
          if (pendingSel instanceof PendingSelection) {
            return pendingSel.value0;
          }
          ;
          throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 2021, column 68 - line 2022, column 34): " + [pendingSel.constructor.name]);
        })();
        var $525 = $$null(v2.parentElements);
        if ($525) {
          return pure4([]);
        }
        ;
        return traverseWithIndex2(function(idx) {
          return function(datum) {
            var parentIdx = mod3(idx)(length(v2.parentElements));
            var v1 = index(v2.parentElements)(parentIdx);
            if (v1 instanceof Nothing) {
              return unsafeCrashWith("renderTemplatesForPendingSelection: no parent elements");
            }
            ;
            if (v1 instanceof Just) {
              var tree = templateFn(datum);
              var singleParentSel = new EmptySelection({
                parentElements: [v1.value0],
                document: v2.document
              });
              return function __do7() {
                var v22 = renderNodeHelperWithDatum(dictOrd)(singleParentSel)(tree)(new Just(datum))(idx)();
                setElementData_(datum)(v22.value0)();
                return new Tuple(v22.value0, v22.value1);
              };
            }
            ;
            throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 2034, column 11 - line 2054, column 51): " + [v1.constructor.name]);
          };
        })(v2.pendingData);
      };
    };
  };
  var renderNodeHelperWithDatum = function(dictOrd) {
    return function(v2) {
      return function(v1) {
        return function(v22) {
          return function(v3) {
            if (v1 instanceof Node2) {
              return function __do7() {
                var childSel = appendChildWithDatum1(v1.value0.elemType)(v1.value0.attrs)(v22)(v3)(v2)();
                var element4 = (function() {
                  if (childSel instanceof EmptySelection) {
                    var v42 = head(childSel.value0.parentElements);
                    if (v42 instanceof Just) {
                      return v42.value0;
                    }
                    ;
                    if (v42 instanceof Nothing) {
                      return unsafeCrashWith("renderTree: appendChild returned empty selection");
                    }
                    ;
                    throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1399, column 29 - line 1401, column 102): " + [v42.constructor.name]);
                  }
                  ;
                  return unsafeCrashWith("renderTree: appendChild should return EmptySelection");
                })();
                traverse_2(function(behavior) {
                  return applyBehaviorToElement(behavior)(element4);
                })(v1.value0.behaviors)();
                var childMaps = traverse3(function(child) {
                  return renderNodeHelperWithDatum(dictOrd)(childSel)(child)(v22)(v3);
                })(v1.value0.children)();
                var combinedChildMap = foldl2(union2)(empty2)(map19(snd)(childMaps));
                var selectionsMap = (function() {
                  if (v1.value0.name instanceof Just) {
                    return insert5(v1.value0.name.value0)(childSel)(combinedChildMap);
                  }
                  ;
                  if (v1.value0.name instanceof Nothing) {
                    return combinedChildMap;
                  }
                  ;
                  throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1414, column 21 - line 1416, column 34): " + [v1.value0.name.constructor.name]);
                })();
                return new Tuple(element4, selectionsMap);
              };
            }
            ;
            if (v1 instanceof Join) {
              return renderNodeHelper(dictOrd)(v2)(v1);
            }
            ;
            if (v1 instanceof NestedJoin) {
              return renderNodeHelper(dictOrd)(v2)(v1);
            }
            ;
            if (v1 instanceof UpdateJoin) {
              return renderNodeHelper(dictOrd)(v2)(v1);
            }
            ;
            if (v1 instanceof UpdateNestedJoin) {
              return renderNodeHelper(dictOrd)(v2)(v1);
            }
            ;
            if (v1 instanceof LocalCoordSpace) {
              return renderNodeHelper(dictOrd)(v2)(v1);
            }
            ;
            if (v1 instanceof ConditionalRender && v22 instanceof Just) {
              var v4 = find2(function(c2) {
                return c2.predicate(v22.value0);
              })(v1.value0.cases);
              if (v4 instanceof Just) {
                var chosenTree = v4.value0.spec(v22.value0);
                return renderNodeHelperWithDatum(dictOrd)(v2)(chosenTree)(new Just(v22.value0))(v3);
              }
              ;
              if (v4 instanceof Nothing) {
                var doc = (function() {
                  if (v2 instanceof EmptySelection) {
                    return v2.value0.document;
                  }
                  ;
                  if (v2 instanceof EmptySelection) {
                    return v2.value0.document;
                  }
                  ;
                  throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1441, column 33 - line 1441, column 80): " + [v2.constructor.name]);
                })();
                return function __do7() {
                  var dummyElement = createElementWithNS(Group.value)(doc)();
                  return new Tuple(dummyElement, empty2);
                };
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1431, column 3 - line 1443, column 42): " + [v4.constructor.name]);
            }
            ;
            if (v1 instanceof ConditionalRender && v22 instanceof Nothing) {
              return renderNodeHelper(dictOrd)(v2)(new ConditionalRender({
                cases: []
              }));
            }
            ;
            throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1383, column 1 - line 1390, column 74): " + [v2.constructor.name, v1.constructor.name, v22.constructor.name, v3.constructor.name]);
          };
        };
      };
    };
  };
  var renderNodeHelper = function(dictOrd) {
    var joinData22 = joinData1(dictOrd);
    var renderTemplatesForBoundSelection1 = renderTemplatesForBoundSelection(dictOrd);
    return function(v2) {
      return function(v1) {
        if (v1 instanceof Node2) {
          return renderNodeHelperWithDatum(dictOrd)(v2)(new Node2(v1.value0))(Nothing.value)(0);
        }
        ;
        if (v1 instanceof Join) {
          return function __do7() {
            var v22 = joinData22(v1.value0.joinData)(v1.value0.key)(v2)();
            remove1(v22.value0.exit)();
            var enterElementsAndMaps = renderTemplatesForPendingSelection(dictOrd)(v1.value0.template)(v22.value0.enter)();
            var enterElements = map19(fst)(enterElementsAndMaps);
            var enterChildMaps = map19(snd)(enterElementsAndMaps);
            var updateElements = renderTemplatesForBoundSelection1(v1.value0.template)(v22.value0.update)();
            var allElements = append12(enterElements)(updateElements);
            var combinedChildMap = foldl2(union2)(empty2)(enterChildMaps);
            var doc2 = (function() {
              if (v22.value0.enter instanceof PendingSelection) {
                return v22.value0.enter.value0.document;
              }
              ;
              if (v22.value0.update instanceof BoundSelection) {
                return v22.value0.update.value0.document;
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1512, column 12 - line 1513, column 43): " + [v22.value0.update.constructor.name]);
            })();
            var allData = (function() {
              if (v22.value0.enter instanceof PendingSelection) {
                return v22.value0.enter.value0.pendingData;
              }
              ;
              return [];
            })();
            var updateData = (function() {
              if (v22.value0.update instanceof BoundSelection) {
                return v22.value0.update.value0.data;
              }
              ;
              return [];
            })();
            var boundSel = new BoundSelection({
              elements: allElements,
              data: append12(allData)(updateData),
              indices: new Just(range2(0)(length(allElements) - 1 | 0)),
              document: doc2
            });
            var selectionsMap = insert5(v1.value0.name)(boundSel)(combinedChildMap);
            var firstElement = (function() {
              var v3 = head(allElements);
              if (v3 instanceof Just) {
                return v3.value0;
              }
              ;
              if (v3 instanceof Nothing) {
                return createElementWithNS(Group.value)(doc2)();
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1538, column 19 - line 1540, column 45): " + [v3.constructor.name]);
            })();
            return new Tuple(firstElement, selectionsMap);
          };
        }
        ;
        if (v1 instanceof NestedJoin) {
          return function __do7() {
            var v22 = joinData22(v1.value0.joinData)(v1.value0.key)(v2)();
            var elementsAndMaps = renderNestedTemplatesForPendingSelection(dictOrd)(v1.value0.decompose)(v1.value0.template)(stringToElementType(v1.value0.key))(v22.value0.enter)();
            var elements = map19(fst)(elementsAndMaps);
            var childMaps = map19(snd)(elementsAndMaps);
            var combinedChildMap = foldl2(union2)(empty2)(childMaps);
            var v3 = (function() {
              if (v22.value0.enter instanceof PendingSelection) {
                return v22.value0.enter.value0;
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1564, column 52 - line 1565, column 34): " + [v22.value0.enter.constructor.name]);
            })();
            var boundSel = new BoundSelection({
              elements,
              data: v3.pendingData,
              indices: new Just(range2(0)(length(elements) - 1 | 0)),
              document: v3.document
            });
            var selectionsMap = insert5(v1.value0.name)(boundSel)(combinedChildMap);
            var firstElement = (function() {
              var v4 = head(elements);
              if (v4 instanceof Just) {
                return v4.value0;
              }
              ;
              if (v4 instanceof Nothing) {
                return createElementWithNS(Group.value)(v3.document)();
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1580, column 19 - line 1582, column 45): " + [v4.constructor.name]);
            })();
            return new Tuple(firstElement, selectionsMap);
          };
        }
        ;
        if (v1 instanceof UpdateJoin) {
          return function __do7() {
            var v22 = (function() {
              if (v1.value0.keyFn instanceof Just) {
                return joinDataWithKey1(v1.value0.joinData)(v1.value0.keyFn.value0)(v1.value0.key)(v2)();
              }
              ;
              if (v1.value0.keyFn instanceof Nothing) {
                return joinData22(v1.value0.joinData)(v1.value0.key)(v2)();
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1592, column 5 - line 1594, column 67): " + [v1.value0.keyFn.constructor.name]);
            })();
            liftEffect2((function() {
              var enterCount = (function() {
                if (v22.value0.enter instanceof PendingSelection) {
                  return length(v22.value0.enter.value0.pendingData);
                }
                ;
                return 0;
              })();
              var updateCount = (function() {
                if (v22.value0.update instanceof BoundSelection) {
                  return length(v22.value0.update.value0.data);
                }
                ;
                return 0;
              })();
              var exitCount = (function() {
                if (v22.value0.exit instanceof BoundSelection) {
                  return length(v22.value0.exit.value0.data);
                }
                ;
                if (v22.value0.exit instanceof ExitingSelection) {
                  return length(v22.value0.exit.value0.data);
                }
                ;
                return 0;
              })();
              return log4("Tree API UpdateJoin '" + (v1.value0.name + ("': enter=" + (show22(enterCount) + (", update=" + (show22(updateCount) + (", exit=" + show22(exitCount))))))));
            })())();
            (function() {
              if (v1.value0.behaviors.exit instanceof Just) {
                if (v1.value0.behaviors.exit.value0.transition instanceof Just) {
                  var pairs = getExitingElementDatumPairs(v22.value0.exit);
                  return liftEffect2(applyExitTransitionToElements(v1.value0.behaviors.exit.value0.transition.value0)(pairs)(v1.value0.behaviors.exit.value0.attrs))();
                }
                ;
                if (v1.value0.behaviors.exit.value0.transition instanceof Nothing) {
                  setAttrsExit1(v1.value0.behaviors.exit.value0.attrs)(v22.value0.exit)();
                  remove1(v22.value0.exit)();
                  return unit;
                }
                ;
                throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1626, column 7 - line 1634, column 20): " + [v1.value0.behaviors.exit.value0.transition.constructor.name]);
              }
              ;
              if (v1.value0.behaviors.exit instanceof Nothing) {
                remove1(v22.value0.exit)();
                return unit;
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1624, column 3 - line 1638, column 16): " + [v1.value0.behaviors.exit.constructor.name]);
            })();
            var enterElementsAndMaps = (function() {
              if (v1.value0.behaviors.enter instanceof Just) {
                var modifiedTemplate = function(datum) {
                  var v3 = v1.value0.template(datum);
                  if (v3 instanceof Node2) {
                    return new Node2({
                      name: v3.value0.name,
                      elemType: v3.value0.elemType,
                      behaviors: v3.value0.behaviors,
                      children: v3.value0.children,
                      attrs: append12(v3.value0.attrs)(v1.value0.behaviors.enter.value0.attrs)
                    });
                  }
                  ;
                  return v3;
                };
                var rendered = renderTemplatesForPendingSelection(dictOrd)(modifiedTemplate)(v22.value0.enter)();
                (function() {
                  if (v1.value0.behaviors.enter.value0.transition instanceof Just) {
                    var enterElements2 = map19(fst)(rendered);
                    var pendingData = (function() {
                      if (v22.value0.enter instanceof PendingSelection) {
                        return v22.value0.enter.value0.pendingData;
                      }
                      ;
                      throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1667, column 41 - line 1668, column 54): " + [v22.value0.enter.constructor.name]);
                    })();
                    var pairs = zipWith(Tuple.create)(enterElements2)(pendingData);
                    return liftEffect2(traverseWithIndex_2(function(index7) {
                      return function(v3) {
                        var finalAttrs = (function() {
                          var v4 = v1.value0.template(v3.value1);
                          if (v4 instanceof Node2) {
                            return v4.value0.attrs;
                          }
                          ;
                          return [];
                        })();
                        return applyTransitionToSingleElement(v1.value0.behaviors.enter.value0.transition.value0)(index7)(v3.value0)(v3.value1)(finalAttrs);
                      };
                    })(pairs))();
                  }
                  ;
                  if (v1.value0.behaviors.enter.value0.transition instanceof Nothing) {
                    return unit;
                  }
                  ;
                  throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1662, column 7 - line 1678, column 29): " + [v1.value0.behaviors.enter.value0.transition.constructor.name]);
                })();
                return rendered;
              }
              ;
              if (v1.value0.behaviors.enter instanceof Nothing) {
                return renderTemplatesForPendingSelection(dictOrd)(v1.value0.template)(v22.value0.enter)();
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1649, column 27 - line 1683, column 68): " + [v1.value0.behaviors.enter.constructor.name]);
            })();
            var enterElements = map19(fst)(enterElementsAndMaps);
            var enterChildMaps = map19(snd)(enterElementsAndMaps);
            var updateElements = (function() {
              if (v1.value0.behaviors.update instanceof Just) {
                if (v1.value0.behaviors.update.value0.transition instanceof Just) {
                  var pairs = getBoundElementDatumPairs(v22.value0.update);
                  liftEffect2(traverseWithIndex_2(function(index7) {
                    return function(v3) {
                      return applyTransitionToSingleElement(v1.value0.behaviors.update.value0.transition.value0)(index7)(v3.value0)(v3.value1)(v1.value0.behaviors.update.value0.attrs);
                    };
                  })(pairs))();
                  return getElementsFromBoundSelection(v22.value0.update);
                }
                ;
                if (v1.value0.behaviors.update.value0.transition instanceof Nothing) {
                  setAttrs1(v1.value0.behaviors.update.value0.attrs)(v22.value0.update)();
                  return renderTemplatesForBoundSelection1(v1.value0.template)(v22.value0.update)();
                }
                ;
                throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1692, column 7 - line 1708, column 71): " + [v1.value0.behaviors.update.value0.transition.constructor.name]);
              }
              ;
              if (v1.value0.behaviors.update instanceof Nothing) {
                return renderTemplatesForBoundSelection1(v1.value0.template)(v22.value0.update)();
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1689, column 21 - line 1711, column 67): " + [v1.value0.behaviors.update.constructor.name]);
            })();
            var allElements = append12(enterElements)(updateElements);
            var combinedChildMap = foldl2(union2)(empty2)(enterChildMaps);
            var doc2 = (function() {
              if (v22.value0.enter instanceof PendingSelection) {
                return v22.value0.enter.value0.document;
              }
              ;
              if (v22.value0.update instanceof BoundSelection) {
                return v22.value0.update.value0.document;
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1725, column 12 - line 1726, column 43): " + [v22.value0.update.constructor.name]);
            })();
            var allData = (function() {
              if (v22.value0.enter instanceof PendingSelection) {
                return v22.value0.enter.value0.pendingData;
              }
              ;
              return [];
            })();
            var updateData = (function() {
              if (v22.value0.update instanceof BoundSelection) {
                return v22.value0.update.value0.data;
              }
              ;
              return [];
            })();
            var boundSel = new BoundSelection({
              elements: allElements,
              data: append12(allData)(updateData),
              indices: new Just(range2(0)(length(allElements) - 1 | 0)),
              document: doc2
            });
            var selectionsMap = insert5(v1.value0.name)(boundSel)(combinedChildMap);
            var firstElement = (function() {
              var v3 = head(allElements);
              if (v3 instanceof Just) {
                return v3.value0;
              }
              ;
              if (v3 instanceof Nothing) {
                return createElementWithNS(Group.value)(doc2)();
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1750, column 19 - line 1752, column 45): " + [v3.constructor.name]);
            })();
            return new Tuple(firstElement, selectionsMap);
          };
        }
        ;
        if (v1 instanceof UpdateNestedJoin) {
          var innerData = join2(map19(v1.value0.decompose)(v1.value0.joinData));
          return function __do7() {
            var v22 = joinDataWithKey1(innerData)(jsonStringify_)(v1.value0.key)(v2)();
            (function() {
              if (v1.value0.behaviors.exit instanceof Just) {
                if (v1.value0.behaviors.exit.value0.transition instanceof Just) {
                  var pairs = getExitingElementDatumPairs(v22.value0.exit);
                  return liftEffect2(applyExitTransitionToElements(v1.value0.behaviors.exit.value0.transition.value0)(pairs)(v1.value0.behaviors.exit.value0.attrs))();
                }
                ;
                if (v1.value0.behaviors.exit.value0.transition instanceof Nothing) {
                  setAttrsExit1(v1.value0.behaviors.exit.value0.attrs)(v22.value0.exit)();
                  remove1(v22.value0.exit)();
                  return unit;
                }
                ;
                throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1803, column 7 - line 1811, column 20): " + [v1.value0.behaviors.exit.value0.transition.constructor.name]);
              }
              ;
              if (v1.value0.behaviors.exit instanceof Nothing) {
                remove1(v22.value0.exit)();
                return unit;
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1801, column 3 - line 1814, column 16): " + [v1.value0.behaviors.exit.constructor.name]);
            })();
            var enterElementsAndMaps = (function() {
              if (v1.value0.behaviors.enter instanceof Just) {
                var modifiedTemplate = function(datum) {
                  var v3 = v1.value0.template(datum);
                  if (v3 instanceof Node2) {
                    return new Node2({
                      name: v3.value0.name,
                      elemType: v3.value0.elemType,
                      behaviors: v3.value0.behaviors,
                      children: v3.value0.children,
                      attrs: append12(v3.value0.attrs)(v1.value0.behaviors.enter.value0.attrs)
                    });
                  }
                  ;
                  return v3;
                };
                var rendered = renderTemplatesForPendingSelection(dictOrd)(modifiedTemplate)(v22.value0.enter)();
                (function() {
                  if (v1.value0.behaviors.enter.value0.transition instanceof Just) {
                    var enterElements2 = map19(fst)(rendered);
                    var pendingData = (function() {
                      if (v22.value0.enter instanceof PendingSelection) {
                        return v22.value0.enter.value0.pendingData;
                      }
                      ;
                      throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1847, column 41 - line 1848, column 54): " + [v22.value0.enter.constructor.name]);
                    })();
                    var pairs = zipWith(Tuple.create)(enterElements2)(pendingData);
                    return liftEffect2(traverseWithIndex_2(function(index7) {
                      return function(v4) {
                        var finalAttrs = (function() {
                          var v5 = v1.value0.template(v4.value1);
                          if (v5 instanceof Node2) {
                            return v5.value0.attrs;
                          }
                          ;
                          return [];
                        })();
                        return applyTransitionToSingleElement(v1.value0.behaviors.enter.value0.transition.value0)(index7)(v4.value0)(v4.value1)(finalAttrs);
                      };
                    })(pairs))();
                  }
                  ;
                  if (v1.value0.behaviors.enter.value0.transition instanceof Nothing) {
                    return unit;
                  }
                  ;
                  throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1842, column 7 - line 1858, column 29): " + [v1.value0.behaviors.enter.value0.transition.constructor.name]);
                })();
                return rendered;
              }
              ;
              if (v1.value0.behaviors.enter instanceof Nothing) {
                return renderTemplatesForPendingSelection(dictOrd)(v1.value0.template)(v22.value0.enter)();
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1831, column 27 - line 1861, column 92): " + [v1.value0.behaviors.enter.constructor.name]);
            })();
            var updateElements = (function() {
              if (v1.value0.behaviors.update instanceof Just) {
                if (v1.value0.behaviors.update.value0.transition instanceof Just) {
                  var pairs = getBoundElementDatumPairs(v22.value0.update);
                  liftEffect2(traverseWithIndex_2(function(index7) {
                    return function(v4) {
                      return applyTransitionToSingleElement(v1.value0.behaviors.update.value0.transition.value0)(index7)(v4.value0)(v4.value1)(v1.value0.behaviors.update.value0.attrs);
                    };
                  })(pairs))();
                  return getElementsFromBoundSelection(v22.value0.update);
                }
                ;
                if (v1.value0.behaviors.update.value0.transition instanceof Nothing) {
                  setAttrs1(v1.value0.behaviors.update.value0.attrs)(v22.value0.update)();
                  return renderTemplatesForBoundSelection1(v1.value0.template)(v22.value0.update)();
                }
                ;
                throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1867, column 7 - line 1880, column 86): " + [v1.value0.behaviors.update.value0.transition.constructor.name]);
              }
              ;
              if (v1.value0.behaviors.update instanceof Nothing) {
                return renderTemplatesForBoundSelection1(v1.value0.template)(v22.value0.update)();
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1864, column 21 - line 1881, column 91): " + [v1.value0.behaviors.update.constructor.name]);
            })();
            var enterElements = map19(fst)(enterElementsAndMaps);
            var allElements = append12(enterElements)(updateElements);
            var enterChildMaps = map19(snd)(enterElementsAndMaps);
            var combinedChildMap = foldl2(union2)(empty2)(enterChildMaps);
            var doc2 = (function() {
              if (v22.value0.enter instanceof PendingSelection) {
                return v22.value0.enter.value0.document;
              }
              ;
              if (v22.value0.update instanceof BoundSelection) {
                return v22.value0.update.value0.document;
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1900, column 12 - line 1901, column 43): " + [v22.value0.update.constructor.name]);
            })();
            var boundSel = new BoundSelection({
              elements: allElements,
              data: innerData,
              indices: new Just(range2(0)(length(allElements) - 1 | 0)),
              document: doc2
            });
            var selectionsMap = insert5(v1.value0.name)(boundSel)(combinedChildMap);
            var firstElement = (function() {
              var v5 = head(allElements);
              if (v5 instanceof Just) {
                return v5.value0;
              }
              ;
              if (v5 instanceof Nothing) {
                return createElementWithNS(Group.value)(doc2)();
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1915, column 19 - line 1917, column 45): " + [v5.constructor.name]);
            })();
            return new Tuple(firstElement, selectionsMap);
          };
        }
        ;
        if (v1 instanceof ConditionalRender) {
          var doc = (function() {
            if (v2 instanceof EmptySelection) {
              return v2.value0.document;
            }
            ;
            if (v2 instanceof EmptySelection) {
              return v2.value0.document;
            }
            ;
            throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1931, column 29 - line 1931, column 76): " + [v2.constructor.name]);
          })();
          return function __do7() {
            var dummyElement = createElementWithNS(Group.value)(doc)();
            return new Tuple(dummyElement, empty2);
          };
        }
        ;
        if (v1 instanceof LocalCoordSpace) {
          return renderNodeHelper(dictOrd)(v2)(v1.value0.child);
        }
        ;
        throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1451, column 1 - line 1456, column 74): " + [v2.constructor.name, v1.constructor.name]);
      };
    };
  };
  var renderNestedTemplatesForPendingSelection = function(dictOrd) {
    return function(decomposer) {
      return function(templateFn) {
        return function(wrapperType) {
          return function(pendingSel) {
            var v2 = (function() {
              if (pendingSel instanceof PendingSelection) {
                return pendingSel.value0;
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1963, column 68 - line 1964, column 34): " + [pendingSel.constructor.name]);
            })();
            return traverseWithIndex2(function(idx) {
              return function(outerDatum) {
                var parentIdx = mod3(idx)(length(v2.parentElements));
                var v1 = index(v2.parentElements)(parentIdx);
                if (v1 instanceof Nothing) {
                  return unsafeCrashWith("renderNestedTemplatesForPendingSelection: no parent elements");
                }
                ;
                if (v1 instanceof Just) {
                  return function __do7() {
                    var wrapperElement = createElementWithNS(wrapperType)(v2.document)();
                    var wrapperNode = toNode(wrapperElement);
                    var parentNode3 = toNode(v1.value0);
                    appendChild(wrapperNode)(parentNode3)();
                    var innerDataArray = decomposer(outerDatum);
                    var innerMaps = traverseWithIndex2(function(innerIdx) {
                      return function(innerDatumErased) {
                        var tree = templateFn(innerDatumErased);
                        var singleParentSel = new EmptySelection({
                          parentElements: [wrapperElement],
                          document: v2.document
                        });
                        return function __do8() {
                          var v22 = renderNodeHelperWithDatum(dictOrd)(singleParentSel)(tree)(new Just(innerDatumErased))(innerIdx)();
                          return v22.value1;
                        };
                      };
                    })(innerDataArray)();
                    var combinedInnerMap = foldl2(union2)(empty2)(innerMaps);
                    return new Tuple(wrapperElement, combinedInnerMap);
                  };
                }
                ;
                throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 1969, column 9 - line 2001, column 57): " + [v1.constructor.name]);
              };
            })(v2.pendingData);
          };
        };
      };
    };
  };
  var renderTree = function(dictOrd) {
    var renderNodeHelper1 = renderNodeHelper(dictOrd);
    return function(parent2) {
      return function(tree) {
        return function __do7() {
          var v2 = renderNodeHelper1(parent2)(tree)();
          return v2.value1;
        };
      };
    };
  };
  var appendChildInheriting = function(dictMonadEffect) {
    var liftEffect12 = liftEffect(dictMonadEffect);
    return function(elemType) {
      return function(attrs) {
        return function(v2) {
          return liftEffect12((function() {
            var v1 = (function() {
              if (v2 instanceof BoundSelection) {
                return v2.value0;
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 553, column 82 - line 554, column 28): " + [v2.constructor.name]);
            })();
            return function __do7() {
              var childElements = traverseWithIndex2(function(idx) {
                return function(v22) {
                  return function __do8() {
                    var child = createElementWithNS(elemType)(v1.document)();
                    setElementData_(v22.value1)(child)();
                    applyAttributes(child)(v22.value1)(idx)(attrs)();
                    var childNode = toNode(child);
                    var parentNode3 = toNode(v22.value0);
                    appendChild(childNode)(parentNode3)();
                    return child;
                  };
                };
              })(zipWith(Tuple.create)(v1.elements)(v1.data))();
              return new BoundSelection({
                elements: childElements,
                data: v1.data,
                indices: Nothing.value,
                document: v1.document
              });
            };
          })());
        };
      };
    };
  };
  var appendChild2 = function(dictMonadEffect) {
    var liftEffect12 = liftEffect(dictMonadEffect);
    return function(elemType) {
      return function(attrs) {
        return function(v2) {
          return liftEffect12((function() {
            var v1 = (function() {
              if (v2 instanceof EmptySelection) {
                return v2.value0;
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 460, column 55 - line 461, column 28): " + [v2.constructor.name]);
            })();
            return function __do7() {
              var elements = traverse3(function(parent2) {
                return function __do8() {
                  var element4 = createElementWithNS(elemType)(v1.document)();
                  applyAttributes(element4)(unit)(0)(attrs)();
                  var elementNode = toNode(element4);
                  var parentNode3 = toNode(parent2);
                  appendChild(elementNode)(parentNode3)();
                  return element4;
                };
              })(v1.parentElements)();
              return new EmptySelection({
                parentElements: elements,
                document: v1.document
              });
            };
          })());
        };
      };
    };
  };
  var append6 = function(dictMonadEffect) {
    var liftEffect12 = liftEffect(dictMonadEffect);
    return function(elemType) {
      return function(attrs) {
        return function(v2) {
          return liftEffect12((function() {
            var v1 = (function() {
              if (v2 instanceof PendingSelection) {
                return v2.value0;
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 265, column 77 - line 266, column 30): " + [v2.constructor.name]);
            })();
            var parent2 = (function() {
              var v22 = head(v1.parentElements);
              if (v22 instanceof Just) {
                return v22.value0;
              }
              ;
              if (v22 instanceof Nothing) {
                return unsafeIndex3(v1.parentElements)(0);
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 271, column 14 - line 273, column 68): " + [v22.constructor.name]);
            })();
            return function __do7() {
              var elements = traverseWithIndex2(function(arrayIndex) {
                return function(datum) {
                  var logicalIndex = (function() {
                    if (v1.indices instanceof Just) {
                      return unsafeIndex3(v1.indices.value0)(arrayIndex);
                    }
                    ;
                    if (v1.indices instanceof Nothing) {
                      return arrayIndex;
                    }
                    ;
                    throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 278, column 22 - line 280, column 30): " + [v1.indices.constructor.name]);
                  })();
                  return function __do8() {
                    var element4 = createElementWithNS(elemType)(v1.document)();
                    applyAttributes(element4)(datum)(logicalIndex)(attrs)();
                    setElementData_(datum)(element4)();
                    var elementNode = toNode(element4);
                    var parentNode3 = toNode(parent2);
                    appendChild(elementNode)(parentNode3)();
                    return element4;
                  };
                };
              })(v1.pendingData)();
              return new BoundSelection({
                elements,
                data: v1.pendingData,
                indices: v1.indices,
                document: v1.document
              });
            };
          })());
        };
      };
    };
  };
  var append32 = /* @__PURE__ */ append6(monadEffectEffect);
  var appendData = function(dictMonadEffect) {
    var liftEffect12 = liftEffect(dictMonadEffect);
    return function(dictFoldable) {
      var fromFoldable27 = fromFoldable(dictFoldable);
      return function(elemType) {
        return function(foldableData) {
          return function(attrs) {
            return function(emptySelection) {
              return liftEffect12((function() {
                var v2 = (function() {
                  if (emptySelection instanceof EmptySelection) {
                    return emptySelection.value0;
                  }
                  ;
                  throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 916, column 55 - line 917, column 28): " + [emptySelection.constructor.name]);
                })();
                var dataArray = fromFoldable27(foldableData);
                var pendingSelection = new PendingSelection({
                  parentElements: v2.parentElements,
                  pendingData: dataArray,
                  indices: new Just(range2(0)(length(dataArray) - 1 | 0)),
                  document: v2.document
                });
                return append32(elemType)(attrs)(pendingSelection);
              })());
            };
          };
        };
      };
    };
  };
  var renderData = function(dictMonadEffect) {
    var Monad0 = dictMonadEffect.Monad0();
    var Bind1 = Monad0.Bind1();
    var bind115 = bind(Bind1);
    var joinData22 = joinData2(dictMonadEffect);
    var append42 = append6(dictMonadEffect);
    var pure118 = pure(Monad0.Applicative0());
    var applyPerDatumAttrs1 = applyPerDatumAttrs(dictMonadEffect);
    var discard26 = discard2(Bind1);
    var remove22 = remove(dictMonadEffect);
    var merge1 = merge(dictMonadEffect);
    return function(dictFoldable) {
      var joinData32 = joinData22(dictFoldable);
      return function(dictOrd) {
        var joinData4 = joinData32(dictOrd);
        return function(elemType) {
          return function(foldableData) {
            return function(selector) {
              return function(emptySelection) {
                return function(enterAttrs) {
                  return function(updateAttrs) {
                    return function(exitAttrs) {
                      return bind115(joinData4(foldableData)(selector)(emptySelection))(function(v2) {
                        return bind115(bind115(append42(elemType)([])(v2.value0.enter))(function(bound) {
                          if (enterAttrs instanceof Nothing) {
                            return pure118(bound);
                          }
                          ;
                          if (enterAttrs instanceof Just) {
                            return applyPerDatumAttrs1(enterAttrs.value0)(bound);
                          }
                          ;
                          throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 869, column 5 - line 871, column 55): " + [enterAttrs.constructor.name]);
                        }))(function(enterBound) {
                          return bind115((function() {
                            if (updateAttrs instanceof Nothing) {
                              return pure118(v2.value0.update);
                            }
                            ;
                            if (updateAttrs instanceof Just) {
                              return applyPerDatumAttrs1(updateAttrs.value0)(v2.value0.update);
                            }
                            ;
                            throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 874, column 18 - line 876, column 54): " + [updateAttrs.constructor.name]);
                          })())(function(updateBound) {
                            return discard26((function() {
                              if (exitAttrs instanceof Nothing) {
                                return remove22(v2.value0.exit);
                              }
                              ;
                              if (exitAttrs instanceof Just) {
                                return bind115(applyPerDatumAttrs1(exitAttrs.value0)(v2.value0.exit))(function() {
                                  return remove22(v2.value0.exit);
                                });
                              }
                              ;
                              throw new Error("Failed pattern match at Hylograph.Internal.Selection.Operations (line 879, column 3 - line 883, column 18): " + [exitAttrs.constructor.name]);
                            })())(function() {
                              return merge1(enterBound)(updateBound);
                            });
                          });
                        });
                      });
                    };
                  };
                };
              };
            };
          };
        };
      };
    };
  };

  // output/Hylograph.HATS.InterpreterTick/index.js
  var append7 = /* @__PURE__ */ append(semigroupArray);
  var map20 = /* @__PURE__ */ map(functorArray);
  var bind4 = /* @__PURE__ */ bind(bindEffect);
  var pure5 = /* @__PURE__ */ pure(applicativeEffect);
  var traverse_3 = /* @__PURE__ */ traverse_(applicativeEffect)(foldableArray);
  var unwrap3 = /* @__PURE__ */ unwrap();
  var map1 = /* @__PURE__ */ map(functorMaybe);
  var map22 = /* @__PURE__ */ map(functorEffect);
  var traverse4 = /* @__PURE__ */ traverse(traversableArray)(applicativeEffect);
  var union3 = /* @__PURE__ */ union(ordString);
  var $$void6 = /* @__PURE__ */ $$void(functorEffect);
  var traverseWithIndex3 = /* @__PURE__ */ traverseWithIndex(traversableWithIndexArray)(applicativeEffect);
  var insert6 = /* @__PURE__ */ insert(ordString);
  var foldM3 = /* @__PURE__ */ foldM(monadEffect);
  var fromFoldable6 = /* @__PURE__ */ fromFoldable4(foldableArray)(ordString);
  var difference5 = /* @__PURE__ */ difference2(ordString);
  var intersection4 = /* @__PURE__ */ intersection2(ordString);
  var member4 = /* @__PURE__ */ member2(ordString);
  var tooltipTriggerToInt2 = function(v2) {
    if (v2 instanceof OnHover) {
      return 0;
    }
    ;
    if (v2 instanceof WhenPrimary) {
      return 1;
    }
    ;
    if (v2 instanceof WhenRelated) {
      return 2;
    }
    ;
    throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 656, column 23 - line 659, column 19): " + [v2.constructor.name]);
  };
  var interactionStateToInt = function(v2) {
    if (v2 instanceof Primary2) {
      return 0;
    }
    ;
    if (v2 instanceof Related2) {
      return 1;
    }
    ;
    if (v2 instanceof Selected) {
      return 2;
    }
    ;
    if (v2 instanceof Dimmed2) {
      return 3;
    }
    ;
    if (v2 instanceof Neutral2) {
      return 4;
    }
    ;
    throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 663, column 25 - line 668, column 18): " + [v2.constructor.name]);
  };
  var highlightClassToInt2 = function(v2) {
    if (v2 instanceof Primary) {
      return 0;
    }
    ;
    if (v2 instanceof Related) {
      return 1;
    }
    ;
    if (v2 instanceof Dimmed) {
      return 2;
    }
    ;
    if (v2 instanceof Neutral) {
      return 3;
    }
    ;
    if (v2 instanceof Upstream) {
      return 4;
    }
    ;
    if (v2 instanceof Downstream) {
      return 5;
    }
    ;
    throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 645, column 23 - line 651, column 21): " + [v2.constructor.name]);
  };
  var enumerateDFS = function(root3) {
    return function(getChildren2) {
      return function(includeInternal) {
        var go2 = function(node) {
          var children2 = getChildren2(node);
          var isLeaf = $$null(children2);
          var childResults = concatMap(go2)(children2);
          var $76 = isLeaf || includeInternal;
          if ($76) {
            return append7([node])(childResults);
          }
          ;
          return childResults;
        };
        return go2(root3);
      };
    };
  };
  var enumerateBFS = function(root3) {
    return function(getChildren2) {
      return function(includeInternal) {
        var go2 = function(queue) {
          var v2 = uncons(queue);
          if (v2 instanceof Nothing) {
            return [];
          }
          ;
          if (v2 instanceof Just) {
            var children2 = getChildren2(v2.value0.head);
            var isLeaf = $$null(children2);
            var include = isLeaf || includeInternal;
            var thisNode = (function() {
              if (include) {
                return [v2.value0.head];
              }
              ;
              return [];
            })();
            return append7(thisNode)(go2(append7(v2.value0.tail)(children2)));
          }
          ;
          throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 550, column 14 - line 557, column 43): " + [v2.constructor.name]);
        };
        return go2([root3]);
      };
    };
  };
  var runEnumeration = function(v2) {
    if (v2 instanceof FromArray) {
      return v2.value0;
    }
    ;
    if (v2 instanceof FromTree) {
      if (v2.value0.order instanceof DepthFirst) {
        return enumerateDFS(v2.value0.root)(v2.value0.children)(v2.value0.includeInternal);
      }
      ;
      if (v2.value0.order instanceof BreadthFirst) {
        return enumerateBFS(v2.value0.root)(v2.value0.children)(v2.value0.includeInternal);
      }
      ;
      throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 531, column 5 - line 533, column 80): " + [v2.value0.order.constructor.name]);
    }
    ;
    if (v2 instanceof WithContext) {
      return map20(function(v1) {
        return v1.datum;
      })(v2.value0);
    }
    ;
    throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 528, column 18 - line 534, column 41): " + [v2.constructor.name]);
  };
  var elementTypeToTagName = function(v2) {
    if (v2 instanceof Circle) {
      return "circle";
    }
    ;
    if (v2 instanceof Rect) {
      return "rect";
    }
    ;
    if (v2 instanceof Path) {
      return "path";
    }
    ;
    if (v2 instanceof Line) {
      return "line";
    }
    ;
    if (v2 instanceof Polygon) {
      return "polygon";
    }
    ;
    if (v2 instanceof Text) {
      return "text";
    }
    ;
    if (v2 instanceof Group) {
      return "g";
    }
    ;
    if (v2 instanceof SVG) {
      return "svg";
    }
    ;
    if (v2 instanceof Defs) {
      return "defs";
    }
    ;
    if (v2 instanceof LinearGradient) {
      return "linearGradient";
    }
    ;
    if (v2 instanceof Stop) {
      return "stop";
    }
    ;
    if (v2 instanceof PatternFill) {
      return "pattern";
    }
    ;
    if (v2 instanceof Div) {
      return "div";
    }
    ;
    if (v2 instanceof Span) {
      return "span";
    }
    ;
    if (v2 instanceof Table) {
      return "table";
    }
    ;
    if (v2 instanceof Tr) {
      return "tr";
    }
    ;
    if (v2 instanceof Td) {
      return "td";
    }
    ;
    if (v2 instanceof Th) {
      return "th";
    }
    ;
    if (v2 instanceof Tbody) {
      return "tbody";
    }
    ;
    if (v2 instanceof Thead) {
      return "thead";
    }
    ;
    throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 587, column 24 - line 607, column 19): " + [v2.constructor.name]);
  };
  var clearContainer = function(selector) {
    return function __do7() {
      var doc = (function __do8() {
        var $228 = bind4(windowImpl)(document2)();
        return toDocument($228);
      })();
      var container = selectElement(selector)(doc)();
      var children2 = getChildElements(container)();
      return traverse_3(removeElement)(children2)();
    };
  };
  var clearChildren = function(el) {
    return function __do7() {
      var children2 = getChildElements(el)();
      return traverse_3(removeElement)(children2)();
    };
  };
  var appendTo = function(p2) {
    return function(child) {
      return function __do7() {
        appendChild(toNode(child))(toNode(p2))();
        return unit;
      };
    };
  };
  var rerenderTree = function(doc) {
    return function(parent2) {
      return function(tree) {
        var mkUpdateTransition = function(el) {
          return function(duration2) {
            return function(delay2) {
              return function(easing) {
                return function(v2) {
                  if (v2 instanceof StaticAttr2) {
                    return function __do7() {
                      var fromStr2 = getAttribute(el)(v2.value0)();
                      var $89 = {
                        from: fromString(fromStr2),
                        to: fromString(v2.value1)
                      };
                      if ($89.from instanceof Just && ($89.to instanceof Just && $89.from.value0 !== $89.to.value0)) {
                        return new Just({
                          attrName: v2.value0,
                          from: $89.from.value0,
                          to: $89.to.value0,
                          elapsed: 0,
                          duration: duration2,
                          delay: delay2,
                          easing
                        });
                      }
                      ;
                      return Nothing.value;
                    };
                  }
                  ;
                  if (v2 instanceof ThunkedAttr) {
                    return function __do7() {
                      var fromStr2 = getAttribute(el)(v2.value0)();
                      var toNum = fromString(v2.value1(unit));
                      var $96 = {
                        from: fromString(fromStr2),
                        to: toNum
                      };
                      if ($96.from instanceof Just && ($96.to instanceof Just && $96.from.value0 !== $96.to.value0)) {
                        return new Just({
                          attrName: v2.value0,
                          from: $96.from.value0,
                          to: $96.to.value0,
                          elapsed: 0,
                          duration: duration2,
                          delay: delay2,
                          easing
                        });
                      }
                      ;
                      return Nothing.value;
                    };
                  }
                  ;
                  throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 458, column 49 - line 471, column 26): " + [v2.constructor.name]);
                };
              };
            };
          };
        };
        var mkExitTransition = function(el) {
          return function(duration2) {
            return function(delay2) {
              return function(easing) {
                return function(v2) {
                  if (v2 instanceof StaticAttr2) {
                    return function __do7() {
                      var fromStr2 = getAttribute(el)(v2.value0)();
                      var $104 = {
                        from: fromString(fromStr2),
                        to: fromString(v2.value1)
                      };
                      if ($104.from instanceof Just && $104.to instanceof Just) {
                        return new Just({
                          attrName: v2.value0,
                          from: $104.from.value0,
                          to: $104.to.value0,
                          elapsed: 0,
                          duration: duration2,
                          delay: delay2,
                          easing
                        });
                      }
                      ;
                      return Nothing.value;
                    };
                  }
                  ;
                  if (v2 instanceof ThunkedAttr) {
                    return function __do7() {
                      var fromStr2 = getAttribute(el)(v2.value0)();
                      var toVal = v2.value1(unit);
                      var $111 = {
                        from: fromString(fromStr2),
                        to: fromString(toVal)
                      };
                      if ($111.from instanceof Just && $111.to instanceof Just) {
                        return new Just({
                          attrName: v2.value0,
                          from: $111.from.value0,
                          to: $111.to.value0,
                          elapsed: 0,
                          duration: duration2,
                          delay: delay2,
                          easing
                        });
                      }
                      ;
                      return Nothing.value;
                    };
                  }
                  ;
                  throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 491, column 47 - line 504, column 26): " + [v2.constructor.name]);
                };
              };
            };
          };
        };
        var getAttrNum = function(targetName) {
          return function(v2) {
            if (v2 instanceof StaticAttr2 && v2.value0 === targetName) {
              return fromString(v2.value1);
            }
            ;
            if (v2 instanceof ThunkedAttr && v2.value0 === targetName) {
              return fromString(v2.value1(unit));
            }
            ;
            return Nothing.value;
          };
        };
        var findAttrValue = function(name16) {
          return function(attrs) {
            return findMap(getAttrNum(name16))(attrs);
          };
        };
        var mkEnterTransition = function(duration2) {
          return function(delay2) {
            return function(easing) {
              return function(templateAttrs) {
                return function(v2) {
                  if (v2 instanceof StaticAttr2) {
                    var toVal = findAttrValue(v2.value0)(templateAttrs);
                    var $124 = {
                      from: fromString(v2.value1),
                      to: toVal
                    };
                    if ($124.from instanceof Just && $124.to instanceof Just) {
                      return pure5(new Just({
                        attrName: v2.value0,
                        from: $124.from.value0,
                        to: $124.to.value0,
                        elapsed: 0,
                        duration: duration2,
                        delay: delay2,
                        easing
                      }));
                    }
                    ;
                    return pure5(Nothing.value);
                  }
                  ;
                  if (v2 instanceof ThunkedAttr) {
                    var fromNum = fromString(v2.value1(unit));
                    var toVal = findAttrValue(v2.value0)(templateAttrs);
                    var $131 = {
                      from: fromNum,
                      to: toVal
                    };
                    if ($131.from instanceof Just && $131.to instanceof Just) {
                      return pure5(new Just({
                        attrName: v2.value0,
                        from: $131.from.value0,
                        to: $131.to.value0,
                        elapsed: 0,
                        duration: duration2,
                        delay: delay2,
                        easing
                      }));
                    }
                    ;
                    return pure5(Nothing.value);
                  }
                  ;
                  throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 424, column 59 - line 437, column 26): " + [v2.constructor.name]);
                };
              };
            };
          };
        };
        var emptyResult = {
          selections: empty2,
          entering: [],
          updating: [],
          exiting: []
        };
        var createUpdateTransitions = function(el) {
          return function(templateAttrs) {
            return function(phaseSpec) {
              return function(idx) {
                if (phaseSpec.transition instanceof Nothing) {
                  return pure5([]);
                }
                ;
                if (phaseSpec.transition instanceof Just) {
                  var duration2 = unwrap3(phaseSpec.transition.value0.duration);
                  var baseDelay = fromMaybe(0)(map1(unwrap3)(phaseSpec.transition.value0.delay));
                  var staggerDelay = fromMaybe(0)(phaseSpec.transition.value0.staggerDelay);
                  var delay2 = baseDelay + staggerDelay * toNumber(idx);
                  var easing = toTickEasing(phaseSpec.transition.value0.easing);
                  return map22(catMaybes)(traverse4(mkUpdateTransition(el)(duration2)(delay2)(easing))(templateAttrs));
                }
                ;
                throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 446, column 5 - line 454, column 97): " + [phaseSpec.transition.constructor.name]);
              };
            };
          };
        };
        var createExitTransitions = function(el) {
          return function(phaseSpec) {
            return function(idx) {
              if (phaseSpec.transition instanceof Nothing) {
                return pure5([]);
              }
              ;
              if (phaseSpec.transition instanceof Just) {
                var duration2 = unwrap3(phaseSpec.transition.value0.duration);
                var baseDelay = fromMaybe(0)(map1(unwrap3)(phaseSpec.transition.value0.delay));
                var staggerDelay = fromMaybe(0)(phaseSpec.transition.value0.staggerDelay);
                var delay2 = baseDelay + staggerDelay * toNumber(idx);
                var easing = toTickEasing(phaseSpec.transition.value0.easing);
                return map22(catMaybes)(traverse4(mkExitTransition(el)(duration2)(delay2)(easing))(phaseSpec.attrs));
              }
              ;
              throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 479, column 5 - line 487, column 97): " + [phaseSpec.transition.constructor.name]);
            };
          };
        };
        var createEnterTransitions = function(el) {
          return function(templateAttrs) {
            return function(phaseSpec) {
              return function(idx) {
                if (phaseSpec.transition instanceof Nothing) {
                  return pure5([]);
                }
                ;
                if (phaseSpec.transition instanceof Just) {
                  var duration2 = unwrap3(phaseSpec.transition.value0.duration);
                  var baseDelay = fromMaybe(0)(map1(unwrap3)(phaseSpec.transition.value0.delay));
                  var staggerDelay = fromMaybe(0)(phaseSpec.transition.value0.staggerDelay);
                  var delay2 = baseDelay + staggerDelay * toNumber(idx);
                  var easing = toTickEasing(phaseSpec.transition.value0.easing);
                  return map22(catMaybes)(traverse4(mkEnterTransition(duration2)(delay2)(easing)(templateAttrs))(phaseSpec.attrs));
                }
                ;
                throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 412, column 5 - line 420, column 109): " + [phaseSpec.transition.constructor.name]);
              };
            };
          };
        };
        var combineResults = function(a3) {
          return function(b2) {
            return {
              selections: union3(a3.selections)(b2.selections),
              entering: append7(a3.entering)(b2.entering),
              updating: append7(a3.updating)(b2.updating),
              exiting: append7(a3.exiting)(b2.exiting)
            };
          };
        };
        var applyIfNonNumeric = function(el) {
          return function(v2) {
            if (v2 instanceof StaticAttr2) {
              var v1 = fromString(v2.value1);
              if (v1 instanceof Just) {
                return pure5(unit);
              }
              ;
              if (v1 instanceof Nothing) {
                return setAttribute(el)(v2.value0)(v2.value1);
              }
              ;
              throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 347, column 7 - line 349, column 46): " + [v1.constructor.name]);
            }
            ;
            if (v2 instanceof ThunkedAttr) {
              var value18 = v2.value1(unit);
              var v1 = fromString(value18);
              if (v1 instanceof Just) {
                return pure5(unit);
              }
              ;
              if (v1 instanceof Nothing) {
                return setAttribute(el)(v2.value0)(value18);
              }
              ;
              throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 352, column 10 - line 354, column 46): " + [v1.constructor.name]);
            }
            ;
            throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 345, column 26 - line 354, column 46): " + [v2.constructor.name]);
          };
        };
        var applyNonNumericAttrs = function(el) {
          return function(attrs) {
            return function __do7() {
              traverse4(applyIfNonNumeric(el))(attrs)();
              return unit;
            };
          };
        };
        var applyBehavior = function(el) {
          return function(v2) {
            if (v2 instanceof ThunkedMouseEnter) {
              return attachMouseEnterThunked(el)(v2.value0);
            }
            ;
            if (v2 instanceof ThunkedMouseLeave) {
              return attachMouseLeaveThunked(el)(v2.value0);
            }
            ;
            if (v2 instanceof ThunkedClick) {
              return attachClickThunked(el)(v2.value0);
            }
            ;
            if (v2 instanceof ThunkedDrag && v2.value0 instanceof SimpleDrag) {
              return attachSimpleDrag(el);
            }
            ;
            if (v2 instanceof ThunkedDrag && v2.value0 instanceof SimulationDrag) {
              return attachSimulationDragById(el)(v2.value0.value0);
            }
            ;
            if (v2 instanceof ThunkedDrag && v2.value0 instanceof SimulationDragNested) {
              return attachSimulationDragNestedById(el)(v2.value0.value0);
            }
            ;
            if (v2 instanceof ThunkedZoom) {
              return attachZoom(el)(v2.value0.scaleExtent.value0)(v2.value0.scaleExtent.value1)(v2.value0.targetSelector);
            }
            ;
            if (v2 instanceof ThunkedCoordinatedHighlight) {
              var triggerAsInt = tooltipTriggerToInt2(v2.value0.tooltipTrigger);
              var classifyAsInt = function(hoveredId) {
                return highlightClassToInt2(v2.value0.classify(hoveredId));
              };
              return attachCoordinatedHighlightThunked(el)(v2.value0.identify)(classifyAsInt)(toNullable(v2.value0.group))(toNullable(v2.value0.tooltipContent))(triggerAsInt);
            }
            ;
            if (v2 instanceof ThunkedCoordinatedInteraction) {
              var respondToHover = function(hoveredId) {
                return interactionStateToInt(v2.value0.respond(new HoverTrigger(hoveredId)));
              };
              var respondToClear = function(v1) {
                return interactionStateToInt(v2.value0.respond(ClearTrigger.value));
              };
              var respondToBrush = function(box) {
                return interactionStateToInt(v2.value0.respond(new BrushTrigger(box)));
              };
              return attachCoordinatedInteractionThunked(el)(v2.value0.identify)(respondToHover)(respondToBrush)(respondToClear)(v2.value0.position)(toNullable(v2.value0.group));
            }
            ;
            if (v2 instanceof ThunkedBrush) {
              return $$void6(attachCoordinatedBrushThunked(el)(v2.value0.extent)(toNullable(v2.value0.group)));
            }
            ;
            throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 366, column 22 - line 399, column 86): " + [v2.constructor.name]);
          };
        };
        var applyBehaviors = function(el) {
          return function(behaviors) {
            return function __do7() {
              traverse4(applyBehavior(el))(behaviors)();
              return unit;
            };
          };
        };
        var applyAttr2 = function(el) {
          return function(v2) {
            if (v2 instanceof StaticAttr2) {
              return setAttribute(el)(v2.value0)(v2.value1);
            }
            ;
            if (v2 instanceof ThunkedAttr) {
              return setAttribute(el)(v2.value0)(v2.value1(unit));
            }
            ;
            throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 335, column 18 - line 337, column 64): " + [v2.constructor.name]);
          };
        };
        var applyAttrs = function(el) {
          return function(attrs) {
            return function __do7() {
              traverse4(applyAttr2(el))(attrs)();
              return unit;
            };
          };
        };
        var renderEnteringItem = function(p2) {
          return function(foldName) {
            return function(keyFn) {
              return function(template) {
                return function(gupSpec) {
                  return function(idx) {
                    return function(datum) {
                      var itemTree = template(datum);
                      var key = keyFn(datum);
                      if (itemTree instanceof Elem) {
                        return function __do7() {
                          var el = createElementWithNS(itemTree.value0.elemType)(doc)();
                          appendTo(p2)(el)();
                          setKey(el)(key)();
                          setFoldName(el)(foldName)();
                          bindDatum(el)(datum)();
                          applyAttrs(el)(itemTree.value0.attrs)();
                          var transitions = (function() {
                            if (gupSpec instanceof Just) {
                              if (gupSpec.value0.enter instanceof Just) {
                                var ts = createEnterTransitions(el)(itemTree.value0.attrs)(gupSpec.value0.enter.value0)(idx)();
                                applyAttrs(el)(gupSpec.value0.enter.value0.attrs)();
                                return new Just({
                                  element: el,
                                  attrs: ts
                                });
                              }
                              ;
                              if (gupSpec.value0.enter instanceof Nothing) {
                                return Nothing.value;
                              }
                              ;
                              throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 282, column 22 - line 287, column 36): " + [gupSpec.value0.enter.constructor.name]);
                            }
                            ;
                            if (gupSpec instanceof Nothing) {
                              return Nothing.value;
                            }
                            ;
                            throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 281, column 24 - line 288, column 34): " + [gupSpec.constructor.name]);
                          })();
                          applyBehaviors(el)(itemTree.value0.behaviors)();
                          var childMaps = traverse4(goWithDatum(el))(itemTree.value0.children)();
                          return {
                            element: el,
                            childSelections: foldl2(union3)(empty2)(map20(function(v2) {
                              return v2.selections;
                            })(childMaps)),
                            transitions
                          };
                        };
                      }
                      ;
                      return function __do7() {
                        var el = createElementWithNS(Group.value)(doc)();
                        return {
                          element: el,
                          childSelections: empty2,
                          transitions: Nothing.value
                        };
                      };
                    };
                  };
                };
              };
            };
          };
        };
        var goWithDatum = function(p2) {
          return function(v2) {
            if (v2 instanceof Empty) {
              return pure5(emptyResult);
            }
            ;
            if (v2 instanceof Elem) {
              return function __do7() {
                var el = createElementWithNS(v2.value0.elemType)(doc)();
                appendTo(p2)(el)();
                applyAttrs(el)(v2.value0.attrs)();
                applyBehaviors(el)(v2.value0.behaviors)();
                var childResults = traverse4(goWithDatum(el))(v2.value0.children)();
                return foldl2(combineResults)(emptyResult)(childResults);
              };
            }
            ;
            if (v2 instanceof MkFold) {
              return runSomeFold(v2.value0)(function(foldSpec) {
                var items2 = runEnumeration(foldSpec.enumerate);
                return function __do7() {
                  var results = traverseWithIndex3(renderEnteringItem(p2)(foldSpec.name)(foldSpec.keyFn)(foldSpec.template)(foldSpec.gup))(items2)();
                  var elements = map20(function(v1) {
                    return v1.element;
                  })(results);
                  var childMaps = foldl2(union3)(empty2)(map20(function(v1) {
                    return v1.childSelections;
                  })(results));
                  return {
                    selections: insert6(foldSpec.name)(elements)(childMaps),
                    entering: [catMaybes(map20(function(v1) {
                      return v1.transitions;
                    })(results))],
                    updating: [],
                    exiting: []
                  };
                };
              });
            }
            ;
            throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 304, column 19 - line 323, column 10): " + [v2.constructor.name]);
          };
        };
        var processChildren = function(p2) {
          return function(children2) {
            var processChild = function(v2) {
              return function(child) {
                return function __do7() {
                  var v1 = goWithDomIdx(p2)(v2.domIdx)(child)();
                  return {
                    result: combineResults(v2.result)(v1.result),
                    domIdx: v2.domIdx + v1.elementsCreated | 0
                  };
                };
              };
            };
            return function __do7() {
              var v2 = foldM3(processChild)({
                result: emptyResult,
                domIdx: 0
              })(children2)();
              return v2.result;
            };
          };
        };
        var goWithDomIdx = function(p2) {
          return function(domIdx) {
            return function(v2) {
              if (v2 instanceof Empty) {
                return pure5({
                  result: emptyResult,
                  elementsCreated: 0
                });
              }
              ;
              if (v2 instanceof Elem) {
                return function __do7() {
                  var existingChildren = getChildElements(p2)();
                  var el = (function() {
                    var v1 = index(existingChildren)(domIdx);
                    if (v1 instanceof Just) {
                      applyAttrs(v1.value0)(v2.value0.attrs)();
                      applyBehaviors(v1.value0)(v2.value0.behaviors)();
                      return v1.value0;
                    }
                    ;
                    if (v1 instanceof Nothing) {
                      var el2 = createElementWithNS(v2.value0.elemType)(doc)();
                      appendTo(p2)(el2)();
                      applyAttrs(el2)(v2.value0.attrs)();
                      applyBehaviors(el2)(v2.value0.behaviors)();
                      return el2;
                    }
                    ;
                    throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 137, column 13 - line 147, column 18): " + [v1.constructor.name]);
                  })();
                  var childResult = processChildren(el)(v2.value0.children)();
                  return {
                    result: childResult,
                    elementsCreated: 1
                  };
                };
              }
              ;
              if (v2 instanceof MkFold) {
                return runSomeFold(v2.value0)(function(spec) {
                  var items2 = runEnumeration(spec.enumerate);
                  var newKeys = fromFoldable6(map20(spec.keyFn)(items2));
                  var tagName2 = elementTypeToTagName(spec.elementType);
                  return function __do7() {
                    var existingEls = getChildElementsForFold(p2)(tagName2)(spec.name)();
                    var existingKeysAndEls = traverse4(function(el) {
                      return function __do8() {
                        var k = getKey(el)();
                        return {
                          key: k,
                          element: el
                        };
                      };
                    })(existingEls)();
                    var existingKeys = fromFoldable6(map20(function(v1) {
                      return v1.key;
                    })(existingKeysAndEls));
                    var enterKeys = difference5(newKeys)(existingKeys);
                    var updateKeys = intersection4(newKeys)(existingKeys);
                    var exitKeys = difference5(existingKeys)(newKeys);
                    var exitTransitions = traverseWithIndex3(function(exitIdx) {
                      return function(v1) {
                        var $197 = member4(v1.key)(exitKeys);
                        if ($197) {
                          if (spec.gup instanceof Just) {
                            if (spec.gup.value0.exit instanceof Just) {
                              return function __do8() {
                                var transitions = createExitTransitions(v1.element)(spec.gup.value0.exit.value0)(exitIdx)();
                                applyNonNumericAttrs(v1.element)(spec.gup.value0.exit.value0.attrs)();
                                return new Just({
                                  element: v1.element,
                                  attrs: transitions
                                });
                              };
                            }
                            ;
                            if (spec.gup.value0.exit instanceof Nothing) {
                              return function __do8() {
                                removeElement(v1.element)();
                                return Nothing.value;
                              };
                            }
                            ;
                            throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 172, column 29 - line 181, column 29): " + [spec.gup.value0.exit.constructor.name]);
                          }
                          ;
                          if (spec.gup instanceof Nothing) {
                            return function __do8() {
                              removeElement(v1.element)();
                              return Nothing.value;
                            };
                          }
                          ;
                          throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 171, column 16 - line 184, column 27): " + [spec.gup.constructor.name]);
                        }
                        ;
                        return pure5(Nothing.value);
                      };
                    })(existingKeysAndEls)();
                    var updateTransitions = traverseWithIndex3(function(updateIdx) {
                      return function(v1) {
                        var $205 = member4(v1.key)(updateKeys);
                        if ($205) {
                          var v22 = find2(function(d3) {
                            return spec.keyFn(d3) === v1.key;
                          })(items2);
                          if (v22 instanceof Just) {
                            return function __do8() {
                              bindDatum(v1.element)(v22.value0)();
                              var templateTree = spec.template(v22.value0);
                              var templateAttrs = (function() {
                                if (templateTree instanceof Elem) {
                                  return templateTree.value0.attrs;
                                }
                                ;
                                return [];
                              })();
                              var templateChildren = (function() {
                                if (templateTree instanceof Elem) {
                                  return templateTree.value0.children;
                                }
                                ;
                                return [];
                              })();
                              if (spec.gup instanceof Just) {
                                if (spec.gup.value0.update instanceof Just) {
                                  applyNonNumericAttrs(v1.element)(templateAttrs)();
                                  var transitions = createUpdateTransitions(v1.element)(templateAttrs)(spec.gup.value0.update.value0)(updateIdx)();
                                  clearChildren(v1.element)();
                                  traverse4(goWithDatum(v1.element))(templateChildren)();
                                  return new Just({
                                    element: v1.element,
                                    attrs: transitions
                                  });
                                }
                                ;
                                if (spec.gup.value0.update instanceof Nothing) {
                                  applyAttrs(v1.element)(templateAttrs)();
                                  clearChildren(v1.element)();
                                  traverse4(goWithDatum(v1.element))(templateChildren)();
                                  return Nothing.value;
                                }
                                ;
                                throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 204, column 33 - line 217, column 33): " + [spec.gup.value0.update.constructor.name]);
                              }
                              ;
                              if (spec.gup instanceof Nothing) {
                                applyAttrs(v1.element)(templateAttrs)();
                                clearChildren(v1.element)();
                                traverse4(goWithDatum(v1.element))(templateChildren)();
                                return Nothing.value;
                              }
                              ;
                              throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 203, column 15 - line 223, column 31): " + [spec.gup.constructor.name]);
                            };
                          }
                          ;
                          if (v22 instanceof Nothing) {
                            return pure5(Nothing.value);
                          }
                          ;
                          throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 191, column 16 - line 224, column 36): " + [v22.constructor.name]);
                        }
                        ;
                        return pure5(Nothing.value);
                      };
                    })(existingKeysAndEls)();
                    var enterItems = filter(function(d3) {
                      return member4(spec.keyFn(d3))(enterKeys);
                    })(items2);
                    var enterResults = traverseWithIndex3(renderEnteringItem(p2)(spec.name)(spec.keyFn)(spec.template)(spec.gup))(enterItems)();
                    var updateElements = map20(function(v1) {
                      return v1.element;
                    })(filter(function(v1) {
                      return member4(v1.key)(updateKeys);
                    })(existingKeysAndEls));
                    var enterElements = map20(function(v1) {
                      return v1.element;
                    })(enterResults);
                    var childMaps = foldl2(union3)(empty2)(map20(function(v1) {
                      return v1.childSelections;
                    })(enterResults));
                    var selections = insert6(spec.name)(append7(updateElements)(enterElements))(childMaps);
                    var totalElements = length(updateElements) + length(enterElements) | 0;
                    return {
                      result: {
                        selections,
                        entering: [catMaybes(map20(function(v1) {
                          return v1.transitions;
                        })(enterResults))],
                        updating: [catMaybes(updateTransitions)],
                        exiting: [catMaybes(exitTransitions)]
                      },
                      elementsCreated: totalElements
                    };
                  };
                });
              }
              ;
              throw new Error("Failed pattern match at Hylograph.HATS.InterpreterTick (line 132, column 27 - line 248, column 10): " + [v2.constructor.name]);
            };
          };
        };
        return function __do7() {
          var v2 = goWithDomIdx(parent2)(0)(tree)();
          var allEntering = concat(v2.result.entering);
          var allUpdating = concat(v2.result.updating);
          var allExiting = concat(v2.result.exiting);
          var hasTransitions = !($$null(allEntering) && ($$null(allUpdating) && $$null(allExiting)));
          return {
            selections: v2.result.selections,
            transitions: (function() {
              if (hasTransitions) {
                return new Just({
                  entering: allEntering,
                  updating: allUpdating,
                  exiting: allExiting
                });
              }
              ;
              return Nothing.value;
            })()
          };
        };
      };
    };
  };
  var rerender = function(selector) {
    return function(tree) {
      return function __do7() {
        var doc = (function __do8() {
          var $229 = bind4(windowImpl)(document2)();
          return toDocument($229);
        })();
        var container = selectElement(selector)(doc)();
        return rerenderTree(doc)(container)(tree)();
      };
    };
  };

  // output/Hylograph.Kernel.D3.Links/foreign.js
  var buildIntSet = (arr) => new Set(arr);
  var intSetMember = (key) => (set) => set.has(key);
  var buildIntMap_ = (pairs) => {
    const map57 = /* @__PURE__ */ new Map();
    for (let i2 = 0; i2 < pairs.length; i2++) {
      map57.set(pairs[i2].key, pairs[i2].value);
    }
    return map57;
  };
  var intMapLookup_ = (key) => (map57) => map57.get(key);
  var isNull = (x7) => x7 == null;

  // output/Hylograph.Kernel.D3.Links/index.js
  var bind5 = /* @__PURE__ */ bind(bindMaybe);
  var pure6 = /* @__PURE__ */ pure(applicativeMaybe);
  var map21 = /* @__PURE__ */ map(functorArray);
  var intMapLookup = function(key) {
    return function(m2) {
      var result = intMapLookup_(key)(m2);
      var $11 = isNull(result);
      if ($11) {
        return Nothing.value;
      }
      ;
      return new Just(result);
    };
  };
  var filterLinksToSubset = function(getIndex) {
    return function(nodes) {
      return function(links) {
        var nodeIndices = buildIntSet(map21(getIndex)(nodes));
        return filter(function(l2) {
          return intSetMember(l2.source)(nodeIndices) && intSetMember(l2.target)(nodeIndices);
        })(links);
      };
    };
  };
  var buildIntMap = function(getIndex) {
    return function(nodes) {
      return buildIntMap_(map21(function(n) {
        return {
          key: getIndex(n),
          value: n
        };
      })(nodes));
    };
  };
  var swizzleLinksByIndex = function(getIndex) {
    return function(nodes) {
      return function(links) {
        return function(transform7) {
          var swizzle = function(nodeMap2) {
            return function(link4) {
              return bind5(intMapLookup(link4.source)(nodeMap2))(function(srcNode) {
                return bind5(intMapLookup(link4.target)(nodeMap2))(function(tgtNode) {
                  return pure6({
                    src: srcNode,
                    tgt: tgtNode,
                    link: link4
                  });
                });
              });
            };
          };
          var reindex = function(i2) {
            return function(v2) {
              return transform7(v2.src)(v2.tgt)(i2)(v2.link);
            };
          };
          var nodeMap = buildIntMap(getIndex)(nodes);
          return mapWithIndex2(reindex)(mapMaybe(swizzle(nodeMap))(links));
        };
      };
    };
  };

  // output/Hylograph.ForceEngine.Simulation/foreign.js
  function interpolatePositionsInPlace_(startPositions) {
    return function(targetPositions) {
      return function(progress2) {
        return function(nodesRef) {
          return function() {
            const nodes = nodesRef.value;
            for (let i2 = 0; i2 < nodes.length; i2++) {
              const node = nodes[i2];
              const key = String(node.id);
              const start4 = startPositions[key];
              const target7 = targetPositions[key];
              if (start4 && target7) {
                node.x = start4.x + (target7.x - start4.x) * progress2;
                node.y = start4.y + (target7.y - start4.y) * progress2;
              }
            }
          };
        };
      };
    };
  }
  function pinNodesInPlace_(nodesRef) {
    return function() {
      const nodes = nodesRef.value;
      for (let i2 = 0; i2 < nodes.length; i2++) {
        const node = nodes[i2];
        node.fx = node.x;
        node.fy = node.y;
      }
    };
  }
  function unpinNodesInPlace_(nodesRef) {
    return function() {
      const nodes = nodesRef.value;
      for (let i2 = 0; i2 < nodes.length; i2++) {
        const node = nodes[i2];
        node.fx = null;
        node.fy = null;
      }
    };
  }
  function updateGridXWithFn_(xFn) {
    return function(nodesRef) {
      return function() {
        const nodes = nodesRef.value;
        for (let i2 = 0; i2 < nodes.length; i2++) {
          const node = nodes[i2];
          node.gridX = xFn(node);
        }
      };
    };
  }
  function updateGridYWithFn_(yFn) {
    return function(nodesRef) {
      return function() {
        const nodes = nodesRef.value;
        for (let i2 = 0; i2 < nodes.length; i2++) {
          const node = nodes[i2];
          node.gridY = yFn(node);
        }
      };
    };
  }

  // output/Hylograph.ForceEngine.Types/index.js
  var ManyBody = /* @__PURE__ */ (function() {
    function ManyBody3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    ManyBody3.create = function(value0) {
      return function(value1) {
        return new ManyBody3(value0, value1);
      };
    };
    return ManyBody3;
  })();
  var Collide = /* @__PURE__ */ (function() {
    function Collide3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Collide3.create = function(value0) {
      return function(value1) {
        return new Collide3(value0, value1);
      };
    };
    return Collide3;
  })();
  var Link = /* @__PURE__ */ (function() {
    function Link3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Link3.create = function(value0) {
      return function(value1) {
        return new Link3(value0, value1);
      };
    };
    return Link3;
  })();
  var Center = /* @__PURE__ */ (function() {
    function Center3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Center3.create = function(value0) {
      return function(value1) {
        return new Center3(value0, value1);
      };
    };
    return Center3;
  })();
  var PositionX = /* @__PURE__ */ (function() {
    function PositionX3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    PositionX3.create = function(value0) {
      return function(value1) {
        return new PositionX3(value0, value1);
      };
    };
    return PositionX3;
  })();
  var PositionY = /* @__PURE__ */ (function() {
    function PositionY3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    PositionY3.create = function(value0) {
      return function(value1) {
        return new PositionY3(value0, value1);
      };
    };
    return PositionY3;
  })();
  var Radial = /* @__PURE__ */ (function() {
    function Radial3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Radial3.create = function(value0) {
      return function(value1) {
        return new Radial3(value0, value1);
      };
    };
    return Radial3;
  })();
  var defaultSimParams = {
    alpha: 1,
    alphaMin: 1e-3,
    alphaDecay: 0.01,
    alphaTarget: 0,
    velocityDecay: 0.4
  };
  var defaultManyBody = /* @__PURE__ */ (function() {
    return {
      strength: -30,
      theta: 0.9,
      distanceMin: 1,
      distanceMax: 1e10
    };
  })();

  // output/Hylograph.ForceEngine.Simulation/index.js
  var for_4 = /* @__PURE__ */ for_(applicativeEffect);
  var for_1 = /* @__PURE__ */ for_4(foldableArray);
  var toUnfoldable6 = /* @__PURE__ */ toUnfoldable(unfoldableArray);
  var pure7 = /* @__PURE__ */ pure(applicativeEffect);
  var when3 = /* @__PURE__ */ when(applicativeEffect);
  var fromFoldable7 = /* @__PURE__ */ fromFoldable(foldableList);
  var fromFoldable12 = /* @__PURE__ */ fromFoldable(foldableSet);
  var show9 = /* @__PURE__ */ show(showInt);
  var show12 = /* @__PURE__ */ show(/* @__PURE__ */ showArray(showString));
  var unless2 = /* @__PURE__ */ unless(applicativeEffect);
  var for_22 = /* @__PURE__ */ for_4(foldableMaybe);
  var $$void7 = /* @__PURE__ */ $$void(functorEffect);
  var insert7 = /* @__PURE__ */ insert(ordString);
  var unpinNodesInPlace = function(sim) {
    return unpinNodesInPlace_(sim.nodes);
  };
  var stop = function(sim) {
    return function __do7() {
      write(false)(sim.running)();
      var cancel = read(sim.cancelAnimation)();
      return cancel();
    };
  };
  var setNodes = function(nodes) {
    return function(sim) {
      return function __do7() {
        initializeNodes(nodes)();
        write(nodes)(sim.nodes)();
        var forces = read(sim.forces)();
        return for_1(toUnfoldable6(forces))(function(v2) {
          return function __do8() {
            initializeForce(v2.value1)(nodes)();
            return unit;
          };
        })();
      };
    };
  };
  var setLinks = function(links) {
    return function(sim) {
      return write(links)(sim.links);
    };
  };
  var pinNodesInPlace = function(sim) {
    return pinNodesInPlace_(sim.nodes);
  };
  var onTick = function(callback) {
    return function(sim) {
      return write(callback)(sim.tickCallback);
    };
  };
  var invokeTickCallback = function(sim) {
    if (sim.callbacks instanceof Nothing) {
      return pure7(unit);
    }
    ;
    if (sim.callbacks instanceof Just) {
      return function __do7() {
        var callback = read(sim.callbacks.value0.onTick)();
        return callback();
      };
    }
    ;
    throw new Error("Failed pattern match at Hylograph.ForceEngine.Simulation (line 518, column 26 - line 522, column 13): " + [sim.callbacks.constructor.name]);
  };
  var invokeStopCallback = function(sim) {
    if (sim.callbacks instanceof Nothing) {
      return pure7(unit);
    }
    ;
    if (sim.callbacks instanceof Just) {
      return function __do7() {
        var callback = read(sim.callbacks.value0.onStop)();
        return callback();
      };
    }
    ;
    throw new Error("Failed pattern match at Hylograph.ForceEngine.Simulation (line 508, column 26 - line 512, column 13): " + [sim.callbacks.constructor.name]);
  };
  var invokeStartCallback = function(sim) {
    if (sim.callbacks instanceof Nothing) {
      return pure7(unit);
    }
    ;
    if (sim.callbacks instanceof Just) {
      return function __do7() {
        var callback = read(sim.callbacks.value0.onStart)();
        return callback();
      };
    }
    ;
    throw new Error("Failed pattern match at Hylograph.ForceEngine.Simulation (line 498, column 27 - line 502, column 13): " + [sim.callbacks.constructor.name]);
  };
  var interpolatePositionsInPlace = function(startPos) {
    return function(targetPos) {
      return function(progress2) {
        return function(sim) {
          return interpolatePositionsInPlace_(startPos)(targetPos)(progress2)(sim.nodes);
        };
      };
    };
  };
  var getNodes = function(sim) {
    return read(sim.nodes);
  };
  var defaultConfig2 = /* @__PURE__ */ (function() {
    return {
      alphaMin: defaultSimParams.alphaMin,
      alphaDecay: defaultSimParams.alphaDecay,
      alphaTarget: defaultSimParams.alphaTarget,
      velocityDecay: defaultSimParams.velocityDecay
    };
  })();
  var createWithCallbacks = function(config) {
    return function(cbs) {
      return function __do7() {
        var nodesRef = $$new([])();
        var linksRef = $$new([])();
        var forcesRef = $$new(empty2)();
        var alphaRef = $$new(1)();
        var prevAlphaRef = $$new(1)();
        var runningRef = $$new(false)();
        var cancelRef = $$new(pure7(unit))();
        var tickRef = $$new(pure7(unit))();
        return {
          nodes: nodesRef,
          links: linksRef,
          forces: forcesRef,
          alpha: alphaRef,
          prevAlpha: prevAlphaRef,
          config,
          running: runningRef,
          cancelAnimation: cancelRef,
          tickCallback: tickRef,
          callbacks: new Just(cbs)
        };
      };
    };
  };
  var create3 = function(config) {
    return function __do7() {
      var nodesRef = $$new([])();
      var linksRef = $$new([])();
      var forcesRef = $$new(empty2)();
      var alphaRef = $$new(1)();
      var prevAlphaRef = $$new(1)();
      var runningRef = $$new(false)();
      var cancelRef = $$new(pure7(unit))();
      var tickRef = $$new(pure7(unit))();
      return {
        nodes: nodesRef,
        links: linksRef,
        forces: forcesRef,
        alpha: alphaRef,
        prevAlpha: prevAlphaRef,
        config,
        running: runningRef,
        cancelAnimation: cancelRef,
        tickCallback: tickRef,
        callbacks: Nothing.value
      };
    };
  };
  var checkAlphaThresholds = function(prevAlpha) {
    return function(newAlpha) {
      return function(sim) {
        var crossedThreshold = function(prev) {
          return function($$new2) {
            return function(thresh) {
              return prev > thresh && $$new2 <= thresh;
            };
          };
        };
        var alphaThresholds = [0.5, 0.1, 0.01];
        if (sim.callbacks instanceof Nothing) {
          return pure7(unit);
        }
        ;
        if (sim.callbacks instanceof Just) {
          return for_1(alphaThresholds)(function(threshold2) {
            return when3(crossedThreshold(prevAlpha)(newAlpha)(threshold2))(function __do7() {
              var callback = read(sim.callbacks.value0.onAlphaThreshold)();
              return callback(newAlpha)();
            });
          });
        }
        ;
        throw new Error("Failed pattern match at Hylograph.ForceEngine.Simulation (line 531, column 47 - line 538, column 26): " + [sim.callbacks.constructor.name]);
      };
    };
  };
  var tick = function(sim) {
    return function __do7() {
      var nodes = read(sim.nodes)();
      var forces = read(sim.forces)();
      var alpha = read(sim.alpha)();
      var prevAlpha = read(sim.prevAlpha)();
      var forceHandles = fromFoldable7(values(forces));
      var forceNames = fromFoldable12(keys2(forces));
      when3(alpha > 0.99)(log2("[tick] Forces in sim: " + (show9(length(forceHandles)) + (" - " + show12(forceNames)))))();
      applyForces(forceHandles)(alpha)();
      integratePositions(nodes)(sim.config.velocityDecay)();
      var newAlpha = decayAlpha(alpha)(sim.config.alphaMin)(sim.config.alphaDecay)(sim.config.alphaTarget);
      write(newAlpha)(sim.alpha)();
      write(alpha)(sim.prevAlpha)();
      var legacyCallback = read(sim.tickCallback)();
      legacyCallback();
      invokeTickCallback(sim)();
      checkAlphaThresholds(prevAlpha)(newAlpha)(sim)();
      return newAlpha;
    };
  };
  var start2 = function(sim) {
    return function __do7() {
      var alreadyRunning = read(sim.running)();
      return unless2(alreadyRunning)(function __do8() {
        write(true)(sim.running)();
        invokeStartCallback(sim)();
        var cancel = startAnimation(function(v2) {
          return function __do9() {
            var running = read(sim.running)();
            if (running) {
              var newAlpha = tick(sim)();
              var shouldContinue = newAlpha > 0;
              unless2(shouldContinue)(function __do10() {
                write(false)(sim.running)();
                return invokeStopCallback(sim)();
              })();
              return shouldContinue;
            }
            ;
            return false;
          };
        })();
        return write(cancel)(sim.cancelAnimation)();
      })();
    };
  };
  var reheat = function(sim) {
    return function __do7() {
      write(1)(sim.alpha)();
      var running = read(sim.running)();
      return unless2(running)(start2(sim))();
    };
  };
  var updateGridXYAndReinit = function(mXFn) {
    return function(mYFn) {
      return function(forceXHandle) {
        return function(mForceYHandle) {
          return function(sim) {
            return function __do7() {
              for_22(mXFn)(function(xFn) {
                return updateGridXWithFn_(xFn)(sim.nodes);
              })();
              for_22(mYFn)(function(yFn) {
                return updateGridYWithFn_(yFn)(sim.nodes);
              })();
              var currentNodes = read(sim.nodes)();
              initializeForce(forceXHandle)(currentNodes)();
              for_22(mForceYHandle)(function(forceYHandle) {
                return $$void7(initializeForce(forceYHandle)(currentNodes));
              })();
              return reheat(sim)();
            };
          };
        };
      };
    };
  };
  var addForce2 = function(spec) {
    return function(sim) {
      var forceName = function(v2) {
        if (v2 instanceof ManyBody) {
          return v2.value0;
        }
        ;
        if (v2 instanceof Collide) {
          return v2.value0;
        }
        ;
        if (v2 instanceof Link) {
          return v2.value0;
        }
        ;
        if (v2 instanceof Center) {
          return v2.value0;
        }
        ;
        if (v2 instanceof PositionX) {
          return v2.value0;
        }
        ;
        if (v2 instanceof PositionY) {
          return v2.value0;
        }
        ;
        if (v2 instanceof Radial) {
          return v2.value0;
        }
        ;
        throw new Error("Failed pattern match at Hylograph.ForceEngine.Simulation (line 336, column 15 - line 343, column 20): " + [v2.constructor.name]);
      };
      return function __do7() {
        var nodes = read(sim.nodes)();
        var links = read(sim.links)();
        var handle = (function() {
          if (spec instanceof ManyBody) {
            var h7 = createManyBody(spec.value1);
            return initializeForce(h7)(nodes)();
          }
          ;
          if (spec instanceof Collide) {
            var h7 = createCollide(spec.value1);
            return initializeForce(h7)(nodes)();
          }
          ;
          if (spec instanceof Link) {
            var h7 = createLink(spec.value1);
            return initializeLinkForce(h7)(nodes)(links)();
          }
          ;
          if (spec instanceof Center) {
            var h7 = createCenter(spec.value1);
            return initializeForce(h7)(nodes)();
          }
          ;
          if (spec instanceof PositionX) {
            var h7 = createForceX(spec.value1);
            return initializeForce(h7)(nodes)();
          }
          ;
          if (spec instanceof PositionY) {
            var h7 = createForceY(spec.value1);
            return initializeForce(h7)(nodes)();
          }
          ;
          if (spec instanceof Radial) {
            var h7 = createRadial(spec.value1);
            return initializeForce(h7)(nodes)();
          }
          ;
          throw new Error("Failed pattern match at Hylograph.ForceEngine.Simulation (line 303, column 13 - line 330, column 35): " + [spec.constructor.name]);
        })();
        var name16 = forceName(spec);
        return modify_2(insert7(name16)(handle))(sim.forces)();
      };
    };
  };

  // output/Hylograph.ForceEngine.WASM/foreign.js
  var WasmSimulation = null;
  function createSimulation_(nodeCount) {
    return function() {
      if (!WasmSimulation) {
        throw new Error("WASM not initialized. Call initWasm first.");
      }
      return new WasmSimulation(nodeCount);
    };
  }
  function setNodeCount_(sim) {
    return function(count) {
      return function() {
        sim.set_node_count(count);
      };
    };
  }
  function setLinks_(sim) {
    return function(links) {
      return function() {
        sim.set_links(new Uint32Array(links));
      };
    };
  }
  function configureManyBody_(sim) {
    return function(config) {
      return function() {
        sim.configure_many_body(
          config.strength,
          config.theta,
          config.distanceMin,
          config.distanceMax
        );
      };
    };
  }
  function configureLinks_(sim) {
    return function(config) {
      return function() {
        sim.configure_links(
          config.distance,
          config.strength,
          config.iterations
        );
      };
    };
  }
  function configureCenter_(sim) {
    return function(config) {
      return function() {
        sim.configure_center(config.x, config.y, config.strength);
      };
    };
  }
  function enableForces_(sim) {
    return function(manyBody2) {
      return function(links) {
        return function(center2) {
          return function() {
            sim.enable_force(manyBody2, links, center2);
          };
        };
      };
    };
  }
  function setAlpha_(sim) {
    return function(alpha) {
      return function() {
        sim.set_alpha(alpha);
      };
    };
  }
  function setAlphaDecay_(sim) {
    return function(decay) {
      return function() {
        sim.set_alpha_decay(decay);
      };
    };
  }
  function setVelocityDecay_(sim) {
    return function(decay) {
      return function() {
        sim.set_velocity_decay(decay);
      };
    };
  }
  function reheat_(sim) {
    return function() {
      sim.reheat();
    };
  }
  function tick_(sim) {
    return function() {
      return sim.tick();
    };
  }
  function syncPositionsToWasm_(sim) {
    return function(nodes) {
      return function() {
        for (let i2 = 0; i2 < nodes.length; i2++) {
          const node = nodes[i2];
          sim.set_position(i2, node.x, node.y);
        }
      };
    };
  }
  function syncPositionsFromWasm_(sim) {
    return function(nodes) {
      return function() {
        const positions = sim.get_positions();
        for (let i2 = 0; i2 < nodes.length; i2++) {
          nodes[i2].x = positions[i2 * 2];
          nodes[i2].y = positions[i2 * 2 + 1];
          nodes[i2].vx = 0;
          nodes[i2].vy = 0;
        }
        return nodes;
      };
    };
  }

  // output/Effect.Aff/foreign.js
  var Aff = (function() {
    var EMPTY = {};
    var PURE = "Pure";
    var THROW = "Throw";
    var CATCH = "Catch";
    var SYNC = "Sync";
    var ASYNC = "Async";
    var BIND = "Bind";
    var BRACKET = "Bracket";
    var FORK = "Fork";
    var SEQ = "Sequential";
    var MAP = "Map";
    var APPLY = "Apply";
    var ALT = "Alt";
    var CONS = "Cons";
    var RESUME = "Resume";
    var RELEASE = "Release";
    var FINALIZER = "Finalizer";
    var FINALIZED = "Finalized";
    var FORKED = "Forked";
    var FIBER = "Fiber";
    var THUNK = "Thunk";
    function Aff2(tag, _1, _2, _3) {
      this.tag = tag;
      this._1 = _1;
      this._2 = _2;
      this._3 = _3;
    }
    function AffCtr(tag) {
      var fn = function(_1, _2, _3) {
        return new Aff2(tag, _1, _2, _3);
      };
      fn.tag = tag;
      return fn;
    }
    function nonCanceler2(error4) {
      return new Aff2(PURE, void 0);
    }
    function runEff(eff) {
      try {
        eff();
      } catch (error4) {
        setTimeout(function() {
          throw error4;
        }, 0);
      }
    }
    function runSync(left, right, eff) {
      try {
        return right(eff());
      } catch (error4) {
        return left(error4);
      }
    }
    function runAsync(left, eff, k) {
      try {
        return eff(k)();
      } catch (error4) {
        k(left(error4))();
        return nonCanceler2;
      }
    }
    var Scheduler = (function() {
      var limit = 1024;
      var size6 = 0;
      var ix = 0;
      var queue = new Array(limit);
      var draining = false;
      function drain() {
        var thunk;
        draining = true;
        while (size6 !== 0) {
          size6--;
          thunk = queue[ix];
          queue[ix] = void 0;
          ix = (ix + 1) % limit;
          thunk();
        }
        draining = false;
      }
      return {
        isDraining: function() {
          return draining;
        },
        enqueue: function(cb) {
          var i2, tmp;
          if (size6 === limit) {
            tmp = draining;
            drain();
            draining = tmp;
          }
          queue[(ix + size6) % limit] = cb;
          size6++;
          if (!draining) {
            drain();
          }
        }
      };
    })();
    function Supervisor(util2) {
      var fibers = {};
      var fiberId = 0;
      var count = 0;
      return {
        register: function(fiber) {
          var fid = fiberId++;
          fiber.onComplete({
            rethrow: true,
            handler: function(result) {
              return function() {
                count--;
                delete fibers[fid];
              };
            }
          })();
          fibers[fid] = fiber;
          count++;
        },
        isEmpty: function() {
          return count === 0;
        },
        killAll: function(killError, cb) {
          return function() {
            if (count === 0) {
              return cb();
            }
            var killCount = 0;
            var kills = {};
            function kill2(fid) {
              kills[fid] = fibers[fid].kill(killError, function(result) {
                return function() {
                  delete kills[fid];
                  killCount--;
                  if (util2.isLeft(result) && util2.fromLeft(result)) {
                    setTimeout(function() {
                      throw util2.fromLeft(result);
                    }, 0);
                  }
                  if (killCount === 0) {
                    cb();
                  }
                };
              })();
            }
            for (var k in fibers) {
              if (fibers.hasOwnProperty(k)) {
                killCount++;
                kill2(k);
              }
            }
            fibers = {};
            fiberId = 0;
            count = 0;
            return function(error4) {
              return new Aff2(SYNC, function() {
                for (var k2 in kills) {
                  if (kills.hasOwnProperty(k2)) {
                    kills[k2]();
                  }
                }
              });
            };
          };
        }
      };
    }
    var SUSPENDED = 0;
    var CONTINUE = 1;
    var STEP_BIND = 2;
    var STEP_RESULT = 3;
    var PENDING = 4;
    var RETURN = 5;
    var COMPLETED = 6;
    function Fiber(util2, supervisor, aff) {
      var runTick = 0;
      var status = SUSPENDED;
      var step5 = aff;
      var fail3 = null;
      var interrupt = null;
      var bhead = null;
      var btail = null;
      var attempts = null;
      var bracketCount = 0;
      var joinId = 0;
      var joins = null;
      var rethrow = true;
      function run3(localRunTick) {
        var tmp, result, attempt;
        while (true) {
          tmp = null;
          result = null;
          attempt = null;
          switch (status) {
            case STEP_BIND:
              status = CONTINUE;
              try {
                step5 = bhead(step5);
                if (btail === null) {
                  bhead = null;
                } else {
                  bhead = btail._1;
                  btail = btail._2;
                }
              } catch (e) {
                status = RETURN;
                fail3 = util2.left(e);
                step5 = null;
              }
              break;
            case STEP_RESULT:
              if (util2.isLeft(step5)) {
                status = RETURN;
                fail3 = step5;
                step5 = null;
              } else if (bhead === null) {
                status = RETURN;
              } else {
                status = STEP_BIND;
                step5 = util2.fromRight(step5);
              }
              break;
            case CONTINUE:
              switch (step5.tag) {
                case BIND:
                  if (bhead) {
                    btail = new Aff2(CONS, bhead, btail);
                  }
                  bhead = step5._2;
                  status = CONTINUE;
                  step5 = step5._1;
                  break;
                case PURE:
                  if (bhead === null) {
                    status = RETURN;
                    step5 = util2.right(step5._1);
                  } else {
                    status = STEP_BIND;
                    step5 = step5._1;
                  }
                  break;
                case SYNC:
                  status = STEP_RESULT;
                  step5 = runSync(util2.left, util2.right, step5._1);
                  break;
                case ASYNC:
                  status = PENDING;
                  step5 = runAsync(util2.left, step5._1, function(result2) {
                    return function() {
                      if (runTick !== localRunTick) {
                        return;
                      }
                      runTick++;
                      Scheduler.enqueue(function() {
                        if (runTick !== localRunTick + 1) {
                          return;
                        }
                        status = STEP_RESULT;
                        step5 = result2;
                        run3(runTick);
                      });
                    };
                  });
                  return;
                case THROW:
                  status = RETURN;
                  fail3 = util2.left(step5._1);
                  step5 = null;
                  break;
                // Enqueue the Catch so that we can call the error handler later on
                // in case of an exception.
                case CATCH:
                  if (bhead === null) {
                    attempts = new Aff2(CONS, step5, attempts, interrupt);
                  } else {
                    attempts = new Aff2(CONS, step5, new Aff2(CONS, new Aff2(RESUME, bhead, btail), attempts, interrupt), interrupt);
                  }
                  bhead = null;
                  btail = null;
                  status = CONTINUE;
                  step5 = step5._1;
                  break;
                // Enqueue the Bracket so that we can call the appropriate handlers
                // after resource acquisition.
                case BRACKET:
                  bracketCount++;
                  if (bhead === null) {
                    attempts = new Aff2(CONS, step5, attempts, interrupt);
                  } else {
                    attempts = new Aff2(CONS, step5, new Aff2(CONS, new Aff2(RESUME, bhead, btail), attempts, interrupt), interrupt);
                  }
                  bhead = null;
                  btail = null;
                  status = CONTINUE;
                  step5 = step5._1;
                  break;
                case FORK:
                  status = STEP_RESULT;
                  tmp = Fiber(util2, supervisor, step5._2);
                  if (supervisor) {
                    supervisor.register(tmp);
                  }
                  if (step5._1) {
                    tmp.run();
                  }
                  step5 = util2.right(tmp);
                  break;
                case SEQ:
                  status = CONTINUE;
                  step5 = sequential4(util2, supervisor, step5._1);
                  break;
              }
              break;
            case RETURN:
              bhead = null;
              btail = null;
              if (attempts === null) {
                status = COMPLETED;
                step5 = interrupt || fail3 || step5;
              } else {
                tmp = attempts._3;
                attempt = attempts._1;
                attempts = attempts._2;
                switch (attempt.tag) {
                  // We cannot recover from an unmasked interrupt. Otherwise we should
                  // continue stepping, or run the exception handler if an exception
                  // was raised.
                  case CATCH:
                    if (interrupt && interrupt !== tmp && bracketCount === 0) {
                      status = RETURN;
                    } else if (fail3) {
                      status = CONTINUE;
                      step5 = attempt._2(util2.fromLeft(fail3));
                      fail3 = null;
                    }
                    break;
                  // We cannot resume from an unmasked interrupt or exception.
                  case RESUME:
                    if (interrupt && interrupt !== tmp && bracketCount === 0 || fail3) {
                      status = RETURN;
                    } else {
                      bhead = attempt._1;
                      btail = attempt._2;
                      status = STEP_BIND;
                      step5 = util2.fromRight(step5);
                    }
                    break;
                  // If we have a bracket, we should enqueue the handlers,
                  // and continue with the success branch only if the fiber has
                  // not been interrupted. If the bracket acquisition failed, we
                  // should not run either.
                  case BRACKET:
                    bracketCount--;
                    if (fail3 === null) {
                      result = util2.fromRight(step5);
                      attempts = new Aff2(CONS, new Aff2(RELEASE, attempt._2, result), attempts, tmp);
                      if (interrupt === tmp || bracketCount > 0) {
                        status = CONTINUE;
                        step5 = attempt._3(result);
                      }
                    }
                    break;
                  // Enqueue the appropriate handler. We increase the bracket count
                  // because it should not be cancelled.
                  case RELEASE:
                    attempts = new Aff2(CONS, new Aff2(FINALIZED, step5, fail3), attempts, interrupt);
                    status = CONTINUE;
                    if (interrupt && interrupt !== tmp && bracketCount === 0) {
                      step5 = attempt._1.killed(util2.fromLeft(interrupt))(attempt._2);
                    } else if (fail3) {
                      step5 = attempt._1.failed(util2.fromLeft(fail3))(attempt._2);
                    } else {
                      step5 = attempt._1.completed(util2.fromRight(step5))(attempt._2);
                    }
                    fail3 = null;
                    bracketCount++;
                    break;
                  case FINALIZER:
                    bracketCount++;
                    attempts = new Aff2(CONS, new Aff2(FINALIZED, step5, fail3), attempts, interrupt);
                    status = CONTINUE;
                    step5 = attempt._1;
                    break;
                  case FINALIZED:
                    bracketCount--;
                    status = RETURN;
                    step5 = attempt._1;
                    fail3 = attempt._2;
                    break;
                }
              }
              break;
            case COMPLETED:
              for (var k in joins) {
                if (joins.hasOwnProperty(k)) {
                  rethrow = rethrow && joins[k].rethrow;
                  runEff(joins[k].handler(step5));
                }
              }
              joins = null;
              if (interrupt && fail3) {
                setTimeout(function() {
                  throw util2.fromLeft(fail3);
                }, 0);
              } else if (util2.isLeft(step5) && rethrow) {
                setTimeout(function() {
                  if (rethrow) {
                    throw util2.fromLeft(step5);
                  }
                }, 0);
              }
              return;
            case SUSPENDED:
              status = CONTINUE;
              break;
            case PENDING:
              return;
          }
        }
      }
      function onComplete(join6) {
        return function() {
          if (status === COMPLETED) {
            rethrow = rethrow && join6.rethrow;
            join6.handler(step5)();
            return function() {
            };
          }
          var jid = joinId++;
          joins = joins || {};
          joins[jid] = join6;
          return function() {
            if (joins !== null) {
              delete joins[jid];
            }
          };
        };
      }
      function kill2(error4, cb) {
        return function() {
          if (status === COMPLETED) {
            cb(util2.right(void 0))();
            return function() {
            };
          }
          var canceler = onComplete({
            rethrow: false,
            handler: function() {
              return cb(util2.right(void 0));
            }
          })();
          switch (status) {
            case SUSPENDED:
              interrupt = util2.left(error4);
              status = COMPLETED;
              step5 = interrupt;
              run3(runTick);
              break;
            case PENDING:
              if (interrupt === null) {
                interrupt = util2.left(error4);
              }
              if (bracketCount === 0) {
                if (status === PENDING) {
                  attempts = new Aff2(CONS, new Aff2(FINALIZER, step5(error4)), attempts, interrupt);
                }
                status = RETURN;
                step5 = null;
                fail3 = null;
                run3(++runTick);
              }
              break;
            default:
              if (interrupt === null) {
                interrupt = util2.left(error4);
              }
              if (bracketCount === 0) {
                status = RETURN;
                step5 = null;
                fail3 = null;
              }
          }
          return canceler;
        };
      }
      function join5(cb) {
        return function() {
          var canceler = onComplete({
            rethrow: false,
            handler: cb
          })();
          if (status === SUSPENDED) {
            run3(runTick);
          }
          return canceler;
        };
      }
      return {
        kill: kill2,
        join: join5,
        onComplete,
        isSuspended: function() {
          return status === SUSPENDED;
        },
        run: function() {
          if (status === SUSPENDED) {
            if (!Scheduler.isDraining()) {
              Scheduler.enqueue(function() {
                run3(runTick);
              });
            } else {
              run3(runTick);
            }
          }
        }
      };
    }
    function runPar(util2, supervisor, par, cb) {
      var fiberId = 0;
      var fibers = {};
      var killId = 0;
      var kills = {};
      var early = new Error("[ParAff] Early exit");
      var interrupt = null;
      var root3 = EMPTY;
      function kill2(error4, par2, cb2) {
        var step5 = par2;
        var head6 = null;
        var tail3 = null;
        var count = 0;
        var kills2 = {};
        var tmp, kid;
        loop: while (true) {
          tmp = null;
          switch (step5.tag) {
            case FORKED:
              if (step5._3 === EMPTY) {
                tmp = fibers[step5._1];
                kills2[count++] = tmp.kill(error4, function(result) {
                  return function() {
                    count--;
                    if (count === 0) {
                      cb2(result)();
                    }
                  };
                });
              }
              if (head6 === null) {
                break loop;
              }
              step5 = head6._2;
              if (tail3 === null) {
                head6 = null;
              } else {
                head6 = tail3._1;
                tail3 = tail3._2;
              }
              break;
            case MAP:
              step5 = step5._2;
              break;
            case APPLY:
            case ALT:
              if (head6) {
                tail3 = new Aff2(CONS, head6, tail3);
              }
              head6 = step5;
              step5 = step5._1;
              break;
          }
        }
        if (count === 0) {
          cb2(util2.right(void 0))();
        } else {
          kid = 0;
          tmp = count;
          for (; kid < tmp; kid++) {
            kills2[kid] = kills2[kid]();
          }
        }
        return kills2;
      }
      function join5(result, head6, tail3) {
        var fail3, step5, lhs, rhs, tmp, kid;
        if (util2.isLeft(result)) {
          fail3 = result;
          step5 = null;
        } else {
          step5 = result;
          fail3 = null;
        }
        loop: while (true) {
          lhs = null;
          rhs = null;
          tmp = null;
          kid = null;
          if (interrupt !== null) {
            return;
          }
          if (head6 === null) {
            cb(fail3 || step5)();
            return;
          }
          if (head6._3 !== EMPTY) {
            return;
          }
          switch (head6.tag) {
            case MAP:
              if (fail3 === null) {
                head6._3 = util2.right(head6._1(util2.fromRight(step5)));
                step5 = head6._3;
              } else {
                head6._3 = fail3;
              }
              break;
            case APPLY:
              lhs = head6._1._3;
              rhs = head6._2._3;
              if (fail3) {
                head6._3 = fail3;
                tmp = true;
                kid = killId++;
                kills[kid] = kill2(early, fail3 === lhs ? head6._2 : head6._1, function() {
                  return function() {
                    delete kills[kid];
                    if (tmp) {
                      tmp = false;
                    } else if (tail3 === null) {
                      join5(fail3, null, null);
                    } else {
                      join5(fail3, tail3._1, tail3._2);
                    }
                  };
                });
                if (tmp) {
                  tmp = false;
                  return;
                }
              } else if (lhs === EMPTY || rhs === EMPTY) {
                return;
              } else {
                step5 = util2.right(util2.fromRight(lhs)(util2.fromRight(rhs)));
                head6._3 = step5;
              }
              break;
            case ALT:
              lhs = head6._1._3;
              rhs = head6._2._3;
              if (lhs === EMPTY && util2.isLeft(rhs) || rhs === EMPTY && util2.isLeft(lhs)) {
                return;
              }
              if (lhs !== EMPTY && util2.isLeft(lhs) && rhs !== EMPTY && util2.isLeft(rhs)) {
                fail3 = step5 === lhs ? rhs : lhs;
                step5 = null;
                head6._3 = fail3;
              } else {
                head6._3 = step5;
                tmp = true;
                kid = killId++;
                kills[kid] = kill2(early, step5 === lhs ? head6._2 : head6._1, function() {
                  return function() {
                    delete kills[kid];
                    if (tmp) {
                      tmp = false;
                    } else if (tail3 === null) {
                      join5(step5, null, null);
                    } else {
                      join5(step5, tail3._1, tail3._2);
                    }
                  };
                });
                if (tmp) {
                  tmp = false;
                  return;
                }
              }
              break;
          }
          if (tail3 === null) {
            head6 = null;
          } else {
            head6 = tail3._1;
            tail3 = tail3._2;
          }
        }
      }
      function resolve(fiber) {
        return function(result) {
          return function() {
            delete fibers[fiber._1];
            fiber._3 = result;
            join5(result, fiber._2._1, fiber._2._2);
          };
        };
      }
      function run3() {
        var status = CONTINUE;
        var step5 = par;
        var head6 = null;
        var tail3 = null;
        var tmp, fid;
        loop: while (true) {
          tmp = null;
          fid = null;
          switch (status) {
            case CONTINUE:
              switch (step5.tag) {
                case MAP:
                  if (head6) {
                    tail3 = new Aff2(CONS, head6, tail3);
                  }
                  head6 = new Aff2(MAP, step5._1, EMPTY, EMPTY);
                  step5 = step5._2;
                  break;
                case APPLY:
                  if (head6) {
                    tail3 = new Aff2(CONS, head6, tail3);
                  }
                  head6 = new Aff2(APPLY, EMPTY, step5._2, EMPTY);
                  step5 = step5._1;
                  break;
                case ALT:
                  if (head6) {
                    tail3 = new Aff2(CONS, head6, tail3);
                  }
                  head6 = new Aff2(ALT, EMPTY, step5._2, EMPTY);
                  step5 = step5._1;
                  break;
                default:
                  fid = fiberId++;
                  status = RETURN;
                  tmp = step5;
                  step5 = new Aff2(FORKED, fid, new Aff2(CONS, head6, tail3), EMPTY);
                  tmp = Fiber(util2, supervisor, tmp);
                  tmp.onComplete({
                    rethrow: false,
                    handler: resolve(step5)
                  })();
                  fibers[fid] = tmp;
                  if (supervisor) {
                    supervisor.register(tmp);
                  }
              }
              break;
            case RETURN:
              if (head6 === null) {
                break loop;
              }
              if (head6._1 === EMPTY) {
                head6._1 = step5;
                status = CONTINUE;
                step5 = head6._2;
                head6._2 = EMPTY;
              } else {
                head6._2 = step5;
                step5 = head6;
                if (tail3 === null) {
                  head6 = null;
                } else {
                  head6 = tail3._1;
                  tail3 = tail3._2;
                }
              }
          }
        }
        root3 = step5;
        for (fid = 0; fid < fiberId; fid++) {
          fibers[fid].run();
        }
      }
      function cancel(error4, cb2) {
        interrupt = util2.left(error4);
        var innerKills;
        for (var kid in kills) {
          if (kills.hasOwnProperty(kid)) {
            innerKills = kills[kid];
            for (kid in innerKills) {
              if (innerKills.hasOwnProperty(kid)) {
                innerKills[kid]();
              }
            }
          }
        }
        kills = null;
        var newKills = kill2(error4, root3, cb2);
        return function(killError) {
          return new Aff2(ASYNC, function(killCb) {
            return function() {
              for (var kid2 in newKills) {
                if (newKills.hasOwnProperty(kid2)) {
                  newKills[kid2]();
                }
              }
              return nonCanceler2;
            };
          });
        };
      }
      run3();
      return function(killError) {
        return new Aff2(ASYNC, function(killCb) {
          return function() {
            return cancel(killError, killCb);
          };
        });
      };
    }
    function sequential4(util2, supervisor, par) {
      return new Aff2(ASYNC, function(cb) {
        return function() {
          return runPar(util2, supervisor, par, cb);
        };
      });
    }
    Aff2.EMPTY = EMPTY;
    Aff2.Pure = AffCtr(PURE);
    Aff2.Throw = AffCtr(THROW);
    Aff2.Catch = AffCtr(CATCH);
    Aff2.Sync = AffCtr(SYNC);
    Aff2.Async = AffCtr(ASYNC);
    Aff2.Bind = AffCtr(BIND);
    Aff2.Bracket = AffCtr(BRACKET);
    Aff2.Fork = AffCtr(FORK);
    Aff2.Seq = AffCtr(SEQ);
    Aff2.ParMap = AffCtr(MAP);
    Aff2.ParApply = AffCtr(APPLY);
    Aff2.ParAlt = AffCtr(ALT);
    Aff2.Fiber = Fiber;
    Aff2.Supervisor = Supervisor;
    Aff2.Scheduler = Scheduler;
    Aff2.nonCanceler = nonCanceler2;
    return Aff2;
  })();
  var _pure = Aff.Pure;
  var _throwError = Aff.Throw;
  function _catchError(aff) {
    return function(k) {
      return Aff.Catch(aff, k);
    };
  }
  function _map(f) {
    return function(aff) {
      if (aff.tag === Aff.Pure.tag) {
        return Aff.Pure(f(aff._1));
      } else {
        return Aff.Bind(aff, function(value18) {
          return Aff.Pure(f(value18));
        });
      }
    };
  }
  function _bind(aff) {
    return function(k) {
      return Aff.Bind(aff, k);
    };
  }
  function _fork(immediate) {
    return function(aff) {
      return Aff.Fork(immediate, aff);
    };
  }
  var _liftEffect = Aff.Sync;
  function _parAffMap(f) {
    return function(aff) {
      return Aff.ParMap(f, aff);
    };
  }
  function _parAffApply(aff1) {
    return function(aff2) {
      return Aff.ParApply(aff1, aff2);
    };
  }
  var makeAff = Aff.Async;
  function generalBracket(acquire) {
    return function(options3) {
      return function(k) {
        return Aff.Bracket(acquire, options3, k);
      };
    };
  }
  function _makeFiber(util2, aff) {
    return function() {
      return Aff.Fiber(util2, null, aff);
    };
  }
  var _delay = /* @__PURE__ */ (function() {
    function setDelay(n, k) {
      if (n === 0 && typeof setImmediate !== "undefined") {
        return setImmediate(k);
      } else {
        return setTimeout(k, n);
      }
    }
    function clearDelay(n, t2) {
      if (n === 0 && typeof clearImmediate !== "undefined") {
        return clearImmediate(t2);
      } else {
        return clearTimeout(t2);
      }
    }
    return function(right, ms) {
      return Aff.Async(function(cb) {
        return function() {
          var timer = setDelay(ms, cb(right()));
          return function() {
            return Aff.Sync(function() {
              return right(clearDelay(ms, timer));
            });
          };
        };
      });
    };
  })();
  var _sequential = Aff.Seq;

  // output/Effect.Exception/foreign.js
  function error2(msg) {
    return new Error(msg);
  }
  function message(e) {
    return e.message;
  }
  function throwException(e) {
    return function() {
      throw e;
    };
  }

  // output/Effect.Exception/index.js
  var $$throw = function($4) {
    return throwException(error2($4));
  };

  // output/Control.Monad.Error.Class/index.js
  var throwError = function(dict) {
    return dict.throwError;
  };
  var catchError = function(dict) {
    return dict.catchError;
  };
  var $$try = function(dictMonadError) {
    var catchError1 = catchError(dictMonadError);
    var Monad0 = dictMonadError.MonadThrow0().Monad0();
    var map57 = map(Monad0.Bind1().Apply0().Functor0());
    var pure60 = pure(Monad0.Applicative0());
    return function(a3) {
      return catchError1(map57(Right.create)(a3))(function($52) {
        return pure60(Left.create($52));
      });
    };
  };

  // output/Control.Monad.Except.Trans/index.js
  var map23 = /* @__PURE__ */ map(functorEither);
  var ExceptT = function(x7) {
    return x7;
  };
  var runExceptT = function(v2) {
    return v2;
  };
  var mapExceptT = function(f) {
    return function(v2) {
      return f(v2);
    };
  };
  var functorExceptT = function(dictFunctor) {
    var map121 = map(dictFunctor);
    return {
      map: function(f) {
        return mapExceptT(map121(map23(f)));
      }
    };
  };
  var monadExceptT = function(dictMonad) {
    return {
      Applicative0: function() {
        return applicativeExceptT(dictMonad);
      },
      Bind1: function() {
        return bindExceptT(dictMonad);
      }
    };
  };
  var bindExceptT = function(dictMonad) {
    var bind34 = bind(dictMonad.Bind1());
    var pure60 = pure(dictMonad.Applicative0());
    return {
      bind: function(v2) {
        return function(k) {
          return bind34(v2)(either(function($193) {
            return pure60(Left.create($193));
          })(function(a3) {
            var v1 = k(a3);
            return v1;
          }));
        };
      },
      Apply0: function() {
        return applyExceptT(dictMonad);
      }
    };
  };
  var applyExceptT = function(dictMonad) {
    var functorExceptT1 = functorExceptT(dictMonad.Bind1().Apply0().Functor0());
    return {
      apply: ap(monadExceptT(dictMonad)),
      Functor0: function() {
        return functorExceptT1;
      }
    };
  };
  var applicativeExceptT = function(dictMonad) {
    return {
      pure: (function() {
        var $194 = pure(dictMonad.Applicative0());
        return function($195) {
          return ExceptT($194(Right.create($195)));
        };
      })(),
      Apply0: function() {
        return applyExceptT(dictMonad);
      }
    };
  };
  var monadThrowExceptT = function(dictMonad) {
    var monadExceptT1 = monadExceptT(dictMonad);
    return {
      throwError: (function() {
        var $204 = pure(dictMonad.Applicative0());
        return function($205) {
          return ExceptT($204(Left.create($205)));
        };
      })(),
      Monad0: function() {
        return monadExceptT1;
      }
    };
  };
  var altExceptT = function(dictSemigroup) {
    var append25 = append(dictSemigroup);
    return function(dictMonad) {
      var Bind1 = dictMonad.Bind1();
      var bind34 = bind(Bind1);
      var pure60 = pure(dictMonad.Applicative0());
      var functorExceptT1 = functorExceptT(Bind1.Apply0().Functor0());
      return {
        alt: function(v2) {
          return function(v1) {
            return bind34(v2)(function(rm) {
              if (rm instanceof Right) {
                return pure60(new Right(rm.value0));
              }
              ;
              if (rm instanceof Left) {
                return bind34(v1)(function(rn) {
                  if (rn instanceof Right) {
                    return pure60(new Right(rn.value0));
                  }
                  ;
                  if (rn instanceof Left) {
                    return pure60(new Left(append25(rm.value0)(rn.value0)));
                  }
                  ;
                  throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 87, column 9 - line 89, column 49): " + [rn.constructor.name]);
                });
              }
              ;
              throw new Error("Failed pattern match at Control.Monad.Except.Trans (line 83, column 5 - line 89, column 49): " + [rm.constructor.name]);
            });
          };
        },
        Functor0: function() {
          return functorExceptT1;
        }
      };
    };
  };

  // output/Control.Parallel.Class/index.js
  var sequential = function(dict) {
    return dict.sequential;
  };
  var parallel = function(dict) {
    return dict.parallel;
  };

  // output/Control.Parallel/index.js
  var identity9 = /* @__PURE__ */ identity(categoryFn);
  var parTraverse_ = function(dictParallel) {
    var sequential4 = sequential(dictParallel);
    var parallel4 = parallel(dictParallel);
    return function(dictApplicative) {
      var traverse_11 = traverse_(dictApplicative);
      return function(dictFoldable) {
        var traverse_14 = traverse_11(dictFoldable);
        return function(f) {
          var $51 = traverse_14(function($53) {
            return parallel4(f($53));
          });
          return function($52) {
            return sequential4($51($52));
          };
        };
      };
    };
  };
  var parSequence_ = function(dictParallel) {
    var parTraverse_1 = parTraverse_(dictParallel);
    return function(dictApplicative) {
      var parTraverse_2 = parTraverse_1(dictApplicative);
      return function(dictFoldable) {
        return parTraverse_2(dictFoldable)(identity9);
      };
    };
  };

  // output/Effect.Unsafe/foreign.js
  var unsafePerformEffect = function(f) {
    return f();
  };

  // output/Effect.Aff/index.js
  var $runtime_lazy3 = function(name16, moduleName, init3) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init3();
      state3 = 2;
      return val;
    };
  };
  var pure8 = /* @__PURE__ */ pure(applicativeEffect);
  var $$void8 = /* @__PURE__ */ $$void(functorEffect);
  var map24 = /* @__PURE__ */ map(functorEffect);
  var Canceler = function(x7) {
    return x7;
  };
  var suspendAff = /* @__PURE__ */ _fork(false);
  var functorParAff = {
    map: _parAffMap
  };
  var functorAff = {
    map: _map
  };
  var map110 = /* @__PURE__ */ map(functorAff);
  var forkAff = /* @__PURE__ */ _fork(true);
  var ffiUtil = /* @__PURE__ */ (function() {
    var unsafeFromRight = function(v2) {
      if (v2 instanceof Right) {
        return v2.value0;
      }
      ;
      if (v2 instanceof Left) {
        return unsafeCrashWith("unsafeFromRight: Left");
      }
      ;
      throw new Error("Failed pattern match at Effect.Aff (line 412, column 21 - line 414, column 54): " + [v2.constructor.name]);
    };
    var unsafeFromLeft = function(v2) {
      if (v2 instanceof Left) {
        return v2.value0;
      }
      ;
      if (v2 instanceof Right) {
        return unsafeCrashWith("unsafeFromLeft: Right");
      }
      ;
      throw new Error("Failed pattern match at Effect.Aff (line 407, column 20 - line 409, column 55): " + [v2.constructor.name]);
    };
    var isLeft = function(v2) {
      if (v2 instanceof Left) {
        return true;
      }
      ;
      if (v2 instanceof Right) {
        return false;
      }
      ;
      throw new Error("Failed pattern match at Effect.Aff (line 402, column 12 - line 404, column 21): " + [v2.constructor.name]);
    };
    return {
      isLeft,
      fromLeft: unsafeFromLeft,
      fromRight: unsafeFromRight,
      left: Left.create,
      right: Right.create
    };
  })();
  var makeFiber = function(aff) {
    return _makeFiber(ffiUtil, aff);
  };
  var launchAff = function(aff) {
    return function __do7() {
      var fiber = makeFiber(aff)();
      fiber.run();
      return fiber;
    };
  };
  var delay = function(v2) {
    return _delay(Right.create, v2);
  };
  var bracket = function(acquire) {
    return function(completed) {
      return generalBracket(acquire)({
        killed: $$const(completed),
        failed: $$const(completed),
        completed: $$const(completed)
      });
    };
  };
  var applyParAff = {
    apply: _parAffApply,
    Functor0: function() {
      return functorParAff;
    }
  };
  var monadAff = {
    Applicative0: function() {
      return applicativeAff;
    },
    Bind1: function() {
      return bindAff;
    }
  };
  var bindAff = {
    bind: _bind,
    Apply0: function() {
      return $lazy_applyAff(0);
    }
  };
  var applicativeAff = {
    pure: _pure,
    Apply0: function() {
      return $lazy_applyAff(0);
    }
  };
  var $lazy_applyAff = /* @__PURE__ */ $runtime_lazy3("applyAff", "Effect.Aff", function() {
    return {
      apply: ap(monadAff),
      Functor0: function() {
        return functorAff;
      }
    };
  });
  var applyAff = /* @__PURE__ */ $lazy_applyAff(73);
  var pure22 = /* @__PURE__ */ pure(applicativeAff);
  var bind12 = /* @__PURE__ */ bind(bindAff);
  var bindFlipped3 = /* @__PURE__ */ bindFlipped(bindAff);
  var $$finally = function(fin) {
    return function(a3) {
      return bracket(pure22(unit))($$const(fin))($$const(a3));
    };
  };
  var parallelAff = {
    parallel: unsafeCoerce2,
    sequential: _sequential,
    Apply0: function() {
      return applyAff;
    },
    Apply1: function() {
      return applyParAff;
    }
  };
  var parallel2 = /* @__PURE__ */ parallel(parallelAff);
  var applicativeParAff = {
    pure: function($76) {
      return parallel2(pure22($76));
    },
    Apply0: function() {
      return applyParAff;
    }
  };
  var monadEffectAff = {
    liftEffect: _liftEffect,
    Monad0: function() {
      return monadAff;
    }
  };
  var liftEffect3 = /* @__PURE__ */ liftEffect(monadEffectAff);
  var effectCanceler = function($77) {
    return Canceler($$const(liftEffect3($77)));
  };
  var joinFiber = function(v2) {
    return makeAff(function(k) {
      return map24(effectCanceler)(v2.join(k));
    });
  };
  var functorFiber = {
    map: function(f) {
      return function(t2) {
        return unsafePerformEffect(makeFiber(map110(f)(joinFiber(t2))));
      };
    }
  };
  var killFiber = function(e) {
    return function(v2) {
      return bind12(liftEffect3(v2.isSuspended))(function(suspended) {
        if (suspended) {
          return liftEffect3($$void8(v2.kill(e, $$const(pure8(unit)))));
        }
        ;
        return makeAff(function(k) {
          return map24(effectCanceler)(v2.kill(e, k));
        });
      });
    };
  };
  var monadThrowAff = {
    throwError: _throwError,
    Monad0: function() {
      return monadAff;
    }
  };
  var monadErrorAff = {
    catchError: _catchError,
    MonadThrow0: function() {
      return monadThrowAff;
    }
  };
  var $$try2 = /* @__PURE__ */ $$try(monadErrorAff);
  var runAff = function(k) {
    return function(aff) {
      return launchAff(bindFlipped3(function($83) {
        return liftEffect3(k($83));
      })($$try2(aff)));
    };
  };
  var runAff_ = function(k) {
    return function(aff) {
      return $$void8(runAff(k)(aff));
    };
  };
  var monadRecAff = {
    tailRecM: function(k) {
      var go2 = function(a3) {
        return bind12(k(a3))(function(res) {
          if (res instanceof Done) {
            return pure22(res.value0);
          }
          ;
          if (res instanceof Loop) {
            return go2(res.value0);
          }
          ;
          throw new Error("Failed pattern match at Effect.Aff (line 104, column 7 - line 106, column 23): " + [res.constructor.name]);
        });
      };
      return go2;
    },
    Monad0: function() {
      return monadAff;
    }
  };
  var nonCanceler = /* @__PURE__ */ $$const(/* @__PURE__ */ pure22(unit));

  // output/Effect.Aff.Compat/index.js
  var fromEffectFnAff = function(v2) {
    return makeAff(function(k) {
      return function __do7() {
        var v1 = v2(function($9) {
          return k(Left.create($9))();
        }, function($10) {
          return k(Right.create($10))();
        });
        return function(e) {
          return makeAff(function(k2) {
            return function __do8() {
              v1(e, function($11) {
                return k2(Left.create($11))();
              }, function($12) {
                return k2(Right.create($12))();
              });
              return nonCanceler;
            };
          });
        };
      };
    });
  };

  // output/Hylograph.ForceEngine.WASM/index.js
  var tick2 = tick_;
  var syncPositionsToWasm = syncPositionsToWasm_;
  var syncPositionsFromWasm = syncPositionsFromWasm_;
  var setVelocityDecay = setVelocityDecay_;
  var setNodeCount = setNodeCount_;
  var setLinksFromRecords = function(sim) {
    return function(links) {
      var flatLinks = concatMap(function(l2) {
        return [l2.source, l2.target];
      })(links);
      return setLinks_(sim)(flatLinks);
    };
  };
  var setAlphaDecay = setAlphaDecay_;
  var setAlpha = setAlpha_;
  var reheat2 = reheat_;
  var enableForces = function(sim) {
    return function(cfg) {
      return enableForces_(sim)(cfg.manyBody)(cfg.links)(cfg.center);
    };
  };
  var create4 = createSimulation_;
  var configureManyBody = configureManyBody_;
  var configureLinks = configureLinks_;
  var configureCenter = configureCenter_;

  // output/Hylograph.ForceEngine.Setup.WASM/index.js
  var pure9 = /* @__PURE__ */ pure(applicativeEffect);
  var eq4 = /* @__PURE__ */ eq(eqForceType);
  var for_5 = /* @__PURE__ */ for_(applicativeEffect)(foldableMaybe);
  var when4 = /* @__PURE__ */ when(applicativeEffect);
  var warnIfFiltered = function(fc) {
    return function(name16) {
      if (fc.filter instanceof Just) {
        return warn("WASM Setup: " + (name16 + " filter is ignored by WASM kernel"));
      }
      ;
      if (fc.filter instanceof Nothing) {
        return pure9(unit);
      }
      ;
      throw new Error("Failed pattern match at Hylograph.ForceEngine.Setup.WASM (line 285, column 26 - line 287, column 23): " + [fc.filter.constructor.name]);
    };
  };
  var warnIfDynamic = function(v2) {
    return function(v1) {
      if (v2 instanceof Dynamic) {
        return warn("WASM Setup: " + (v1 + " uses dynamic value, falling back to static"));
      }
      ;
      if (v2 instanceof Static) {
        return pure9(unit);
      }
      ;
      throw new Error("Failed pattern match at Hylograph.ForceEngine.Setup.WASM (line 278, column 1 - line 278, column 70): " + [v2.constructor.name, v1.constructor.name]);
    };
  };
  var tick3 = function(sim) {
    return function __do7() {
      var alpha = tick2(sim.wasmSim)();
      var nodes = read(sim.nodesRef)();
      var updatedNodes = syncPositionsFromWasm(sim.wasmSim)(nodes)();
      write(updatedNodes)(sim.nodesRef)();
      return alpha;
    };
  };
  var reheat3 = function(sim) {
    return reheat2(sim.wasmSim);
  };
  var getNodes2 = function(sim) {
    return function __do7() {
      var nodes = read(sim.nodesRef)();
      return syncPositionsFromWasm(sim.wasmSim)(nodes)();
    };
  };
  var create5 = function(nodes) {
    return function(links) {
      return function __do7() {
        var wasmSim = create4(length(nodes))();
        syncPositionsToWasm(wasmSim)(nodes)();
        setLinksFromRecords(wasmSim)(links)();
        var nodesRef = $$new(nodes)();
        var linksRef = $$new(links)();
        return {
          wasmSim,
          nodesRef,
          linksRef
        };
      };
    };
  };
  var configureManyBody2 = function(wasmSim) {
    return function(fc) {
      return function __do7() {
        warnIfDynamic(fc.strength)("ManyBody strength")();
        warnIfFiltered(fc)("ManyBody")();
        return configureManyBody(wasmSim)({
          strength: valueToNumber(fc.strength),
          theta: fc.theta,
          distanceMin: fc.distanceMin,
          distanceMax: fc.distanceMax
        })();
      };
    };
  };
  var configureLinks2 = function(wasmSim) {
    return function(fc) {
      return function __do7() {
        warnIfDynamic(fc.distance)("Link distance")();
        warnIfDynamic(fc.strength)("Link strength")();
        return configureLinks(wasmSim)({
          distance: valueToNumber(fc.distance),
          strength: valueToNumber(fc.strength),
          iterations: fc.iterations
        })();
      };
    };
  };
  var configureForceY = function(_wasmSim) {
    return function(fc) {
      return function __do7() {
        warnIfDynamic(fc.y)("ForceY target")();
        warnIfDynamic(fc.strength)("ForceY strength")();
        return unit;
      };
    };
  };
  var configureForceX = function(_wasmSim) {
    return function(fc) {
      return function __do7() {
        warnIfDynamic(fc.x)("ForceX target")();
        warnIfDynamic(fc.strength)("ForceX strength")();
        return unit;
      };
    };
  };
  var configureCollide = function(_wasmSim) {
    return function(fc) {
      return function __do7() {
        warnIfDynamic(fc.radius)("Collide radius")();
        warnIfDynamic(fc.strength)("Collide strength")();
        return warn("WASM Setup: Collide force not yet implemented in FFI")();
      };
    };
  };
  var configureCenter2 = function(wasmSim) {
    return function(fc) {
      return function __do7() {
        warnIfDynamic(fc.x)("Center x")();
        warnIfDynamic(fc.y)("Center y")();
        warnIfDynamic(fc.strength)("Center strength")();
        return configureCenter(wasmSim)({
          x: valueToNumber(fc.x),
          y: valueToNumber(fc.y),
          strength: valueToNumber(fc.strength)
        })();
      };
    };
  };
  var applySetup2 = function(setupConfig) {
    return function(sim) {
      var forces = getForces(setupConfig);
      var manyBodyForce = find2(function(f) {
        return eq4(f.forceType)(ForceManyBody.value);
      })(forces);
      var collideForce = find2(function(f) {
        return eq4(f.forceType)(ForceCollide.value);
      })(forces);
      var linkForce = find2(function(f) {
        return eq4(f.forceType)(ForceLink.value);
      })(forces);
      var centerForce = find2(function(f) {
        return eq4(f.forceType)(ForceCenter.value);
      })(forces);
      var posXForce = find2(function(f) {
        return eq4(f.forceType)(ForcePositionX.value);
      })(forces);
      var posYForce = find2(function(f) {
        return eq4(f.forceType)(ForcePositionY.value);
      })(forces);
      var radialForce = find2(function(f) {
        return eq4(f.forceType)(ForceRadial.value);
      })(forces);
      return function __do7() {
        for_5(radialForce)(function(v2) {
          return warn("WASM Setup: ForceRadial is not supported by WASM kernel");
        })();
        for_5(manyBodyForce)(configureManyBody2(sim.wasmSim))();
        for_5(collideForce)(configureCollide(sim.wasmSim))();
        for_5(linkForce)(configureLinks2(sim.wasmSim))();
        for_5(centerForce)(configureCenter2(sim.wasmSim))();
        for_5(posXForce)(configureForceX(sim.wasmSim))();
        for_5(posYForce)(configureForceY(sim.wasmSim))();
        enableForces(sim.wasmSim)({
          manyBody: any2(function(f) {
            return eq4(f.forceType)(ForceManyBody.value);
          })(forces),
          links: any2(function(f) {
            return eq4(f.forceType)(ForceLink.value);
          })(forces),
          center: any2(function(f) {
            return eq4(f.forceType)(ForceCenter.value);
          })(forces)
        })();
        var params = getParams(setupConfig);
        setAlpha(sim.wasmSim)(params.alpha)();
        setAlphaDecay(sim.wasmSim)(params.alphaDecay)();
        return setVelocityDecay(sim.wasmSim)(params.velocityDecay)();
      };
    };
  };
  var applySetupWithData2 = function(setupConfig) {
    return function(desiredNodes) {
      return function(desiredLinks) {
        return function(sim) {
          return function __do7() {
            var currentNodes = read(sim.nodesRef)();
            var currentLinks = read(sim.linksRef)();
            var nodeResult = computeNodeGUP(currentNodes)(desiredNodes);
            write(nodeResult.merged)(sim.nodesRef)();
            var currentCount = length(currentNodes);
            var newCount = length(nodeResult.merged);
            when4(currentCount !== newCount)(setNodeCount(sim.wasmSim)(newCount))();
            syncPositionsToWasm(sim.wasmSim)(nodeResult.merged)();
            var linkResult = computeLinkGUP(currentLinks)(desiredLinks);
            write(desiredLinks)(sim.linksRef)();
            setLinksFromRecords(sim.wasmSim)(desiredLinks)();
            applySetup2(setupConfig)(sim)();
            return {
              nodes: {
                entered: nodeResult.entered,
                updated: nodeResult.updated,
                exited: nodeResult.exited
              },
              links: {
                entered: linkResult.entered,
                updated: linkResult.updated,
                exited: linkResult.exited
              }
            };
          };
        };
      };
    };
  };

  // output/Hylograph.Simulation.Emitter/index.js
  var foldM4 = /* @__PURE__ */ foldM(monadEffect);
  var Tick = /* @__PURE__ */ (function() {
    function Tick3(value0) {
      this.value0 = value0;
    }
    ;
    Tick3.create = function(value0) {
      return new Tick3(value0);
    };
    return Tick3;
  })();
  var Started = /* @__PURE__ */ (function() {
    function Started3() {
    }
    ;
    Started3.value = new Started3();
    return Started3;
  })();
  var Stopped = /* @__PURE__ */ (function() {
    function Stopped3() {
    }
    ;
    Stopped3.value = new Stopped3();
    return Stopped3;
  })();
  var Completed = /* @__PURE__ */ (function() {
    function Completed3() {
    }
    ;
    Completed3.value = new Completed3();
    return Completed3;
  })();
  var subscribe = function(v2) {
    return function(callback) {
      return function __do7() {
        var listenerId = read(v2.nextId)();
        modify_2(function(v1) {
          return v1 + 1 | 0;
        })(v2.nextId)();
        modify_2(function(ls) {
          return snoc(ls)({
            id: listenerId,
            callback
          });
        })(v2.listeners)();
        return modify_2(filter(function(l2) {
          return l2.id !== listenerId;
        }))(v2.listeners);
      };
    };
  };
  var emit = function(v2) {
    return function(event) {
      return function __do7() {
        var ls = read(v2.emitter.listeners)();
        return foldM4(function(v1) {
          return function(listener) {
            return listener.callback(event);
          };
        })(unit)(ls)();
      };
    };
  };
  var create6 = function __do2() {
    var listeners = $$new([])();
    var nextId = $$new(0)();
    var emitter = {
      listeners,
      nextId
    };
    return {
      emitter,
      handle: {
        emitter
      }
    };
  };

  // output/Hylograph.Transition.RAF/foreign.js
  var requestAnimationFrame_2 = function(callback) {
    return function() {
      return window.requestAnimationFrame(function(timestamp) {
        callback(timestamp)();
      });
    };
  };
  var cancelAnimationFrame_ = function(id4) {
    return function() {
      window.cancelAnimationFrame(id4);
    };
  };
  var performanceNow_ = function() {
    return performance.now();
  };

  // output/Hylograph.Transition.RAF/index.js
  var requestAnimationFrame3 = requestAnimationFrame_2;
  var performanceNow = performanceNow_;
  var cancelAnimationFrame3 = cancelAnimationFrame_;

  // output/Hylograph.Transition.Coordinator/index.js
  var when5 = /* @__PURE__ */ when(applicativeEffect);
  var for_6 = /* @__PURE__ */ for_(applicativeEffect);
  var for_12 = /* @__PURE__ */ for_6(foldableMaybe);
  var append8 = /* @__PURE__ */ append(semigroupArray);
  var $$for2 = /* @__PURE__ */ $$for(applicativeEffect)(traversableArray);
  var for_23 = /* @__PURE__ */ for_6(foldableArray);
  var unless3 = /* @__PURE__ */ unless(applicativeEffect);
  var Completed2 = /* @__PURE__ */ (function() {
    function Completed3() {
    }
    ;
    Completed3.value = new Completed3();
    return Completed3;
  })();
  var Converged = /* @__PURE__ */ (function() {
    function Converged2(value0) {
      this.value0 = value0;
    }
    ;
    Converged2.create = function(value0) {
      return new Converged2(value0);
    };
    return Converged2;
  })();
  var eqConsumerId = {
    eq: function(x7) {
      return function(y7) {
        return x7 === y7;
      };
    }
  };
  var notEq3 = /* @__PURE__ */ notEq(eqConsumerId);
  var unregister = function(v2) {
    return function(consumerId) {
      return modify_2(function(s2) {
        return {
          frameId: s2.frameId,
          lastTimestamp: s2.lastTimestamp,
          nextId: s2.nextId,
          running: s2.running,
          consumers: filter(function(c2) {
            return notEq3(c2.id)(consumerId);
          })(s2.consumers)
        };
      })(v2);
    };
  };
  var stop2 = function(v2) {
    return function __do7() {
      var state3 = read(v2)();
      return when5(state3.running)(function __do8() {
        for_12(state3.frameId)(cancelAnimationFrame3)();
        return modify_2(function(v1) {
          return {
            consumers: v1.consumers,
            lastTimestamp: v1.lastTimestamp,
            nextId: v1.nextId,
            running: false,
            frameId: Nothing.value
          };
        })(v2)();
      })();
    };
  };
  var register = function(v2) {
    return function(spec) {
      return function __do7() {
        var state3 = read(v2)();
        var consumer = {
          id: state3.nextId,
          tick: spec.tick,
          onComplete: spec.onComplete
        };
        write({
          frameId: state3.frameId,
          lastTimestamp: state3.lastTimestamp,
          running: state3.running,
          consumers: append8(state3.consumers)([consumer]),
          nextId: state3.nextId + 1 | 0
        })(v2)();
        return state3.nextId;
      };
    };
  };
  var isCompleted = function(v2) {
    if (v2 instanceof Completed2) {
      return true;
    }
    ;
    return false;
  };
  var scheduleFrame = function(v2) {
    return function __do7() {
      var frameId = requestAnimationFrame3(runFrame(v2))();
      return modify_2(function(v1) {
        return {
          consumers: v1.consumers,
          lastTimestamp: v1.lastTimestamp,
          nextId: v1.nextId,
          running: v1.running,
          frameId: new Just(frameId)
        };
      })(v2)();
    };
  };
  var runFrame = function(v2) {
    return function(timestamp) {
      return function __do7() {
        var state3 = read(v2)();
        return when5(state3.running)((function() {
          var deltaMs = timestamp - state3.lastTimestamp;
          return function __do8() {
            modify_2(function(v1) {
              return {
                consumers: v1.consumers,
                frameId: v1.frameId,
                nextId: v1.nextId,
                running: v1.running,
                lastTimestamp: timestamp
              };
            })(v2)();
            var results = $$for2(state3.consumers)(function(consumer) {
              return function __do9() {
                var result = consumer.tick(deltaMs)();
                return {
                  consumer,
                  result
                };
              };
            })();
            var completed = filter(function(r8) {
              return isCompleted(r8.result);
            })(results);
            for_23(completed)(function(r8) {
              return function __do9() {
                r8.consumer.onComplete();
                return unregister(v2)(r8.consumer.id)();
              };
            })();
            var newState = read(v2)();
            var $47 = $$null(newState.consumers);
            if ($47) {
              return scheduleFrame(v2)();
            }
            ;
            return scheduleFrame(v2)();
          };
        })())();
      };
    };
  };
  var start3 = function(v2) {
    return function __do7() {
      var state3 = read(v2)();
      return unless3(state3.running)(function __do8() {
        var now2 = performanceNow();
        modify_2(function(v1) {
          return {
            consumers: v1.consumers,
            frameId: v1.frameId,
            nextId: v1.nextId,
            running: true,
            lastTimestamp: now2
          };
        })(v2)();
        return scheduleFrame(v2)();
      })();
    };
  };
  var create7 = function __do3() {
    var ref2 = $$new({
      consumers: [],
      running: false,
      lastTimestamp: 0,
      nextId: 0,
      frameId: Nothing.value
    })();
    return ref2;
  };

  // output/Hylograph.Simulation/index.js
  var pure10 = /* @__PURE__ */ pure(applicativeEffect);
  var unless4 = /* @__PURE__ */ unless(applicativeEffect);
  var when6 = /* @__PURE__ */ when(applicativeEffect);
  var D3 = /* @__PURE__ */ (function() {
    function D32() {
    }
    ;
    D32.value = new D32();
    return D32;
  })();
  var WASM = /* @__PURE__ */ (function() {
    function WASM2() {
    }
    ;
    WASM2.value = new WASM2();
    return WASM2;
  })();
  var wasmConsumer = function(sim) {
    return function(emitterHandle) {
      return function(alphaRef) {
        return function(alphaMin) {
          return function(_deltaMs) {
            return function __do7() {
              var alpha = tick3(sim)();
              write(alpha)(alphaRef)();
              var nodes = getNodes2(sim)();
              emit(emitterHandle)(new Tick({
                alpha,
                nodeCount: length(nodes)
              }))();
              var $13 = alpha < alphaMin;
              if ($13) {
                return Completed2.value;
              }
              ;
              return new Converged(alpha);
            };
          };
        };
      };
    };
  };
  var runWASMSimulation = function(config) {
    return function __do7() {
      var v2 = create6();
      var sim = create5(config.nodes)(config.links)();
      applySetupWithData2(config.setup)(config.nodes)(config.links)(sim)();
      var setupRef = $$new(config.setup)();
      var alphaRef = $$new(1)();
      var coord = create7();
      var coordRef = $$new(coord)();
      var runningRef = $$new(true)();
      emit(v2.handle)(Started.value)();
      register(coord)({
        tick: wasmConsumer(sim)(v2.handle)(alphaRef)(config.alphaMin),
        onComplete: function __do8() {
          write(false)(runningRef)();
          return emit(v2.handle)(Completed.value)();
        }
      })();
      start3(coord)();
      return {
        events: v2.emitter,
        handle: {
          updateData: function(nodes) {
            return function(links) {
              return function __do8() {
                var currentSetup = read(setupRef)();
                var result = applySetupWithData2(currentSetup)(nodes)(links)(sim)();
                reheat3(sim)();
                write(1)(alphaRef)();
                emit(v2.handle)(Started.value)();
                var running = read(runningRef)();
                unless4(running)(function __do9() {
                  write(true)(runningRef)();
                  var oldCoord = read(coordRef)();
                  stop2(oldCoord)();
                  var c2 = create7();
                  write(c2)(coordRef)();
                  register(c2)({
                    tick: wasmConsumer(sim)(v2.handle)(alphaRef)(config.alphaMin),
                    onComplete: function __do10() {
                      write(false)(runningRef)();
                      return emit(v2.handle)(Completed.value)();
                    }
                  })();
                  return start3(c2)();
                })();
                return result;
              };
            };
          },
          updateSetup: function(newSetup) {
            return function __do8() {
              write(newSetup)(setupRef)();
              applySetup2(newSetup)(sim)();
              reheat3(sim)();
              write(1)(alphaRef)();
              emit(v2.handle)(Started.value)();
              var running = read(runningRef)();
              return unless4(running)(function __do9() {
                write(true)(runningRef)();
                var oldCoord = read(coordRef)();
                stop2(oldCoord)();
                var c2 = create7();
                write(c2)(coordRef)();
                register(c2)({
                  tick: wasmConsumer(sim)(v2.handle)(alphaRef)(config.alphaMin),
                  onComplete: function __do10() {
                    write(false)(runningRef)();
                    return emit(v2.handle)(Completed.value)();
                  }
                })();
                return start3(c2)();
              })();
            };
          },
          getNodes: getNodes2(sim),
          getAlpha: read(alphaRef),
          stop: function __do8() {
            var running = read(runningRef)();
            return when6(running)(function __do9() {
              write(false)(runningRef)();
              return emit(v2.handle)(Stopped.value)();
            })();
          },
          start: function __do8() {
            var running = read(runningRef)();
            return unless4(running)(function __do9() {
              reheat3(sim)();
              write(1)(alphaRef)();
              write(true)(runningRef)();
              emit(v2.handle)(Started.value)();
              var oldCoord = read(coordRef)();
              stop2(oldCoord)();
              var c2 = create7();
              write(c2)(coordRef)();
              register(c2)({
                tick: wasmConsumer(sim)(v2.handle)(alphaRef)(config.alphaMin),
                onComplete: function __do10() {
                  write(false)(runningRef)();
                  return emit(v2.handle)(Completed.value)();
                }
              })();
              return start3(c2)();
            })();
          },
          reheat: function __do8() {
            reheat3(sim)();
            write(1)(alphaRef)();
            return emit(v2.handle)(Started.value)();
          },
          interpolatePositions: function(v1) {
            return function(v22) {
              return function(v3) {
                return pure10(unit);
              };
            };
          },
          pinNodes: pure10(unit),
          unpinNodes: pure10(unit)
        }
      };
    };
  };
  var d3Consumer = function(sim) {
    return function(emitterHandle) {
      return function(alphaRef) {
        return function(alphaMin) {
          return function(_deltaMs) {
            return function __do7() {
              var alpha = tick(sim)();
              write(alpha)(alphaRef)();
              var nodes = getNodes(sim)();
              emit(emitterHandle)(new Tick({
                alpha,
                nodeCount: length(nodes)
              }))();
              var $17 = alpha < alphaMin;
              if ($17) {
                return Completed2.value;
              }
              ;
              return new Converged(alpha);
            };
          };
        };
      };
    };
  };
  var runD3Simulation = function(config) {
    return function __do7() {
      var v2 = create6();
      var simConfig = {
        alphaTarget: defaultConfig2.alphaTarget,
        velocityDecay: defaultConfig2.velocityDecay,
        alphaDecay: config.setup.params.alphaDecay,
        alphaMin: config.alphaMin
      };
      var sim = create3(simConfig)();
      applySetupWithData(config.setup)(config.nodes)(config.links)(sim)();
      var setupRef = $$new(config.setup)();
      var alphaRef = $$new(1)();
      var coord = create7();
      var coordRef = $$new(coord)();
      var runningRef = $$new(true)();
      emit(v2.handle)(Started.value)();
      register(coord)({
        tick: d3Consumer(sim)(v2.handle)(alphaRef)(config.alphaMin),
        onComplete: function __do8() {
          write(false)(runningRef)();
          return emit(v2.handle)(Completed.value)();
        }
      })();
      start3(coord)();
      return {
        events: v2.emitter,
        handle: {
          updateData: function(nodes) {
            return function(links) {
              return function __do8() {
                var currentSetup = read(setupRef)();
                var result = applySetupWithData(currentSetup)(nodes)(links)(sim)();
                reheat(sim)();
                write(1)(alphaRef)();
                emit(v2.handle)(Started.value)();
                var running = read(runningRef)();
                unless4(running)(function __do9() {
                  write(true)(runningRef)();
                  var oldCoord = read(coordRef)();
                  stop2(oldCoord)();
                  var c2 = create7();
                  write(c2)(coordRef)();
                  register(c2)({
                    tick: d3Consumer(sim)(v2.handle)(alphaRef)(config.alphaMin),
                    onComplete: function __do10() {
                      write(false)(runningRef)();
                      return emit(v2.handle)(Completed.value)();
                    }
                  })();
                  return start3(c2)();
                })();
                return result;
              };
            };
          },
          updateSetup: function(newSetup) {
            return function __do8() {
              write(newSetup)(setupRef)();
              applySetup(newSetup)(sim)();
              reheat(sim)();
              write(1)(alphaRef)();
              emit(v2.handle)(Started.value)();
              var running = read(runningRef)();
              return unless4(running)(function __do9() {
                write(true)(runningRef)();
                var oldCoord = read(coordRef)();
                stop2(oldCoord)();
                var c2 = create7();
                write(c2)(coordRef)();
                register(c2)({
                  tick: d3Consumer(sim)(v2.handle)(alphaRef)(config.alphaMin),
                  onComplete: function __do10() {
                    write(false)(runningRef)();
                    return emit(v2.handle)(Completed.value)();
                  }
                })();
                return start3(c2)();
              })();
            };
          },
          getNodes: getNodes(sim),
          getAlpha: read(alphaRef),
          stop: function __do8() {
            var running = read(runningRef)();
            return when6(running)(function __do9() {
              write(false)(runningRef)();
              return emit(v2.handle)(Stopped.value)();
            })();
          },
          start: function __do8() {
            var running = read(runningRef)();
            return unless4(running)(function __do9() {
              reheat(sim)();
              write(1)(alphaRef)();
              write(true)(runningRef)();
              emit(v2.handle)(Started.value)();
              var oldCoord = read(coordRef)();
              stop2(oldCoord)();
              var c2 = create7();
              write(c2)(coordRef)();
              register(c2)({
                tick: d3Consumer(sim)(v2.handle)(alphaRef)(config.alphaMin),
                onComplete: function __do10() {
                  write(false)(runningRef)();
                  return emit(v2.handle)(Completed.value)();
                }
              })();
              return start3(c2)();
            })();
          },
          reheat: function __do8() {
            reheat(sim)();
            write(1)(alphaRef)();
            return emit(v2.handle)(Started.value)();
          },
          interpolatePositions: function(startPos) {
            return function(targetPos) {
              return function(progress2) {
                return interpolatePositionsInPlace(startPos)(targetPos)(progress2)(sim);
              };
            };
          },
          pinNodes: pinNodesInPlace(sim),
          unpinNodes: unpinNodesInPlace(sim)
        }
      };
    };
  };
  var runSimulation = function(config) {
    if (config.engine instanceof D3) {
      return runD3Simulation(config);
    }
    ;
    if (config.engine instanceof WASM) {
      return runWASMSimulation(config);
    }
    ;
    throw new Error("Failed pattern match at Hylograph.Simulation (line 230, column 24 - line 232, column 35): " + [config.engine.constructor.name]);
  };

  // output/Hylograph.Simulation.Core.Tick/index.js
  var map25 = /* @__PURE__ */ map(functorArray);
  var min7 = /* @__PURE__ */ min(ordNumber);
  var map111 = /* @__PURE__ */ map(functorMap);
  var toUnfoldable7 = /* @__PURE__ */ toUnfoldable3(unfoldableArray);
  var tickTransitions2 = function(delta) {
    return function(transitions) {
      var advanced = map25(function(t2) {
        return {
          item: t2.item,
          progress: min7(1)(t2.progress + delta)
        };
      })(transitions);
      var completed = map25(function(v2) {
        return v2.item;
      })(filter(function(t2) {
        return t2.progress >= 1;
      })(advanced));
      var active = filter(function(t2) {
        return t2.progress < 1;
      })(advanced);
      return {
        active,
        completed
      };
    };
  };
  var tickProgressMap = function(dictOrd) {
    var filter4 = filter2(dictOrd);
    return function(delta) {
      return function(progressMap) {
        var advanced = map111(function(p2) {
          return min7(1)(p2 + delta);
        })(progressMap);
        var completed = toUnfoldable7(keys2(filter4(function(p2) {
          return p2 >= 1;
        })(advanced)));
        var active = filter4(function(p2) {
          return p2 < 1;
        })(advanced);
        return {
          active,
          completed
        };
      };
    };
  };
  var startTransitions = /* @__PURE__ */ map25(function(item) {
    return {
      item,
      progress: 0
    };
  });
  var startProgress = function(dictOrd) {
    var insert15 = insert(dictOrd);
    return function(keys4) {
      return function(existing) {
        return foldl2(function(m2) {
          return function(k) {
            return insert15(k)(0)(m2);
          };
        })(existing)(keys4);
      };
    };
  };
  var lerp2 = function(start4) {
    return function(end2) {
      return function(t2) {
        return start4 + (end2 - start4) * t2;
      };
    };
  };

  // output/D3.Viz.ForcePlayground.Simple/index.js
  var mod4 = /* @__PURE__ */ mod(euclideanRingInt);
  var map26 = /* @__PURE__ */ map(functorArray);
  var show10 = /* @__PURE__ */ show(showInt);
  var show13 = /* @__PURE__ */ show(showNumber);
  var elem5 = /* @__PURE__ */ elem2(eqInt);
  var lookup3 = /* @__PURE__ */ lookup(ordInt);
  var append13 = /* @__PURE__ */ append(semigroupArray);
  var ForceCharge = /* @__PURE__ */ (function() {
    function ForceCharge2() {
    }
    ;
    ForceCharge2.value = new ForceCharge2();
    return ForceCharge2;
  })();
  var ForceCollide2 = /* @__PURE__ */ (function() {
    function ForceCollide3() {
    }
    ;
    ForceCollide3.value = new ForceCollide3();
    return ForceCollide3;
  })();
  var ForceLink2 = /* @__PURE__ */ (function() {
    function ForceLink3() {
    }
    ;
    ForceLink3.value = new ForceLink3();
    return ForceLink3;
  })();
  var ForceX = /* @__PURE__ */ (function() {
    function ForceX2() {
    }
    ;
    ForceX2.value = new ForceX2();
    return ForceX2;
  })();
  var ForceY = /* @__PURE__ */ (function() {
    function ForceY2() {
    }
    ;
    ForceY2.value = new ForceY2();
    return ForceY2;
  })();
  var transitionDelta = 0.03;
  var svgWidth = 1200;
  var svgHeight = 900;
  var strokeWidthForRenderNode = function(rn) {
    if (rn.enterProgress instanceof Just) {
      return lerp2(4)(1.5)(rn.enterProgress.value0);
    }
    ;
    if (rn.exitProgress instanceof Just) {
      return lerp2(1.5)(4)(rn.exitProgress.value0);
    }
    ;
    return 1.5;
  };
  var strokeForRenderNode = function(rn) {
    if (rn.enterProgress instanceof Just) {
      return "#98df8a";
    }
    ;
    if (rn.exitProgress instanceof Just) {
      return "#ff9896";
    }
    ;
    return "#fff";
  };
  var simulationId = "force-playground";
  var unregisterSimulation = /* @__PURE__ */ unregisterSimulation_(simulationId);
  var renderSVGContainer = function(containerSelector) {
    var containerTree = elem4(SVG.value)([width2(svgWidth), height2(svgHeight), viewBox2(-svgWidth / 2)(-svgHeight / 2)(svgWidth)(svgHeight), attr2("id")("network-force-svg"), class_("network-force"), preserveAspectRatio("xMidYMid meet")])([elem4(Group.value)([attr2("id")("network-links"), class_("links")])([]), elem4(Group.value)([attr2("id")("network-nodes"), class_("nodes")])([])]);
    return function __do7() {
      rerender(containerSelector)(containerTree)();
      return unit;
    };
  };
  var registerSimulation = function(reheatFn) {
    return registerSimulation_(simulationId)(reheatFn);
  };
  var opacityForRenderNode = function(rn) {
    if (rn.exitProgress instanceof Just) {
      return lerp2(1)(0)(rn.exitProgress.value0);
    }
    ;
    return 1;
  };
  var nodeRadius = function(node) {
    var importanceBonus = node.importance * 3;
    var baseSize = (function() {
      if (node.sizeClass === 0) {
        return 3;
      }
      ;
      if (node.sizeClass === 1) {
        return 5;
      }
      ;
      return 7;
    })();
    return baseSize + importanceBonus;
  };
  var radiusForRenderNode = function(rn) {
    var baseRadius = nodeRadius(rn.node);
    if (rn.enterProgress instanceof Just) {
      return lerp2(baseRadius * 3)(baseRadius)(rn.enterProgress.value0);
    }
    ;
    if (rn.exitProgress instanceof Just) {
      return lerp2(baseRadius)(baseRadius * 3)(rn.exitProgress.value0);
    }
    ;
    return baseRadius;
  };
  var linkTypeColors = ["#4a7ba8", "#b8912a", "#a84858", "#4a9070"];
  var linkTypeColor = function(t2) {
    return fromMaybe("#999")(index(linkTypeColors)(mod4(t2)(4)));
  };
  var initialSetup = /* @__PURE__ */ (function() {
    return setup("network")([withStrength($$static(-30))(manyBody("charge")), withStrength($$static(0.7))(withRadius($$static(10))(collide("collision"))), withStrength($$static(0.4))(withDistance($$static(40))(link("links"))), withStrength($$static(0.1))(withX($$static(0))(positionX("forceX"))), withStrength($$static(0.1))(withY($$static(-50))(positionY("forceY")))]);
  })();
  var forceIdToName = function(v2) {
    if (v2 instanceof ForceCharge) {
      return "charge";
    }
    ;
    if (v2 instanceof ForceCollide2) {
      return "collision";
    }
    ;
    if (v2 instanceof ForceLink2) {
      return "links";
    }
    ;
    if (v2 instanceof ForceX) {
      return "forceX";
    }
    ;
    if (v2 instanceof ForceY) {
      return "forceY";
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.ForcePlayground.Simple (line 141, column 17 - line 146, column 21): " + [v2.constructor.name]);
  };
  var removeForceFromSetup = function(forceId) {
    return removeForce(forceIdToName(forceId));
  };
  var forceIdToConfig = function(forceId) {
    if (forceId instanceof ForceCharge) {
      return addForce(withStrength($$static(-30))(manyBody("charge")));
    }
    ;
    if (forceId instanceof ForceCollide2) {
      return addForce(withStrength($$static(0.7))(withRadius($$static(10))(collide("collision"))));
    }
    ;
    if (forceId instanceof ForceLink2) {
      return addForce(withStrength($$static(0.4))(withDistance($$static(40))(link("links"))));
    }
    ;
    if (forceId instanceof ForceX) {
      return addForce(withStrength($$static(0.1))(withX($$static(0))(positionX("forceX"))));
    }
    ;
    if (forceId instanceof ForceY) {
      return addForce(withStrength($$static(0.1))(withY($$static(-50))(positionY("forceY"))));
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.ForcePlayground.Simple (line 154, column 27 - line 164, column 87): " + [forceId.constructor.name]);
  };
  var eqForceId = {
    eq: function(x7) {
      return function(y7) {
        if (x7 instanceof ForceCharge && y7 instanceof ForceCharge) {
          return true;
        }
        ;
        if (x7 instanceof ForceCollide2 && y7 instanceof ForceCollide2) {
          return true;
        }
        ;
        if (x7 instanceof ForceLink2 && y7 instanceof ForceLink2) {
          return true;
        }
        ;
        if (x7 instanceof ForceX && y7 instanceof ForceX) {
          return true;
        }
        ;
        if (x7 instanceof ForceY && y7 instanceof ForceY) {
          return true;
        }
        ;
        return false;
      };
    }
  };
  var ordForceId = {
    compare: function(x7) {
      return function(y7) {
        if (x7 instanceof ForceCharge && y7 instanceof ForceCharge) {
          return EQ.value;
        }
        ;
        if (x7 instanceof ForceCharge) {
          return LT.value;
        }
        ;
        if (y7 instanceof ForceCharge) {
          return GT.value;
        }
        ;
        if (x7 instanceof ForceCollide2 && y7 instanceof ForceCollide2) {
          return EQ.value;
        }
        ;
        if (x7 instanceof ForceCollide2) {
          return LT.value;
        }
        ;
        if (y7 instanceof ForceCollide2) {
          return GT.value;
        }
        ;
        if (x7 instanceof ForceLink2 && y7 instanceof ForceLink2) {
          return EQ.value;
        }
        ;
        if (x7 instanceof ForceLink2) {
          return LT.value;
        }
        ;
        if (y7 instanceof ForceLink2) {
          return GT.value;
        }
        ;
        if (x7 instanceof ForceX && y7 instanceof ForceX) {
          return EQ.value;
        }
        ;
        if (x7 instanceof ForceX) {
          return LT.value;
        }
        ;
        if (y7 instanceof ForceX) {
          return GT.value;
        }
        ;
        if (x7 instanceof ForceY && y7 instanceof ForceY) {
          return EQ.value;
        }
        ;
        throw new Error("Failed pattern match at D3.Viz.ForcePlayground.Simple (line 0, column 0 - line 0, column 0): " + [x7.constructor.name, y7.constructor.name]);
      };
    },
    Eq0: function() {
      return eqForceId;
    }
  };
  var createSimulation = function(model) {
    var simLinks = map26(function(l2) {
      return {
        source: l2.source,
        target: l2.target
      };
    })(model.links);
    var config = {
      engine: D3.value,
      setup: initialSetup,
      nodes: model.nodes,
      links: simLinks,
      container: "#network-nodes",
      alphaMin: 1e-3
    };
    return function __do7() {
      var result = runSimulation(config)();
      return {
        handle: result.handle,
        events: result.events,
        initialSetup
      };
    };
  };
  var createLinksTree = function(scene) {
    var linkKey2 = function(lnk) {
      return show10(lnk.source.id) + ("-" + (show10(lnk.target.id) + ("-" + show10(lnk.index))));
    };
    return forEach("links")(Line.value)(scene.links)(linkKey2)(function(lnk) {
      return elem4(Line.value)([x1(lnk.source.x), y1(lnk.source.y), x22(lnk.target.x), y22(lnk.target.y), strokeWidth2(0.5 + lnk.weight * 2), stroke2(linkTypeColor(lnk.linkType)), opacity(show13(0.3 + lnk.weight * 0.4))])([]);
    });
  };
  var categoryColors = ["#1e5a8c", "#d4a024", "#c41e3a", "#2d8b57", "#6b7280", "#9333ea", "#f97316", "#94a3b8", "#dc2626", "#0891b2"];
  var categoryColor = function(g2) {
    return fromMaybe("#69b3a2")(index(categoryColors)(mod4(g2)(10)));
  };
  var fillForRenderNode = function(rn) {
    if (rn.enterProgress instanceof Just) {
      return "#2ca02c";
    }
    ;
    if (rn.exitProgress instanceof Just) {
      return "#d62728";
    }
    ;
    return categoryColor(rn.node.group);
  };
  var createNodesTree = function(scene) {
    var nodeKey2 = function(rn) {
      return show10(rn.node.id);
    };
    return forEach("nodes")(Circle.value)(scene.nodes)(nodeKey2)(function(rn) {
      return withBehaviors([onDrag(simulationDragNested(simulationId))])(elem4(Circle.value)([cx2(rn.node.x), cy2(rn.node.y), r2(radiusForRenderNode(rn)), fill2(fillForRenderNode(rn)), stroke2(strokeForRenderNode(rn)), strokeWidth2(strokeWidthForRenderNode(rn)), opacity(show13(opacityForRenderNode(rn))), style("cursor: grab;")])([]));
    });
  };
  var renderScene = function(scene) {
    var linksTree = createLinksTree(scene);
    return function __do7() {
      rerender("#network-links")(linksTree)();
      var nodesTree = createNodesTree(scene);
      rerender("#network-nodes")(nodesTree)();
      return unit;
    };
  };
  var buildSceneData = function(allNodes) {
    return function(visibleIds) {
      return function(enteringProgress) {
        return function(exitingNodes) {
          return function(modelLinks) {
            var visibleNodes = filter(function(n) {
              return elem5(n.id)(visibleIds);
            })(allNodes);
            var visibleLinks = filterLinksToSubset(function(v2) {
              return v2.id;
            })(visibleNodes)(modelLinks);
            var swizzledLinks = swizzleLinksByIndex(function(v2) {
              return v2.id;
            })(visibleNodes)(visibleLinks)(function(src10) {
              return function(tgt) {
                return function(i2) {
                  return function(lnk) {
                    return {
                      source: src10,
                      target: tgt,
                      weight: lnk.weight,
                      linkType: lnk.linkType,
                      index: i2
                    };
                  };
                };
              };
            });
            var renderNodes = map26(function(n) {
              return {
                node: n,
                enterProgress: lookup3(n.id)(enteringProgress),
                exitProgress: Nothing.value
              };
            })(visibleNodes);
            var exitingRenderNodes = map26(function(e) {
              return {
                node: e.item,
                enterProgress: Nothing.value,
                exitProgress: new Just(e.progress)
              };
            })(exitingNodes);
            var allRenderNodes = append13(renderNodes)(exitingRenderNodes);
            return {
              nodes: allRenderNodes,
              links: swizzledLinks
            };
          };
        };
      };
    };
  };
  var allForces = /* @__PURE__ */ (function() {
    return fromFoldable4(foldableArray)(ordForceId)([ForceX.value, ForceY.value, ForceCharge.value, ForceCollide2.value, ForceLink2.value]);
  })();
  var addForceToSetup = forceIdToConfig;

  // output/Foreign.Object/foreign.js
  var empty4 = {};
  function runST(f) {
    return f();
  }
  function _lookup(no, yes, k, m2) {
    return k in m2 ? yes(m2[k]) : no;
  }
  function toArrayWithKey(f) {
    return function(m2) {
      var r8 = [];
      for (var k in m2) {
        if (hasOwnProperty.call(m2, k)) {
          r8.push(f(k)(m2[k]));
        }
      }
      return r8;
    };
  }
  var keys3 = Object.keys || toArrayWithKey(function(k) {
    return function() {
      return k;
    };
  });

  // output/Foreign.Object.ST/foreign.js
  var newImpl = function() {
    return {};
  };
  function poke2(k) {
    return function(v2) {
      return function(m2) {
        return function() {
          m2[k] = v2;
          return m2;
        };
      };
    };
  }

  // output/Foreign.Object/index.js
  var $$void9 = /* @__PURE__ */ $$void(functorST);
  var lookup4 = /* @__PURE__ */ (function() {
    return runFn4(_lookup)(Nothing.value)(Just.create);
  })();
  var fromFoldable8 = function(dictFoldable) {
    var fromFoldable112 = fromFoldable(dictFoldable);
    return function(l2) {
      return runST(function __do7() {
        var s2 = newImpl();
        foreach(fromFoldable112(l2))(function(v2) {
          return $$void9(poke2(v2.value0)(v2.value1)(s2));
        })();
        return s2;
      });
    };
  };

  // output/Data.Exists/index.js
  var runExists = unsafeCoerce2;
  var mkExists = unsafeCoerce2;

  // output/Data.Coyoneda/index.js
  var CoyonedaF = /* @__PURE__ */ (function() {
    function CoyonedaF2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    CoyonedaF2.create = function(value0) {
      return function(value1) {
        return new CoyonedaF2(value0, value1);
      };
    };
    return CoyonedaF2;
  })();
  var unCoyoneda = function(f) {
    return function(v2) {
      return runExists(function(v1) {
        return f(v1.value0)(v1.value1);
      })(v2);
    };
  };
  var coyoneda = function(k) {
    return function(fi) {
      return mkExists(new CoyonedaF(k, fi));
    };
  };
  var functorCoyoneda = {
    map: function(f) {
      return function(v2) {
        return runExists(function(v1) {
          return coyoneda(function($180) {
            return f(v1.value0($180));
          })(v1.value1);
        })(v2);
      };
    }
  };
  var liftCoyoneda = /* @__PURE__ */ coyoneda(/* @__PURE__ */ identity(categoryFn));

  // output/Halogen.Data.OrdBox/index.js
  var OrdBox = /* @__PURE__ */ (function() {
    function OrdBox2(value0, value1, value22) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
    }
    ;
    OrdBox2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return new OrdBox2(value0, value1, value22);
        };
      };
    };
    return OrdBox2;
  })();
  var mkOrdBox = function(dictOrd) {
    return OrdBox.create(eq(dictOrd.Eq0()))(compare(dictOrd));
  };
  var eqOrdBox = {
    eq: function(v2) {
      return function(v1) {
        return v2.value0(v2.value2)(v1.value2);
      };
    }
  };
  var ordOrdBox = {
    compare: function(v2) {
      return function(v1) {
        return v2.value1(v2.value2)(v1.value2);
      };
    },
    Eq0: function() {
      return eqOrdBox;
    }
  };

  // output/Halogen.Data.Slot/index.js
  var ordTuple3 = /* @__PURE__ */ ordTuple(ordString)(ordOrdBox);
  var pop1 = /* @__PURE__ */ pop(ordTuple3);
  var lookup1 = /* @__PURE__ */ lookup(ordTuple3);
  var insert1 = /* @__PURE__ */ insert(ordTuple3);
  var pop2 = function() {
    return function(dictIsSymbol) {
      var reflectSymbol2 = reflectSymbol(dictIsSymbol);
      return function(dictOrd) {
        var mkOrdBox2 = mkOrdBox(dictOrd);
        return function(sym) {
          return function(key) {
            return function(v2) {
              return pop1(new Tuple(reflectSymbol2(sym), mkOrdBox2(key)))(v2);
            };
          };
        };
      };
    };
  };
  var lookup5 = function() {
    return function(dictIsSymbol) {
      var reflectSymbol2 = reflectSymbol(dictIsSymbol);
      return function(dictOrd) {
        var mkOrdBox2 = mkOrdBox(dictOrd);
        return function(sym) {
          return function(key) {
            return function(v2) {
              return lookup1(new Tuple(reflectSymbol2(sym), mkOrdBox2(key)))(v2);
            };
          };
        };
      };
    };
  };
  var insert8 = function() {
    return function(dictIsSymbol) {
      var reflectSymbol2 = reflectSymbol(dictIsSymbol);
      return function(dictOrd) {
        var mkOrdBox2 = mkOrdBox(dictOrd);
        return function(sym) {
          return function(key) {
            return function(val) {
              return function(v2) {
                return insert1(new Tuple(reflectSymbol2(sym), mkOrdBox2(key)))(val)(v2);
              };
            };
          };
        };
      };
    };
  };
  var foreachSlot = function(dictApplicative) {
    var traverse_11 = traverse_(dictApplicative)(foldableMap);
    return function(v2) {
      return function(k) {
        return traverse_11(function($54) {
          return k($54);
        })(v2);
      };
    };
  };
  var empty5 = empty2;

  // output/DOM.HTML.Indexed.InputType/index.js
  var InputButton = /* @__PURE__ */ (function() {
    function InputButton2() {
    }
    ;
    InputButton2.value = new InputButton2();
    return InputButton2;
  })();
  var InputCheckbox = /* @__PURE__ */ (function() {
    function InputCheckbox2() {
    }
    ;
    InputCheckbox2.value = new InputCheckbox2();
    return InputCheckbox2;
  })();
  var InputColor = /* @__PURE__ */ (function() {
    function InputColor2() {
    }
    ;
    InputColor2.value = new InputColor2();
    return InputColor2;
  })();
  var InputDate = /* @__PURE__ */ (function() {
    function InputDate2() {
    }
    ;
    InputDate2.value = new InputDate2();
    return InputDate2;
  })();
  var InputDatetimeLocal = /* @__PURE__ */ (function() {
    function InputDatetimeLocal2() {
    }
    ;
    InputDatetimeLocal2.value = new InputDatetimeLocal2();
    return InputDatetimeLocal2;
  })();
  var InputEmail = /* @__PURE__ */ (function() {
    function InputEmail2() {
    }
    ;
    InputEmail2.value = new InputEmail2();
    return InputEmail2;
  })();
  var InputFile = /* @__PURE__ */ (function() {
    function InputFile2() {
    }
    ;
    InputFile2.value = new InputFile2();
    return InputFile2;
  })();
  var InputHidden = /* @__PURE__ */ (function() {
    function InputHidden2() {
    }
    ;
    InputHidden2.value = new InputHidden2();
    return InputHidden2;
  })();
  var InputImage = /* @__PURE__ */ (function() {
    function InputImage2() {
    }
    ;
    InputImage2.value = new InputImage2();
    return InputImage2;
  })();
  var InputMonth = /* @__PURE__ */ (function() {
    function InputMonth2() {
    }
    ;
    InputMonth2.value = new InputMonth2();
    return InputMonth2;
  })();
  var InputNumber = /* @__PURE__ */ (function() {
    function InputNumber2() {
    }
    ;
    InputNumber2.value = new InputNumber2();
    return InputNumber2;
  })();
  var InputPassword = /* @__PURE__ */ (function() {
    function InputPassword2() {
    }
    ;
    InputPassword2.value = new InputPassword2();
    return InputPassword2;
  })();
  var InputRadio = /* @__PURE__ */ (function() {
    function InputRadio2() {
    }
    ;
    InputRadio2.value = new InputRadio2();
    return InputRadio2;
  })();
  var InputRange = /* @__PURE__ */ (function() {
    function InputRange2() {
    }
    ;
    InputRange2.value = new InputRange2();
    return InputRange2;
  })();
  var InputReset = /* @__PURE__ */ (function() {
    function InputReset2() {
    }
    ;
    InputReset2.value = new InputReset2();
    return InputReset2;
  })();
  var InputSearch = /* @__PURE__ */ (function() {
    function InputSearch2() {
    }
    ;
    InputSearch2.value = new InputSearch2();
    return InputSearch2;
  })();
  var InputSubmit = /* @__PURE__ */ (function() {
    function InputSubmit2() {
    }
    ;
    InputSubmit2.value = new InputSubmit2();
    return InputSubmit2;
  })();
  var InputTel = /* @__PURE__ */ (function() {
    function InputTel2() {
    }
    ;
    InputTel2.value = new InputTel2();
    return InputTel2;
  })();
  var InputText = /* @__PURE__ */ (function() {
    function InputText2() {
    }
    ;
    InputText2.value = new InputText2();
    return InputText2;
  })();
  var InputTime = /* @__PURE__ */ (function() {
    function InputTime2() {
    }
    ;
    InputTime2.value = new InputTime2();
    return InputTime2;
  })();
  var InputUrl = /* @__PURE__ */ (function() {
    function InputUrl2() {
    }
    ;
    InputUrl2.value = new InputUrl2();
    return InputUrl2;
  })();
  var InputWeek = /* @__PURE__ */ (function() {
    function InputWeek2() {
    }
    ;
    InputWeek2.value = new InputWeek2();
    return InputWeek2;
  })();
  var renderInputType = function(v2) {
    if (v2 instanceof InputButton) {
      return "button";
    }
    ;
    if (v2 instanceof InputCheckbox) {
      return "checkbox";
    }
    ;
    if (v2 instanceof InputColor) {
      return "color";
    }
    ;
    if (v2 instanceof InputDate) {
      return "date";
    }
    ;
    if (v2 instanceof InputDatetimeLocal) {
      return "datetime-local";
    }
    ;
    if (v2 instanceof InputEmail) {
      return "email";
    }
    ;
    if (v2 instanceof InputFile) {
      return "file";
    }
    ;
    if (v2 instanceof InputHidden) {
      return "hidden";
    }
    ;
    if (v2 instanceof InputImage) {
      return "image";
    }
    ;
    if (v2 instanceof InputMonth) {
      return "month";
    }
    ;
    if (v2 instanceof InputNumber) {
      return "number";
    }
    ;
    if (v2 instanceof InputPassword) {
      return "password";
    }
    ;
    if (v2 instanceof InputRadio) {
      return "radio";
    }
    ;
    if (v2 instanceof InputRange) {
      return "range";
    }
    ;
    if (v2 instanceof InputReset) {
      return "reset";
    }
    ;
    if (v2 instanceof InputSearch) {
      return "search";
    }
    ;
    if (v2 instanceof InputSubmit) {
      return "submit";
    }
    ;
    if (v2 instanceof InputTel) {
      return "tel";
    }
    ;
    if (v2 instanceof InputText) {
      return "text";
    }
    ;
    if (v2 instanceof InputTime) {
      return "time";
    }
    ;
    if (v2 instanceof InputUrl) {
      return "url";
    }
    ;
    if (v2 instanceof InputWeek) {
      return "week";
    }
    ;
    throw new Error("Failed pattern match at DOM.HTML.Indexed.InputType (line 33, column 19 - line 55, column 22): " + [v2.constructor.name]);
  };

  // output/DOM.HTML.Indexed.StepValue/index.js
  var show11 = /* @__PURE__ */ show(showNumber);
  var Any = /* @__PURE__ */ (function() {
    function Any2() {
    }
    ;
    Any2.value = new Any2();
    return Any2;
  })();
  var Step = /* @__PURE__ */ (function() {
    function Step3(value0) {
      this.value0 = value0;
    }
    ;
    Step3.create = function(value0) {
      return new Step3(value0);
    };
    return Step3;
  })();
  var renderStepValue = function(v2) {
    if (v2 instanceof Any) {
      return "any";
    }
    ;
    if (v2 instanceof Step) {
      return show11(v2.value0);
    }
    ;
    throw new Error("Failed pattern match at DOM.HTML.Indexed.StepValue (line 13, column 19 - line 15, column 19): " + [v2.constructor.name]);
  };

  // output/Halogen.Query.Input/index.js
  var RefUpdate = /* @__PURE__ */ (function() {
    function RefUpdate2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    RefUpdate2.create = function(value0) {
      return function(value1) {
        return new RefUpdate2(value0, value1);
      };
    };
    return RefUpdate2;
  })();
  var Action = /* @__PURE__ */ (function() {
    function Action3(value0) {
      this.value0 = value0;
    }
    ;
    Action3.create = function(value0) {
      return new Action3(value0);
    };
    return Action3;
  })();

  // output/Halogen.VDom.Machine/index.js
  var Step2 = /* @__PURE__ */ (function() {
    function Step3(value0, value1, value22, value32) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
      this.value3 = value32;
    }
    ;
    Step3.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return function(value32) {
            return new Step3(value0, value1, value22, value32);
          };
        };
      };
    };
    return Step3;
  })();
  var unStep = unsafeCoerce2;
  var step2 = function(v2, a3) {
    return v2.value2(v2.value1, a3);
  };
  var mkStep = unsafeCoerce2;
  var halt = function(v2) {
    return v2.value3(v2.value1);
  };
  var extract2 = /* @__PURE__ */ unStep(function(v2) {
    return v2.value0;
  });

  // output/Halogen.VDom.Types/index.js
  var map27 = /* @__PURE__ */ map(functorArray);
  var map112 = /* @__PURE__ */ map(functorTuple);
  var Text2 = /* @__PURE__ */ (function() {
    function Text3(value0) {
      this.value0 = value0;
    }
    ;
    Text3.create = function(value0) {
      return new Text3(value0);
    };
    return Text3;
  })();
  var Elem2 = /* @__PURE__ */ (function() {
    function Elem3(value0, value1, value22, value32) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
      this.value3 = value32;
    }
    ;
    Elem3.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return function(value32) {
            return new Elem3(value0, value1, value22, value32);
          };
        };
      };
    };
    return Elem3;
  })();
  var Keyed = /* @__PURE__ */ (function() {
    function Keyed2(value0, value1, value22, value32) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
      this.value3 = value32;
    }
    ;
    Keyed2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return function(value32) {
            return new Keyed2(value0, value1, value22, value32);
          };
        };
      };
    };
    return Keyed2;
  })();
  var Widget = /* @__PURE__ */ (function() {
    function Widget2(value0) {
      this.value0 = value0;
    }
    ;
    Widget2.create = function(value0) {
      return new Widget2(value0);
    };
    return Widget2;
  })();
  var Grafted = /* @__PURE__ */ (function() {
    function Grafted2(value0) {
      this.value0 = value0;
    }
    ;
    Grafted2.create = function(value0) {
      return new Grafted2(value0);
    };
    return Grafted2;
  })();
  var Graft = /* @__PURE__ */ (function() {
    function Graft2(value0, value1, value22) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
    }
    ;
    Graft2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return new Graft2(value0, value1, value22);
        };
      };
    };
    return Graft2;
  })();
  var unGraft = function(f) {
    return function($61) {
      return f($61);
    };
  };
  var graft = unsafeCoerce2;
  var bifunctorGraft = {
    bimap: function(f) {
      return function(g2) {
        return unGraft(function(v2) {
          return graft(new Graft(function($63) {
            return f(v2.value0($63));
          }, function($64) {
            return g2(v2.value1($64));
          }, v2.value2));
        });
      };
    }
  };
  var bimap2 = /* @__PURE__ */ bimap(bifunctorGraft);
  var runGraft = /* @__PURE__ */ unGraft(function(v2) {
    var go2 = function(v22) {
      if (v22 instanceof Text2) {
        return new Text2(v22.value0);
      }
      ;
      if (v22 instanceof Elem2) {
        return new Elem2(v22.value0, v22.value1, v2.value0(v22.value2), map27(go2)(v22.value3));
      }
      ;
      if (v22 instanceof Keyed) {
        return new Keyed(v22.value0, v22.value1, v2.value0(v22.value2), map27(map112(go2))(v22.value3));
      }
      ;
      if (v22 instanceof Widget) {
        return new Widget(v2.value1(v22.value0));
      }
      ;
      if (v22 instanceof Grafted) {
        return new Grafted(bimap2(v2.value0)(v2.value1)(v22.value0));
      }
      ;
      throw new Error("Failed pattern match at Halogen.VDom.Types (line 86, column 7 - line 86, column 27): " + [v22.constructor.name]);
    };
    return go2(v2.value2);
  });

  // output/Halogen.VDom.Util/foreign.js
  function unsafeGetAny(key, obj) {
    return obj[key];
  }
  function unsafeHasAny(key, obj) {
    return obj.hasOwnProperty(key);
  }
  function unsafeSetAny(key, val, obj) {
    obj[key] = val;
  }
  function forE2(a3, f) {
    var b2 = [];
    for (var i2 = 0; i2 < a3.length; i2++) {
      b2.push(f(i2, a3[i2]));
    }
    return b2;
  }
  function forEachE(a3, f) {
    for (var i2 = 0; i2 < a3.length; i2++) {
      f(a3[i2]);
    }
  }
  function forInE(o, f) {
    var ks = Object.keys(o);
    for (var i2 = 0; i2 < ks.length; i2++) {
      var k = ks[i2];
      f(k, o[k]);
    }
  }
  function diffWithIxE(a1, a22, f1, f2, f3) {
    var a3 = [];
    var l1 = a1.length;
    var l2 = a22.length;
    var i2 = 0;
    while (1) {
      if (i2 < l1) {
        if (i2 < l2) {
          a3.push(f1(i2, a1[i2], a22[i2]));
        } else {
          f2(i2, a1[i2]);
        }
      } else if (i2 < l2) {
        a3.push(f3(i2, a22[i2]));
      } else {
        break;
      }
      i2++;
    }
    return a3;
  }
  function strMapWithIxE(as, fk, f) {
    var o = {};
    for (var i2 = 0; i2 < as.length; i2++) {
      var a3 = as[i2];
      var k = fk(a3);
      o[k] = f(k, i2, a3);
    }
    return o;
  }
  function diffWithKeyAndIxE(o1, as, fk, f1, f2, f3) {
    var o2 = {};
    for (var i2 = 0; i2 < as.length; i2++) {
      var a3 = as[i2];
      var k = fk(a3);
      if (o1.hasOwnProperty(k)) {
        o2[k] = f1(k, i2, o1[k], a3);
      } else {
        o2[k] = f3(k, i2, a3);
      }
    }
    for (var k in o1) {
      if (k in o2) {
        continue;
      }
      f2(k, o1[k]);
    }
    return o2;
  }
  function refEq2(a3, b2) {
    return a3 === b2;
  }
  function createTextNode2(s2, doc) {
    return doc.createTextNode(s2);
  }
  function setTextContent2(s2, n) {
    n.textContent = s2;
  }
  function createElement2(ns, name16, doc) {
    if (ns != null) {
      return doc.createElementNS(ns, name16);
    } else {
      return doc.createElement(name16);
    }
  }
  function insertChildIx(i2, a3, b2) {
    var n = b2.childNodes.item(i2) || null;
    if (n !== a3) {
      b2.insertBefore(a3, n);
    }
  }
  function removeChild2(a3, b2) {
    if (b2 && a3.parentNode === b2) {
      b2.removeChild(a3);
    }
  }
  function parentNode2(a3) {
    return a3.parentNode;
  }
  function setAttribute4(ns, attr10, val, el) {
    if (ns != null) {
      el.setAttributeNS(ns, attr10, val);
    } else {
      el.setAttribute(attr10, val);
    }
  }
  function removeAttribute2(ns, attr10, el) {
    if (ns != null) {
      el.removeAttributeNS(ns, attr10);
    } else {
      el.removeAttribute(attr10);
    }
  }
  function hasAttribute2(ns, attr10, el) {
    if (ns != null) {
      return el.hasAttributeNS(ns, attr10);
    } else {
      return el.hasAttribute(attr10);
    }
  }
  function addEventListener(ev, listener, el) {
    el.addEventListener(ev, listener, false);
  }
  function removeEventListener(ev, listener, el) {
    el.removeEventListener(ev, listener, false);
  }
  var jsUndefined = void 0;

  // output/Halogen.VDom.Util/index.js
  var unsafeLookup = unsafeGetAny;
  var unsafeFreeze2 = unsafeCoerce2;
  var pokeMutMap = unsafeSetAny;
  var newMutMap = newImpl;

  // output/Halogen.VDom.DOM/index.js
  var $runtime_lazy4 = function(name16, moduleName, init3) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init3();
      state3 = 2;
      return val;
    };
  };
  var haltWidget = function(v2) {
    return halt(v2.widget);
  };
  var $lazy_patchWidget = /* @__PURE__ */ $runtime_lazy4("patchWidget", "Halogen.VDom.DOM", function() {
    return function(state3, vdom) {
      if (vdom instanceof Grafted) {
        return $lazy_patchWidget(291)(state3, runGraft(vdom.value0));
      }
      ;
      if (vdom instanceof Widget) {
        var res = step2(state3.widget, vdom.value0);
        var res$prime = unStep(function(v2) {
          return mkStep(new Step2(v2.value0, {
            build: state3.build,
            widget: res
          }, $lazy_patchWidget(296), haltWidget));
        })(res);
        return res$prime;
      }
      ;
      haltWidget(state3);
      return state3.build(vdom);
    };
  });
  var patchWidget = /* @__PURE__ */ $lazy_patchWidget(286);
  var haltText = function(v2) {
    var parent2 = parentNode2(v2.node);
    return removeChild2(v2.node, parent2);
  };
  var $lazy_patchText = /* @__PURE__ */ $runtime_lazy4("patchText", "Halogen.VDom.DOM", function() {
    return function(state3, vdom) {
      if (vdom instanceof Grafted) {
        return $lazy_patchText(82)(state3, runGraft(vdom.value0));
      }
      ;
      if (vdom instanceof Text2) {
        if (state3.value === vdom.value0) {
          return mkStep(new Step2(state3.node, state3, $lazy_patchText(85), haltText));
        }
        ;
        if (otherwise) {
          var nextState = {
            build: state3.build,
            node: state3.node,
            value: vdom.value0
          };
          setTextContent2(vdom.value0, state3.node);
          return mkStep(new Step2(state3.node, nextState, $lazy_patchText(89), haltText));
        }
        ;
      }
      ;
      haltText(state3);
      return state3.build(vdom);
    };
  });
  var patchText = /* @__PURE__ */ $lazy_patchText(77);
  var haltKeyed = function(v2) {
    var parent2 = parentNode2(v2.node);
    removeChild2(v2.node, parent2);
    forInE(v2.children, function(v1, s2) {
      return halt(s2);
    });
    return halt(v2.attrs);
  };
  var haltElem = function(v2) {
    var parent2 = parentNode2(v2.node);
    removeChild2(v2.node, parent2);
    forEachE(v2.children, halt);
    return halt(v2.attrs);
  };
  var eqElemSpec = function(ns1, v2, ns2, v1) {
    var $63 = v2 === v1;
    if ($63) {
      if (ns1 instanceof Just && (ns2 instanceof Just && ns1.value0 === ns2.value0)) {
        return true;
      }
      ;
      if (ns1 instanceof Nothing && ns2 instanceof Nothing) {
        return true;
      }
      ;
      return false;
    }
    ;
    return false;
  };
  var $lazy_patchElem = /* @__PURE__ */ $runtime_lazy4("patchElem", "Halogen.VDom.DOM", function() {
    return function(state3, vdom) {
      if (vdom instanceof Grafted) {
        return $lazy_patchElem(135)(state3, runGraft(vdom.value0));
      }
      ;
      if (vdom instanceof Elem2 && eqElemSpec(state3.ns, state3.name, vdom.value0, vdom.value1)) {
        var v2 = length(vdom.value3);
        var v1 = length(state3.children);
        if (v1 === 0 && v2 === 0) {
          var attrs2 = step2(state3.attrs, vdom.value2);
          var nextState = {
            build: state3.build,
            node: state3.node,
            attrs: attrs2,
            ns: vdom.value0,
            name: vdom.value1,
            children: state3.children
          };
          return mkStep(new Step2(state3.node, nextState, $lazy_patchElem(149), haltElem));
        }
        ;
        var onThis = function(v22, s2) {
          return halt(s2);
        };
        var onThese = function(ix, s2, v22) {
          var res = step2(s2, v22);
          insertChildIx(ix, extract2(res), state3.node);
          return res;
        };
        var onThat = function(ix, v22) {
          var res = state3.build(v22);
          insertChildIx(ix, extract2(res), state3.node);
          return res;
        };
        var children2 = diffWithIxE(state3.children, vdom.value3, onThese, onThis, onThat);
        var attrs2 = step2(state3.attrs, vdom.value2);
        var nextState = {
          build: state3.build,
          node: state3.node,
          attrs: attrs2,
          ns: vdom.value0,
          name: vdom.value1,
          children: children2
        };
        return mkStep(new Step2(state3.node, nextState, $lazy_patchElem(172), haltElem));
      }
      ;
      haltElem(state3);
      return state3.build(vdom);
    };
  });
  var patchElem = /* @__PURE__ */ $lazy_patchElem(130);
  var $lazy_patchKeyed = /* @__PURE__ */ $runtime_lazy4("patchKeyed", "Halogen.VDom.DOM", function() {
    return function(state3, vdom) {
      if (vdom instanceof Grafted) {
        return $lazy_patchKeyed(222)(state3, runGraft(vdom.value0));
      }
      ;
      if (vdom instanceof Keyed && eqElemSpec(state3.ns, state3.name, vdom.value0, vdom.value1)) {
        var v2 = length(vdom.value3);
        if (state3.length === 0 && v2 === 0) {
          var attrs2 = step2(state3.attrs, vdom.value2);
          var nextState = {
            build: state3.build,
            node: state3.node,
            attrs: attrs2,
            ns: vdom.value0,
            name: vdom.value1,
            children: state3.children,
            length: 0
          };
          return mkStep(new Step2(state3.node, nextState, $lazy_patchKeyed(237), haltKeyed));
        }
        ;
        var onThis = function(v22, s2) {
          return halt(s2);
        };
        var onThese = function(v22, ix$prime, s2, v3) {
          var res = step2(s2, v3.value1);
          insertChildIx(ix$prime, extract2(res), state3.node);
          return res;
        };
        var onThat = function(v22, ix, v3) {
          var res = state3.build(v3.value1);
          insertChildIx(ix, extract2(res), state3.node);
          return res;
        };
        var children2 = diffWithKeyAndIxE(state3.children, vdom.value3, fst, onThese, onThis, onThat);
        var attrs2 = step2(state3.attrs, vdom.value2);
        var nextState = {
          build: state3.build,
          node: state3.node,
          attrs: attrs2,
          ns: vdom.value0,
          name: vdom.value1,
          children: children2,
          length: v2
        };
        return mkStep(new Step2(state3.node, nextState, $lazy_patchKeyed(261), haltKeyed));
      }
      ;
      haltKeyed(state3);
      return state3.build(vdom);
    };
  });
  var patchKeyed = /* @__PURE__ */ $lazy_patchKeyed(217);
  var buildWidget = function(v2, build, w) {
    var res = v2.buildWidget(v2)(w);
    var res$prime = unStep(function(v1) {
      return mkStep(new Step2(v1.value0, {
        build,
        widget: res
      }, patchWidget, haltWidget));
    })(res);
    return res$prime;
  };
  var buildText = function(v2, build, s2) {
    var node = createTextNode2(s2, v2.document);
    var state3 = {
      build,
      node,
      value: s2
    };
    return mkStep(new Step2(node, state3, patchText, haltText));
  };
  var buildKeyed = function(v2, build, ns1, name1, as1, ch1) {
    var el = createElement2(toNullable(ns1), name1, v2.document);
    var node = toNode(el);
    var onChild = function(v1, ix, v22) {
      var res = build(v22.value1);
      insertChildIx(ix, extract2(res), node);
      return res;
    };
    var children2 = strMapWithIxE(ch1, fst, onChild);
    var attrs = v2.buildAttributes(el)(as1);
    var state3 = {
      build,
      node,
      attrs,
      ns: ns1,
      name: name1,
      children: children2,
      length: length(ch1)
    };
    return mkStep(new Step2(node, state3, patchKeyed, haltKeyed));
  };
  var buildElem = function(v2, build, ns1, name1, as1, ch1) {
    var el = createElement2(toNullable(ns1), name1, v2.document);
    var node = toNode(el);
    var onChild = function(ix, child) {
      var res = build(child);
      insertChildIx(ix, extract2(res), node);
      return res;
    };
    var children2 = forE2(ch1, onChild);
    var attrs = v2.buildAttributes(el)(as1);
    var state3 = {
      build,
      node,
      attrs,
      ns: ns1,
      name: name1,
      children: children2
    };
    return mkStep(new Step2(node, state3, patchElem, haltElem));
  };
  var buildVDom = function(spec) {
    var $lazy_build = $runtime_lazy4("build", "Halogen.VDom.DOM", function() {
      return function(v2) {
        if (v2 instanceof Text2) {
          return buildText(spec, $lazy_build(59), v2.value0);
        }
        ;
        if (v2 instanceof Elem2) {
          return buildElem(spec, $lazy_build(60), v2.value0, v2.value1, v2.value2, v2.value3);
        }
        ;
        if (v2 instanceof Keyed) {
          return buildKeyed(spec, $lazy_build(61), v2.value0, v2.value1, v2.value2, v2.value3);
        }
        ;
        if (v2 instanceof Widget) {
          return buildWidget(spec, $lazy_build(62), v2.value0);
        }
        ;
        if (v2 instanceof Grafted) {
          return $lazy_build(63)(runGraft(v2.value0));
        }
        ;
        throw new Error("Failed pattern match at Halogen.VDom.DOM (line 58, column 27 - line 63, column 52): " + [v2.constructor.name]);
      };
    });
    var build = $lazy_build(58);
    return build;
  };

  // output/Foreign/foreign.js
  function typeOf(value18) {
    return typeof value18;
  }
  function tagOf(value18) {
    return Object.prototype.toString.call(value18).slice(8, -1);
  }
  var isArray = Array.isArray || function(value18) {
    return Object.prototype.toString.call(value18) === "[object Array]";
  };

  // output/Data.List.NonEmpty/index.js
  var singleton8 = /* @__PURE__ */ (function() {
    var $200 = singleton3(plusList);
    return function($201) {
      return NonEmptyList($200($201));
    };
  })();
  var head3 = function(v2) {
    return v2.value0;
  };
  var cons2 = function(y7) {
    return function(v2) {
      return new NonEmpty(y7, new Cons(v2.value0, v2.value1));
    };
  };

  // output/Foreign/index.js
  var show14 = /* @__PURE__ */ show(showString);
  var show15 = /* @__PURE__ */ show(showInt);
  var ForeignError = /* @__PURE__ */ (function() {
    function ForeignError2(value0) {
      this.value0 = value0;
    }
    ;
    ForeignError2.create = function(value0) {
      return new ForeignError2(value0);
    };
    return ForeignError2;
  })();
  var TypeMismatch = /* @__PURE__ */ (function() {
    function TypeMismatch2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    TypeMismatch2.create = function(value0) {
      return function(value1) {
        return new TypeMismatch2(value0, value1);
      };
    };
    return TypeMismatch2;
  })();
  var ErrorAtIndex = /* @__PURE__ */ (function() {
    function ErrorAtIndex2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    ErrorAtIndex2.create = function(value0) {
      return function(value1) {
        return new ErrorAtIndex2(value0, value1);
      };
    };
    return ErrorAtIndex2;
  })();
  var ErrorAtProperty = /* @__PURE__ */ (function() {
    function ErrorAtProperty2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    ErrorAtProperty2.create = function(value0) {
      return function(value1) {
        return new ErrorAtProperty2(value0, value1);
      };
    };
    return ErrorAtProperty2;
  })();
  var unsafeToForeign = unsafeCoerce2;
  var unsafeFromForeign = unsafeCoerce2;
  var renderForeignError = function(v2) {
    if (v2 instanceof ForeignError) {
      return v2.value0;
    }
    ;
    if (v2 instanceof ErrorAtIndex) {
      return "Error at array index " + (show15(v2.value0) + (": " + renderForeignError(v2.value1)));
    }
    ;
    if (v2 instanceof ErrorAtProperty) {
      return "Error at property " + (show14(v2.value0) + (": " + renderForeignError(v2.value1)));
    }
    ;
    if (v2 instanceof TypeMismatch) {
      return "Type mismatch: expected " + (v2.value0 + (", found " + v2.value1));
    }
    ;
    throw new Error("Failed pattern match at Foreign (line 78, column 1 - line 78, column 45): " + [v2.constructor.name]);
  };
  var fail = function(dictMonad) {
    var $153 = throwError(monadThrowExceptT(dictMonad));
    return function($154) {
      return $153(singleton8($154));
    };
  };
  var unsafeReadTagged = function(dictMonad) {
    var pure118 = pure(applicativeExceptT(dictMonad));
    var fail1 = fail(dictMonad);
    return function(tag) {
      return function(value18) {
        if (tagOf(value18) === tag) {
          return pure118(unsafeFromForeign(value18));
        }
        ;
        if (otherwise) {
          return fail1(new TypeMismatch(tag, tagOf(value18)));
        }
        ;
        throw new Error("Failed pattern match at Foreign (line 123, column 1 - line 123, column 104): " + [tag.constructor.name, value18.constructor.name]);
      };
    };
  };
  var readString = function(dictMonad) {
    return unsafeReadTagged(dictMonad)("String");
  };

  // output/Web.Event.EventTarget/foreign.js
  function eventListener(fn) {
    return function() {
      return function(event) {
        return fn(event)();
      };
    };
  }
  function addEventListener2(type) {
    return function(listener) {
      return function(useCapture) {
        return function(target7) {
          return function() {
            return target7.addEventListener(type, listener, useCapture);
          };
        };
      };
    };
  }
  function removeEventListener2(type) {
    return function(listener) {
      return function(useCapture) {
        return function(target7) {
          return function() {
            return target7.removeEventListener(type, listener, useCapture);
          };
        };
      };
    };
  }

  // output/Halogen.VDom.DOM.Prop/index.js
  var $runtime_lazy5 = function(name16, moduleName, init3) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init3();
      state3 = 2;
      return val;
    };
  };
  var Created = /* @__PURE__ */ (function() {
    function Created2(value0) {
      this.value0 = value0;
    }
    ;
    Created2.create = function(value0) {
      return new Created2(value0);
    };
    return Created2;
  })();
  var Removed = /* @__PURE__ */ (function() {
    function Removed2(value0) {
      this.value0 = value0;
    }
    ;
    Removed2.create = function(value0) {
      return new Removed2(value0);
    };
    return Removed2;
  })();
  var Attribute = /* @__PURE__ */ (function() {
    function Attribute2(value0, value1, value22) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
    }
    ;
    Attribute2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return new Attribute2(value0, value1, value22);
        };
      };
    };
    return Attribute2;
  })();
  var Property = /* @__PURE__ */ (function() {
    function Property2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Property2.create = function(value0) {
      return function(value1) {
        return new Property2(value0, value1);
      };
    };
    return Property2;
  })();
  var Handler = /* @__PURE__ */ (function() {
    function Handler2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Handler2.create = function(value0) {
      return function(value1) {
        return new Handler2(value0, value1);
      };
    };
    return Handler2;
  })();
  var Ref = /* @__PURE__ */ (function() {
    function Ref2(value0) {
      this.value0 = value0;
    }
    ;
    Ref2.create = function(value0) {
      return new Ref2(value0);
    };
    return Ref2;
  })();
  var unsafeGetProperty = unsafeGetAny;
  var setProperty = unsafeSetAny;
  var removeProperty = function(key, el) {
    var v2 = hasAttribute2(nullImpl, key, el);
    if (v2) {
      return removeAttribute2(nullImpl, key, el);
    }
    ;
    var v1 = typeOf(unsafeGetAny(key, el));
    if (v1 === "string") {
      return unsafeSetAny(key, "", el);
    }
    ;
    if (key === "rowSpan") {
      return unsafeSetAny(key, 1, el);
    }
    ;
    if (key === "colSpan") {
      return unsafeSetAny(key, 1, el);
    }
    ;
    return unsafeSetAny(key, jsUndefined, el);
  };
  var propToStrKey = function(v2) {
    if (v2 instanceof Attribute && v2.value0 instanceof Just) {
      return "attr/" + (v2.value0.value0 + (":" + v2.value1));
    }
    ;
    if (v2 instanceof Attribute) {
      return "attr/:" + v2.value1;
    }
    ;
    if (v2 instanceof Property) {
      return "prop/" + v2.value0;
    }
    ;
    if (v2 instanceof Handler) {
      return "handler/" + v2.value0;
    }
    ;
    if (v2 instanceof Ref) {
      return "ref";
    }
    ;
    throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 182, column 16 - line 187, column 16): " + [v2.constructor.name]);
  };
  var propFromString = unsafeCoerce2;
  var propFromNumber = unsafeCoerce2;
  var propFromInt = unsafeCoerce2;
  var buildProp = function(emit2) {
    return function(el) {
      var removeProp = function(prevEvents) {
        return function(v2, v1) {
          if (v1 instanceof Attribute) {
            return removeAttribute2(toNullable(v1.value0), v1.value1, el);
          }
          ;
          if (v1 instanceof Property) {
            return removeProperty(v1.value0, el);
          }
          ;
          if (v1 instanceof Handler) {
            var handler3 = unsafeLookup(v1.value0, prevEvents);
            return removeEventListener(v1.value0, fst(handler3), el);
          }
          ;
          if (v1 instanceof Ref) {
            return unit;
          }
          ;
          throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 169, column 5 - line 179, column 18): " + [v1.constructor.name]);
        };
      };
      var mbEmit = function(v2) {
        if (v2 instanceof Just) {
          return emit2(v2.value0)();
        }
        ;
        return unit;
      };
      var haltProp = function(state3) {
        var v2 = lookup4("ref")(state3.props);
        if (v2 instanceof Just && v2.value0 instanceof Ref) {
          return mbEmit(v2.value0.value0(new Removed(el)));
        }
        ;
        return unit;
      };
      var diffProp = function(prevEvents, events) {
        return function(v2, v1, v11, v22) {
          if (v11 instanceof Attribute && v22 instanceof Attribute) {
            var $66 = v11.value2 === v22.value2;
            if ($66) {
              return v22;
            }
            ;
            setAttribute4(toNullable(v22.value0), v22.value1, v22.value2, el);
            return v22;
          }
          ;
          if (v11 instanceof Property && v22 instanceof Property) {
            var v4 = refEq2(v11.value1, v22.value1);
            if (v4) {
              return v22;
            }
            ;
            if (v22.value0 === "value") {
              var elVal = unsafeGetProperty("value", el);
              var $75 = refEq2(elVal, v22.value1);
              if ($75) {
                return v22;
              }
              ;
              setProperty(v22.value0, v22.value1, el);
              return v22;
            }
            ;
            setProperty(v22.value0, v22.value1, el);
            return v22;
          }
          ;
          if (v11 instanceof Handler && v22 instanceof Handler) {
            var handler3 = unsafeLookup(v22.value0, prevEvents);
            write(v22.value1)(snd(handler3))();
            pokeMutMap(v22.value0, handler3, events);
            return v22;
          }
          ;
          return v22;
        };
      };
      var applyProp = function(events) {
        return function(v2, v1, v22) {
          if (v22 instanceof Attribute) {
            setAttribute4(toNullable(v22.value0), v22.value1, v22.value2, el);
            return v22;
          }
          ;
          if (v22 instanceof Property) {
            setProperty(v22.value0, v22.value1, el);
            return v22;
          }
          ;
          if (v22 instanceof Handler) {
            var v3 = unsafeGetAny(v22.value0, events);
            if (unsafeHasAny(v22.value0, events)) {
              write(v22.value1)(snd(v3))();
              return v22;
            }
            ;
            var ref2 = $$new(v22.value1)();
            var listener = eventListener(function(ev) {
              return function __do7() {
                var f$prime = read(ref2)();
                return mbEmit(f$prime(ev));
              };
            })();
            pokeMutMap(v22.value0, new Tuple(listener, ref2), events);
            addEventListener(v22.value0, listener, el);
            return v22;
          }
          ;
          if (v22 instanceof Ref) {
            mbEmit(v22.value0(new Created(el)));
            return v22;
          }
          ;
          throw new Error("Failed pattern match at Halogen.VDom.DOM.Prop (line 113, column 5 - line 135, column 15): " + [v22.constructor.name]);
        };
      };
      var $lazy_patchProp = $runtime_lazy5("patchProp", "Halogen.VDom.DOM.Prop", function() {
        return function(state3, ps2) {
          var events = newMutMap();
          var onThis = removeProp(state3.events);
          var onThese = diffProp(state3.events, events);
          var onThat = applyProp(events);
          var props = diffWithKeyAndIxE(state3.props, ps2, propToStrKey, onThese, onThis, onThat);
          var nextState = {
            events: unsafeFreeze2(events),
            props
          };
          return mkStep(new Step2(unit, nextState, $lazy_patchProp(100), haltProp));
        };
      });
      var patchProp = $lazy_patchProp(87);
      var renderProp = function(ps1) {
        var events = newMutMap();
        var ps1$prime = strMapWithIxE(ps1, propToStrKey, applyProp(events));
        var state3 = {
          events: unsafeFreeze2(events),
          props: ps1$prime
        };
        return mkStep(new Step2(unit, state3, patchProp, haltProp));
      };
      return renderProp;
    };
  };

  // output/Halogen.HTML.Core/index.js
  var HTML = function(x7) {
    return x7;
  };
  var widget = function($28) {
    return HTML(Widget.create($28));
  };
  var toPropValue = function(dict) {
    return dict.toPropValue;
  };
  var text6 = function($29) {
    return HTML(Text2.create($29));
  };
  var prop = function(dictIsProp) {
    var toPropValue1 = toPropValue(dictIsProp);
    return function(v2) {
      var $31 = Property.create(v2);
      return function($32) {
        return $31(toPropValue1($32));
      };
    };
  };
  var isPropString = {
    toPropValue: propFromString
  };
  var isPropStepValue = {
    toPropValue: function($36) {
      return propFromString(renderStepValue($36));
    }
  };
  var isPropNumber = {
    toPropValue: propFromNumber
  };
  var isPropInt = {
    toPropValue: propFromInt
  };
  var isPropInputType = {
    toPropValue: function($45) {
      return propFromString(renderInputType($45));
    }
  };
  var handler = /* @__PURE__ */ (function() {
    return Handler.create;
  })();
  var element = function(ns) {
    return function(name16) {
      return function(props) {
        return function(children2) {
          return new Elem2(ns, name16, props, children2);
        };
      };
    };
  };
  var attr3 = function(ns) {
    return function(v2) {
      return Attribute.create(ns)(v2);
    };
  };

  // output/Control.Applicative.Free/index.js
  var identity10 = /* @__PURE__ */ identity(categoryFn);
  var Pure = /* @__PURE__ */ (function() {
    function Pure2(value0) {
      this.value0 = value0;
    }
    ;
    Pure2.create = function(value0) {
      return new Pure2(value0);
    };
    return Pure2;
  })();
  var Lift = /* @__PURE__ */ (function() {
    function Lift3(value0) {
      this.value0 = value0;
    }
    ;
    Lift3.create = function(value0) {
      return new Lift3(value0);
    };
    return Lift3;
  })();
  var Ap = /* @__PURE__ */ (function() {
    function Ap2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Ap2.create = function(value0) {
      return function(value1) {
        return new Ap2(value0, value1);
      };
    };
    return Ap2;
  })();
  var mkAp = function(fba) {
    return function(fb) {
      return new Ap(fba, fb);
    };
  };
  var liftFreeAp = /* @__PURE__ */ (function() {
    return Lift.create;
  })();
  var goLeft = function(dictApplicative) {
    var pure60 = pure(dictApplicative);
    return function(fStack) {
      return function(valStack) {
        return function(nat) {
          return function(func) {
            return function(count) {
              if (func instanceof Pure) {
                return new Tuple(new Cons({
                  func: pure60(func.value0),
                  count
                }, fStack), valStack);
              }
              ;
              if (func instanceof Lift) {
                return new Tuple(new Cons({
                  func: nat(func.value0),
                  count
                }, fStack), valStack);
              }
              ;
              if (func instanceof Ap) {
                return goLeft(dictApplicative)(fStack)(cons2(func.value1)(valStack))(nat)(func.value0)(count + 1 | 0);
              }
              ;
              throw new Error("Failed pattern match at Control.Applicative.Free (line 102, column 41 - line 105, column 81): " + [func.constructor.name]);
            };
          };
        };
      };
    };
  };
  var goApply = function(dictApplicative) {
    var apply5 = apply(dictApplicative.Apply0());
    return function(fStack) {
      return function(vals) {
        return function(gVal) {
          if (fStack instanceof Nil) {
            return new Left(gVal);
          }
          ;
          if (fStack instanceof Cons) {
            var gRes = apply5(fStack.value0.func)(gVal);
            var $31 = fStack.value0.count === 1;
            if ($31) {
              if (fStack.value1 instanceof Nil) {
                return new Left(gRes);
              }
              ;
              return goApply(dictApplicative)(fStack.value1)(vals)(gRes);
            }
            ;
            if (vals instanceof Nil) {
              return new Left(gRes);
            }
            ;
            if (vals instanceof Cons) {
              return new Right(new Tuple(new Cons({
                func: gRes,
                count: fStack.value0.count - 1 | 0
              }, fStack.value1), new NonEmpty(vals.value0, vals.value1)));
            }
            ;
            throw new Error("Failed pattern match at Control.Applicative.Free (line 83, column 11 - line 88, column 50): " + [vals.constructor.name]);
          }
          ;
          throw new Error("Failed pattern match at Control.Applicative.Free (line 72, column 3 - line 88, column 50): " + [fStack.constructor.name]);
        };
      };
    };
  };
  var functorFreeAp = {
    map: function(f) {
      return function(x7) {
        return mkAp(new Pure(f))(x7);
      };
    }
  };
  var foldFreeAp = function(dictApplicative) {
    var goApply1 = goApply(dictApplicative);
    var pure60 = pure(dictApplicative);
    var goLeft1 = goLeft(dictApplicative);
    return function(nat) {
      return function(z2) {
        var go2 = function($copy_v) {
          var $tco_done = false;
          var $tco_result;
          function $tco_loop(v2) {
            if (v2.value1.value0 instanceof Pure) {
              var v1 = goApply1(v2.value0)(v2.value1.value1)(pure60(v2.value1.value0.value0));
              if (v1 instanceof Left) {
                $tco_done = true;
                return v1.value0;
              }
              ;
              if (v1 instanceof Right) {
                $copy_v = v1.value0;
                return;
              }
              ;
              throw new Error("Failed pattern match at Control.Applicative.Free (line 54, column 17 - line 56, column 24): " + [v1.constructor.name]);
            }
            ;
            if (v2.value1.value0 instanceof Lift) {
              var v1 = goApply1(v2.value0)(v2.value1.value1)(nat(v2.value1.value0.value0));
              if (v1 instanceof Left) {
                $tco_done = true;
                return v1.value0;
              }
              ;
              if (v1 instanceof Right) {
                $copy_v = v1.value0;
                return;
              }
              ;
              throw new Error("Failed pattern match at Control.Applicative.Free (line 57, column 17 - line 59, column 24): " + [v1.constructor.name]);
            }
            ;
            if (v2.value1.value0 instanceof Ap) {
              var nextVals = new NonEmpty(v2.value1.value0.value1, v2.value1.value1);
              $copy_v = goLeft1(v2.value0)(nextVals)(nat)(v2.value1.value0.value0)(1);
              return;
            }
            ;
            throw new Error("Failed pattern match at Control.Applicative.Free (line 53, column 5 - line 62, column 47): " + [v2.value1.value0.constructor.name]);
          }
          ;
          while (!$tco_done) {
            $tco_result = $tco_loop($copy_v);
          }
          ;
          return $tco_result;
        };
        return go2(new Tuple(Nil.value, singleton8(z2)));
      };
    };
  };
  var retractFreeAp = function(dictApplicative) {
    return foldFreeAp(dictApplicative)(identity10);
  };
  var applyFreeAp = {
    apply: function(fba) {
      return function(fb) {
        return mkAp(fba)(fb);
      };
    },
    Functor0: function() {
      return functorFreeAp;
    }
  };
  var applicativeFreeAp = /* @__PURE__ */ (function() {
    return {
      pure: Pure.create,
      Apply0: function() {
        return applyFreeAp;
      }
    };
  })();
  var foldFreeAp1 = /* @__PURE__ */ foldFreeAp(applicativeFreeAp);
  var hoistFreeAp = function(f) {
    return foldFreeAp1(function($54) {
      return liftFreeAp(f($54));
    });
  };

  // output/Data.CatQueue/index.js
  var CatQueue = /* @__PURE__ */ (function() {
    function CatQueue2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    CatQueue2.create = function(value0) {
      return function(value1) {
        return new CatQueue2(value0, value1);
      };
    };
    return CatQueue2;
  })();
  var uncons4 = function($copy_v) {
    var $tco_done = false;
    var $tco_result;
    function $tco_loop(v2) {
      if (v2.value0 instanceof Nil && v2.value1 instanceof Nil) {
        $tco_done = true;
        return Nothing.value;
      }
      ;
      if (v2.value0 instanceof Nil) {
        $copy_v = new CatQueue(reverse2(v2.value1), Nil.value);
        return;
      }
      ;
      if (v2.value0 instanceof Cons) {
        $tco_done = true;
        return new Just(new Tuple(v2.value0.value0, new CatQueue(v2.value0.value1, v2.value1)));
      }
      ;
      throw new Error("Failed pattern match at Data.CatQueue (line 82, column 1 - line 82, column 63): " + [v2.constructor.name]);
    }
    ;
    while (!$tco_done) {
      $tco_result = $tco_loop($copy_v);
    }
    ;
    return $tco_result;
  };
  var snoc3 = function(v2) {
    return function(a3) {
      return new CatQueue(v2.value0, new Cons(a3, v2.value1));
    };
  };
  var $$null3 = function(v2) {
    if (v2.value0 instanceof Nil && v2.value1 instanceof Nil) {
      return true;
    }
    ;
    return false;
  };
  var empty6 = /* @__PURE__ */ (function() {
    return new CatQueue(Nil.value, Nil.value);
  })();

  // output/Data.CatList/index.js
  var CatNil = /* @__PURE__ */ (function() {
    function CatNil2() {
    }
    ;
    CatNil2.value = new CatNil2();
    return CatNil2;
  })();
  var CatCons = /* @__PURE__ */ (function() {
    function CatCons2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    CatCons2.create = function(value0) {
      return function(value1) {
        return new CatCons2(value0, value1);
      };
    };
    return CatCons2;
  })();
  var link2 = function(v2) {
    return function(v1) {
      if (v2 instanceof CatNil) {
        return v1;
      }
      ;
      if (v1 instanceof CatNil) {
        return v2;
      }
      ;
      if (v2 instanceof CatCons) {
        return new CatCons(v2.value0, snoc3(v2.value1)(v1));
      }
      ;
      throw new Error("Failed pattern match at Data.CatList (line 108, column 1 - line 108, column 54): " + [v2.constructor.name, v1.constructor.name]);
    };
  };
  var foldr4 = function(k) {
    return function(b2) {
      return function(q3) {
        var foldl12 = function($copy_v) {
          return function($copy_v1) {
            return function($copy_v2) {
              var $tco_var_v = $copy_v;
              var $tco_var_v1 = $copy_v1;
              var $tco_done = false;
              var $tco_result;
              function $tco_loop(v2, v1, v22) {
                if (v22 instanceof Nil) {
                  $tco_done = true;
                  return v1;
                }
                ;
                if (v22 instanceof Cons) {
                  $tco_var_v = v2;
                  $tco_var_v1 = v2(v1)(v22.value0);
                  $copy_v2 = v22.value1;
                  return;
                }
                ;
                throw new Error("Failed pattern match at Data.CatList (line 124, column 3 - line 124, column 59): " + [v2.constructor.name, v1.constructor.name, v22.constructor.name]);
              }
              ;
              while (!$tco_done) {
                $tco_result = $tco_loop($tco_var_v, $tco_var_v1, $copy_v2);
              }
              ;
              return $tco_result;
            };
          };
        };
        var go2 = function($copy_xs) {
          return function($copy_ys) {
            var $tco_var_xs = $copy_xs;
            var $tco_done1 = false;
            var $tco_result;
            function $tco_loop(xs, ys) {
              var v2 = uncons4(xs);
              if (v2 instanceof Nothing) {
                $tco_done1 = true;
                return foldl12(function(x7) {
                  return function(i2) {
                    return i2(x7);
                  };
                })(b2)(ys);
              }
              ;
              if (v2 instanceof Just) {
                $tco_var_xs = v2.value0.value1;
                $copy_ys = new Cons(k(v2.value0.value0), ys);
                return;
              }
              ;
              throw new Error("Failed pattern match at Data.CatList (line 120, column 14 - line 122, column 67): " + [v2.constructor.name]);
            }
            ;
            while (!$tco_done1) {
              $tco_result = $tco_loop($tco_var_xs, $copy_ys);
            }
            ;
            return $tco_result;
          };
        };
        return go2(q3)(Nil.value);
      };
    };
  };
  var uncons5 = function(v2) {
    if (v2 instanceof CatNil) {
      return Nothing.value;
    }
    ;
    if (v2 instanceof CatCons) {
      return new Just(new Tuple(v2.value0, (function() {
        var $66 = $$null3(v2.value1);
        if ($66) {
          return CatNil.value;
        }
        ;
        return foldr4(link2)(CatNil.value)(v2.value1);
      })()));
    }
    ;
    throw new Error("Failed pattern match at Data.CatList (line 99, column 1 - line 99, column 61): " + [v2.constructor.name]);
  };
  var empty7 = /* @__PURE__ */ (function() {
    return CatNil.value;
  })();
  var append9 = link2;
  var semigroupCatList = {
    append: append9
  };
  var snoc4 = function(cat) {
    return function(a3) {
      return append9(cat)(new CatCons(a3, empty6));
    };
  };

  // output/Control.Monad.Free/index.js
  var $runtime_lazy6 = function(name16, moduleName, init3) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init3();
      state3 = 2;
      return val;
    };
  };
  var append10 = /* @__PURE__ */ append(semigroupCatList);
  var Free = /* @__PURE__ */ (function() {
    function Free2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Free2.create = function(value0) {
      return function(value1) {
        return new Free2(value0, value1);
      };
    };
    return Free2;
  })();
  var Return = /* @__PURE__ */ (function() {
    function Return2(value0) {
      this.value0 = value0;
    }
    ;
    Return2.create = function(value0) {
      return new Return2(value0);
    };
    return Return2;
  })();
  var Bind = /* @__PURE__ */ (function() {
    function Bind2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Bind2.create = function(value0) {
      return function(value1) {
        return new Bind2(value0, value1);
      };
    };
    return Bind2;
  })();
  var toView = function($copy_v) {
    var $tco_done = false;
    var $tco_result;
    function $tco_loop(v2) {
      var runExpF = function(v23) {
        return v23;
      };
      var concatF = function(v23) {
        return function(r8) {
          return new Free(v23.value0, append10(v23.value1)(r8));
        };
      };
      if (v2.value0 instanceof Return) {
        var v22 = uncons5(v2.value1);
        if (v22 instanceof Nothing) {
          $tco_done = true;
          return new Return(v2.value0.value0);
        }
        ;
        if (v22 instanceof Just) {
          $copy_v = concatF(runExpF(v22.value0.value0)(v2.value0.value0))(v22.value0.value1);
          return;
        }
        ;
        throw new Error("Failed pattern match at Control.Monad.Free (line 227, column 7 - line 231, column 64): " + [v22.constructor.name]);
      }
      ;
      if (v2.value0 instanceof Bind) {
        $tco_done = true;
        return new Bind(v2.value0.value0, function(a3) {
          return concatF(v2.value0.value1(a3))(v2.value1);
        });
      }
      ;
      throw new Error("Failed pattern match at Control.Monad.Free (line 225, column 3 - line 233, column 56): " + [v2.value0.constructor.name]);
    }
    ;
    while (!$tco_done) {
      $tco_result = $tco_loop($copy_v);
    }
    ;
    return $tco_result;
  };
  var fromView = function(f) {
    return new Free(f, empty7);
  };
  var freeMonad = {
    Applicative0: function() {
      return freeApplicative;
    },
    Bind1: function() {
      return freeBind;
    }
  };
  var freeFunctor = {
    map: function(k) {
      return function(f) {
        return bindFlipped(freeBind)((function() {
          var $189 = pure(freeApplicative);
          return function($190) {
            return $189(k($190));
          };
        })())(f);
      };
    }
  };
  var freeBind = {
    bind: function(v2) {
      return function(k) {
        return new Free(v2.value0, snoc4(v2.value1)(k));
      };
    },
    Apply0: function() {
      return $lazy_freeApply(0);
    }
  };
  var freeApplicative = {
    pure: function($191) {
      return fromView(Return.create($191));
    },
    Apply0: function() {
      return $lazy_freeApply(0);
    }
  };
  var $lazy_freeApply = /* @__PURE__ */ $runtime_lazy6("freeApply", "Control.Monad.Free", function() {
    return {
      apply: ap(freeMonad),
      Functor0: function() {
        return freeFunctor;
      }
    };
  });
  var pure11 = /* @__PURE__ */ pure(freeApplicative);
  var liftF = function(f) {
    return fromView(new Bind(f, function($192) {
      return pure11($192);
    }));
  };
  var foldFree = function(dictMonadRec) {
    var Monad0 = dictMonadRec.Monad0();
    var map121 = map(Monad0.Bind1().Apply0().Functor0());
    var pure118 = pure(Monad0.Applicative0());
    var tailRecM4 = tailRecM(dictMonadRec);
    return function(k) {
      var go2 = function(f) {
        var v2 = toView(f);
        if (v2 instanceof Return) {
          return map121(Done.create)(pure118(v2.value0));
        }
        ;
        if (v2 instanceof Bind) {
          return map121(function($199) {
            return Loop.create(v2.value1($199));
          })(k(v2.value0));
        }
        ;
        throw new Error("Failed pattern match at Control.Monad.Free (line 158, column 10 - line 160, column 37): " + [v2.constructor.name]);
      };
      return tailRecM4(go2);
    };
  };

  // output/Data.Lazy/foreign.js
  var defer3 = function(thunk) {
    var v2 = null;
    return function() {
      if (thunk === void 0) return v2;
      v2 = thunk();
      thunk = void 0;
      return v2;
    };
  };
  var force = function(l2) {
    return l2();
  };

  // output/Effect.Aff.Class/index.js
  var monadAffAff = {
    liftAff: /* @__PURE__ */ identity(categoryFn),
    MonadEffect0: function() {
      return monadEffectAff;
    }
  };
  var liftAff = function(dict) {
    return dict.liftAff;
  };

  // output/Halogen.Query.ChildQuery/index.js
  var unChildQueryBox = unsafeCoerce2;

  // output/Unsafe.Reference/foreign.js
  function reallyUnsafeRefEq(a3) {
    return function(b2) {
      return a3 === b2;
    };
  }

  // output/Unsafe.Reference/index.js
  var unsafeRefEq = reallyUnsafeRefEq;

  // output/Halogen.Subscription/index.js
  var $$void10 = /* @__PURE__ */ $$void(functorEffect);
  var coerce4 = /* @__PURE__ */ coerce();
  var bind6 = /* @__PURE__ */ bind(bindEffect);
  var append11 = /* @__PURE__ */ append(semigroupArray);
  var traverse_4 = /* @__PURE__ */ traverse_(applicativeEffect);
  var traverse_1 = /* @__PURE__ */ traverse_4(foldableArray);
  var unsubscribe = function(v2) {
    return v2;
  };
  var subscribe2 = function(v2) {
    return function(k) {
      return v2(function($76) {
        return $$void10(k($76));
      });
    };
  };
  var notify = function(v2) {
    return function(a3) {
      return v2(a3);
    };
  };
  var makeEmitter = coerce4;
  var functorEmitter = {
    map: function(f) {
      return function(v2) {
        return function(k) {
          return v2(function($77) {
            return k(f($77));
          });
        };
      };
    }
  };
  var create8 = function __do4() {
    var subscribers = $$new([])();
    return {
      emitter: function(k) {
        return function __do7() {
          modify_2(function(v2) {
            return append11(v2)([k]);
          })(subscribers)();
          return modify_2(deleteBy(unsafeRefEq)(k))(subscribers);
        };
      },
      listener: function(a3) {
        return bind6(read(subscribers))(traverse_1(function(k) {
          return k(a3);
        }));
      }
    };
  };

  // output/Halogen.Query.HalogenM/index.js
  var identity11 = /* @__PURE__ */ identity(categoryFn);
  var SubscriptionId = function(x7) {
    return x7;
  };
  var ForkId = function(x7) {
    return x7;
  };
  var State = /* @__PURE__ */ (function() {
    function State2(value0) {
      this.value0 = value0;
    }
    ;
    State2.create = function(value0) {
      return new State2(value0);
    };
    return State2;
  })();
  var Subscribe = /* @__PURE__ */ (function() {
    function Subscribe2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Subscribe2.create = function(value0) {
      return function(value1) {
        return new Subscribe2(value0, value1);
      };
    };
    return Subscribe2;
  })();
  var Unsubscribe = /* @__PURE__ */ (function() {
    function Unsubscribe2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Unsubscribe2.create = function(value0) {
      return function(value1) {
        return new Unsubscribe2(value0, value1);
      };
    };
    return Unsubscribe2;
  })();
  var Lift2 = /* @__PURE__ */ (function() {
    function Lift3(value0) {
      this.value0 = value0;
    }
    ;
    Lift3.create = function(value0) {
      return new Lift3(value0);
    };
    return Lift3;
  })();
  var ChildQuery2 = /* @__PURE__ */ (function() {
    function ChildQuery3(value0) {
      this.value0 = value0;
    }
    ;
    ChildQuery3.create = function(value0) {
      return new ChildQuery3(value0);
    };
    return ChildQuery3;
  })();
  var Raise = /* @__PURE__ */ (function() {
    function Raise2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Raise2.create = function(value0) {
      return function(value1) {
        return new Raise2(value0, value1);
      };
    };
    return Raise2;
  })();
  var Par = /* @__PURE__ */ (function() {
    function Par2(value0) {
      this.value0 = value0;
    }
    ;
    Par2.create = function(value0) {
      return new Par2(value0);
    };
    return Par2;
  })();
  var Fork = /* @__PURE__ */ (function() {
    function Fork2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Fork2.create = function(value0) {
      return function(value1) {
        return new Fork2(value0, value1);
      };
    };
    return Fork2;
  })();
  var Join2 = /* @__PURE__ */ (function() {
    function Join3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Join3.create = function(value0) {
      return function(value1) {
        return new Join3(value0, value1);
      };
    };
    return Join3;
  })();
  var Kill = /* @__PURE__ */ (function() {
    function Kill2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Kill2.create = function(value0) {
      return function(value1) {
        return new Kill2(value0, value1);
      };
    };
    return Kill2;
  })();
  var GetRef = /* @__PURE__ */ (function() {
    function GetRef2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    GetRef2.create = function(value0) {
      return function(value1) {
        return new GetRef2(value0, value1);
      };
    };
    return GetRef2;
  })();
  var HalogenM = function(x7) {
    return x7;
  };
  var subscribe3 = function(es) {
    return liftF(new Subscribe(function(v2) {
      return es;
    }, identity11));
  };
  var ordSubscriptionId = ordInt;
  var ordForkId = ordInt;
  var monadHalogenM = freeMonad;
  var monadStateHalogenM = {
    state: function($181) {
      return HalogenM(liftF(State.create($181)));
    },
    Monad0: function() {
      return monadHalogenM;
    }
  };
  var monadEffectHalogenM = function(dictMonadEffect) {
    return {
      liftEffect: (function() {
        var $186 = liftEffect(dictMonadEffect);
        return function($187) {
          return HalogenM(liftF(Lift2.create($186($187))));
        };
      })(),
      Monad0: function() {
        return monadHalogenM;
      }
    };
  };
  var monadAffHalogenM = function(dictMonadAff) {
    var monadEffectHalogenM1 = monadEffectHalogenM(dictMonadAff.MonadEffect0());
    return {
      liftAff: (function() {
        var $188 = liftAff(dictMonadAff);
        return function($189) {
          return HalogenM(liftF(Lift2.create($188($189))));
        };
      })(),
      MonadEffect0: function() {
        return monadEffectHalogenM1;
      }
    };
  };
  var kill = function(fid) {
    return liftF(new Kill(fid, unit));
  };
  var functorHalogenM = freeFunctor;
  var fork = function(hmu) {
    return liftF(new Fork(hmu, identity11));
  };
  var bindHalogenM = freeBind;
  var bind7 = /* @__PURE__ */ bind(bindHalogenM);
  var applicativeHalogenM = freeApplicative;
  var pure12 = /* @__PURE__ */ pure(applicativeHalogenM);
  var monadRecHalogenM = {
    tailRecM: function(k) {
      return function(a3) {
        return bind7(k(a3))(function(v2) {
          if (v2 instanceof Loop) {
            return tailRecM(monadRecHalogenM)(k)(v2.value0);
          }
          ;
          if (v2 instanceof Done) {
            return pure12(v2.value0);
          }
          ;
          throw new Error("Failed pattern match at Halogen.Query.HalogenM (line 105, column 26 - line 107, column 21): " + [v2.constructor.name]);
        });
      };
    },
    Monad0: function() {
      return monadHalogenM;
    }
  };

  // output/Halogen.Query.HalogenQ/index.js
  var Initialize = /* @__PURE__ */ (function() {
    function Initialize31(value0) {
      this.value0 = value0;
    }
    ;
    Initialize31.create = function(value0) {
      return new Initialize31(value0);
    };
    return Initialize31;
  })();
  var Finalize = /* @__PURE__ */ (function() {
    function Finalize5(value0) {
      this.value0 = value0;
    }
    ;
    Finalize5.create = function(value0) {
      return new Finalize5(value0);
    };
    return Finalize5;
  })();
  var Receive = /* @__PURE__ */ (function() {
    function Receive2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Receive2.create = function(value0) {
      return function(value1) {
        return new Receive2(value0, value1);
      };
    };
    return Receive2;
  })();
  var Action2 = /* @__PURE__ */ (function() {
    function Action3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Action3.create = function(value0) {
      return function(value1) {
        return new Action3(value0, value1);
      };
    };
    return Action3;
  })();
  var Query = /* @__PURE__ */ (function() {
    function Query3(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Query3.create = function(value0) {
      return function(value1) {
        return new Query3(value0, value1);
      };
    };
    return Query3;
  })();

  // output/Halogen.VDom.Thunk/index.js
  var $runtime_lazy7 = function(name16, moduleName, init3) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init3();
      state3 = 2;
      return val;
    };
  };
  var unsafeEqThunk = function(v2, v1) {
    return refEq2(v2.value0, v1.value0) && (refEq2(v2.value1, v1.value1) && v2.value1(v2.value3, v1.value3));
  };
  var runThunk = function(v2) {
    return v2.value2(v2.value3);
  };
  var buildThunk = function(toVDom) {
    var haltThunk = function(state3) {
      return halt(state3.vdom);
    };
    var $lazy_patchThunk = $runtime_lazy7("patchThunk", "Halogen.VDom.Thunk", function() {
      return function(state3, t2) {
        var $48 = unsafeEqThunk(state3.thunk, t2);
        if ($48) {
          return mkStep(new Step2(extract2(state3.vdom), state3, $lazy_patchThunk(112), haltThunk));
        }
        ;
        var vdom = step2(state3.vdom, toVDom(runThunk(t2)));
        return mkStep(new Step2(extract2(vdom), {
          vdom,
          thunk: t2
        }, $lazy_patchThunk(115), haltThunk));
      };
    });
    var patchThunk = $lazy_patchThunk(108);
    var renderThunk = function(spec) {
      return function(t2) {
        var vdom = buildVDom(spec)(toVDom(runThunk(t2)));
        return mkStep(new Step2(extract2(vdom), {
          thunk: t2,
          vdom
        }, patchThunk, haltThunk));
      };
    };
    return renderThunk;
  };

  // output/Halogen.Component/index.js
  var voidLeft2 = /* @__PURE__ */ voidLeft(functorHalogenM);
  var traverse_5 = /* @__PURE__ */ traverse_(applicativeHalogenM)(foldableMaybe);
  var map28 = /* @__PURE__ */ map(functorHalogenM);
  var pure13 = /* @__PURE__ */ pure(applicativeHalogenM);
  var lookup6 = /* @__PURE__ */ lookup5();
  var pop3 = /* @__PURE__ */ pop2();
  var insert9 = /* @__PURE__ */ insert8();
  var ComponentSlot = /* @__PURE__ */ (function() {
    function ComponentSlot2(value0) {
      this.value0 = value0;
    }
    ;
    ComponentSlot2.create = function(value0) {
      return new ComponentSlot2(value0);
    };
    return ComponentSlot2;
  })();
  var ThunkSlot = /* @__PURE__ */ (function() {
    function ThunkSlot2(value0) {
      this.value0 = value0;
    }
    ;
    ThunkSlot2.create = function(value0) {
      return new ThunkSlot2(value0);
    };
    return ThunkSlot2;
  })();
  var unComponentSlot = unsafeCoerce2;
  var unComponent = unsafeCoerce2;
  var mkEval = function(args) {
    return function(v2) {
      if (v2 instanceof Initialize) {
        return voidLeft2(traverse_5(args.handleAction)(args.initialize))(v2.value0);
      }
      ;
      if (v2 instanceof Finalize) {
        return voidLeft2(traverse_5(args.handleAction)(args.finalize))(v2.value0);
      }
      ;
      if (v2 instanceof Receive) {
        return voidLeft2(traverse_5(args.handleAction)(args.receive(v2.value0)))(v2.value1);
      }
      ;
      if (v2 instanceof Action2) {
        return voidLeft2(args.handleAction(v2.value0))(v2.value1);
      }
      ;
      if (v2 instanceof Query) {
        return unCoyoneda(function(g2) {
          var $45 = map28(maybe(v2.value1(unit))(g2));
          return function($46) {
            return $45(args.handleQuery($46));
          };
        })(v2.value0);
      }
      ;
      throw new Error("Failed pattern match at Halogen.Component (line 182, column 15 - line 192, column 71): " + [v2.constructor.name]);
    };
  };
  var mkComponentSlot = unsafeCoerce2;
  var mkComponent = unsafeCoerce2;
  var defaultEval = /* @__PURE__ */ (function() {
    return {
      handleAction: $$const(pure13(unit)),
      handleQuery: $$const(pure13(Nothing.value)),
      receive: $$const(Nothing.value),
      initialize: Nothing.value,
      finalize: Nothing.value
    };
  })();
  var componentSlot = function() {
    return function(dictIsSymbol) {
      var lookup13 = lookup6(dictIsSymbol);
      var pop12 = pop3(dictIsSymbol);
      var insert15 = insert9(dictIsSymbol);
      return function(dictOrd) {
        var lookup23 = lookup13(dictOrd);
        var pop22 = pop12(dictOrd);
        var insert22 = insert15(dictOrd);
        return function(label5) {
          return function(p2) {
            return function(comp) {
              return function(input3) {
                return function(output2) {
                  return mkComponentSlot({
                    get: lookup23(label5)(p2),
                    pop: pop22(label5)(p2),
                    set: insert22(label5)(p2),
                    component: comp,
                    input: input3,
                    output: output2
                  });
                };
              };
            };
          };
        };
      };
    };
  };

  // output/Halogen.HTML.Elements/index.js
  var pure14 = /* @__PURE__ */ pure(applicativeMaybe);
  var elementNS = function($15) {
    return element(pure14($15));
  };
  var element2 = /* @__PURE__ */ (function() {
    return element(Nothing.value);
  })();
  var em = /* @__PURE__ */ element2("em");
  var em_ = /* @__PURE__ */ em([]);
  var footer = /* @__PURE__ */ element2("footer");
  var h1 = /* @__PURE__ */ element2("h1");
  var h1_ = /* @__PURE__ */ h1([]);
  var h2 = /* @__PURE__ */ element2("h2");
  var h2_ = /* @__PURE__ */ h2([]);
  var h3 = /* @__PURE__ */ element2("h3");
  var h3_ = /* @__PURE__ */ h3([]);
  var header = /* @__PURE__ */ element2("header");
  var hr = function(props) {
    return element2("hr")(props)([]);
  };
  var hr_ = /* @__PURE__ */ hr([]);
  var img = function(props) {
    return element2("img")(props)([]);
  };
  var input = function(props) {
    return element2("input")(props)([]);
  };
  var label4 = /* @__PURE__ */ element2("label");
  var li = /* @__PURE__ */ element2("li");
  var li_ = /* @__PURE__ */ li([]);
  var main = /* @__PURE__ */ element2("main");
  var main_ = /* @__PURE__ */ main([]);
  var nav = /* @__PURE__ */ element2("nav");
  var ol = /* @__PURE__ */ element2("ol");
  var ol_ = /* @__PURE__ */ ol([]);
  var p = /* @__PURE__ */ element2("p");
  var p_ = /* @__PURE__ */ p([]);
  var pre = /* @__PURE__ */ element2("pre");
  var pre_ = /* @__PURE__ */ pre([]);
  var section = /* @__PURE__ */ element2("section");
  var span4 = /* @__PURE__ */ element2("span");
  var span_ = /* @__PURE__ */ span4([]);
  var strong = /* @__PURE__ */ element2("strong");
  var strong_ = /* @__PURE__ */ strong([]);
  var table = /* @__PURE__ */ element2("table");
  var tbody = /* @__PURE__ */ element2("tbody");
  var tbody_ = /* @__PURE__ */ tbody([]);
  var td = /* @__PURE__ */ element2("td");
  var td_ = /* @__PURE__ */ td([]);
  var th = /* @__PURE__ */ element2("th");
  var th_ = /* @__PURE__ */ th([]);
  var thead = /* @__PURE__ */ element2("thead");
  var thead_ = /* @__PURE__ */ thead([]);
  var tr = /* @__PURE__ */ element2("tr");
  var tr_ = /* @__PURE__ */ tr([]);
  var ul = /* @__PURE__ */ element2("ul");
  var ul_ = /* @__PURE__ */ ul([]);
  var div4 = /* @__PURE__ */ element2("div");
  var div_ = /* @__PURE__ */ div4([]);
  var code = /* @__PURE__ */ element2("code");
  var code_ = /* @__PURE__ */ code([]);
  var cite3 = /* @__PURE__ */ element2("cite");
  var cite_ = /* @__PURE__ */ cite3([]);
  var button2 = /* @__PURE__ */ element2("button");
  var blockquote = /* @__PURE__ */ element2("blockquote");
  var blockquote_ = /* @__PURE__ */ blockquote([]);
  var article = /* @__PURE__ */ element2("article");
  var a = /* @__PURE__ */ element2("a");

  // output/Control.Monad.Except/index.js
  var unwrap4 = /* @__PURE__ */ unwrap();
  var runExcept = function($3) {
    return unwrap4(runExceptT($3));
  };

  // output/Foreign.Index/foreign.js
  function unsafeReadPropImpl(f, s2, key, value18) {
    return value18 == null ? f : s2(value18[key]);
  }

  // output/Foreign.Index/index.js
  var unsafeReadProp = function(dictMonad) {
    var fail3 = fail(dictMonad);
    var pure60 = pure(applicativeExceptT(dictMonad));
    return function(k) {
      return function(value18) {
        return unsafeReadPropImpl(fail3(new TypeMismatch("object", typeOf(value18))), pure60, k, value18);
      };
    };
  };
  var readProp = function(dictMonad) {
    return unsafeReadProp(dictMonad);
  };

  // output/Web.Event.Event/foreign.js
  function _currentTarget(e) {
    return e.currentTarget;
  }

  // output/Web.Event.Event/index.js
  var currentTarget = function($5) {
    return toMaybe(_currentTarget($5));
  };

  // output/Web.HTML.Event.EventTypes/index.js
  var input2 = "input";
  var domcontentloaded = "DOMContentLoaded";

  // output/Web.UIEvent.MouseEvent.EventTypes/index.js
  var mouseup = "mouseup";
  var mousemove = "mousemove";
  var mouseleave = "mouseleave";
  var mousedown = "mousedown";
  var click2 = "click";

  // output/Halogen.HTML.Events/index.js
  var map29 = /* @__PURE__ */ map(functorMaybe);
  var composeKleisli2 = /* @__PURE__ */ composeKleisli(bindMaybe);
  var composeKleisliFlipped2 = /* @__PURE__ */ composeKleisliFlipped(/* @__PURE__ */ bindExceptT(monadIdentity));
  var readProp2 = /* @__PURE__ */ readProp(monadIdentity);
  var readString2 = /* @__PURE__ */ readString(monadIdentity);
  var mouseHandler = unsafeCoerce2;
  var handler$prime = function(et) {
    return function(f) {
      return handler(et)(function(ev) {
        return map29(Action.create)(f(ev));
      });
    };
  };
  var handler2 = function(et) {
    return function(f) {
      return handler(et)(function(ev) {
        return new Just(new Action(f(ev)));
      });
    };
  };
  var onClick = /* @__PURE__ */ (function() {
    var $15 = handler2(click2);
    return function($16) {
      return $15(mouseHandler($16));
    };
  })();
  var onMouseDown = /* @__PURE__ */ (function() {
    var $27 = handler2(mousedown);
    return function($28) {
      return $27(mouseHandler($28));
    };
  })();
  var onMouseLeave = /* @__PURE__ */ (function() {
    var $31 = handler2(mouseleave);
    return function($32) {
      return $31(mouseHandler($32));
    };
  })();
  var onMouseMove = /* @__PURE__ */ (function() {
    var $33 = handler2(mousemove);
    return function($34) {
      return $33(mouseHandler($34));
    };
  })();
  var onMouseUp = /* @__PURE__ */ (function() {
    var $39 = handler2(mouseup);
    return function($40) {
      return $39(mouseHandler($40));
    };
  })();
  var addForeignPropHandler = function(key) {
    return function(prop5) {
      return function(reader) {
        return function(f) {
          var go2 = function(a3) {
            return composeKleisliFlipped2(reader)(readProp2(prop5))(unsafeToForeign(a3));
          };
          return handler$prime(key)(composeKleisli2(currentTarget)(function(e) {
            return either($$const(Nothing.value))(function($85) {
              return Just.create(f($85));
            })(runExcept(go2(e)));
          }));
        };
      };
    };
  };
  var onValueInput = /* @__PURE__ */ addForeignPropHandler(input2)("value")(readString2);

  // output/Halogen.HTML.Properties/index.js
  var unwrap5 = /* @__PURE__ */ unwrap();
  var prop2 = function(dictIsProp) {
    return prop(dictIsProp);
  };
  var prop22 = /* @__PURE__ */ prop2(isPropString);
  var prop3 = /* @__PURE__ */ prop2(isPropInt);
  var prop4 = /* @__PURE__ */ prop2(isPropNumber);
  var src9 = /* @__PURE__ */ prop22("src");
  var step3 = /* @__PURE__ */ prop2(isPropStepValue)("step");
  var target6 = /* @__PURE__ */ prop22("target");
  var title2 = /* @__PURE__ */ prop22("title");
  var type_18 = function(dictIsProp) {
    return prop2(dictIsProp)("type");
  };
  var value12 = function(dictIsProp) {
    return prop2(dictIsProp)("value");
  };
  var min8 = /* @__PURE__ */ prop4("min");
  var max8 = /* @__PURE__ */ prop4("max");
  var id2 = /* @__PURE__ */ prop22("id");
  var href4 = /* @__PURE__ */ prop22("href");
  var colSpan2 = /* @__PURE__ */ prop3("colSpan");
  var classes = /* @__PURE__ */ (function() {
    var $32 = prop22("className");
    var $33 = joinWith(" ");
    var $34 = map(functorArray)(unwrap5);
    return function($35) {
      return $32($33($34($35)));
    };
  })();
  var class_2 = /* @__PURE__ */ (function() {
    var $36 = prop22("className");
    return function($37) {
      return $36(unwrap5($37));
    };
  })();
  var attr4 = /* @__PURE__ */ (function() {
    return attr3(Nothing.value);
  })();
  var style2 = /* @__PURE__ */ attr4("style");
  var alt5 = /* @__PURE__ */ prop22("alt");

  // output/Halogen.Svg.Attributes.Color/index.js
  var show16 = /* @__PURE__ */ show(showInt);
  var show17 = /* @__PURE__ */ show(showNumber);
  var RGB = /* @__PURE__ */ (function() {
    function RGB2(value0, value1, value22) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
    }
    ;
    RGB2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return new RGB2(value0, value1, value22);
        };
      };
    };
    return RGB2;
  })();
  var RGBA = /* @__PURE__ */ (function() {
    function RGBA2(value0, value1, value22, value32) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
      this.value3 = value32;
    }
    ;
    RGBA2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return function(value32) {
            return new RGBA2(value0, value1, value22, value32);
          };
        };
      };
    };
    return RGBA2;
  })();
  var Named = /* @__PURE__ */ (function() {
    function Named2(value0) {
      this.value0 = value0;
    }
    ;
    Named2.create = function(value0) {
      return new Named2(value0);
    };
    return Named2;
  })();
  var NoColor = /* @__PURE__ */ (function() {
    function NoColor2() {
    }
    ;
    NoColor2.value = new NoColor2();
    return NoColor2;
  })();
  var printColor = function(v2) {
    if (v2 instanceof RGB) {
      return "rgb(" + (show16(v2.value0) + ("," + (show16(v2.value1) + ("," + (show16(v2.value2) + ")")))));
    }
    ;
    if (v2 instanceof RGBA) {
      return "rgba(" + (show16(v2.value0) + ("," + (show16(v2.value1) + ("," + (show16(v2.value2) + ("," + (show17(v2.value3) + ")")))))));
    }
    ;
    if (v2 instanceof Named) {
      return v2.value0;
    }
    ;
    if (v2 instanceof NoColor) {
      return "None";
    }
    ;
    throw new Error("Failed pattern match at Halogen.Svg.Attributes.Color (line 24, column 14 - line 28, column 20): " + [v2.constructor.name]);
  };

  // output/Halogen.Svg.Attributes.Path/index.js
  var show18 = /* @__PURE__ */ show(showNumber);
  var Sweep0 = /* @__PURE__ */ (function() {
    function Sweep02() {
    }
    ;
    Sweep02.value = new Sweep02();
    return Sweep02;
  })();
  var Sweep1 = /* @__PURE__ */ (function() {
    function Sweep12() {
    }
    ;
    Sweep12.value = new Sweep12();
    return Sweep12;
  })();
  var Rel = /* @__PURE__ */ (function() {
    function Rel2() {
    }
    ;
    Rel2.value = new Rel2();
    return Rel2;
  })();
  var Abs = /* @__PURE__ */ (function() {
    function Abs2() {
    }
    ;
    Abs2.value = new Abs2();
    return Abs2;
  })();
  var Arc0 = /* @__PURE__ */ (function() {
    function Arc02() {
    }
    ;
    Arc02.value = new Arc02();
    return Arc02;
  })();
  var Arc1 = /* @__PURE__ */ (function() {
    function Arc12() {
    }
    ;
    Arc12.value = new Arc12();
    return Arc12;
  })();
  var toArrayString = /* @__PURE__ */ coerce();
  var renderCommand = function(cmd) {
    return function(s_) {
      if (cmd instanceof Rel) {
        return s_;
      }
      ;
      if (cmd instanceof Abs) {
        return toUpper(s_);
      }
      ;
      throw new Error("Failed pattern match at Halogen.Svg.Attributes.Path (line 81, column 24 - line 83, column 20): " + [cmd.constructor.name]);
    };
  };
  var renderCommand2Args = function(s_) {
    return function(ref2) {
      return function(a_2) {
        return function(b2) {
          return renderCommand(ref2)(s_) + (show18(a_2) + (", " + show18(b2)));
        };
      };
    };
  };
  var printCommandSweepChoice = function(v1) {
    if (v1 instanceof Sweep0) {
      return "0";
    }
    ;
    if (v1 instanceof Sweep1) {
      return "1";
    }
    ;
    throw new Error("Failed pattern match at Halogen.Svg.Attributes.Path (line 75, column 27 - line 77, column 16): " + [v1.constructor.name]);
  };
  var printCommandArcChoice = function(v1) {
    if (v1 instanceof Arc0) {
      return "0";
    }
    ;
    if (v1 instanceof Arc1) {
      return "1";
    }
    ;
    throw new Error("Failed pattern match at Halogen.Svg.Attributes.Path (line 59, column 25 - line 61, column 14): " + [v1.constructor.name]);
  };
  var m = /* @__PURE__ */ renderCommand2Args("m");
  var a2 = function(ref2) {
    return function(rx_) {
      return function(ry_) {
        return function(rot) {
          return function(arc) {
            return function(sweep) {
              return function(x_) {
                return function(y_) {
                  return renderCommand(ref2)("a") + (show18(rx_) + (", " + (show18(ry_) + (", " + (show18(rot) + (" " + (printCommandArcChoice(arc) + (" " + (printCommandSweepChoice(sweep) + (" " + (show18(x_) + (" " + show18(y_)))))))))))));
                };
              };
            };
          };
        };
      };
    };
  };

  // output/Halogen.Svg.Attributes.TextAnchor/index.js
  var AnchorStart = /* @__PURE__ */ (function() {
    function AnchorStart2() {
    }
    ;
    AnchorStart2.value = new AnchorStart2();
    return AnchorStart2;
  })();
  var AnchorMiddle = /* @__PURE__ */ (function() {
    function AnchorMiddle2() {
    }
    ;
    AnchorMiddle2.value = new AnchorMiddle2();
    return AnchorMiddle2;
  })();
  var AnchorEnd = /* @__PURE__ */ (function() {
    function AnchorEnd2() {
    }
    ;
    AnchorEnd2.value = new AnchorEnd2();
    return AnchorEnd2;
  })();
  var printTextAnchor = function(v2) {
    if (v2 instanceof AnchorStart) {
      return "start";
    }
    ;
    if (v2 instanceof AnchorMiddle) {
      return "middle";
    }
    ;
    if (v2 instanceof AnchorEnd) {
      return "end";
    }
    ;
    throw new Error("Failed pattern match at Halogen.Svg.Attributes.TextAnchor (line 22, column 19 - line 25, column 21): " + [v2.constructor.name]);
  };

  // output/Halogen.Svg.Attributes.Transform/index.js
  var show19 = /* @__PURE__ */ show(showNumber);
  var Matrix = /* @__PURE__ */ (function() {
    function Matrix2(value0, value1, value22, value32, value42, value52) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
      this.value3 = value32;
      this.value4 = value42;
      this.value5 = value52;
    }
    ;
    Matrix2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return function(value32) {
            return function(value42) {
              return function(value52) {
                return new Matrix2(value0, value1, value22, value32, value42, value52);
              };
            };
          };
        };
      };
    };
    return Matrix2;
  })();
  var Translate = /* @__PURE__ */ (function() {
    function Translate2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Translate2.create = function(value0) {
      return function(value1) {
        return new Translate2(value0, value1);
      };
    };
    return Translate2;
  })();
  var Scale = /* @__PURE__ */ (function() {
    function Scale2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    Scale2.create = function(value0) {
      return function(value1) {
        return new Scale2(value0, value1);
      };
    };
    return Scale2;
  })();
  var Rotate = /* @__PURE__ */ (function() {
    function Rotate2(value0, value1, value22) {
      this.value0 = value0;
      this.value1 = value1;
      this.value2 = value22;
    }
    ;
    Rotate2.create = function(value0) {
      return function(value1) {
        return function(value22) {
          return new Rotate2(value0, value1, value22);
        };
      };
    };
    return Rotate2;
  })();
  var SkewX = /* @__PURE__ */ (function() {
    function SkewX2(value0) {
      this.value0 = value0;
    }
    ;
    SkewX2.create = function(value0) {
      return new SkewX2(value0);
    };
    return SkewX2;
  })();
  var SkewY = /* @__PURE__ */ (function() {
    function SkewY2(value0) {
      this.value0 = value0;
    }
    ;
    SkewY2.create = function(value0) {
      return new SkewY2(value0);
    };
    return SkewY2;
  })();
  var printTransform = function(v2) {
    if (v2 instanceof Matrix) {
      return "matrix(" + (show19(v2.value0) + ("," + (show19(v2.value1) + ("," + (show19(v2.value2) + ("," + (show19(v2.value3) + ("," + (show19(v2.value4) + ("," + (show19(v2.value5) + ")")))))))))));
    }
    ;
    if (v2 instanceof Translate) {
      return "translate(" + (show19(v2.value0) + ("," + (show19(v2.value1) + ")")));
    }
    ;
    if (v2 instanceof Scale) {
      return "scale(" + (show19(v2.value0) + ("," + (show19(v2.value1) + ")")));
    }
    ;
    if (v2 instanceof Rotate) {
      return "rotate(" + (show19(v2.value0) + ("," + (show19(v2.value1) + ("," + (show19(v2.value2) + ")")))));
    }
    ;
    if (v2 instanceof SkewX) {
      return "skewX(" + (show19(v2.value0) + ")");
    }
    ;
    if (v2 instanceof SkewY) {
      return "skewY(" + (show19(v2.value0) + ")");
    }
    ;
    throw new Error("Failed pattern match at Halogen.Svg.Attributes.Transform (line 28, column 18 - line 34, column 39): " + [v2.constructor.name]);
  };

  // output/Halogen.Svg.Attributes/index.js
  var show20 = /* @__PURE__ */ show(showNumber);
  var map30 = /* @__PURE__ */ map(functorArray);
  var y23 = /* @__PURE__ */ (function() {
    var $22 = attr4("y2");
    return function($23) {
      return $22(show20($23));
    };
  })();
  var y12 = /* @__PURE__ */ (function() {
    var $24 = attr4("y1");
    return function($25) {
      return $24(show20($25));
    };
  })();
  var y5 = /* @__PURE__ */ (function() {
    var $26 = attr4("y");
    return function($27) {
      return $26(show20($27));
    };
  })();
  var x23 = /* @__PURE__ */ (function() {
    var $28 = attr4("x2");
    return function($29) {
      return $28(show20($29));
    };
  })();
  var x12 = /* @__PURE__ */ (function() {
    var $30 = attr4("x1");
    return function($31) {
      return $30(show20($31));
    };
  })();
  var x5 = /* @__PURE__ */ (function() {
    var $32 = attr4("x");
    return function($33) {
      return $32(show20($33));
    };
  })();
  var width10 = /* @__PURE__ */ (function() {
    var $34 = attr4("width");
    return function($35) {
      return $34(show20($35));
    };
  })();
  var viewBox3 = function(x_) {
    return function(y_) {
      return function(w) {
        return function(h_) {
          return attr4("viewBox")(joinWith(" ")(map30(show20)([x_, y_, w, h_])));
        };
      };
    };
  };
  var transform2 = /* @__PURE__ */ (function() {
    var $36 = attr4("transform");
    var $37 = joinWith(" ");
    var $38 = map30(printTransform);
    return function($39) {
      return $36($37($38($39)));
    };
  })();
  var textAnchor3 = /* @__PURE__ */ (function() {
    var $40 = attr4("text-anchor");
    return function($41) {
      return $40(printTextAnchor($41));
    };
  })();
  var strokeWidth3 = /* @__PURE__ */ (function() {
    var $42 = attr4("stroke-width");
    return function($43) {
      return $42(show20($43));
    };
  })();
  var strokeOpacity = /* @__PURE__ */ (function() {
    var $44 = attr4("stroke-opacity");
    return function($45) {
      return $44(show20($45));
    };
  })();
  var strokeDashArray = /* @__PURE__ */ attr4("stroke-dasharray");
  var stroke3 = /* @__PURE__ */ (function() {
    var $55 = attr4("stroke");
    return function($56) {
      return $55(printColor($56));
    };
  })();
  var r3 = /* @__PURE__ */ (function() {
    var $65 = attr4("r");
    return function($66) {
      return $65(show20($66));
    };
  })();
  var points = /* @__PURE__ */ (function() {
    var $67 = attr4("points");
    var $68 = intercalate2(monoidString)(" ");
    var $69 = map30(function(v2) {
      return show20(v2.value0) + ("," + show20(v2.value1));
    });
    return function($70) {
      return $67($68($69($70)));
    };
  })();
  var height10 = /* @__PURE__ */ (function() {
    var $92 = attr4("height");
    return function($93) {
      return $92(show20($93));
    };
  })();
  var fill3 = /* @__PURE__ */ (function() {
    var $108 = attr4("fill");
    return function($109) {
      return $108(printColor($109));
    };
  })();
  var d2 = /* @__PURE__ */ (function() {
    var $114 = attr4("d");
    var $115 = joinWith(" ");
    return function($116) {
      return $114($115(toArrayString($116)));
    };
  })();
  var cy3 = /* @__PURE__ */ (function() {
    var $117 = attr4("cy");
    return function($118) {
      return $117(show20($118));
    };
  })();
  var cx3 = /* @__PURE__ */ (function() {
    var $119 = attr4("cx");
    return function($120) {
      return $119(show20($120));
    };
  })();
  var classes2 = /* @__PURE__ */ (function() {
    var $121 = attr4("class");
    var $122 = joinWith(" ");
    var $123 = coerce();
    return function($124) {
      return $121($122($123($124)));
    };
  })();

  // output/Halogen.Svg.Elements/index.js
  var element3 = /* @__PURE__ */ elementNS("http://www.w3.org/2000/svg");
  var g = /* @__PURE__ */ element3("g");
  var line = function(props) {
    return element3("line")(props)([]);
  };
  var path2 = function(props) {
    return element3("path")(props)([]);
  };
  var polygon = function(props) {
    return element3("polygon")(props)([]);
  };
  var rect = function(props) {
    return element3("rect")(props)([]);
  };
  var svg = /* @__PURE__ */ element3("svg");
  var text7 = /* @__PURE__ */ element3("text");
  var circle = function(props) {
    return element3("circle")(props)([]);
  };

  // output/Hylograph.ForceEngine.Halogen/index.js
  var toHalogenEmitter = function(simEmitter) {
    return function __do7() {
      var v2 = create8();
      subscribe(simEmitter)(function(event) {
        return notify(v2.listener)(event);
      })();
      return v2.emitter;
    };
  };

  // output/Hylograph.Transform/foreign.js
  function clearContainer_(selector) {
    return function() {
      const container = document.querySelector(selector);
      if (container) {
        container.innerHTML = "";
      }
    };
  }

  // output/Hylograph.Transform/index.js
  var clearContainer2 = clearContainer_;

  // output/Component.ForcePlayground/index.js
  var mod5 = /* @__PURE__ */ mod(euclideanRingInt);
  var fromFoldable9 = /* @__PURE__ */ fromFoldable4(foldableArray);
  var fromFoldable13 = /* @__PURE__ */ fromFoldable9(ordForceId);
  var fromFoldable23 = /* @__PURE__ */ fromFoldable8(foldableArray);
  var map31 = /* @__PURE__ */ map(functorArray);
  var show21 = /* @__PURE__ */ show(showInt);
  var toUnfoldable8 = /* @__PURE__ */ toUnfoldable(unfoldableArray);
  var member5 = /* @__PURE__ */ member2(ordForceId);
  var append14 = /* @__PURE__ */ append(semigroupArray);
  var bind8 = /* @__PURE__ */ bind(bindHalogenM);
  var get2 = /* @__PURE__ */ get(monadStateHalogenM);
  var fromFoldable33 = /* @__PURE__ */ fromFoldable(foldableSet);
  var pure15 = /* @__PURE__ */ pure(applicativeHalogenM);
  var sortWith2 = /* @__PURE__ */ sortWith(ordInt);
  var fromFoldable43 = /* @__PURE__ */ fromFoldable2(ordInt)(foldableArray);
  var member12 = /* @__PURE__ */ member2(ordInt);
  var fromFoldable53 = /* @__PURE__ */ fromFoldable9(ordInt);
  var tickProgressMap2 = /* @__PURE__ */ tickProgressMap(ordInt);
  var min9 = /* @__PURE__ */ min(ordNumber);
  var discard3 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var when7 = /* @__PURE__ */ when(applicativeHalogenM);
  var modify_3 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var $$void11 = /* @__PURE__ */ $$void(functorHalogenM);
  var mapFlipped3 = /* @__PURE__ */ mapFlipped(functorEmitter);
  var $$delete5 = /* @__PURE__ */ $$delete2(ordForceId);
  var insert10 = /* @__PURE__ */ insert2(ordForceId);
  var toUnfoldable1 = /* @__PURE__ */ toUnfoldable3(unfoldableArray);
  var delete1 = /* @__PURE__ */ $$delete2(ordInt);
  var insert12 = /* @__PURE__ */ insert2(ordInt);
  var difference6 = /* @__PURE__ */ difference2(ordInt);
  var startProgress2 = /* @__PURE__ */ startProgress(ordInt);
  var PresetStandard = /* @__PURE__ */ (function() {
    function PresetStandard2() {
    }
    ;
    PresetStandard2.value = new PresetStandard2();
    return PresetStandard2;
  })();
  var PresetClustered = /* @__PURE__ */ (function() {
    function PresetClustered2() {
    }
    ;
    PresetClustered2.value = new PresetClustered2();
    return PresetClustered2;
  })();
  var PresetQuadrants = /* @__PURE__ */ (function() {
    function PresetQuadrants2() {
    }
    ;
    PresetQuadrants2.value = new PresetQuadrants2();
    return PresetQuadrants2;
  })();
  var Initialize2 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var Finalize2 = /* @__PURE__ */ (function() {
    function Finalize5() {
    }
    ;
    Finalize5.value = new Finalize5();
    return Finalize5;
  })();
  var SimTick = /* @__PURE__ */ (function() {
    function SimTick3(value0) {
      this.value0 = value0;
    }
    ;
    SimTick3.create = function(value0) {
      return new SimTick3(value0);
    };
    return SimTick3;
  })();
  var SimCompleted = /* @__PURE__ */ (function() {
    function SimCompleted2() {
    }
    ;
    SimCompleted2.value = new SimCompleted2();
    return SimCompleted2;
  })();
  var RegenerateGraph = /* @__PURE__ */ (function() {
    function RegenerateGraph2() {
    }
    ;
    RegenerateGraph2.value = new RegenerateGraph2();
    return RegenerateGraph2;
  })();
  var ToggleForce = /* @__PURE__ */ (function() {
    function ToggleForce2(value0) {
      this.value0 = value0;
    }
    ;
    ToggleForce2.create = function(value0) {
      return new ToggleForce2(value0);
    };
    return ToggleForce2;
  })();
  var ApplyPreset = /* @__PURE__ */ (function() {
    function ApplyPreset2(value0) {
      this.value0 = value0;
    }
    ;
    ApplyPreset2.create = function(value0) {
      return new ApplyPreset2(value0);
    };
    return ApplyPreset2;
  })();
  var ToggleCategory = /* @__PURE__ */ (function() {
    function ToggleCategory2(value0) {
      this.value0 = value0;
    }
    ;
    ToggleCategory2.create = function(value0) {
      return new ToggleCategory2(value0);
    };
    return ToggleCategory2;
  })();
  var ShowAllCategories = /* @__PURE__ */ (function() {
    function ShowAllCategories2() {
    }
    ;
    ShowAllCategories2.value = new ShowAllCategories2();
    return ShowAllCategories2;
  })();
  var quadrantCenter = function(group4) {
    var v2 = mod5(group4)(4);
    if (v2 === 0) {
      return {
        x: -200,
        y: -150
      };
    }
    ;
    if (v2 === 1) {
      return {
        x: 200,
        y: -150
      };
    }
    ;
    if (v2 === 2) {
      return {
        x: -200,
        y: 150
      };
    }
    ;
    return {
      x: 200,
      y: 150
    };
  };
  var presetForces = function(v2) {
    if (v2 instanceof PresetStandard) {
      return allForces;
    }
    ;
    if (v2 instanceof PresetClustered) {
      return fromFoldable13([ForceCharge.value, ForceCollide2.value, ForceLink2.value]);
    }
    ;
    if (v2 instanceof PresetQuadrants) {
      return fromFoldable13([ForceCollide2.value]);
    }
    ;
    throw new Error("Failed pattern match at Component.ForcePlayground (line 79, column 16 - line 82, column 53): " + [v2.constructor.name]);
  };
  var mapToPositionObject = function(m2) {
    return fromFoldable23(map31(function(v2) {
      return new Tuple(show21(v2.value0), v2.value1);
    })(toUnfoldable8(m2)));
  };
  var iconVertical = /* @__PURE__ */ (function() {
    return svg([viewBox3(0)(0)(40)(40), classes2(["semiotic-icon"])])([line([x12(20), y12(4), x23(20), y23(36), classes2(["semiotic-line"])]), polygon([points([new Tuple(14, 12), new Tuple(20, 4), new Tuple(26, 12)]), classes2(["semiotic-shape"])]), polygon([points([new Tuple(14, 28), new Tuple(20, 36), new Tuple(26, 28)]), classes2(["semiotic-shape"])]), circle([cx3(20), cy3(20), r3(3), classes2(["semiotic-shape"])])]);
  })();
  var iconTriangle = /* @__PURE__ */ (function() {
    return svg([viewBox3(0)(0)(40)(40), classes2(["semiotic-icon"])])([polygon([points([new Tuple(20, 6), new Tuple(34, 34), new Tuple(6, 34)]), classes2(["semiotic-shape"])])]);
  })();
  var iconStarburst = /* @__PURE__ */ svg([/* @__PURE__ */ viewBox3(0)(0)(40)(40), /* @__PURE__ */ classes2(["semiotic-icon"])])([/* @__PURE__ */ circle([/* @__PURE__ */ cx3(20), /* @__PURE__ */ cy3(20), /* @__PURE__ */ r3(4), /* @__PURE__ */ classes2(["semiotic-shape"])]), /* @__PURE__ */ line([/* @__PURE__ */ x12(20), /* @__PURE__ */ y12(4), /* @__PURE__ */ x23(20), /* @__PURE__ */ y23(12), /* @__PURE__ */ classes2(["semiotic-line"])]), /* @__PURE__ */ line([/* @__PURE__ */ x12(20), /* @__PURE__ */ y12(28), /* @__PURE__ */ x23(20), /* @__PURE__ */ y23(36), /* @__PURE__ */ classes2(["semiotic-line"])]), /* @__PURE__ */ line([/* @__PURE__ */ x12(4), /* @__PURE__ */ y12(20), /* @__PURE__ */ x23(12), /* @__PURE__ */ y23(20), /* @__PURE__ */ classes2(["semiotic-line"])]), /* @__PURE__ */ line([/* @__PURE__ */ x12(28), /* @__PURE__ */ y12(20), /* @__PURE__ */ x23(36), /* @__PURE__ */ y23(20), /* @__PURE__ */ classes2(["semiotic-line"])])]);
  var iconScattered = /* @__PURE__ */ svg([/* @__PURE__ */ viewBox3(0)(0)(40)(40), /* @__PURE__ */ classes2(["semiotic-icon"])])([/* @__PURE__ */ circle([/* @__PURE__ */ cx3(8), /* @__PURE__ */ cy3(10), /* @__PURE__ */ r3(3), /* @__PURE__ */ classes2(["semiotic-shape"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(32), /* @__PURE__ */ cy3(8), /* @__PURE__ */ r3(3), /* @__PURE__ */ classes2(["semiotic-shape"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(20), /* @__PURE__ */ cy3(20), /* @__PURE__ */ r3(3), /* @__PURE__ */ classes2(["semiotic-shape"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(6), /* @__PURE__ */ cy3(32), /* @__PURE__ */ r3(3), /* @__PURE__ */ classes2(["semiotic-shape"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(34), /* @__PURE__ */ cy3(30), /* @__PURE__ */ r3(3), /* @__PURE__ */ classes2(["semiotic-shape"])])]);
  var iconRefresh = /* @__PURE__ */ (function() {
    return svg([viewBox3(0)(0)(40)(40), classes2(["semiotic-icon", "semiotic-icon--inline"])])([path2([d2([m(Abs.value)(20)(8), a2(Abs.value)(12)(12)(0)(Arc1.value)(Sweep1.value)(8)(20)]), classes2(["semiotic-arc"])]), polygon([points([new Tuple(4, 12), new Tuple(8, 20), new Tuple(12, 12)]), classes2(["semiotic-shape"])])]);
  })();
  var iconQuadrants = /* @__PURE__ */ svg([/* @__PURE__ */ viewBox3(0)(0)(40)(40), /* @__PURE__ */ classes2(["semiotic-icon"])])([/* @__PURE__ */ line([/* @__PURE__ */ x12(20), /* @__PURE__ */ y12(4), /* @__PURE__ */ x23(20), /* @__PURE__ */ y23(36), /* @__PURE__ */ classes2(["semiotic-line-thin"])]), /* @__PURE__ */ line([/* @__PURE__ */ x12(4), /* @__PURE__ */ y12(20), /* @__PURE__ */ x23(36), /* @__PURE__ */ y23(20), /* @__PURE__ */ classes2(["semiotic-line-thin"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(10), /* @__PURE__ */ cy3(10), /* @__PURE__ */ r3(4), /* @__PURE__ */ classes2(["semiotic-shape"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(30), /* @__PURE__ */ cy3(10), /* @__PURE__ */ r3(4), /* @__PURE__ */ classes2(["semiotic-shape"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(10), /* @__PURE__ */ cy3(30), /* @__PURE__ */ r3(4), /* @__PURE__ */ classes2(["semiotic-shape"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(30), /* @__PURE__ */ cy3(30), /* @__PURE__ */ r3(4), /* @__PURE__ */ classes2(["semiotic-shape"])])]);
  var iconOverlap = /* @__PURE__ */ svg([/* @__PURE__ */ viewBox3(0)(0)(40)(40), /* @__PURE__ */ classes2(["semiotic-icon"])])([/* @__PURE__ */ circle([/* @__PURE__ */ cx3(15), /* @__PURE__ */ cy3(20), /* @__PURE__ */ r3(10), /* @__PURE__ */ classes2(["semiotic-shape-stroke"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(25), /* @__PURE__ */ cy3(20), /* @__PURE__ */ r3(10), /* @__PURE__ */ classes2(["semiotic-shape-stroke"])])]);
  var iconHorizontal = /* @__PURE__ */ (function() {
    return svg([viewBox3(0)(0)(40)(40), classes2(["semiotic-icon"])])([line([x12(4), y12(20), x23(36), y23(20), classes2(["semiotic-line"])]), polygon([points([new Tuple(12, 14), new Tuple(4, 20), new Tuple(12, 26)]), classes2(["semiotic-shape"])]), polygon([points([new Tuple(28, 14), new Tuple(36, 20), new Tuple(28, 26)]), classes2(["semiotic-shape"])]), circle([cx3(20), cy3(20), r3(3), classes2(["semiotic-shape"])])]);
  })();
  var iconDots = /* @__PURE__ */ svg([/* @__PURE__ */ viewBox3(0)(0)(40)(40), /* @__PURE__ */ classes2(["semiotic-icon"])])([/* @__PURE__ */ circle([/* @__PURE__ */ cx3(13), /* @__PURE__ */ cy3(13), /* @__PURE__ */ r3(5), /* @__PURE__ */ classes2(["semiotic-shape"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(27), /* @__PURE__ */ cy3(13), /* @__PURE__ */ r3(5), /* @__PURE__ */ classes2(["semiotic-shape"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(13), /* @__PURE__ */ cy3(27), /* @__PURE__ */ r3(5), /* @__PURE__ */ classes2(["semiotic-shape"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(27), /* @__PURE__ */ cy3(27), /* @__PURE__ */ r3(5), /* @__PURE__ */ classes2(["semiotic-shape"])])]);
  var iconConnected = /* @__PURE__ */ svg([/* @__PURE__ */ viewBox3(0)(0)(40)(40), /* @__PURE__ */ classes2(["semiotic-icon"])])([/* @__PURE__ */ line([/* @__PURE__ */ x12(10), /* @__PURE__ */ y12(20), /* @__PURE__ */ x23(30), /* @__PURE__ */ y23(20), /* @__PURE__ */ classes2(["semiotic-line"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(10), /* @__PURE__ */ cy3(20), /* @__PURE__ */ r3(5), /* @__PURE__ */ classes2(["semiotic-shape"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(30), /* @__PURE__ */ cy3(20), /* @__PURE__ */ r3(5), /* @__PURE__ */ classes2(["semiotic-shape"])])]);
  var iconClustered = /* @__PURE__ */ svg([/* @__PURE__ */ viewBox3(0)(0)(40)(40), /* @__PURE__ */ classes2(["semiotic-icon"])])([/* @__PURE__ */ circle([/* @__PURE__ */ cx3(20), /* @__PURE__ */ cy3(20), /* @__PURE__ */ r3(4), /* @__PURE__ */ classes2(["semiotic-shape"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(14), /* @__PURE__ */ cy3(16), /* @__PURE__ */ r3(3), /* @__PURE__ */ classes2(["semiotic-shape"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(26), /* @__PURE__ */ cy3(17), /* @__PURE__ */ r3(3), /* @__PURE__ */ classes2(["semiotic-shape"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(15), /* @__PURE__ */ cy3(25), /* @__PURE__ */ r3(3), /* @__PURE__ */ classes2(["semiotic-shape"])]), /* @__PURE__ */ circle([/* @__PURE__ */ cx3(25), /* @__PURE__ */ cy3(24), /* @__PURE__ */ r3(3), /* @__PURE__ */ classes2(["semiotic-shape"])])]);
  var iconCircle = /* @__PURE__ */ svg([/* @__PURE__ */ viewBox3(0)(0)(40)(40), /* @__PURE__ */ classes2(["semiotic-icon"])])([/* @__PURE__ */ circle([/* @__PURE__ */ cx3(20), /* @__PURE__ */ cy3(20), /* @__PURE__ */ r3(12), /* @__PURE__ */ classes2(["semiotic-shape"])])]);
  var iconBars = /* @__PURE__ */ svg([/* @__PURE__ */ viewBox3(0)(0)(40)(40), /* @__PURE__ */ classes2(["semiotic-icon"])])([/* @__PURE__ */ rect([/* @__PURE__ */ x5(10), /* @__PURE__ */ y5(8), /* @__PURE__ */ width10(6), /* @__PURE__ */ height10(24), /* @__PURE__ */ classes2(["semiotic-shape"])]), /* @__PURE__ */ rect([/* @__PURE__ */ x5(24), /* @__PURE__ */ y5(8), /* @__PURE__ */ width10(6), /* @__PURE__ */ height10(24), /* @__PURE__ */ classes2(["semiotic-shape"])])]);
  var goldenAngle = /* @__PURE__ */ (function() {
    return pi * (3 - sqrt(5));
  })();
  var phyllotaxisOffset = function(idx) {
    var i2 = toNumber(idx);
    var radius = 8 * sqrt(i2);
    var angle = i2 * goldenAngle;
    return {
      x: radius * cos(angle),
      y: radius * sin(angle)
    };
  };
  var forceIcon = function(state3) {
    return function(forceId) {
      return function(icon) {
        return function(tooltip) {
          var isEnabled = member5(forceId)(state3.enabledForces);
          return button2([classes(append14(["semiotic-button"])((function() {
            if (isEnabled) {
              return ["semiotic-button--active"];
            }
            ;
            return [];
          })())), title2(tooltip), onClick(function(v2) {
            return new ToggleForce(forceId);
          })])([icon]);
        };
      };
    };
  };
  var eqForcePreset = {
    eq: function(x7) {
      return function(y7) {
        if (x7 instanceof PresetStandard && y7 instanceof PresetStandard) {
          return true;
        }
        ;
        if (x7 instanceof PresetClustered && y7 instanceof PresetClustered) {
          return true;
        }
        ;
        if (x7 instanceof PresetQuadrants && y7 instanceof PresetQuadrants) {
          return true;
        }
        ;
        return false;
      };
    }
  };
  var eq13 = /* @__PURE__ */ eq(/* @__PURE__ */ eqMaybe(eqForcePreset));
  var presetIcon = function(state3) {
    return function(preset) {
      return function(icon) {
        return function(tooltip) {
          var isActive = eq13(state3.activePreset)(new Just(preset));
          return button2([classes(append14(["semiotic-button"])((function() {
            if (isActive) {
              return ["semiotic-button--active"];
            }
            ;
            return [];
          })())), title2(tooltip), onClick(function(v2) {
            return new ApplyPreset(preset);
          })])([icon]);
        };
      };
    };
  };
  var easeInOutCubic2 = function(t2) {
    var pow6 = function(x7) {
      return function(v2) {
        return x7 * x7 * x7;
      };
    };
    var $96 = t2 < 0.5;
    if ($96) {
      return 4 * t2 * t2 * t2;
    }
    ;
    return 1 - pow6(-2 * t2 + 2)(3) / 2;
  };
  var doRender = function(dictMonadAff) {
    var liftEffect11 = liftEffect(monadEffectHalogenM(dictMonadAff.MonadEffect0()));
    return bind8(get2)(function(state3) {
      if (state3.simHandle instanceof Just && state3.model instanceof Just) {
        return liftEffect11(function __do7() {
          var currentNodes = state3.simHandle.value0.getNodes();
          var visibleIds = fromFoldable33(state3.visibleNodeIds);
          var scene = buildSceneData(currentNodes)(visibleIds)(state3.enteringProgress)(state3.exitingNodes)(state3.model.value0.links);
          return renderScene(scene)();
        });
      }
      ;
      return pure15(unit);
    });
  };
  var computeQuadrantTargets = function(nodes) {
    var grouped = groupBy(function(a3) {
      return function(b2) {
        return a3.group === b2.group;
      };
    })(sortWith2(function(v2) {
      return v2.group;
    })(nodes));
    var computeGroupTargets = function(groupNodes) {
      var groupArray = toArray(groupNodes);
      var first = head2(groupNodes);
      var center2 = quadrantCenter(first.group);
      return mapWithIndex2(function(idx) {
        return function(n) {
          var offset = phyllotaxisOffset(idx);
          return new Tuple(n.id, {
            x: center2.x + offset.x,
            y: center2.y + offset.y
          });
        };
      })(groupArray);
    };
    var allTargets = concatMap(computeGroupTargets)(grouped);
    return fromFoldable43(allTargets);
  };
  var categoryIcon = function(state3) {
    return function(catId) {
      return function(color2) {
        return function(icon) {
          return function(tooltip) {
            var isVisible = member12(catId)(state3.shownCategories);
            return button2([classes(append14(["semiotic-button"])((function() {
              if (isVisible) {
                return ["semiotic-button--active"];
              }
              ;
              return [];
            })())), style2("--semiotic-color: " + (color2 + ";")), title2(tooltip), onClick(function(v2) {
              return new ToggleCategory(catId);
            })])([icon]);
          };
        };
      };
    };
  };
  var renderControlPanel = function(state3) {
    return div4([classes(["semiotic-panel"])])([div4([classes(["semiotic-row"])])([categoryIcon(state3)(0)("#1e5a8c")(iconCircle)("RESEARCH"), categoryIcon(state3)(1)("#d4a024")(iconTriangle)("INDUSTRY"), categoryIcon(state3)(2)("#c41e3a")(iconBars)("GOVERNMENT"), categoryIcon(state3)(3)("#2d8b57")(iconDots)("COMMUNITY")]), div4([classes(["semiotic-row"])])([forceIcon(state3)(ForceCharge.value)(iconStarburst)("CHARGE"), forceIcon(state3)(ForceCollide2.value)(iconOverlap)("COLLIDE"), forceIcon(state3)(ForceLink2.value)(iconConnected)("LINKS"), forceIcon(state3)(ForceX.value)(iconHorizontal)("CENTER-X"), forceIcon(state3)(ForceY.value)(iconVertical)("CENTER-Y")]), div4([classes(["semiotic-row"])])([presetIcon(state3)(PresetStandard.value)(iconClustered)("CENTERED"), presetIcon(state3)(PresetClustered.value)(iconScattered)("FLOATING"), presetIcon(state3)(PresetQuadrants.value)(iconQuadrants)("QUADRANTS")]), div4([classes(["semiotic-row", "semiotic-row--footer"])])([button2([classes(["semiotic-button", "semiotic-button--wide"]), title2("Generate new network"), onClick(function(v2) {
      return RegenerateGraph.value;
    })])([iconRefresh, span4([classes(["semiotic-label"])])([text6("REGENERATE")])])]), div4([classes(["semiotic-row"])])([span4([classes(["v2-indicator"]), style2("font-size: 10px; color: #2d8b57; opacity: 0.7;")])([text6("V2: runSimulation API")])])]);
  };
  var render = function(state3) {
    return div4([classes(["force-playground-page"])])([div4([classes(["fullscreen-container", "force-playground-viz"])])([div4([id2("force-playground-container"), classes(["fullscreen-viz", "svg-container"])])([]), renderControlPanel(state3)])]);
  };
  var allCategories = /* @__PURE__ */ fromFoldable53([0, 1, 2, 3]);
  var handleAction = function(dictMonadAff) {
    var liftEffect11 = liftEffect(monadEffectHalogenM(dictMonadAff.MonadEffect0()));
    var doRender1 = doRender(dictMonadAff);
    return function(v2) {
      if (v2 instanceof Initialize2) {
        return handleAction(dictMonadAff)(RegenerateGraph.value);
      }
      ;
      if (v2 instanceof Finalize2) {
        return liftEffect11(unregisterSimulation);
      }
      ;
      if (v2 instanceof SimTick) {
        return bind8(get2)(function(state3) {
          if (state3.simHandle instanceof Just && state3.model instanceof Just) {
            var v1 = tickProgressMap2(transitionDelta)(state3.enteringProgress);
            var v22 = tickTransitions2(transitionDelta)(state3.exitingNodes);
            var newQuadrantProgress = min9(1)(state3.quadrantProgress + transitionDelta);
            var isAnimatingQuadrants = state3.quadrantProgress < 1 && !isEmpty(state3.quadrantTargets);
            return discard3(when7(isAnimatingQuadrants)(liftEffect11((function() {
              var targetObj = mapToPositionObject(state3.quadrantTargets);
              var t2 = easeInOutCubic2(newQuadrantProgress);
              var startObj = mapToPositionObject(state3.quadrantStarts);
              return state3.simHandle.value0.interpolatePositions(startObj)(targetObj)(t2);
            })())))(function() {
              return discard3(modify_3(function(v3) {
                var $107 = {};
                for (var $108 in v3) {
                  if ({}.hasOwnProperty.call(v3, $108)) {
                    $107[$108] = v3[$108];
                  }
                  ;
                }
                ;
                $107.enteringProgress = v1.active;
                $107.exitingNodes = v22.active;
                $107.quadrantProgress = newQuadrantProgress;
                return $107;
              }))(function() {
                return bind8(liftEffect11(state3.simHandle.value0.getNodes))(function(currentNodes) {
                  return liftEffect11((function() {
                    var visibleIds = fromFoldable33(state3.visibleNodeIds);
                    var scene = buildSceneData(currentNodes)(visibleIds)(v1.active)(v22.active)(state3.model.value0.links);
                    return renderScene(scene);
                  })());
                });
              });
            });
          }
          ;
          return pure15(unit);
        });
      }
      ;
      if (v2 instanceof SimCompleted) {
        return liftEffect11(log2("V2: Simulation converged"));
      }
      ;
      if (v2 instanceof RegenerateGraph) {
        return discard3(liftEffect11(clearContainer2("#force-playground-container")))(function() {
          return discard3(liftEffect11(log2("V2: Generating random network...")))(function() {
            return bind8(liftEffect11(generateGraph(defaultConfig)))(function(generated) {
              var model = fromGeneratedGraph(generated);
              return discard3(liftEffect11(log2("V2: Generated: " + (show21(length(model.nodes)) + (" nodes, " + (show21(length(model.links)) + " links"))))))(function() {
                return bind8(liftEffect11(createSimulation(model)))(function(result) {
                  return discard3(liftEffect11(registerSimulation(result.handle.reheat)))(function() {
                    return discard3(liftEffect11(renderSVGContainer("#force-playground-container")))(function() {
                      return bind8(liftEffect11(toHalogenEmitter(result.events)))(function(halogenEmitter) {
                        return discard3($$void11(subscribe3(mapFlipped3(halogenEmitter)(function(event) {
                          if (event instanceof Tick) {
                            return new SimTick(event.value0.alpha);
                          }
                          ;
                          if (event instanceof Completed) {
                            return SimCompleted.value;
                          }
                          ;
                          if (event instanceof Started) {
                            return new SimTick(1);
                          }
                          ;
                          if (event instanceof Stopped) {
                            return SimCompleted.value;
                          }
                          ;
                          throw new Error("Failed pattern match at Component.ForcePlayground (line 538, column 55 - line 542, column 30): " + [event.constructor.name]);
                        }))))(function() {
                          var allNodeIds = fromFoldable53(map31(function(v1) {
                            return v1.id;
                          })(model.nodes));
                          return discard3(modify_3(function(v1) {
                            var $118 = {};
                            for (var $119 in v1) {
                              if ({}.hasOwnProperty.call(v1, $119)) {
                                $118[$119] = v1[$119];
                              }
                              ;
                            }
                            ;
                            $118.model = new Just(model);
                            $118.simHandle = new Just(result.handle);
                            $118.currentSetup = result.initialSetup;
                            $118.enabledForces = allForces;
                            $118.activePreset = new Just(PresetStandard.value);
                            $118.shownCategories = allCategories;
                            $118.visibleNodeIds = allNodeIds;
                            $118.enteringProgress = empty2;
                            $118.exitingNodes = [];
                            $118.quadrantTargets = empty2;
                            $118.quadrantStarts = empty2;
                            $118.quadrantProgress = 1;
                            return $118;
                          }))(function() {
                            return doRender1;
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          });
        });
      }
      ;
      if (v2 instanceof ToggleForce) {
        return bind8(get2)(function(state3) {
          if (state3.simHandle instanceof Nothing) {
            return pure15(unit);
          }
          ;
          if (state3.simHandle instanceof Just) {
            var isEnabled = member5(v2.value0)(state3.enabledForces);
            var newEnabledForces = (function() {
              if (isEnabled) {
                return $$delete5(v2.value0)(state3.enabledForces);
              }
              ;
              return insert10(v2.value0)(state3.enabledForces);
            })();
            var newSetup = (function() {
              if (isEnabled) {
                return removeForceFromSetup(v2.value0)(state3.currentSetup);
              }
              ;
              return addForceToSetup(v2.value0)(state3.currentSetup);
            })();
            return discard3(liftEffect11(state3.simHandle.value0.updateSetup(newSetup)))(function() {
              return modify_3(function(v1) {
                var $124 = {};
                for (var $125 in v1) {
                  if ({}.hasOwnProperty.call(v1, $125)) {
                    $124[$125] = v1[$125];
                  }
                  ;
                }
                ;
                $124.currentSetup = newSetup;
                $124.enabledForces = newEnabledForces;
                $124.activePreset = Nothing.value;
                return $124;
              });
            });
          }
          ;
          throw new Error("Failed pattern match at Component.ForcePlayground (line 567, column 5 - line 585, column 12): " + [state3.simHandle.constructor.name]);
        });
      }
      ;
      if (v2 instanceof ApplyPreset) {
        return bind8(get2)(function(state3) {
          if (state3.simHandle instanceof Nothing) {
            return pure15(unit);
          }
          ;
          if (state3.model instanceof Nothing) {
            return pure15(unit);
          }
          ;
          if (state3.simHandle instanceof Just && state3.model instanceof Just) {
            var targetForces = presetForces(v2.value0);
            var emptySetup = foldl2(function(s2) {
              return function(fid) {
                return removeForceFromSetup(fid)(s2);
              };
            })(initialSetup)(toUnfoldable1(allForces));
            var finalSetup = foldl2(function(s2) {
              return function(fid) {
                return addForceToSetup(fid)(s2);
              };
            })(emptySetup)(toUnfoldable1(targetForces));
            return discard3(liftEffect11(state3.simHandle.value0.updateSetup(finalSetup)))(function() {
              if (v2.value0 instanceof PresetQuadrants) {
                return bind8(liftEffect11(state3.simHandle.value0.getNodes))(function(currentNodes) {
                  var targetPositions = computeQuadrantTargets(state3.model.value0.nodes);
                  var startPositions = fromFoldable43(map31(function(n) {
                    return new Tuple(n.id, {
                      x: n.x,
                      y: n.y
                    });
                  })(currentNodes));
                  return modify_3(function(v1) {
                    var $132 = {};
                    for (var $133 in v1) {
                      if ({}.hasOwnProperty.call(v1, $133)) {
                        $132[$133] = v1[$133];
                      }
                      ;
                    }
                    ;
                    $132.currentSetup = finalSetup;
                    $132.enabledForces = targetForces;
                    $132.activePreset = new Just(v2.value0);
                    $132.quadrantStarts = startPositions;
                    $132.quadrantTargets = targetPositions;
                    $132.quadrantProgress = 0;
                    return $132;
                  });
                });
              }
              ;
              return modify_3(function(v1) {
                var $135 = {};
                for (var $136 in v1) {
                  if ({}.hasOwnProperty.call(v1, $136)) {
                    $135[$136] = v1[$136];
                  }
                  ;
                }
                ;
                $135.currentSetup = finalSetup;
                $135.enabledForces = targetForces;
                $135.activePreset = new Just(v2.value0);
                $135.quadrantTargets = empty2;
                $135.quadrantStarts = empty2;
                $135.quadrantProgress = 1;
                return $135;
              });
            });
          }
          ;
          throw new Error("Failed pattern match at Component.ForcePlayground (line 589, column 5 - line 637, column 16): " + [state3.simHandle.constructor.name, state3.model.constructor.name]);
        });
      }
      ;
      if (v2 instanceof ToggleCategory) {
        return bind8(get2)(function(state3) {
          if (state3.simHandle instanceof Just && state3.model instanceof Just) {
            var isCurrentlyShown = member12(v2.value0)(state3.shownCategories);
            var newShownCategories = (function() {
              if (isCurrentlyShown) {
                return delete1(v2.value0)(state3.shownCategories);
              }
              ;
              return insert12(v2.value0)(state3.shownCategories);
            })();
            var newVisibleIds = fromFoldable53(map31(function(v1) {
              return v1.id;
            })(filter(function(n) {
              return member12(n.group)(newShownCategories);
            })(state3.model.value0.nodes)));
            var removedIds = difference6(state3.visibleNodeIds)(newVisibleIds);
            return bind8(liftEffect11(state3.simHandle.value0.getNodes))(function(currentNodes) {
              var removedNodes = filter(function(n) {
                return member12(n.id)(removedIds);
              })(currentNodes);
              var newExiting = startTransitions(removedNodes);
              var addedIds = difference6(newVisibleIds)(state3.visibleNodeIds);
              var newEntering = startProgress2(fromFoldable33(addedIds))(state3.enteringProgress);
              return discard3(liftEffect11(state3.simHandle.value0.reheat))(function() {
                return modify_3(function(v1) {
                  var $144 = {};
                  for (var $145 in v1) {
                    if ({}.hasOwnProperty.call(v1, $145)) {
                      $144[$145] = v1[$145];
                    }
                    ;
                  }
                  ;
                  $144.shownCategories = newShownCategories;
                  $144.visibleNodeIds = newVisibleIds;
                  $144.enteringProgress = newEntering;
                  $144.exitingNodes = append14(state3.exitingNodes)(newExiting);
                  return $144;
                });
              });
            });
          }
          ;
          return pure15(unit);
        });
      }
      ;
      if (v2 instanceof ShowAllCategories) {
        return bind8(get2)(function(state3) {
          if (state3.simHandle instanceof Just && state3.model instanceof Just) {
            var allNodeIds = fromFoldable53(map31(function(v1) {
              return v1.id;
            })(state3.model.value0.nodes));
            var addedIds = difference6(allNodeIds)(state3.visibleNodeIds);
            var newEntering = startProgress2(fromFoldable33(addedIds))(state3.enteringProgress);
            return discard3(liftEffect11(state3.simHandle.value0.reheat))(function() {
              return modify_3(function(v1) {
                var $152 = {};
                for (var $153 in v1) {
                  if ({}.hasOwnProperty.call(v1, $153)) {
                    $152[$153] = v1[$153];
                  }
                  ;
                }
                ;
                $152.shownCategories = allCategories;
                $152.visibleNodeIds = allNodeIds;
                $152.enteringProgress = newEntering;
                return $152;
              });
            });
          }
          ;
          return pure15(unit);
        });
      }
      ;
      throw new Error("Failed pattern match at Component.ForcePlayground (line 459, column 16 - line 693, column 24): " + [v2.constructor.name]);
    };
  };
  var component = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return {
          model: Nothing.value,
          simHandle: Nothing.value,
          currentSetup: initialSetup,
          enabledForces: allForces,
          activePreset: new Just(PresetStandard.value),
          shownCategories: allCategories,
          visibleNodeIds: empty3,
          enteringProgress: empty2,
          exitingNodes: [],
          quadrantTargets: empty2,
          quadrantStarts: empty2,
          quadrantProgress: 1
        };
      },
      render,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        handleAction: handleAction(dictMonadAff),
        initialize: new Just(Initialize2.value),
        finalize: new Just(Finalize2.value)
      })
    });
  };

  // output/Hylograph.Website.Types/index.js
  var Home = /* @__PURE__ */ (function() {
    function Home2() {
    }
    ;
    Home2.value = new Home2();
    return Home2;
  })();
  var GettingStarted = /* @__PURE__ */ (function() {
    function GettingStarted2() {
    }
    ;
    GettingStarted2.value = new GettingStarted2();
    return GettingStarted2;
  })();
  var HowtoIndex = /* @__PURE__ */ (function() {
    function HowtoIndex2() {
    }
    ;
    HowtoIndex2.value = new HowtoIndex2();
    return HowtoIndex2;
  })();
  var HowtoTransitions = /* @__PURE__ */ (function() {
    function HowtoTransitions2() {
    }
    ;
    HowtoTransitions2.value = new HowtoTransitions2();
    return HowtoTransitions2;
  })();
  var HowtoForceGraphs = /* @__PURE__ */ (function() {
    function HowtoForceGraphs2() {
    }
    ;
    HowtoForceGraphs2.value = new HowtoForceGraphs2();
    return HowtoForceGraphs2;
  })();
  var HowtoHierarchical = /* @__PURE__ */ (function() {
    function HowtoHierarchical2() {
    }
    ;
    HowtoHierarchical2.value = new HowtoHierarchical2();
    return HowtoHierarchical2;
  })();
  var HowtoEvents = /* @__PURE__ */ (function() {
    function HowtoEvents2() {
    }
    ;
    HowtoEvents2.value = new HowtoEvents2();
    return HowtoEvents2;
  })();
  var HowtoLoadingData = /* @__PURE__ */ (function() {
    function HowtoLoadingData2() {
    }
    ;
    HowtoLoadingData2.value = new HowtoLoadingData2();
    return HowtoLoadingData2;
  })();
  var HowtoTooltips = /* @__PURE__ */ (function() {
    function HowtoTooltips2() {
    }
    ;
    HowtoTooltips2.value = new HowtoTooltips2();
    return HowtoTooltips2;
  })();
  var HowtoDebugging = /* @__PURE__ */ (function() {
    function HowtoDebugging2() {
    }
    ;
    HowtoDebugging2.value = new HowtoDebugging2();
    return HowtoDebugging2;
  })();
  var HowtoPerformance = /* @__PURE__ */ (function() {
    function HowtoPerformance2() {
    }
    ;
    HowtoPerformance2.value = new HowtoPerformance2();
    return HowtoPerformance2;
  })();
  var Understanding = /* @__PURE__ */ (function() {
    function Understanding2() {
    }
    ;
    Understanding2.value = new Understanding2();
    return Understanding2;
  })();
  var UnderstandingGrammar = /* @__PURE__ */ (function() {
    function UnderstandingGrammar2() {
    }
    ;
    UnderstandingGrammar2.value = new UnderstandingGrammar2();
    return UnderstandingGrammar2;
  })();
  var UnderstandingAttributes = /* @__PURE__ */ (function() {
    function UnderstandingAttributes2() {
    }
    ;
    UnderstandingAttributes2.value = new UnderstandingAttributes2();
    return UnderstandingAttributes2;
  })();
  var UnderstandingSelections = /* @__PURE__ */ (function() {
    function UnderstandingSelections2() {
    }
    ;
    UnderstandingSelections2.value = new UnderstandingSelections2();
    return UnderstandingSelections2;
  })();
  var UnderstandingScenes = /* @__PURE__ */ (function() {
    function UnderstandingScenes2() {
    }
    ;
    UnderstandingScenes2.value = new UnderstandingScenes2();
    return UnderstandingScenes2;
  })();
  var Reference = /* @__PURE__ */ (function() {
    function Reference2() {
    }
    ;
    Reference2.value = new Reference2();
    return Reference2;
  })();
  var ReferenceModule = /* @__PURE__ */ (function() {
    function ReferenceModule2(value0) {
      this.value0 = value0;
    }
    ;
    ReferenceModule2.create = function(value0) {
      return new ReferenceModule2(value0);
    };
    return ReferenceModule2;
  })();
  var TourIndex = /* @__PURE__ */ (function() {
    function TourIndex2() {
    }
    ;
    TourIndex2.value = new TourIndex2();
    return TourIndex2;
  })();
  var TourScrolly = /* @__PURE__ */ (function() {
    function TourScrolly2() {
    }
    ;
    TourScrolly2.value = new TourScrolly2();
    return TourScrolly2;
  })();
  var TourMotionScrollyHATS = /* @__PURE__ */ (function() {
    function TourMotionScrollyHATS2() {
    }
    ;
    TourMotionScrollyHATS2.value = new TourMotionScrollyHATS2();
    return TourMotionScrollyHATS2;
  })();
  var TourSimpsons = /* @__PURE__ */ (function() {
    function TourSimpsons2() {
    }
    ;
    TourSimpsons2.value = new TourSimpsons2();
    return TourSimpsons2;
  })();
  var Showcase = /* @__PURE__ */ (function() {
    function Showcase2() {
    }
    ;
    Showcase2.value = new Showcase2();
    return Showcase2;
  })();
  var ShowcaseLuaEdge = /* @__PURE__ */ (function() {
    function ShowcaseLuaEdge2() {
    }
    ;
    ShowcaseLuaEdge2.value = new ShowcaseLuaEdge2();
    return ShowcaseLuaEdge2;
  })();
  var SimpsonsV2 = /* @__PURE__ */ (function() {
    function SimpsonsV22() {
    }
    ;
    SimpsonsV22.value = new SimpsonsV22();
    return SimpsonsV22;
  })();
  var ModuleGraph = /* @__PURE__ */ (function() {
    function ModuleGraph2() {
    }
    ;
    ModuleGraph2.value = new ModuleGraph2();
    return ModuleGraph2;
  })();
  var ForcePlayground = /* @__PURE__ */ (function() {
    function ForcePlayground2() {
    }
    ;
    ForcePlayground2.value = new ForcePlayground2();
    return ForcePlayground2;
  })();
  var TreeBuilder = /* @__PURE__ */ (function() {
    function TreeBuilder2() {
    }
    ;
    TreeBuilder2.value = new TreeBuilder2();
    return TreeBuilder2;
  })();
  var Acknowledgements = /* @__PURE__ */ (function() {
    function Acknowledgements2() {
    }
    ;
    Acknowledgements2.value = new Acknowledgements2();
    return Acknowledgements2;
  })();
  var NotFound = /* @__PURE__ */ (function() {
    function NotFound2() {
    }
    ;
    NotFound2.value = new NotFound2();
    return NotFound2;
  })();
  var showRoute = {
    show: function(v2) {
      if (v2 instanceof Home) {
        return "Home";
      }
      ;
      if (v2 instanceof GettingStarted) {
        return "Getting Started";
      }
      ;
      if (v2 instanceof HowtoIndex) {
        return "How-to Guides";
      }
      ;
      if (v2 instanceof HowtoTransitions) {
        return "How-to: Transitions";
      }
      ;
      if (v2 instanceof HowtoForceGraphs) {
        return "How-to: Force Graphs";
      }
      ;
      if (v2 instanceof HowtoHierarchical) {
        return "How-to: Hierarchical Data";
      }
      ;
      if (v2 instanceof HowtoEvents) {
        return "How-to: Events";
      }
      ;
      if (v2 instanceof HowtoLoadingData) {
        return "How-to: Loading Data";
      }
      ;
      if (v2 instanceof HowtoTooltips) {
        return "How-to: Tooltips";
      }
      ;
      if (v2 instanceof HowtoDebugging) {
        return "How-to: Debugging";
      }
      ;
      if (v2 instanceof HowtoPerformance) {
        return "How-to: Performance";
      }
      ;
      if (v2 instanceof Understanding) {
        return "Understanding";
      }
      ;
      if (v2 instanceof UnderstandingGrammar) {
        return "Understanding: Grammar";
      }
      ;
      if (v2 instanceof UnderstandingAttributes) {
        return "Understanding: Attributes";
      }
      ;
      if (v2 instanceof UnderstandingSelections) {
        return "Understanding: Selections";
      }
      ;
      if (v2 instanceof UnderstandingScenes) {
        return "Understanding: Scenes";
      }
      ;
      if (v2 instanceof Reference) {
        return "API Reference";
      }
      ;
      if (v2 instanceof ReferenceModule) {
        return "Module: " + v2.value0;
      }
      ;
      if (v2 instanceof TourIndex) {
        return "Tour";
      }
      ;
      if (v2 instanceof TourScrolly) {
        return "Tour: From the Basics";
      }
      ;
      if (v2 instanceof TourMotionScrollyHATS) {
        return "Tour: Motion & Animation";
      }
      ;
      if (v2 instanceof TourSimpsons) {
        return "Tour: Simpson's Paradox";
      }
      ;
      if (v2 instanceof Showcase) {
        return "Showcase";
      }
      ;
      if (v2 instanceof ShowcaseLuaEdge) {
        return "Lua Edge Router";
      }
      ;
      if (v2 instanceof SimpsonsV2) {
        return "Simpson's Paradox";
      }
      ;
      if (v2 instanceof ModuleGraph) {
        return "Module Graph";
      }
      ;
      if (v2 instanceof ForcePlayground) {
        return "Force Playground";
      }
      ;
      if (v2 instanceof TreeBuilder) {
        return "Tree Builder";
      }
      ;
      if (v2 instanceof Acknowledgements) {
        return "Acknowledgements";
      }
      ;
      if (v2 instanceof NotFound) {
        return "Not Found";
      }
      ;
      throw new Error("Failed pattern match at Hylograph.Website.Types (line 122, column 1 - line 152, column 30): " + [v2.constructor.name]);
    }
  };
  var eqRoute = {
    eq: function(x7) {
      return function(y7) {
        if (x7 instanceof Home && y7 instanceof Home) {
          return true;
        }
        ;
        if (x7 instanceof GettingStarted && y7 instanceof GettingStarted) {
          return true;
        }
        ;
        if (x7 instanceof HowtoIndex && y7 instanceof HowtoIndex) {
          return true;
        }
        ;
        if (x7 instanceof HowtoTransitions && y7 instanceof HowtoTransitions) {
          return true;
        }
        ;
        if (x7 instanceof HowtoForceGraphs && y7 instanceof HowtoForceGraphs) {
          return true;
        }
        ;
        if (x7 instanceof HowtoHierarchical && y7 instanceof HowtoHierarchical) {
          return true;
        }
        ;
        if (x7 instanceof HowtoEvents && y7 instanceof HowtoEvents) {
          return true;
        }
        ;
        if (x7 instanceof HowtoLoadingData && y7 instanceof HowtoLoadingData) {
          return true;
        }
        ;
        if (x7 instanceof HowtoTooltips && y7 instanceof HowtoTooltips) {
          return true;
        }
        ;
        if (x7 instanceof HowtoDebugging && y7 instanceof HowtoDebugging) {
          return true;
        }
        ;
        if (x7 instanceof HowtoPerformance && y7 instanceof HowtoPerformance) {
          return true;
        }
        ;
        if (x7 instanceof Understanding && y7 instanceof Understanding) {
          return true;
        }
        ;
        if (x7 instanceof UnderstandingGrammar && y7 instanceof UnderstandingGrammar) {
          return true;
        }
        ;
        if (x7 instanceof UnderstandingAttributes && y7 instanceof UnderstandingAttributes) {
          return true;
        }
        ;
        if (x7 instanceof UnderstandingSelections && y7 instanceof UnderstandingSelections) {
          return true;
        }
        ;
        if (x7 instanceof UnderstandingScenes && y7 instanceof UnderstandingScenes) {
          return true;
        }
        ;
        if (x7 instanceof Reference && y7 instanceof Reference) {
          return true;
        }
        ;
        if (x7 instanceof ReferenceModule && y7 instanceof ReferenceModule) {
          return x7.value0 === y7.value0;
        }
        ;
        if (x7 instanceof TourIndex && y7 instanceof TourIndex) {
          return true;
        }
        ;
        if (x7 instanceof TourScrolly && y7 instanceof TourScrolly) {
          return true;
        }
        ;
        if (x7 instanceof TourMotionScrollyHATS && y7 instanceof TourMotionScrollyHATS) {
          return true;
        }
        ;
        if (x7 instanceof TourSimpsons && y7 instanceof TourSimpsons) {
          return true;
        }
        ;
        if (x7 instanceof Showcase && y7 instanceof Showcase) {
          return true;
        }
        ;
        if (x7 instanceof ShowcaseLuaEdge && y7 instanceof ShowcaseLuaEdge) {
          return true;
        }
        ;
        if (x7 instanceof SimpsonsV2 && y7 instanceof SimpsonsV2) {
          return true;
        }
        ;
        if (x7 instanceof ModuleGraph && y7 instanceof ModuleGraph) {
          return true;
        }
        ;
        if (x7 instanceof ForcePlayground && y7 instanceof ForcePlayground) {
          return true;
        }
        ;
        if (x7 instanceof TreeBuilder && y7 instanceof TreeBuilder) {
          return true;
        }
        ;
        if (x7 instanceof Acknowledgements && y7 instanceof Acknowledgements) {
          return true;
        }
        ;
        if (x7 instanceof NotFound && y7 instanceof NotFound) {
          return true;
        }
        ;
        return false;
      };
    }
  };

  // output/Data.Semiring.Free/index.js
  var append15 = /* @__PURE__ */ append(semigroupList);
  var bind9 = /* @__PURE__ */ bind(bindList);
  var pure16 = /* @__PURE__ */ pure(applicativeList);
  var semiringFree = /* @__PURE__ */ (function() {
    return {
      add: function(v2) {
        return function(v1) {
          return append15(v2)(v1);
        };
      },
      zero: Nil.value,
      mul: function(v2) {
        return function(v1) {
          return bind9(v2)(function(xs) {
            return bind9(v1)(function(ys) {
              return pure16(append15(xs)(ys));
            });
          });
        };
      },
      one: singleton5(Nil.value)
    };
  })();
  var free2 = function(a3) {
    return singleton5(singleton5(a3));
  };

  // output/Data.Validation.Semiring/index.js
  var V = function(x7) {
    return x7;
  };
  var validation = function(v2) {
    return function(v1) {
      return function(v22) {
        if (v22 instanceof Left) {
          return v2(v22.value0);
        }
        ;
        if (v22 instanceof Right) {
          return v1(v22.value0);
        }
        ;
        throw new Error("Failed pattern match at Data.Validation.Semiring (line 49, column 1 - line 49, column 84): " + [v2.constructor.name, v1.constructor.name, v22.constructor.name]);
      };
    };
  };
  var invalid2 = function($113) {
    return V(Left.create($113));
  };
  var functorV = functorEither;
  var applyV = function(dictSemiring) {
    var mul4 = mul(dictSemiring);
    return {
      apply: function(v2) {
        return function(v1) {
          if (v2 instanceof Left && v1 instanceof Left) {
            return new Left(mul4(v2.value0)(v1.value0));
          }
          ;
          if (v2 instanceof Left) {
            return new Left(v2.value0);
          }
          ;
          if (v1 instanceof Left) {
            return new Left(v1.value0);
          }
          ;
          if (v2 instanceof Right && v1 instanceof Right) {
            return new Right(v2.value0(v1.value0));
          }
          ;
          throw new Error("Failed pattern match at Data.Validation.Semiring (line 90, column 1 - line 94, column 54): " + [v2.constructor.name, v1.constructor.name]);
        };
      },
      Functor0: function() {
        return functorV;
      }
    };
  };
  var applicativeV = function(dictSemiring) {
    var applyV1 = applyV(dictSemiring);
    return {
      pure: function($121) {
        return V(Right.create($121));
      },
      Apply0: function() {
        return applyV1;
      }
    };
  };
  var altV = function(dictSemiring) {
    var add6 = add(dictSemiring);
    return {
      alt: function(v2) {
        return function(v1) {
          if (v2 instanceof Left && v1 instanceof Left) {
            return new Left(add6(v2.value0)(v1.value0));
          }
          ;
          if (v2 instanceof Left) {
            return v1;
          }
          ;
          if (v2 instanceof Right) {
            return new Right(v2.value0);
          }
          ;
          throw new Error("Failed pattern match at Data.Validation.Semiring (line 105, column 1 - line 108, column 36): " + [v2.constructor.name, v1.constructor.name]);
        };
      },
      Functor0: function() {
        return functorV;
      }
    };
  };

  // output/Routing.Match.Error/index.js
  var UnexpectedPath = /* @__PURE__ */ (function() {
    function UnexpectedPath2(value0) {
      this.value0 = value0;
    }
    ;
    UnexpectedPath2.create = function(value0) {
      return new UnexpectedPath2(value0);
    };
    return UnexpectedPath2;
  })();
  var ExpectedBoolean = /* @__PURE__ */ (function() {
    function ExpectedBoolean2() {
    }
    ;
    ExpectedBoolean2.value = new ExpectedBoolean2();
    return ExpectedBoolean2;
  })();
  var ExpectedEnd = /* @__PURE__ */ (function() {
    function ExpectedEnd2() {
    }
    ;
    ExpectedEnd2.value = new ExpectedEnd2();
    return ExpectedEnd2;
  })();
  var ExpectedNumber = /* @__PURE__ */ (function() {
    function ExpectedNumber2() {
    }
    ;
    ExpectedNumber2.value = new ExpectedNumber2();
    return ExpectedNumber2;
  })();
  var ExpectedInt = /* @__PURE__ */ (function() {
    function ExpectedInt2() {
    }
    ;
    ExpectedInt2.value = new ExpectedInt2();
    return ExpectedInt2;
  })();
  var ExpectedString = /* @__PURE__ */ (function() {
    function ExpectedString2() {
    }
    ;
    ExpectedString2.value = new ExpectedString2();
    return ExpectedString2;
  })();
  var ExpectedQuery = /* @__PURE__ */ (function() {
    function ExpectedQuery2() {
    }
    ;
    ExpectedQuery2.value = new ExpectedQuery2();
    return ExpectedQuery2;
  })();
  var ExpectedPathPart = /* @__PURE__ */ (function() {
    function ExpectedPathPart2() {
    }
    ;
    ExpectedPathPart2.value = new ExpectedPathPart2();
    return ExpectedPathPart2;
  })();
  var KeyNotFound = /* @__PURE__ */ (function() {
    function KeyNotFound2(value0) {
      this.value0 = value0;
    }
    ;
    KeyNotFound2.create = function(value0) {
      return new KeyNotFound2(value0);
    };
    return KeyNotFound2;
  })();
  var Fail = /* @__PURE__ */ (function() {
    function Fail2(value0) {
      this.value0 = value0;
    }
    ;
    Fail2.create = function(value0) {
      return new Fail2(value0);
    };
    return Fail2;
  })();
  var showMatchError = function(err) {
    if (err instanceof UnexpectedPath) {
      return "expected path part: " + err.value0;
    }
    ;
    if (err instanceof KeyNotFound) {
      return "key: " + (err.value0 + " has not found in query part");
    }
    ;
    if (err instanceof ExpectedQuery) {
      return "expected query - found path";
    }
    ;
    if (err instanceof ExpectedNumber) {
      return "expected number";
    }
    ;
    if (err instanceof ExpectedInt) {
      return "expected int";
    }
    ;
    if (err instanceof ExpectedBoolean) {
      return "expected boolean";
    }
    ;
    if (err instanceof ExpectedEnd) {
      return "expected end";
    }
    ;
    if (err instanceof ExpectedString) {
      return "expected string var";
    }
    ;
    if (err instanceof ExpectedPathPart) {
      return "expected path part, found query";
    }
    ;
    if (err instanceof Fail) {
      return "match error: " + err.value0;
    }
    ;
    throw new Error("Failed pattern match at Routing.Match.Error (line 19, column 3 - line 29, column 39): " + [err.constructor.name]);
  };

  // output/Routing.Types/index.js
  var Path2 = /* @__PURE__ */ (function() {
    function Path4(value0) {
      this.value0 = value0;
    }
    ;
    Path4.create = function(value0) {
      return new Path4(value0);
    };
    return Path4;
  })();
  var Query2 = /* @__PURE__ */ (function() {
    function Query3(value0) {
      this.value0 = value0;
    }
    ;
    Query3.create = function(value0) {
      return new Query3(value0);
    };
    return Query3;
  })();

  // output/Routing.Match/index.js
  var pure17 = /* @__PURE__ */ pure(/* @__PURE__ */ applicativeV(semiringFree));
  var foldl9 = /* @__PURE__ */ foldl(foldableList);
  var bind10 = /* @__PURE__ */ bind(bindList);
  var map32 = /* @__PURE__ */ map(functorList);
  var unwrap6 = /* @__PURE__ */ unwrap();
  var pure18 = /* @__PURE__ */ pure(applicativeList);
  var mul3 = /* @__PURE__ */ mul(semiringFree);
  var identity12 = /* @__PURE__ */ identity(categoryFn);
  var one2 = /* @__PURE__ */ one(semiringFree);
  var alt6 = /* @__PURE__ */ alt(/* @__PURE__ */ altV(semiringFree));
  var str2 = function(route) {
    if (route instanceof Cons && route.value0 instanceof Path2) {
      return pure17(new Tuple(route.value1, route.value0.value0));
    }
    ;
    return invalid2(free2(ExpectedString.value));
  };
  var runMatch = function(v2) {
    return function(route) {
      var foldErrors = function(errs) {
        return new Left(foldl9(function(b2) {
          return function(a3) {
            return a3 + ("\n" + b2);
          };
        })("")(bind10(map32(reverse2)(unwrap6(errs)))(function(es) {
          return pure18(foldl9(function(b2) {
            return function(a3) {
              return a3 + (";" + b2);
            };
          })("")(map32(showMatchError)(es)));
        })));
      };
      return validation(foldErrors)(function($109) {
        return Right.create(snd($109));
      })(v2(route));
    };
  };
  var matchFunctor = {
    map: function(fn) {
      return function(v2) {
        return function(r8) {
          return validation(invalid2)(function(v1) {
            return pure17(new Tuple(v1.value0, fn(v1.value1)));
          })(v2(r8));
        };
      };
    }
  };
  var matchApply = {
    apply: function(v2) {
      return function(v1) {
        var processFnRes = function(v22) {
          return validation(invalid2)(function(v3) {
            return pure17(new Tuple(v3.value0, v22.value1(v3.value1)));
          })(v1(v22.value0));
        };
        var processFnErr = function(r8) {
          return function(err) {
            return invalid2(mul3(err)(validation(identity12)($$const(one2))(v1(r8))));
          };
        };
        return function(r8) {
          return validation(processFnErr(r8))(processFnRes)(v2(r8));
        };
      };
    },
    Functor0: function() {
      return matchFunctor;
    }
  };
  var matchApplicative = {
    pure: function(a3) {
      return function(r8) {
        return pure17(new Tuple(r8, a3));
      };
    },
    Apply0: function() {
      return matchApply;
    }
  };
  var matchAlt = {
    alt: function(v2) {
      return function(v1) {
        return function(r8) {
          return alt6(v2(r8))(v1(r8));
        };
      };
    },
    Functor0: function() {
      return matchFunctor;
    }
  };
  var lit2 = function(input3) {
    return function(route) {
      if (route instanceof Cons && (route.value0 instanceof Path2 && route.value0.value0 === input3)) {
        return pure17(new Tuple(route.value1, unit));
      }
      ;
      if (route instanceof Cons && route.value0 instanceof Path2) {
        return invalid2(free2(new UnexpectedPath(input3)));
      }
      ;
      return invalid2(free2(ExpectedPathPart.value));
    };
  };
  var root = /* @__PURE__ */ lit2("");
  var end = function(route) {
    if (route instanceof Nil) {
      return pure17(new Tuple(Nil.value, unit));
    }
    ;
    return invalid2(free2(ExpectedEnd.value));
  };

  // output/Hylograph.RoutingDSL/index.js
  var applyFirst2 = /* @__PURE__ */ applyFirst(matchApply);
  var voidRight2 = /* @__PURE__ */ voidRight(matchFunctor);
  var applySecond2 = /* @__PURE__ */ applySecond(matchApply);
  var alt7 = /* @__PURE__ */ alt(matchAlt);
  var understandingSelections = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(UnderstandingSelections.value)(lit2("understanding")))(lit2("selections")))(end);
  })();
  var understandingScenes = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(UnderstandingScenes.value)(lit2("understanding")))(lit2("scenes")))(end);
  })();
  var understandingGrammar = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(UnderstandingGrammar.value)(lit2("understanding")))(lit2("grammar")))(end);
  })();
  var understandingAttributes = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(UnderstandingAttributes.value)(lit2("understanding")))(lit2("attributes")))(end);
  })();
  var understanding = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(Understanding.value)(lit2("understanding")))(end);
  })();
  var treeBuilder = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(TreeBuilder.value)(lit2("tree-builder")))(end);
  })();
  var tourSimpsons = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(TourSimpsons.value)(lit2("tour")))(lit2("simpsons")))(end);
  })();
  var tourScrolly = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(TourScrolly.value)(lit2("tour")))(lit2("scrolly")))(end);
  })();
  var tourMotionScrollyHATS = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(TourMotionScrollyHATS.value)(lit2("tour")))(lit2("scrolly2")))(end);
  })();
  var tourIndex = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(TourIndex.value)(lit2("tour")))(end);
  })();
  var simpsonsV2Route = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(SimpsonsV2.value)(lit2("simpsons-v2")))(end);
  })();
  var showcaseLuaEdge = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(ShowcaseLuaEdge.value)(lit2("showcase")))(lit2("lua-edge")))(end);
  })();
  var showcase = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(Showcase.value)(lit2("showcase")))(end);
  })();
  var routeToPath = function(v2) {
    if (v2 instanceof Home) {
      return "/home";
    }
    ;
    if (v2 instanceof GettingStarted) {
      return "/getting-started";
    }
    ;
    if (v2 instanceof HowtoIndex) {
      return "/howto";
    }
    ;
    if (v2 instanceof HowtoTransitions) {
      return "/howto/transitions";
    }
    ;
    if (v2 instanceof HowtoForceGraphs) {
      return "/howto/force-graphs";
    }
    ;
    if (v2 instanceof HowtoHierarchical) {
      return "/howto/hierarchical";
    }
    ;
    if (v2 instanceof HowtoEvents) {
      return "/howto/events";
    }
    ;
    if (v2 instanceof HowtoLoadingData) {
      return "/howto/loading-data";
    }
    ;
    if (v2 instanceof HowtoTooltips) {
      return "/howto/tooltips";
    }
    ;
    if (v2 instanceof HowtoDebugging) {
      return "/howto/debugging";
    }
    ;
    if (v2 instanceof HowtoPerformance) {
      return "/howto/performance";
    }
    ;
    if (v2 instanceof Understanding) {
      return "/understanding";
    }
    ;
    if (v2 instanceof UnderstandingGrammar) {
      return "/understanding/grammar";
    }
    ;
    if (v2 instanceof UnderstandingAttributes) {
      return "/understanding/attributes";
    }
    ;
    if (v2 instanceof UnderstandingSelections) {
      return "/understanding/selections";
    }
    ;
    if (v2 instanceof UnderstandingScenes) {
      return "/understanding/scenes";
    }
    ;
    if (v2 instanceof Reference) {
      return "/reference";
    }
    ;
    if (v2 instanceof ReferenceModule) {
      return "/reference/" + v2.value0;
    }
    ;
    if (v2 instanceof TourIndex) {
      return "/tour";
    }
    ;
    if (v2 instanceof TourScrolly) {
      return "/tour/scrolly";
    }
    ;
    if (v2 instanceof TourMotionScrollyHATS) {
      return "/tour/scrolly2";
    }
    ;
    if (v2 instanceof TourSimpsons) {
      return "/tour/simpsons";
    }
    ;
    if (v2 instanceof Showcase) {
      return "/showcase";
    }
    ;
    if (v2 instanceof ShowcaseLuaEdge) {
      return "/showcase/lua-edge";
    }
    ;
    if (v2 instanceof SimpsonsV2) {
      return "/simpsons-v2";
    }
    ;
    if (v2 instanceof ModuleGraph) {
      return "/module-graph";
    }
    ;
    if (v2 instanceof ForcePlayground) {
      return "/force-playground";
    }
    ;
    if (v2 instanceof TreeBuilder) {
      return "/tree-builder";
    }
    ;
    if (v2 instanceof Acknowledgements) {
      return "/acknowledgements";
    }
    ;
    if (v2 instanceof NotFound) {
      return "/not-found";
    }
    ;
    throw new Error("Failed pattern match at Hylograph.RoutingDSL (line 177, column 1 - line 177, column 31): " + [v2.constructor.name]);
  };
  var rootRedirect = /* @__PURE__ */ (function() {
    return voidRight2(Home.value)(end);
  })();
  var referenceModule = /* @__PURE__ */ (function() {
    return applyFirst2(map(matchFunctor)(ReferenceModule.create)(applySecond2(lit2("reference"))(str2)))(end);
  })();
  var reference = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(Reference.value)(lit2("reference")))(end);
  })();
  var notFound = /* @__PURE__ */ (function() {
    return pure(matchApplicative)(NotFound.value);
  })();
  var moduleGraph = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(ModuleGraph.value)(lit2("module-graph")))(end);
  })();
  var howtoTransitions = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(HowtoTransitions.value)(lit2("howto")))(lit2("transitions")))(end);
  })();
  var howtoTooltips = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(HowtoTooltips.value)(lit2("howto")))(lit2("tooltips")))(end);
  })();
  var howtoPerformance = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(HowtoPerformance.value)(lit2("howto")))(lit2("performance")))(end);
  })();
  var howtoLoadingData = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(HowtoLoadingData.value)(lit2("howto")))(lit2("loading-data")))(end);
  })();
  var howtoIndex = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(HowtoIndex.value)(lit2("howto")))(end);
  })();
  var howtoHierarchical = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(HowtoHierarchical.value)(lit2("howto")))(lit2("hierarchical")))(end);
  })();
  var howtoForceGraphs = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(HowtoForceGraphs.value)(lit2("howto")))(lit2("force-graphs")))(end);
  })();
  var howtoEvents = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(HowtoEvents.value)(lit2("howto")))(lit2("events")))(end);
  })();
  var howtoDebugging = /* @__PURE__ */ (function() {
    return applyFirst2(applyFirst2(voidRight2(HowtoDebugging.value)(lit2("howto")))(lit2("debugging")))(end);
  })();
  var home = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(Home.value)(lit2("home")))(end);
  })();
  var gettingStarted = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(GettingStarted.value)(lit2("getting-started")))(end);
  })();
  var forcePlayground = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(ForcePlayground.value)(lit2("force-playground")))(end);
  })();
  var acknowledgements = /* @__PURE__ */ (function() {
    return applyFirst2(voidRight2(Acknowledgements.value)(lit2("acknowledgements")))(end);
  })();
  var routes = /* @__PURE__ */ alt7(home)(/* @__PURE__ */ alt7(gettingStarted)(/* @__PURE__ */ alt7(howtoIndex)(/* @__PURE__ */ alt7(howtoTransitions)(/* @__PURE__ */ alt7(howtoForceGraphs)(/* @__PURE__ */ alt7(howtoHierarchical)(/* @__PURE__ */ alt7(howtoEvents)(/* @__PURE__ */ alt7(howtoLoadingData)(/* @__PURE__ */ alt7(howtoTooltips)(/* @__PURE__ */ alt7(howtoDebugging)(/* @__PURE__ */ alt7(howtoPerformance)(/* @__PURE__ */ alt7(understandingGrammar)(/* @__PURE__ */ alt7(understandingAttributes)(/* @__PURE__ */ alt7(understandingSelections)(/* @__PURE__ */ alt7(understandingScenes)(/* @__PURE__ */ alt7(understanding)(/* @__PURE__ */ alt7(referenceModule)(/* @__PURE__ */ alt7(reference)(/* @__PURE__ */ alt7(tourScrolly)(/* @__PURE__ */ alt7(tourMotionScrollyHATS)(/* @__PURE__ */ alt7(tourSimpsons)(/* @__PURE__ */ alt7(tourIndex)(/* @__PURE__ */ alt7(showcaseLuaEdge)(/* @__PURE__ */ alt7(simpsonsV2Route)(/* @__PURE__ */ alt7(showcase)(/* @__PURE__ */ alt7(moduleGraph)(/* @__PURE__ */ alt7(forcePlayground)(/* @__PURE__ */ alt7(treeBuilder)(/* @__PURE__ */ alt7(acknowledgements)(/* @__PURE__ */ alt7(rootRedirect)(notFound))))))))))))))))))))))))))))));
  var routing = /* @__PURE__ */ applySecond2(root)(routes);

  // output/Hylograph.Shared.SiteNav/index.js
  var append16 = /* @__PURE__ */ append(semigroupArray);
  var NoQuadrant = /* @__PURE__ */ (function() {
    function NoQuadrant2() {
    }
    ;
    NoQuadrant2.value = new NoQuadrant2();
    return NoQuadrant2;
  })();
  var QuadGettingStarted = /* @__PURE__ */ (function() {
    function QuadGettingStarted2() {
    }
    ;
    QuadGettingStarted2.value = new QuadGettingStarted2();
    return QuadGettingStarted2;
  })();
  var QuadHowTo = /* @__PURE__ */ (function() {
    function QuadHowTo2() {
    }
    ;
    QuadHowTo2.value = new QuadHowTo2();
    return QuadHowTo2;
  })();
  var QuadUnderstanding = /* @__PURE__ */ (function() {
    function QuadUnderstanding3() {
    }
    ;
    QuadUnderstanding3.value = new QuadUnderstanding3();
    return QuadUnderstanding3;
  })();
  var QuadReference = /* @__PURE__ */ (function() {
    function QuadReference2() {
    }
    ;
    QuadReference2.value = new QuadReference2();
    return QuadReference2;
  })();
  var Large2 = /* @__PURE__ */ (function() {
    function Large3() {
    }
    ;
    Large3.value = new Large3();
    return Large3;
  })();
  var Normal = /* @__PURE__ */ (function() {
    function Normal2() {
    }
    ;
    Normal2.value = new Normal2();
    return Normal2;
  })();
  var renderPrevNext = function(v2) {
    if (v2 instanceof Nothing) {
      return text6("");
    }
    ;
    if (v2 instanceof Just) {
      return div4([classes(["prev-next-nav"])])([(function() {
        if (v2.value0.prev instanceof Nothing) {
          return text6("");
        }
        ;
        if (v2.value0.prev instanceof Just) {
          return a([href4("#" + routeToPath(v2.value0.prev.value0)), classes(["prev-link"])])([text6("\u2190 Prev")]);
        }
        ;
        throw new Error("Failed pattern match at Hylograph.Shared.SiteNav (line 91, column 7 - line 98, column 33): " + [v2.value0.prev.constructor.name]);
      })(), (function() {
        if (v2.value0.next instanceof Nothing) {
          return text6("");
        }
        ;
        if (v2.value0.next instanceof Just) {
          return a([href4("#" + routeToPath(v2.value0.next.value0)), classes(["next-link"])])([text6("Next \u2192")]);
        }
        ;
        throw new Error("Failed pattern match at Hylograph.Shared.SiteNav (line 99, column 7 - line 106, column 33): " + [v2.value0.next.constructor.name]);
      })()]);
    }
    ;
    throw new Error("Failed pattern match at Hylograph.Shared.SiteNav (line 86, column 1 - line 86, column 96): " + [v2.constructor.name]);
  };
  var renderLogo = function(size6) {
    var sizeClass = (function() {
      if (size6 instanceof Large2) {
        return "logo-large";
      }
      ;
      if (size6 instanceof Normal) {
        return "logo-normal";
      }
      ;
      throw new Error("Failed pattern match at Hylograph.Shared.SiteNav (line 61, column 17 - line 63, column 30): " + [size6.constructor.name]);
    })();
    return a([href4("#" + routeToPath(Home.value)), classes(["site-logo", sizeClass])])([span4([classes(["logo-text"])])([text6("Hylograph")])]);
  };
  var navLink = function(label5) {
    return function(route) {
      return function(isActive) {
        return li([classes(append16(["nav-item"])((function() {
          if (isActive) {
            return ["active"];
          }
          ;
          return [];
        })()))])([a([href4("#" + routeToPath(route)), classes(["nav-link"])])([text6(label5)])]);
      };
    };
  };
  var eqQuadrant = {
    eq: function(x7) {
      return function(y7) {
        if (x7 instanceof NoQuadrant && y7 instanceof NoQuadrant) {
          return true;
        }
        ;
        if (x7 instanceof QuadGettingStarted && y7 instanceof QuadGettingStarted) {
          return true;
        }
        ;
        if (x7 instanceof QuadHowTo && y7 instanceof QuadHowTo) {
          return true;
        }
        ;
        if (x7 instanceof QuadUnderstanding && y7 instanceof QuadUnderstanding) {
          return true;
        }
        ;
        if (x7 instanceof QuadReference && y7 instanceof QuadReference) {
          return true;
        }
        ;
        return false;
      };
    }
  };
  var eq5 = /* @__PURE__ */ eq(eqQuadrant);
  var renderNavLinks = function(quadrant) {
    return ul([classes(["nav-links"])])([navLink("Getting Started")(GettingStarted.value)(eq5(quadrant)(QuadGettingStarted.value)), navLink("How To")(HowtoIndex.value)(eq5(quadrant)(QuadHowTo.value)), navLink("Understanding")(Understanding.value)(eq5(quadrant)(QuadUnderstanding.value)), navLink("Reference")(Reference.value)(eq5(quadrant)(QuadReference.value))]);
  };
  var render2 = function(config) {
    return header([classes(["site-header"])])([nav([classes(["site-nav"])])([renderLogo(config.logoSize), renderNavLinks(config.quadrant), renderPrevNext(config.prevNext)])]);
  };

  // output/Component.HowTo.HowtoDebugging/index.js
  var pure19 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize3 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var render3 = function(v2) {
    return div4([classes(["tutorial-page"])])([render2({
      logoSize: Large2.value,
      quadrant: QuadHowTo.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), main_([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text6("Debugging Visualizations")]), p_([text6("Techniques for finding and fixing visualization issues.")])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Console Logging")]), p_([text6("Log data in attribute functions:")]), pre([classes(["code-block"])])([code_([text6('import Effect.Console (log)\nimport Effect.Unsafe (unsafePerformEffect)\n\n-- Debug attribute values\nfill (\\\\d -> unsafePerformEffect do\n  log $ "Node: " <> show d.id <> ", value: " <> show d.value\n  pure $ colorScale d.value\n)')])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Browser DevTools")]), ul_([li_([strong_([text6("Elements panel")]), text6(" - Inspect SVG structure and attributes")]), li_([strong_([text6("$0.__data__")]), text6(" - View bound data on selected element")]), li_([strong_([text6("Network tab")]), text6(" - Verify data loading")]), li_([strong_([text6("Performance tab")]), text6(" - Profile slow renders")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Mermaid Diagrams")]), p_([text6("Visualize tree structure with Mermaid interpreter:")]), pre([classes(["code-block"])])([code_([text6("-- Generate Mermaid code from TreeAPI tree\nlet mermaidCode = runMermaidInterpreter myTree\n\n-- Copy to https://mermaid.live to visualize structure")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Common Issues")]), ul_([li_([strong_([text6("Nothing renders")]), text6(" - Check container exists, SVG has size")]), li_([strong_([text6("Elements at origin")]), text6(" - Verify coordinate attributes (cx, cy, x, y)")]), li_([strong_([text6("Wrong colors")]), text6(" - Check scale domain/range, normalize values to 0-1")]), li_([strong_([text6("No data binding")]), text6(" - Use joinData, check key function")]), li_([strong_([text6("Type errors")]), text6(" - Ensure datum type matches selection")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Key Points")]), ul_([li_([strong_([text6("unsafePerformEffect")]), text6(" - Escape hatch for logging")]), li_([strong_([text6("$0.__data__")]), text6(" - Console access to bound data")]), li_([strong_([text6("Mermaid interpreter")]), text6(" - Visualize tree structure")]), li_([strong_([text6("Check dimensions")]), text6(" - SVG needs viewBox or width/height")])])])])]);
  };
  var handleAction2 = function(dictMonadAff) {
    return function(v2) {
      return pure19(unit);
    };
  };
  var component2 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render3,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction2(dictMonadAff),
        initialize: new Just(Initialize3.value)
      })
    });
  };

  // output/Component.HowTo.HowtoEvents/index.js
  var pure20 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize4 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var render4 = function(v2) {
    return div4([classes(["tutorial-page"])])([render2({
      logoSize: Large2.value,
      quadrant: QuadHowTo.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), main_([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text6("Responding to User Events")]), p_([text6("PSD3 provides type-safe event handlers. Use the 'on' function to attach behaviors to selections.")])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Click Handlers")]), p_([text6("Access the bound datum when an element is clicked:")]), pre([classes(["code-block"])])([code_([text6('import Hylograph.Internal.Behavior.Types (onClickWithDatum)\n\ncircles <- append Circle [fill "blue", radius 20.0] container\n_ <- on (onClickWithDatum \\\\d -> log ("Clicked: " <> d.name)) circles')])]), p_([text6("Without datum access:")]), pre([classes(["code-block"])])([code_([text6('import Hylograph.Internal.Behavior.Types (onClick)\n\n_ <- on (onClick (log "Button clicked!")) button')])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Hover Effects")]), p_([text6("Simple enter/leave handlers:")]), pre([classes(["code-block"])])([code_([text6("import Hylograph.Internal.Behavior.Types (onMouseEnter, onMouseLeave)\n\n_ <- on (onMouseEnter \\\\d -> highlightNode d) circles\n_ <- on (onMouseLeave \\\\_ -> clearHighlight) circles")])]), p_([text6("Built-in style changes with onHover:")]), pre([classes(["code-block"])])([code_([text6('import Hylograph.Internal.Behavior.Types (onHover)\n\n_ <- on (onHover\n  { enter: [{ attr: "stroke", value: "#333" }, { attr: "stroke-width", value: "3" }]\n  , leave: [{ attr: "stroke", value: "#ddd" }, { attr: "stroke-width", value: "1.5" }]\n  }) lines')])]), p_([text6("With mouse coordinates (for tooltips):")]), pre([classes(["code-block"])])([code_([text6("import Hylograph.Internal.Behavior.Types (onMouseEnterWithInfo)\n\n_ <- on (onMouseEnterWithInfo \\\\info -> do\n  -- info.datum: bound data\n  -- info.pageX/pageY: document coordinates\n  -- info.offsetX/offsetY: element coordinates\n  showTooltip info.datum info.pageX info.pageY\n) circles")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Drag & Zoom")]), p_([text6("Simple drag behavior:")]), pre([classes(["code-block"])])([code_([text6("import Hylograph.Internal.Behavior.Types (Drag(..), defaultDrag)\n\n_ <- on (Drag defaultDrag) draggableElement")])]), p_([text6("Force simulation drag (reheats on drag):")]), pre([classes(["code-block"])])([code_([text6('import Hylograph.Internal.Behavior.Types (Drag(..), simulationDrag)\n\n_ <- on (Drag (simulationDrag "my-simulation-id")) nodes')])]), p_([text6("Pan and zoom:")]), pre([classes(["code-block"])])([code_([text6('import Hylograph.Internal.Behavior.Types (Zoom(..), defaultZoom, ScaleExtent(..))\n\n-- Attach to outer SVG, transforms inner group\n_ <- on (Zoom (defaultZoom (ScaleExtent 0.5 4.0) ".zoom-group")) svg')])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Key Points")]), ul_([li_([strong_([text6("Type-safe")]), text6(" - Datum type flows through handlers")]), li_([strong_([text6("MouseEventInfo")]), text6(" - Contains datum + all coordinates")]), li_([strong_([text6("Combine behaviors")]), text6(" - Attach multiple with separate 'on' calls")]), li_([strong_([text6("simulationDrag")]), text6(" - Auto-reheats force simulation")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Real Example")]), p_([text6("See the Code Explorer implementation:")]), ul_([li_([code_([text6("src/website/Viz/Spago/Render.purs:81-96")]), text6(" - Drag, click, hover behaviors")]), li_([code_([text6("src/lib/PSD3/Behavior/Types.purs")]), text6(" - All behavior types with docs")])])])])]);
  };
  var handleAction3 = function(dictMonadAff) {
    return function(v2) {
      return pure20(unit);
    };
  };
  var component3 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render4,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction3(dictMonadAff),
        initialize: new Just(Initialize4.value)
      })
    });
  };

  // output/Component.HowTo.HowtoForceGraphs/index.js
  var pure21 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize5 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var render5 = function(v2) {
    return div4([classes(["tutorial-page"])])([render2({
      logoSize: Large2.value,
      quadrant: QuadHowTo.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), main_([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text6("Building Force-Directed Graphs")]), p_([strong_([text6("Recommended: ")]), text6("Use the SimulationManager pattern. See "), a([href4("#/force-playground")])([text6("Force Playground")]), text6(" for an interactive example.")]), p_([text6("The documentation below covers the type-class based API (SimulationM/SimulationM2) which is still available.")])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Initialize Simulation")]), p_([text6("Create a force simulation with nodes and links:")]), pre([classes(["code-block"])])([code_([text6('import Hylograph.Internal.Capabilities.Simulation (class SimulationM, init, addTickFunction, start, Step(..))\n\n{ nodes, links } <- init\n  { nodes: myNodeData\n  , links: myLinkData\n  , forces: [centerForce w h, chargeForce (const (-100.0)), linkForce]\n  , activeForces: Set.fromFoldable ["center", "charge", "link"]\n  , config: defaultSimConfig\n  , keyFn: _.id\n  , ticks: Map.empty\n  }')])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Tick Functions")]), p_([text6("Register callbacks to update DOM on each simulation tick:")]), pre([classes(["code-block"])])([code_([text6('-- Update node positions\naddTickFunction "nodes" $ Step nodeCircles\n  [ cx (_.x)\n  , cy (_.y)\n  ]\n\n-- Update link positions\naddTickFunction "links" $ Step linkLines\n  [ x1 (\\\\l -> l.source.x)\n  , y1 (\\\\l -> l.source.y)\n  , x2 (\\\\l -> l.target.x)\n  , y2 (\\\\l -> l.target.y)\n  ]\n\nstart -- Begin animation')])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Available Forces")]), ul_([li_([strong_([text6("centerForce")]), text6(" - Keep nodes centered")]), li_([strong_([text6("chargeForce")]), text6(" - Repulsion/attraction between nodes")]), li_([strong_([text6("linkForce")]), text6(" - Springs between connected nodes")]), li_([strong_([text6("collideForce")]), text6(" - Prevent node overlap")]), li_([strong_([text6("forceX/Y")]), text6(" - Push toward position")]), li_([strong_([text6("radialForce")]), text6(" - Push toward circle")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Dynamic Updates")]), p_([text6("Use SimulationM2 for dynamic data changes:")]), pre([classes(["code-block"])])([code_([text6("import Hylograph.Internal.Capabilities.Simulation (class SimulationM2, update, reheat)\n\n{ nodes, links } <- update\n  { nodes: Just newNodeArray\n  , links: Just newLinkArray\n  , nodeFilter: Nothing\n  , linkFilter: Nothing\n  , activeForces: Nothing\n  , config: Nothing\n  , keyFn: _.id\n  }\n\nreheat 0.7  -- Re-energize simulation\nstart       -- Begin animation")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Node Dragging")]), p_([text6("Enable simulation-aware drag:")]), pre([classes(["code-block"])])([code_([text6('import Hylograph.Internal.Behavior.Types (Drag(..), simulationDrag)\n\n-- Drag reheats simulation automatically\n_ <- on (Drag (simulationDrag "my-simulation-id")) nodeCircles')])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Key Points")]), ul_([li_([strong_([text6("SimulationM")]), text6(" - Static simulations")]), li_([strong_([text6("SimulationM2")]), text6(" - Adds update/reheat for dynamic data")]), li_([strong_([text6("Step")]), text6(" - Maps selection to tick attributes")]), li_([strong_([text6("activeForces")]), text6(" - Control which forces are enabled")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Real Examples")]), p_([text6("See force simulation in action:")]), ul_([li_([a([href4("#/force-playground")])([text6("Force Playground")]), text6(" - Interactive force simulation with multiple datasets")]), li_([a([href4("#/simple-force-graph")])([text6("Simple Force Graph")]), text6(" - Minimal force-directed graph example")])])])])]);
  };
  var handleAction4 = function(dictMonadAff) {
    return function(v2) {
      return pure21(unit);
    };
  };
  var component4 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render5,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction4(dictMonadAff),
        initialize: new Just(Initialize5.value)
      })
    });
  };

  // output/Component.HowTo.HowtoHierarchical/index.js
  var pure23 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize6 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var render6 = function(v2) {
    return div4([classes(["tutorial-page"])])([render2({
      logoSize: Large2.value,
      quadrant: QuadHowTo.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), main_([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text6("Working with Hierarchical Data")]), p_([text6("PSD3 supports D3's hierarchy layouts for trees, clusters, and treemaps.")])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Creating Hierarchy")]), p_([text6("Convert JSON to d3.hierarchy via FFI:")]), pre([classes(["code-block"])])([code_([text6("-- JavaScript FFI\nexport const hierarchy_ = data => () => d3.hierarchy(data);\nexport const descendants_ = root => root.descendants();\nexport const links_ = root => root.links();\n\n-- PureScript\nforeign import hierarchy_ :: Json -> Effect HierarchyNode\nforeign import descendants_ :: HierarchyNode -> Array HierarchyNode\nforeign import links_ :: HierarchyNode -> Array HierarchyLink\n\nroot <- liftEffect $ hierarchy_ jsonData\nlet nodes = descendants_ root\nlet links = links_ root")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Layout Functions")]), p_([text6("Apply layouts to compute positions:")]), pre([classes(["code-block"])])([code_([text6("-- Tree layout (neat spacing)\nexport const tree_ = width => height => () =>\n  d3.tree().size([height, width]);\n\n-- Cluster layout (leaves aligned)\nexport const cluster_ = width => height => () =>\n  d3.cluster().size([height, width]);\n\n-- Treemap layout (space-filling)\nexport const treemap_ = width => height => () =>\n  d3.treemap().size([width, height]).padding(1);\n\n-- Apply layout to hierarchy\nexport const applyLayout_ = layout => root => () => layout(root);")])]), p_([text6("After layout, nodes have x/y coordinates:")]), pre([classes(["code-block"])])([code_([text6("treeLayout <- liftEffect $ tree_ width height\nliftEffect $ applyLayout_ treeLayout root\n\n-- Now render nodes at computed positions\ncircles <- append Circle\n  [ cx (_.y)  -- Note: tree layout swaps x/y\n  , cy (_.x)\n  , radius 5.0\n  ] nodeEnter")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Drawing Links")]), p_([text6("Generate curved paths for tree connections:")]), pre([classes(["code-block"])])([code_([text6('-- Horizontal curved links (for tree layout)\nexport const linkHorizontal_ = d3.linkHorizontal()\n  .x(d => d.y)\n  .y(d => d.x);\n\n-- PureScript\npaths <- append Path\n  [ d (\\\\link -> linkHorizontal_ link)\n  , stroke "#999"\n  , fill "none"\n  ] linkEnter')])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Key Points")]), ul_([li_([strong_([text6("hierarchy()")]), text6(" - Converts JSON to hierarchy nodes")]), li_([strong_([text6("descendants()/links()")]), text6(" - Get flat arrays for data binding")]), li_([strong_([text6("tree/cluster layouts")]), text6(" - Swap x/y in coordinates")]), li_([strong_([text6("linkHorizontal/Vertical")]), text6(" - Curved path generators")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Real Example")]), p_([text6("See hierarchical layouts:")]), ul_([li_([code_([text6("src/website/Viz/TreeAPI/LesMisTreeExample.purs")]), text6(" - Tree visualization")]), li_([code_([text6("src/website/Component/AnimatedTreeCluster.purs")]), text6(" - Animated transitions")])])])])]);
  };
  var handleAction5 = function(dictMonadAff) {
    return function(v2) {
      return pure23(unit);
    };
  };
  var component5 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render6,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction5(dictMonadAff),
        initialize: new Just(Initialize6.value)
      })
    });
  };

  // output/Component.HowTo.HowtoLoadingData/index.js
  var pure24 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize7 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var render7 = function(v2) {
    return div4([classes(["tutorial-page"])])([render2({
      logoSize: Large2.value,
      quadrant: QuadHowTo.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), main_([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text6("Loading External Data")]), p_([text6("PSD3 uses Affjax for async data loading with configurable strategies.")])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Simple JSON Loading")]), p_([text6("Load JSON with automatic error fallback:")]), pre([classes(["code-block"])])([code_([text6('import Hylograph.Shared.DataLoader (simpleLoadJSON)\n\njson <- H.liftAff $ simpleLoadJSON "data/les-miserables.json"\n-- Returns fallback on error, never throws')])]), p_([text6("With explicit error handling:")]), pre([classes(["code-block"])])([code_([text6('import Hylograph.Shared.DataLoader (loadJSON, defaultConfig, LoadError(..))\n\nresult <- H.liftAff $ loadJSON defaultConfig "data/graph.json"\ncase result of\n  Left (NetworkError msg) -> log ("Network error: " <> msg)\n  Left (ParseError msg) -> log ("Parse error: " <> msg)\n  Right json -> processData json')])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Load Strategies")]), p_([text6("Configure where to load data from:")]), pre([classes(["code-block"])])([code_([text6('import Hylograph.Shared.DataLoader (loadJSON, LoadStrategy(..), LoadConfig)\n\n-- Local only (bundled files)\nlet localConfig = { strategy: LocalOnly, baseUrl: Nothing }\n\n-- Remote only (requires server)\nlet remoteConfig = { strategy: RemoteOnly, baseUrl: Just "http://localhost:8080" }\n\n-- Try local first, fallback to remote\nlet hybridConfig = { strategy: LocalFirst, baseUrl: Just "http://localhost:8080" }\n\njson <- H.liftAff $ loadJSON hybridConfig "data/graph.json\\"')])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("CSV Loading")]), p_([text6("Load CSV data as Foreign array:")]), pre([classes(["code-block"])])([code_([text6('import Hylograph.Shared.DataLoader (simpleLoadCSV, loadCSV)\nimport Foreign (Foreign)\n\n-- Simple loading with empty array fallback\nrows <- H.liftAff $ simpleLoadCSV "data/population.csv"\n\n-- With error handling\nresult <- H.liftAff $ loadCSV defaultConfig "data/timeseries.csv"\ncase result of\n  Left err -> log (show err)\n  Right rows -> processRows rows')])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Halogen Pattern")]), p_([text6("Common pattern for loading in component initialization:")]), pre([classes(["code-block"])])([code_([text6('data State = { loading :: Boolean, graphData :: Maybe GraphData }\n\nhandleAction = case _ of\n  Initialize -> do\n    H.modify_ _ { loading = true }\n    json <- H.liftAff $ simpleLoadJSON "data/graph.json"\n    let graphData = decodeGraphData json\n    H.modify_ _ { loading = false, graphData = Just graphData }\n\nrender state\n  | state.loading = HH.div_ [ HH.text "Loading..." ]\n  | otherwise = renderVisualization state.graphData')])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Key Points")]), ul_([li_([strong_([text6("Aff-based")]), text6(" - Use H.liftAff to run in Halogen")]), li_([strong_([text6("Strategies")]), text6(" - LocalOnly, RemoteOnly, LocalFirst, RemoteFirst")]), li_([strong_([text6("Error types")]), text6(" - NetworkError, ParseError, FileNotFound, ConfigError")]), li_([strong_([text6("simple* helpers")]), text6(" - Return fallbacks instead of Either")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Real Example")]), p_([text6("See data loading in action:")]), ul_([li_([code_([text6("src/website/Shared/DataLoader.purs")]), text6(" - Full DataLoader module")]), li_([code_([text6("src/website/Component/Showcase/ForcePlayground.purs")]), text6(" - Loading network dataset JSON files")])])])])]);
  };
  var handleAction6 = function(dictMonadAff) {
    return function(v2) {
      return pure24(unit);
    };
  };
  var component6 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render7,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction6(dictMonadAff),
        initialize: new Just(Initialize7.value)
      })
    });
  };

  // output/Component.HowTo.HowtoPerformance/index.js
  var pure25 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize8 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var render8 = function(v2) {
    return div4([classes(["tutorial-page"])])([render2({
      logoSize: Large2.value,
      quadrant: QuadHowTo.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), main_([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text6("Performance Optimization")]), p_([text6("Tips for fast, smooth visualizations with large datasets.")])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Reduce DOM Elements")]), ul_([li_([strong_([text6("Sample data")]), text6(" - Random sample for preview, full for export")]), li_([strong_([text6("Aggregate")]), text6(" - Bin/group data points")]), li_([strong_([text6("Filter visually")]), text6(" - Hide offscreen elements")]), li_([strong_([text6("Canvas")]), text6(" - Consider d3-canvas for 10k+ elements")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Minimize Updates")]), p_([text6("Batch DOM mutations:")]), pre([classes(["code-block"])])([code_([text6("-- Good: Set multiple attributes at once\nsetAttrs [cx newX, cy newY, fill newColor] circles\n\n-- Avoid: Multiple separate setAttrs calls\n-- Each call triggers layout recalculation")])]), p_([text6("Debounce rapid updates:")]), pre([classes(["code-block"])])([code_([text6("-- Only update after user stops resizing\nwindow.addEventListener('resize', debounce(updateChart, 150))")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Force Simulation Tips")]), ul_([li_([strong_([text6("Minimal tick attrs")]), text6(" - Only update position, not style")]), li_([strong_([text6("Alpha decay")]), text6(" - Higher decay = faster cooldown")]), li_([strong_([text6("Stop when idle")]), text6(" - Call stop() when alpha reaches min")])]), pre([classes(["code-block"])])([code_([text6(`-- Minimal tick: just positions
addTickFunction "nodes" $ Step circles [cx (_.x), cy (_.y)]

-- Don't recalculate colors on every frame!`)])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("CSS vs D3 Transitions")]), p_([text6("CSS transitions are often faster for simple changes:")]), pre([classes(["code-block"])])([code_([text6(".node circle {\n  transition: fill 0.2s ease, opacity 0.2s ease;\n}\n\n/* PSD3 just toggles class, CSS handles animation */\n.node.highlighted circle { fill: #fbbf24; }")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Key Points")]), ul_([li_([strong_([text6("< 1000 elements")]), text6(" - SVG fine, no optimization needed")]), li_([strong_([text6("1000-5000 elements")]), text6(" - Optimize tick functions, batch updates")]), li_([strong_([text6("> 5000 elements")]), text6(" - Consider Canvas, sampling, or aggregation")]), li_([strong_([text6("Profile first")]), text6(" - Use DevTools Performance tab")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Real Example")]), p_([text6("See performance optimization in action:")]), ul_([li_([a([href4("#/force-playground")])([text6("Force Playground")]), text6(" - Force graph with efficient DOM updates")]), li_([code_([text6("src/website/Component/Showcase/ForcePlayground.purs")]), text6(" - Example component with efficient render callbacks")])])])])]);
  };
  var handleAction7 = function(dictMonadAff) {
    return function(v2) {
      return pure25(unit);
    };
  };
  var component7 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render8,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction7(dictMonadAff),
        initialize: new Just(Initialize8.value)
      })
    });
  };

  // output/Component.HowTo.HowtoTooltips/index.js
  var pure26 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize9 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var render9 = function(v2) {
    return div4([classes(["tutorial-page"])])([render2({
      logoSize: Large2.value,
      quadrant: QuadHowTo.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), main_([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text6("Adding Tooltips & Hover Behaviors")]), p_([text6("PSD3 provides built-in tooltip support. Just provide a function that formats your data as HTML.")])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Basic Tooltip")]), p_([text6("Import the tooltip module and attach behaviors:")]), pre([classes(["code-block"])])([code_([text6('import Hylograph.Tooltip (onTooltip, onTooltipHide)\n\n-- In your render callback, attach to elements:\n_ <- on (onTooltip \\\\d -> d.name <> ": " <> show d.value) circles\n_ <- on onTooltipHide circles')])]), p_([text6("That's it! The tooltip automatically:")]), ul_([li_([text6("Shows on mouse enter at cursor position")]), li_([text6("Hides on mouse leave")]), li_([text6("Stays within viewport bounds")]), li_([text6("Has sensible default styling")])]), h3_([text6("Custom Styling")]), p_([text6("Override the default styles with CSS:")]), pre([classes(["code-block"])])([code_([text6(".psd3-tooltip {\n  background: #1a1a2e;\n  font-family: monospace;\n}")])]), p_([text6("Or set a custom class:")]), pre([classes(["code-block"])])([code_([text6('import Hylograph.Tooltip (setTooltipClass)\n\n-- In initialization:\nliftEffect $ setTooltipClass "my-custom-tooltip\\"')])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Advanced: Highlight Connected Elements")]), p_([text6("Combine tooltips with highlighting related elements. This requires a small FFI for D3 class manipulation:")]), h3_([text6("PureScript")]), pre([classes(["code-block"])])([code_([text6("import Hylograph.Tooltip (onTooltip, hideTooltip)\n\nforeign import highlightConnected_ :: MyNode -> Effect Unit\nforeign import clearHighlights_ :: Effect Unit\n\n-- Combine in hover handlers:\n_ <- on (onMouseEnterWithInfo \\\\info -> do\n  showTooltip (formatContent info.datum) info.pageX info.pageY\n  highlightConnected_ info.datum\n) element\n\n_ <- on (onMouseLeave \\\\_ -> do\n  hideTooltip\n  clearHighlights_\n) element")])]), h3_([text6("JavaScript FFI")]), pre([classes(["code-block"])])([code_([text6("export const highlightConnected_ = node => () => {\n  const connectedIds = new Set([\n    ...node.links.targets,\n    ...node.links.sources\n  ]);\n\n  d3.selectAll('svg g').filter(d => d && d.id)\n    .classed('highlighted', d => connectedIds.has(d.id))\n    .classed('dimmed', d => d.id !== node.id && !connectedIds.has(d.id));\n};\n\nexport const clearHighlights_ = () => {\n  d3.selectAll('.highlighted').classed('highlighted', false);\n  d3.selectAll('.dimmed').classed('dimmed', false);\n};")])]), h3_([text6("CSS")]), pre([classes(["code-block"])])([code_([text6(".highlighted circle {\n  stroke: #fbbf24;\n  filter: drop-shadow(0 0 6px rgba(251, 191, 36, 0.6));\n}\n\n.dimmed { opacity: 0.15; }\n\ng circle { transition: opacity 0.15s ease, stroke 0.15s ease; }")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Key Points")]), ul_([li_([strong_([text6("Use library tooltips")]), text6(" - onTooltip + onTooltipHide")]), li_([strong_([text6("Format function")]), text6(" - Returns HTML string from datum")]), li_([strong_([text6("Combine behaviors")]), text6(" - Tooltip + highlight in same handler")]), li_([strong_([text6("CSS transitions")]), text6(" - Smooth fade/glow effects")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Real Example")]), p_([text6("See the Code Explorer implementation:")]), ul_([li_([code_([text6("src/website/Viz/Spago/Tooltip.js/.purs")]), text6(" - Tooltips with git metrics")]), li_([code_([text6("src/website/Viz/Spago/Highlight.js/.purs")]), text6(" - Connected node highlighting")]), li_([code_([text6("src/website/Viz/Spago/Render.purs:88-96")]), text6(" - Behavior attachment")])])])])]);
  };
  var handleAction8 = function(dictMonadAff) {
    return function(v2) {
      return pure26(unit);
    };
  };
  var component8 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render9,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction8(dictMonadAff),
        initialize: new Just(Initialize9.value)
      })
    });
  };

  // output/Component.HowTo.HowtoTransitions/index.js
  var pure27 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize10 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var render10 = function(v2) {
    return div4([classes(["tutorial-page"])])([render2({
      logoSize: Large2.value,
      quadrant: QuadHowTo.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), main_([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text6("Creating Animated Transitions")]), p_([text6("PSD3 provides a TransitionM capability for smooth, animated attribute changes.")])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Basic Transition")]), p_([text6("Animate attributes over a duration:")]), pre([classes(["code-block"])])([code_([text6('import Data.Time.Duration (Milliseconds(..))\nimport Hylograph.Internal.Transition.Types (transition)\nimport Hylograph.Internal.Capabilities.Transition (withTransition)\n\n-- Animate circles to new state over 1 second\nwithTransition (transition (Milliseconds 1000.0)) circles\n  [ fill "orange"\n  , radius 25.0\n  , cx 100.0\n  ]')])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Easing & Delay")]), p_([text6("Add easing functions and delays:")]), pre([classes(["code-block"])])([code_([text6("import Hylograph.Internal.Transition.Types (transitionWith, Easing(..))\n\nlet config = transitionWith\n      { duration: Milliseconds 1500.0\n      , delay: Just (Milliseconds 500.0)\n      , easing: Just ElasticOut\n      }\n\nwithTransition config circles [radius 30.0]")])]), p_([text6("Available easings include: Linear, Cubic, Quad, Sin, Exp, Circle, Elastic, Back, Bounce (each with In/Out/InOut variants).")])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Staggered Animations")]), p_([text6("Animate elements sequentially with per-element delays:")]), pre([classes(["code-block"])])([code_([text6('import Hylograph.Internal.Capabilities.Transition (withTransitionStaggered, staggerByIndex)\n\n-- Each element delays 50ms more than the previous\nwithTransitionStaggered config (staggerByIndex 50.0) bars\n  [ height \\\\d -> d.value * 10.0\n  , fill "steelblue"\n  ]')])]), p_([text6("Custom delay based on data:")]), pre([classes(["code-block"])])([code_([text6("-- Delay based on datum value\nwithTransitionStaggered config (\\\\d _ -> Milliseconds (d.priority * 100.0)) items\n  [ opacity 1.0 ]")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Exit Transitions")]), p_([text6("Animate elements before removal:")]), pre([classes(["code-block"])])([code_([text6("import Hylograph.Internal.Capabilities.Transition (withTransitionExit)\n\n-- Fade out and shrink before removing\nwithTransitionExit (transition (Milliseconds 500.0)) exitSelection\n  [ opacity 0.0\n  , radius 0.0\n  ]")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Key Points")]), ul_([li_([strong_([text6("Type-safe")]), text6(" - Only bound selections can be transitioned")]), li_([strong_([text6("Milliseconds")]), text6(" - All durations use Data.Time.Duration")]), li_([strong_([text6("staggerByIndex")]), text6(" - Helper for simple sequential delays")]), li_([strong_([text6("D3 easings")]), text6(" - Full set of D3's easing functions")])])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Real Example")]), p_([text6("See these files for transition usage:")]), ul_([li_([code_([text6("src/lib/PSD3/Transition/Types.purs")]), text6(" - All easing options")]), li_([code_([text6("src/lib/PSD3/Capabilities/Transition.purs")]), text6(" - TransitionM type class")])])])])]);
  };
  var handleAction9 = function(dictMonadAff) {
    return function(v2) {
      return pure27(unit);
    };
  };
  var component9 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render10,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction9(dictMonadAff),
        initialize: new Just(Initialize10.value)
      })
    });
  };

  // output/Component.Showcase.ShowcaseIndex/index.js
  var pure28 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize11 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var renderCard = function(route) {
    return function(title4) {
      return function(description) {
        return a([classes(["howto-card"]), href4("#" + routeToPath(route))])([h3([classes(["howto-card__title"])])([text6(title4)]), p([classes(["howto-card__description"])])([text6(description)])]);
      };
    };
  };
  var render11 = function(v2) {
    return div4([classes(["docs-page", "showcase-index"])])([render2({
      logoSize: Large2.value,
      quadrant: NoQuadrant.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), section([classes(["docs-hero"])])([div4([classes(["docs-hero-content"])])([h1([classes(["docs-hero-title"])])([text6("Showcase")]), p([classes(["docs-hero-description"])])([text6("Complex, app-like visualizations that demonstrate PSD3's full capabilities. These examples benefit from full-screen treatment.")])])]), section([classes(["docs-section"])])([h2([classes(["docs-section-title"])])([text6("Interactive Visualizations")]), div4([classes(["howto-card-grid"])])([renderCard(ForcePlayground.value)("Force Playground")("Interactive force simulation with multiple datasets. Toggle forces, filter categories, and watch animated enter/exit transitions."), renderCard(TreeBuilder.value)("Tree Builder")("Visual tool for building D3 visualizations. Drag elements, configure attributes, and see live preview with sample data."), renderCard(SimpsonsV2.value)("Simpson's Paradox")("Interactive exploration of Simpson's Paradox with animated transitions. A classic setosa.io visualization ported to PSD3.")])])]);
  };
  var handleAction10 = function(v2) {
    return pure28(unit);
  };
  var component10 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render11,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction10,
        initialize: new Just(Initialize11.value)
      })
    });
  })();

  // output/Component.Showcase.ShowcaseLuaEdge/index.js
  var pure29 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize12 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var terminalSection = function(header2) {
    return function(content6) {
      return div4([classes(["terminal-section"])])([div4([classes(["terminal-section-header"])])([text6("\u2550\u2550\u2550[ " + (header2 + " ]\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"))]), pre([classes(["terminal-pre"])])([text6(content6)])]);
    };
  };
  var techStack = "\n  \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502                                                                 \u2502\n  \u2502   PureScript \u2500\u2500\u252C\u2500\u2500> JavaScript \u2500\u2500> Browser (Halogen SPAs)       \u2502\n  \u2502                \u2502                                                \u2502\n  \u2502                \u251C\u2500\u2500> Lua \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500> nginx (THIS EDGE ROUTER)      \u2502\n  \u2502                \u2502                                                \u2502\n  \u2502                \u251C\u2500\u2500> Erlang \u2500\u2500\u2500\u2500\u2500> BEAM VM (Tidal backend)       \u2502\n  \u2502                \u2502                                                \u2502\n  \u2502                \u251C\u2500\u2500> Python \u2500\u2500\u2500\u2500\u2500> Flask (EE/GE backends)        \u2502\n  \u2502                \u2502                                                \u2502\n  \u2502                \u2514\u2500\u2500> (Rust FFI) \u2500\u2500> WASM (Force demo)            \u2502\n  \u2502                                                                 \u2502\n  \u2502   One language. Five compilation targets. Zero runtime errors.  \u2502\n  \u2502                                                                 \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n";
  var systemStatus = "\n  Module              Status      Notes\n  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  Edge.Router         [ACTIVE]    Route matching operational\n  Edge.RateLimit      [ACTIVE]    50 req/sec, 100 burst\n  Edge.Metrics        [ACTIVE]    Request counting enabled\n  Edge.Health         [ACTIVE]    /edge/health responding\n\n  Compilation Target  Status      Compiler\n  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\n  Lua (OpenResty)     [OK]        pslua v0.17.0\n  JavaScript          [OK]        purs v0.15.x (also compiles)\n\n  \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n\n            Source: showcases/scuppered-ligature/\n\n  \u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\n";
  var runtimeDiagram = "\n                           \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                           \u2502         SCUPPERED LIGATURE      \u2502\n                           \u2502      (nginx + OpenResty + Lua)  \u2502\n                           \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                          \u2502\n     HTTP Request                         \u2502\n     \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500>          \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n                             \u2502                         \u2502\n                             \u2502   access_by_lua_block   \u2502\n                             \u2502   \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500   \u2502\n                             \u2502                         \u2502\n                             \u2502   1. Extract path       \u2502\n                             \u2502   2. Match route        \u2502\n                             \u2502   3. Check rate limit   \u2502\n                             \u2502   4. Rewrite URI        \u2502\n                             \u2502   5. Set upstream       \u2502\n                             \u2502                         \u2502\n                             \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                                          \u2502\n              \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n              \u2502               \u2502           \u2502           \u2502               \u2502\n              \u25BC               \u25BC           \u25BC           \u25BC               \u25BC\n        \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510   \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502  ERLANG  \u2502   \u2502  PYTHON  \u2502 \u2502  PYTHON  \u2502 \u2502  NODE.JS \u2502  \u2502   WASM   \u2502\n        \u2502  :8083   \u2502   \u2502  :5081   \u2502 \u2502  :5082   \u2502 \u2502  :3001   \u2502  \u2502  static  \u2502\n        \u2502          \u2502   \u2502          \u2502 \u2502          \u2502 \u2502          \u2502  \u2502          \u2502\n        \u2502  Tidal   \u2502   \u2502   EE     \u2502 \u2502   GE     \u2502 \u2502  Code    \u2502  \u2502  Force   \u2502\n        \u2502  Editor  \u2502   \u2502  API     \u2502 \u2502  API     \u2502 \u2502  API     \u2502  \u2502  Demo    \u2502\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n";
  var routeTable = "\n  \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502  PATH PATTERN      \u2502  UPSTREAM           \u2502  DESTINATION          \u2502\n  \u251C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n  \u2502  /                 \u2502  Website            \u2502  Halogen SPA          \u2502\n  \u2502  /tidal/*          \u2502  TidalFrontend      \u2502  Static JS            \u2502\n  \u2502  /tidal/api/*      \u2502  TidalBackend       \u2502  Erlang :8083         \u2502\n  \u2502  /ee/*             \u2502  EmbeddingFrontend  \u2502  Halogen SPA          \u2502\n  \u2502  /ee/api/*         \u2502  EmbeddingBackend   \u2502  Python :5081         \u2502\n  \u2502  /ge/*             \u2502  GridFrontend       \u2502  Halogen SPA          \u2502\n  \u2502  /ge/api/*         \u2502  GridBackend        \u2502  Python :5082         \u2502\n  \u2502  /sankey/*         \u2502  SankeyFrontend     \u2502  Static JS            \u2502\n  \u2502  /code/*           \u2502  CodeFrontend       \u2502  Halogen SPA          \u2502\n  \u2502  /code/api/*       \u2502  CodeBackend        \u2502  Node.js :3001        \u2502\n  \u2502  /wasm/*           \u2502  WasmDemo           \u2502  Static WASM          \u2502\n  \u2502  /psd3/*           \u2502  LibrarySites       \u2502  Static docs          \u2502\n  \u2502  /edge/metrics     \u2502  (internal)         \u2502  JSON metrics         \u2502\n  \u2502  /edge/health      \u2502  (internal)         \u2502  Health check         \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n\n  Route matching: PureScript pattern matching, compiled to Lua\n  URI rewriting:  /ee/api/embed \u2192 /api/embed (strips prefix)\n";
  var missionBrief = "\n  Every HTTP request to this domain passes through PureScript code\n  compiled to Lua, running inside nginx's OpenResty module.\n\n  This edge layer routes requests to backends written in:\n\n    \u2022 Erlang/OTP    (Tidal live coding editor)\n    \u2022 Python/Flask  (Embedding & Grid explorers)\n    \u2022 Node.js       (Code analysis tools)\n    \u2022 Rust/WASM     (Force simulation demo)\n    \u2022 JavaScript    (Halogen frontends)\n\n  The router is invisible. You're using it right now.\n";
  var handleAction11 = function(v2) {
    return pure29(unit);
  };
  var buildPipeline = "\n  \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510     \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502   PureScript    \u2502     \u2502    CoreFn IR    \u2502     \u2502    Lua Code     \u2502\n  \u2502                 \u2502\u2500\u2500\u2500\u2500>\u2502                 \u2502\u2500\u2500\u2500\u2500>\u2502                 \u2502\n  \u2502  src/*.purs     \u2502     \u2502   output/       \u2502     \u2502  dist/edge.lua  \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518     \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502                       \u2502                       \u2502\n          \u2502   spago build         \u2502   pslua              \u2502\n          \u2502                       \u2502                       \u2502\n          \u25BC                       \u25BC                       \u25BC\n  \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502                         Lua FFI Layer                           \u2502\n  \u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \u2502\n  \u2502                                                                 \u2502\n  \u2502  lua-ffi/Main.lua:                                              \u2502\n  \u2502    \u2022 getRequestPath()    -- ngx.var.uri                         \u2502\n  \u2502    \u2022 getClientIP()       -- ngx.var.remote_addr                 \u2502\n  \u2502    \u2022 setUpstream()       -- ngx.var.edge_upstream = ...         \u2502\n  \u2502    \u2022 checkRateLimit()    -- ngx.shared.rate_limit               \u2502\n  \u2502    \u2022 recordMetrics()     -- ngx.shared.stats                    \u2502\n  \u2502                                                                 \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2502\n          \u2502   docker build\n          \u25BC\n  \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502                    OpenResty Docker Image                       \u2502\n  \u2502  \u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500  \u2502\n  \u2502  FROM openresty/openresty:alpine                                \u2502\n  \u2502  COPY dist/edge.lua /usr/local/openresty/lualib/               \u2502\n  \u2502  COPY nginx.conf /etc/nginx/conf.d/                            \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n";
  var bootSequence = "\n  OpenResty/1.21.4 initializing...\n  Loading lua_shared_dict: stats [10MB] .............. OK\n  Loading lua_shared_dict: rate_limit [10MB] ......... OK\n  Loading PureScript module: edge.lua ................ OK\n\n  \u250C\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n  \u2502  SCUPPERED LIGATURE - Edge Router                       \u2502\n  \u2502                                                         \u2502\n  \u2502  Status: OPERATIONAL                                    \u2502\n  \u2502  Upstreams: 14 backends configured                      \u2502\n  \u2502  Rate Limit: 50 req/sec (100 burst)                     \u2502\n  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n";
  var render12 = function(v2) {
    return div4([classes(["terminal-page"])])([render2({
      logoSize: Normal.value,
      quadrant: NoQuadrant.value,
      prevNext: Nothing.value,
      pageTitle: new Just("Edge Router")
    }), div4([classes(["terminal-container"])])([div4([classes(["terminal-screen"])])([div4([classes(["terminal-header"])])([span_([text6("SCUPPERED LIGATURE v1.0")]), span4([classes(["terminal-blink"])])([text6("_")])]), div4([classes(["terminal-content"])])([terminalSection("SYSTEM BOOT")(bootSequence), terminalSection("MISSION BRIEF")(missionBrief), terminalSection("RUNTIME ARCHITECTURE")(runtimeDiagram), terminalSection("BUILD PIPELINE")(buildPipeline), terminalSection("ROUTE TABLE")(routeTable), terminalSection("POLYGLOT BACKENDS")(techStack), terminalSection("SYSTEM STATUS")(systemStatus)])])])]);
  };
  var component11 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render12,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction11,
        initialize: new Just(Initialize12.value)
      })
    });
  })();

  // output/Component.Tour.TourIndex/index.js
  var pure30 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize13 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var renderFeaturedCard = function(route) {
    return function(title4) {
      return function(description) {
        return function(badge) {
          return a([classes(["howto-card", "howto-card--featured"]), href4("#" + routeToPath(route))])([span4([classes(["howto-card__badge"])])([text6(badge)]), h3([classes(["howto-card__title"])])([text6(title4)]), p([classes(["howto-card__description"])])([text6(description)])]);
        };
      };
    };
  };
  var render13 = function(v2) {
    return div4([classes(["docs-page", "tour-index"])])([render2({
      logoSize: Large2.value,
      quadrant: NoQuadrant.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), section([classes(["docs-hero"])])([div4([classes(["docs-hero-content"])])([h1([classes(["docs-hero-title"])])([text6("Take the Tour")]), p([classes(["docs-hero-description"])])([text6("Experience Hylograph through guided, interactive explorations.")])])]), section([classes(["docs-section"])])([h2([classes(["docs-section-title"])])([text6("The Journey")]), p([classes(["docs-section-intro"])])([text6("Follow this path from simple shapes to complex visualizations.")]), div4([classes(["howto-card-grid"])])([renderFeaturedCard(TourMotionScrollyHATS.value)("Motion & Animation")("From a single breathing circle to force-directed networks. Master the art of animated transitions.")("9 animated steps")])]), section([classes(["docs-section"])])([h2([classes(["docs-section-title"])])([text6("Featured")]), p([classes(["docs-section-intro"])])([text6("Complex, app-like visualizations that demonstrate full capabilities.")]), div4([classes(["howto-card-grid"])])([renderFeaturedCard(TourSimpsons.value)("Simpson's Paradox")("Interactive exploration of a famous statistical paradox. See how aggregated data can reverse trends.")("Interactive"), renderFeaturedCard(ForcePlayground.value)("Force Explorer")("Interactive playground for network visualizations. Configure forces, filter data, explore relationships.")("Full interaction")])])]);
  };
  var handleAction12 = function(v2) {
    return pure30(unit);
  };
  var component12 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render13,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction12,
        initialize: new Just(Initialize13.value)
      })
    });
  })();

  // output/Component.Tour.TourMotionScrollyHATS/foreign.js
  var scrollToStep = (stepId) => () => {
    const marker = document.querySelector(`[data-step="${stepId}"]`);
    if (marker) {
      marker.scrollIntoView({ behavior: "instant", block: "center" });
    }
  };

  // output/Component.Tour.TourMotionAnimationsHATS/index.js
  var mapFlipped4 = /* @__PURE__ */ mapFlipped(functorArray);
  var elem6 = /* @__PURE__ */ elem2(eqInt);
  var show23 = /* @__PURE__ */ show(showInt);
  var show110 = /* @__PURE__ */ show(showNumber);
  var svgWidth2 = 500;
  var svgHeight2 = 300;
  var step5GupSpec = /* @__PURE__ */ (function() {
    return {
      enter: new Just({
        attrs: [staticNum("r")(40), staticStr("fill")("#27ae60"), staticNum("opacity")(1)],
        transition: new Just(transitionWith({
          duration: 800,
          delay: Nothing.value,
          staggerDelay: new Just(60),
          easing: new Just(CubicInOut2.value)
        }))
      }),
      update: new Just({
        attrs: [staticNum("r")(25), staticStr("fill")("#7f8c8d"), staticNum("opacity")(1)],
        transition: new Just(transitionWith({
          duration: 400,
          delay: Nothing.value,
          staggerDelay: Nothing.value,
          easing: new Just(CubicInOut2.value)
        }))
      }),
      exit: new Just({
        attrs: [staticNum("r")(0), staticStr("fill")("#a04000"), staticNum("opacity")(0)],
        transition: new Just(transitionWith({
          duration: 400,
          delay: Nothing.value,
          staggerDelay: new Just(40),
          easing: new Just(CubicIn2.value)
        }))
      })
    };
  })();
  var step2GupSpec = /* @__PURE__ */ (function() {
    return {
      enter: new Just({
        attrs: [staticNum("opacity")(0)],
        transition: new Just(transitionWith({
          duration: 500,
          delay: Nothing.value,
          staggerDelay: Nothing.value,
          easing: Nothing.value
        }))
      }),
      update: new Just({
        attrs: [],
        transition: new Just(transitionWith({
          duration: 1200,
          delay: Nothing.value,
          staggerDelay: Nothing.value,
          easing: new Just(CubicInOut2.value)
        }))
      }),
      exit: new Just({
        attrs: [staticNum("opacity")(0)],
        transition: new Just(transitionWith({
          duration: 300,
          delay: Nothing.value,
          staggerDelay: Nothing.value,
          easing: Nothing.value
        }))
      })
    };
  })();
  var step1GupSpec = /* @__PURE__ */ (function() {
    return {
      enter: new Just({
        attrs: [staticNum("opacity")(0), staticNum("r")(0)],
        transition: new Just(transitionWith({
          duration: 500,
          delay: Nothing.value,
          staggerDelay: Nothing.value,
          easing: new Just(CubicOut2.value)
        }))
      }),
      update: new Just({
        attrs: [],
        transition: new Just(transitionWith({
          duration: 1e3,
          delay: Nothing.value,
          staggerDelay: Nothing.value,
          easing: new Just(SinInOut2.value)
        }))
      }),
      exit: new Just({
        attrs: [staticNum("opacity")(0), staticNum("r")(0)],
        transition: new Just(transitionWith({
          duration: 300,
          delay: Nothing.value,
          staggerDelay: Nothing.value,
          easing: new Just(CubicIn2.value)
        }))
      })
    };
  })();
  var rightX = 400;
  var renderViz = function(selector) {
    return function(tree) {
      return function __do7() {
        rerender(selector)(tree)();
        return unit;
      };
    };
  };
  var makeMultiCircleData = function(numCircles) {
    return mapFlipped4(range2(0)(numCircles - 1 | 0))(function(i2) {
      return {
        id: i2 + 100 | 0,
        x: 80 + toNumber(i2) * 60
      };
    });
  };
  var leftX = 100;
  var step3GupSpec = /* @__PURE__ */ (function() {
    return {
      enter: new Just({
        attrs: [staticNum("cx")(leftX), staticNum("r")(30), staticNum("opacity")(0.5)],
        transition: new Just(transitionWith({
          duration: 800,
          delay: Nothing.value,
          staggerDelay: new Just(80),
          easing: new Just(CubicOut2.value)
        }))
      }),
      update: new Just({
        attrs: [],
        transition: new Just(transitionWith({
          duration: 800,
          delay: Nothing.value,
          staggerDelay: Nothing.value,
          easing: new Just(SinInOut2.value)
        }))
      }),
      exit: new Just({
        attrs: [staticNum("opacity")(0), staticNum("r")(0)],
        transition: new Just(transitionWith({
          duration: 400,
          delay: Nothing.value,
          staggerDelay: Nothing.value,
          easing: new Just(CubicIn2.value)
        }))
      })
    };
  })();
  var step4GupSpec = /* @__PURE__ */ (function() {
    return {
      enter: new Just({
        attrs: [staticNum("cx")(leftX), staticNum("r")(30), staticNum("opacity")(0.5)],
        transition: new Just(transitionWith({
          duration: 800,
          delay: Nothing.value,
          staggerDelay: new Just(80),
          easing: new Just(CubicOut2.value)
        }))
      }),
      update: new Just({
        attrs: [],
        transition: new Just(transitionWith({
          duration: 600,
          delay: Nothing.value,
          staggerDelay: new Just(80),
          easing: new Just(SinInOut2.value)
        }))
      }),
      exit: new Just({
        attrs: [staticNum("opacity")(0), staticNum("r")(0)],
        transition: new Just(transitionWith({
          duration: 400,
          delay: Nothing.value,
          staggerDelay: Nothing.value,
          easing: new Just(CubicIn2.value)
        }))
      })
    };
  })();
  var gupAllCircles = /* @__PURE__ */ (function() {
    return mapFlipped4(range2(0)(7 - 1 | 0))(function(i2) {
      return {
        id: i2,
        x: 60 + toNumber(i2) * 55
      };
    });
  })();
  var clearViz = function(selector) {
    return clearContainer(selector);
  };
  var circleRadius = 30;
  var centerY = 150;
  var step6GupSpec = /* @__PURE__ */ (function() {
    return {
      enter: new Just({
        attrs: [staticNum("y")(50), staticNum("opacity")(0), staticStr("fill")("#27ae60")],
        transition: new Just(transitionWith({
          duration: 750,
          delay: Nothing.value,
          staggerDelay: new Just(50),
          easing: new Just(BounceOut2.value)
        }))
      }),
      update: new Just({
        attrs: [staticNum("y")(centerY), staticStr("fill")("#2c3e50"), staticNum("opacity")(1)],
        transition: new Just(transitionWith({
          duration: 500,
          delay: Nothing.value,
          staggerDelay: new Just(30),
          easing: new Just(CubicInOut2.value)
        }))
      }),
      exit: new Just({
        attrs: [staticNum("y")(250), staticNum("opacity")(0), staticStr("fill")("#e74c3c")],
        transition: new Just(transitionWith({
          duration: 500,
          delay: Nothing.value,
          staggerDelay: new Just(40),
          easing: new Just(CubicIn2.value)
        }))
      })
    };
  })();
  var buildSvgContainer = function(children2) {
    return elem4(SVG.value)([width2(svgWidth2), height2(svgHeight2), viewBox2(0)(0)(svgWidth2)(svgHeight2), class_("motion-scrolly-viz"), preserveAspectRatio("xMidYMid meet")])([elem4(Group.value)([class_("circles-group")])(children2)]);
  };
  var buildStep6Tree = function(letterString) {
    var letters = mapWithIndex2(function(i2) {
      return function(c2) {
        return {
          letter: singleton6(c2),
          index: i2
        };
      };
    })(toCharArray(letterString));
    return buildSvgContainer([forEachWithGUP("gup-letters")(Text.value)(letters)(function(v2) {
      return v2.letter;
    })(function(d3) {
      return elem4(Text.value)([x4(60 + toNumber(d3.index) * 50), y4(centerY), fontSize2("36px"), textAnchor2("middle"), attr2("dominant-baseline")("middle"), fill2("#2c3e50"), opacity("1"), attr2("textContent")(d3.letter)])([]);
    })(step6GupSpec)]);
  };
  var buildStep5Tree = function(visibleIds) {
    var visibleCircles = filter(function(c2) {
      return elem6(c2.id)(visibleIds);
    })(gupAllCircles);
    return buildSvgContainer([forEachWithGUP("gup-circles")(Circle.value)(visibleCircles)(function($17) {
      return show23((function(v2) {
        return v2.id;
      })($17));
    })(function(d3) {
      return elem4(Circle.value)([cx2(d3.x), cy2(centerY), r2(25), fill2("#7f8c8d"), opacity("1"), class_("gup-circle")])([]);
    })(step5GupSpec)]);
  };
  var buildStep4Tree = function(circles) {
    return function(targetY) {
      return buildSvgContainer([forEachWithGUP("circles")(Circle.value)(circles)(function($18) {
        return show23((function(v2) {
          return v2.id;
        })($18));
      })(function(d3) {
        return elem4(Circle.value)([cx2(d3.x), cy2(targetY), r2(25), fill2("#9b59b6"), opacity("1"), class_("data-circle")])([]);
      })(step4GupSpec)]);
    };
  };
  var buildStep3Tree = function(circles) {
    return function(targetY) {
      return buildSvgContainer([forEachWithGUP("circles")(Circle.value)(circles)(function($19) {
        return show23((function(v2) {
          return v2.id;
        })($19));
      })(function(d3) {
        return elem4(Circle.value)([cx2(d3.x), cy2(targetY), r2(25), fill2("#e67e22"), opacity("1"), class_("data-circle")])([]);
      })(step3GupSpec)]);
    };
  };
  var buildStep2Tree = function(circle2) {
    return buildSvgContainer([forEachWithGUP("circle")(Circle.value)([circle2])(function($20) {
      return show23((function(v2) {
        return v2.id;
      })($20));
    })(function(d3) {
      return elem4(Circle.value)([cx2(d3.x), cy2(d3.y), r2(circleRadius), fill2("#1abc9c"), opacity("1"), class_("main-circle")])([]);
    })(step2GupSpec)]);
  };
  var buildStep1Tree = function(circle2) {
    return buildSvgContainer([forEachWithGUP("circle")(Circle.value)([circle2])(function($21) {
      return show23((function(v2) {
        return v2.id;
      })($21));
    })(function(d3) {
      return elem4(Circle.value)([cx2(d3.x), cy2(d3.y), r2(circleRadius), fill2("steelblue"), opacity(show110(d3.opacity)), class_("main-circle")])([]);
    })(step1GupSpec)]);
  };

  // output/Hylograph.ForceEngine.Links/index.js
  var bind11 = /* @__PURE__ */ bind(bindMaybe);
  var pure31 = /* @__PURE__ */ pure(applicativeMaybe);
  var swizzleLinks = function(nodes) {
    return function(links) {
      return function(transform7) {
        var swizzle = function(link4) {
          return bind11(index(nodes)(link4.source))(function(src10) {
            return bind11(index(nodes)(link4.target))(function(tgt) {
              return pure31({
                src: src10,
                tgt,
                link: link4
              });
            });
          });
        };
        var reindex = function(i2) {
          return function(v2) {
            return transform7(v2.src)(v2.tgt)(i2)(v2.link);
          };
        };
        return mapWithIndex2(reindex)(mapMaybe(swizzle)(links));
      };
    };
  };

  // node_modules/d3-array/src/ascending.js
  function ascending(a3, b2) {
    return a3 == null || b2 == null ? NaN : a3 < b2 ? -1 : a3 > b2 ? 1 : a3 >= b2 ? 0 : NaN;
  }

  // node_modules/d3-array/src/descending.js
  function descending(a3, b2) {
    return a3 == null || b2 == null ? NaN : b2 < a3 ? -1 : b2 > a3 ? 1 : b2 >= a3 ? 0 : NaN;
  }

  // node_modules/d3-array/src/bisector.js
  function bisector(f) {
    let compare12, compare22, delta;
    if (f.length !== 2) {
      compare12 = ascending;
      compare22 = (d3, x7) => ascending(f(d3), x7);
      delta = (d3, x7) => f(d3) - x7;
    } else {
      compare12 = f === ascending || f === descending ? f : zero2;
      compare22 = f;
      delta = f;
    }
    function left(a3, x7, lo = 0, hi = a3.length) {
      if (lo < hi) {
        if (compare12(x7, x7) !== 0) return hi;
        do {
          const mid = lo + hi >>> 1;
          if (compare22(a3[mid], x7) < 0) lo = mid + 1;
          else hi = mid;
        } while (lo < hi);
      }
      return lo;
    }
    function right(a3, x7, lo = 0, hi = a3.length) {
      if (lo < hi) {
        if (compare12(x7, x7) !== 0) return hi;
        do {
          const mid = lo + hi >>> 1;
          if (compare22(a3[mid], x7) <= 0) lo = mid + 1;
          else hi = mid;
        } while (lo < hi);
      }
      return lo;
    }
    function center2(a3, x7, lo = 0, hi = a3.length) {
      const i2 = left(a3, x7, lo, hi - 1);
      return i2 > lo && delta(a3[i2 - 1], x7) > -delta(a3[i2], x7) ? i2 - 1 : i2;
    }
    return { left, center: center2, right };
  }
  function zero2() {
    return 0;
  }

  // node_modules/d3-array/src/number.js
  function number(x7) {
    return x7 === null ? NaN : +x7;
  }

  // node_modules/d3-array/src/bisect.js
  var ascendingBisect = bisector(ascending);
  var bisectRight = ascendingBisect.right;
  var bisectLeft = ascendingBisect.left;
  var bisectCenter = bisector(number).center;
  var bisect_default = bisectRight;

  // node_modules/internmap/src/index.js
  var InternMap = class extends Map {
    constructor(entries, key = keyof) {
      super();
      Object.defineProperties(this, { _intern: { value: /* @__PURE__ */ new Map() }, _key: { value: key } });
      if (entries != null) for (const [key2, value18] of entries) this.set(key2, value18);
    }
    get(key) {
      return super.get(intern_get(this, key));
    }
    has(key) {
      return super.has(intern_get(this, key));
    }
    set(key, value18) {
      return super.set(intern_set(this, key), value18);
    }
    delete(key) {
      return super.delete(intern_delete(this, key));
    }
  };
  function intern_get({ _intern, _key }, value18) {
    const key = _key(value18);
    return _intern.has(key) ? _intern.get(key) : value18;
  }
  function intern_set({ _intern, _key }, value18) {
    const key = _key(value18);
    if (_intern.has(key)) return _intern.get(key);
    _intern.set(key, value18);
    return value18;
  }
  function intern_delete({ _intern, _key }, value18) {
    const key = _key(value18);
    if (_intern.has(key)) {
      value18 = _intern.get(key);
      _intern.delete(key);
    }
    return value18;
  }
  function keyof(value18) {
    return value18 !== null && typeof value18 === "object" ? value18.valueOf() : value18;
  }

  // node_modules/d3-array/src/ticks.js
  var e10 = Math.sqrt(50);
  var e5 = Math.sqrt(10);
  var e2 = Math.sqrt(2);
  function tickSpec(start4, stop3, count) {
    const step5 = (stop3 - start4) / Math.max(0, count), power2 = Math.floor(Math.log10(step5)), error4 = step5 / Math.pow(10, power2), factor = error4 >= e10 ? 10 : error4 >= e5 ? 5 : error4 >= e2 ? 2 : 1;
    let i1, i2, inc;
    if (power2 < 0) {
      inc = Math.pow(10, -power2) / factor;
      i1 = Math.round(start4 * inc);
      i2 = Math.round(stop3 * inc);
      if (i1 / inc < start4) ++i1;
      if (i2 / inc > stop3) --i2;
      inc = -inc;
    } else {
      inc = Math.pow(10, power2) * factor;
      i1 = Math.round(start4 / inc);
      i2 = Math.round(stop3 / inc);
      if (i1 * inc < start4) ++i1;
      if (i2 * inc > stop3) --i2;
    }
    if (i2 < i1 && 0.5 <= count && count < 2) return tickSpec(start4, stop3, count * 2);
    return [i1, i2, inc];
  }
  function ticks(start4, stop3, count) {
    stop3 = +stop3, start4 = +start4, count = +count;
    if (!(count > 0)) return [];
    if (start4 === stop3) return [start4];
    const reverse3 = stop3 < start4, [i1, i2, inc] = reverse3 ? tickSpec(stop3, start4, count) : tickSpec(start4, stop3, count);
    if (!(i2 >= i1)) return [];
    const n = i2 - i1 + 1, ticks3 = new Array(n);
    if (reverse3) {
      if (inc < 0) for (let i3 = 0; i3 < n; ++i3) ticks3[i3] = (i2 - i3) / -inc;
      else for (let i3 = 0; i3 < n; ++i3) ticks3[i3] = (i2 - i3) * inc;
    } else {
      if (inc < 0) for (let i3 = 0; i3 < n; ++i3) ticks3[i3] = (i1 + i3) / -inc;
      else for (let i3 = 0; i3 < n; ++i3) ticks3[i3] = (i1 + i3) * inc;
    }
    return ticks3;
  }
  function tickIncrement(start4, stop3, count) {
    stop3 = +stop3, start4 = +start4, count = +count;
    return tickSpec(start4, stop3, count)[2];
  }
  function tickStep(start4, stop3, count) {
    stop3 = +stop3, start4 = +start4, count = +count;
    const reverse3 = stop3 < start4, inc = reverse3 ? tickIncrement(stop3, start4, count) : tickIncrement(start4, stop3, count);
    return (reverse3 ? -1 : 1) * (inc < 0 ? 1 / -inc : inc);
  }

  // node_modules/d3-array/src/quantile.js
  function quantileSorted(values2, p2, valueof = number) {
    if (!(n = values2.length) || isNaN(p2 = +p2)) return;
    if (p2 <= 0 || n < 2) return +valueof(values2[0], 0, values2);
    if (p2 >= 1) return +valueof(values2[n - 1], n - 1, values2);
    var n, i2 = (n - 1) * p2, i0 = Math.floor(i2), value0 = +valueof(values2[i0], i0, values2), value1 = +valueof(values2[i0 + 1], i0 + 1, values2);
    return value0 + (value1 - value0) * (i2 - i0);
  }

  // node_modules/d3-array/src/range.js
  function range3(start4, stop3, step5) {
    start4 = +start4, stop3 = +stop3, step5 = (n = arguments.length) < 2 ? (stop3 = start4, start4 = 0, 1) : n < 3 ? 1 : +step5;
    var i2 = -1, n = Math.max(0, Math.ceil((stop3 - start4) / step5)) | 0, range5 = new Array(n);
    while (++i2 < n) {
      range5[i2] = start4 + i2 * step5;
    }
    return range5;
  }

  // node_modules/d3-scale/src/init.js
  function initRange(domain2, range5) {
    switch (arguments.length) {
      case 0:
        break;
      case 1:
        this.range(domain2);
        break;
      default:
        this.range(range5).domain(domain2);
        break;
    }
    return this;
  }

  // node_modules/d3-scale/src/ordinal.js
  var implicit = Symbol("implicit");
  function ordinal() {
    var index7 = new InternMap(), domain2 = [], range5 = [], unknown = implicit;
    function scale(d3) {
      let i2 = index7.get(d3);
      if (i2 === void 0) {
        if (unknown !== implicit) return unknown;
        index7.set(d3, i2 = domain2.push(d3) - 1);
      }
      return range5[i2 % range5.length];
    }
    scale.domain = function(_) {
      if (!arguments.length) return domain2.slice();
      domain2 = [], index7 = new InternMap();
      for (const value18 of _) {
        if (index7.has(value18)) continue;
        index7.set(value18, domain2.push(value18) - 1);
      }
      return scale;
    };
    scale.range = function(_) {
      return arguments.length ? (range5 = Array.from(_), scale) : range5.slice();
    };
    scale.unknown = function(_) {
      return arguments.length ? (unknown = _, scale) : unknown;
    };
    scale.copy = function() {
      return ordinal(domain2, range5).unknown(unknown);
    };
    initRange.apply(scale, arguments);
    return scale;
  }

  // node_modules/d3-scale/src/band.js
  function band() {
    var scale = ordinal().unknown(void 0), domain2 = scale.domain, ordinalRange = scale.range, r0 = 0, r1 = 1, step5, bandwidth2, round4 = false, paddingInner2 = 0, paddingOuter2 = 0, align2 = 0.5;
    delete scale.unknown;
    function rescale() {
      var n = domain2().length, reverse3 = r1 < r0, start4 = reverse3 ? r1 : r0, stop3 = reverse3 ? r0 : r1;
      step5 = (stop3 - start4) / Math.max(1, n - paddingInner2 + paddingOuter2 * 2);
      if (round4) step5 = Math.floor(step5);
      start4 += (stop3 - start4 - step5 * (n - paddingInner2)) * align2;
      bandwidth2 = step5 * (1 - paddingInner2);
      if (round4) start4 = Math.round(start4), bandwidth2 = Math.round(bandwidth2);
      var values2 = range3(n).map(function(i2) {
        return start4 + step5 * i2;
      });
      return ordinalRange(reverse3 ? values2.reverse() : values2);
    }
    scale.domain = function(_) {
      return arguments.length ? (domain2(_), rescale()) : domain2();
    };
    scale.range = function(_) {
      return arguments.length ? ([r0, r1] = _, r0 = +r0, r1 = +r1, rescale()) : [r0, r1];
    };
    scale.rangeRound = function(_) {
      return [r0, r1] = _, r0 = +r0, r1 = +r1, round4 = true, rescale();
    };
    scale.bandwidth = function() {
      return bandwidth2;
    };
    scale.step = function() {
      return step5;
    };
    scale.round = function(_) {
      return arguments.length ? (round4 = !!_, rescale()) : round4;
    };
    scale.padding = function(_) {
      return arguments.length ? (paddingInner2 = Math.min(1, paddingOuter2 = +_), rescale()) : paddingInner2;
    };
    scale.paddingInner = function(_) {
      return arguments.length ? (paddingInner2 = Math.min(1, _), rescale()) : paddingInner2;
    };
    scale.paddingOuter = function(_) {
      return arguments.length ? (paddingOuter2 = +_, rescale()) : paddingOuter2;
    };
    scale.align = function(_) {
      return arguments.length ? (align2 = Math.max(0, Math.min(1, _)), rescale()) : align2;
    };
    scale.copy = function() {
      return band(domain2(), [r0, r1]).round(round4).paddingInner(paddingInner2).paddingOuter(paddingOuter2).align(align2);
    };
    return initRange.apply(rescale(), arguments);
  }
  function pointish(scale) {
    var copy4 = scale.copy;
    scale.padding = scale.paddingOuter;
    delete scale.paddingInner;
    delete scale.paddingOuter;
    scale.copy = function() {
      return pointish(copy4());
    };
    return scale;
  }
  function point() {
    return pointish(band.apply(null, arguments).paddingInner(1));
  }

  // node_modules/d3-color/src/define.js
  function define_default(constructor, factory, prototype) {
    constructor.prototype = factory.prototype = prototype;
    prototype.constructor = constructor;
  }
  function extend2(parent2, definition) {
    var prototype = Object.create(parent2.prototype);
    for (var key in definition) prototype[key] = definition[key];
    return prototype;
  }

  // node_modules/d3-color/src/color.js
  function Color() {
  }
  var darker = 0.7;
  var brighter = 1 / darker;
  var reI = "\\s*([+-]?\\d+)\\s*";
  var reN = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*";
  var reP = "\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*";
  var reHex = /^#([0-9a-f]{3,8})$/;
  var reRgbInteger = new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`);
  var reRgbPercent = new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`);
  var reRgbaInteger = new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`);
  var reRgbaPercent = new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`);
  var reHslPercent = new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`);
  var reHslaPercent = new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`);
  var named2 = {
    aliceblue: 15792383,
    antiquewhite: 16444375,
    aqua: 65535,
    aquamarine: 8388564,
    azure: 15794175,
    beige: 16119260,
    bisque: 16770244,
    black: 0,
    blanchedalmond: 16772045,
    blue: 255,
    blueviolet: 9055202,
    brown: 10824234,
    burlywood: 14596231,
    cadetblue: 6266528,
    chartreuse: 8388352,
    chocolate: 13789470,
    coral: 16744272,
    cornflowerblue: 6591981,
    cornsilk: 16775388,
    crimson: 14423100,
    cyan: 65535,
    darkblue: 139,
    darkcyan: 35723,
    darkgoldenrod: 12092939,
    darkgray: 11119017,
    darkgreen: 25600,
    darkgrey: 11119017,
    darkkhaki: 12433259,
    darkmagenta: 9109643,
    darkolivegreen: 5597999,
    darkorange: 16747520,
    darkorchid: 10040012,
    darkred: 9109504,
    darksalmon: 15308410,
    darkseagreen: 9419919,
    darkslateblue: 4734347,
    darkslategray: 3100495,
    darkslategrey: 3100495,
    darkturquoise: 52945,
    darkviolet: 9699539,
    deeppink: 16716947,
    deepskyblue: 49151,
    dimgray: 6908265,
    dimgrey: 6908265,
    dodgerblue: 2003199,
    firebrick: 11674146,
    floralwhite: 16775920,
    forestgreen: 2263842,
    fuchsia: 16711935,
    gainsboro: 14474460,
    ghostwhite: 16316671,
    gold: 16766720,
    goldenrod: 14329120,
    gray: 8421504,
    green: 32768,
    greenyellow: 11403055,
    grey: 8421504,
    honeydew: 15794160,
    hotpink: 16738740,
    indianred: 13458524,
    indigo: 4915330,
    ivory: 16777200,
    khaki: 15787660,
    lavender: 15132410,
    lavenderblush: 16773365,
    lawngreen: 8190976,
    lemonchiffon: 16775885,
    lightblue: 11393254,
    lightcoral: 15761536,
    lightcyan: 14745599,
    lightgoldenrodyellow: 16448210,
    lightgray: 13882323,
    lightgreen: 9498256,
    lightgrey: 13882323,
    lightpink: 16758465,
    lightsalmon: 16752762,
    lightseagreen: 2142890,
    lightskyblue: 8900346,
    lightslategray: 7833753,
    lightslategrey: 7833753,
    lightsteelblue: 11584734,
    lightyellow: 16777184,
    lime: 65280,
    limegreen: 3329330,
    linen: 16445670,
    magenta: 16711935,
    maroon: 8388608,
    mediumaquamarine: 6737322,
    mediumblue: 205,
    mediumorchid: 12211667,
    mediumpurple: 9662683,
    mediumseagreen: 3978097,
    mediumslateblue: 8087790,
    mediumspringgreen: 64154,
    mediumturquoise: 4772300,
    mediumvioletred: 13047173,
    midnightblue: 1644912,
    mintcream: 16121850,
    mistyrose: 16770273,
    moccasin: 16770229,
    navajowhite: 16768685,
    navy: 128,
    oldlace: 16643558,
    olive: 8421376,
    olivedrab: 7048739,
    orange: 16753920,
    orangered: 16729344,
    orchid: 14315734,
    palegoldenrod: 15657130,
    palegreen: 10025880,
    paleturquoise: 11529966,
    palevioletred: 14381203,
    papayawhip: 16773077,
    peachpuff: 16767673,
    peru: 13468991,
    pink: 16761035,
    plum: 14524637,
    powderblue: 11591910,
    purple: 8388736,
    rebeccapurple: 6697881,
    red: 16711680,
    rosybrown: 12357519,
    royalblue: 4286945,
    saddlebrown: 9127187,
    salmon: 16416882,
    sandybrown: 16032864,
    seagreen: 3050327,
    seashell: 16774638,
    sienna: 10506797,
    silver: 12632256,
    skyblue: 8900331,
    slateblue: 6970061,
    slategray: 7372944,
    slategrey: 7372944,
    snow: 16775930,
    springgreen: 65407,
    steelblue: 4620980,
    tan: 13808780,
    teal: 32896,
    thistle: 14204888,
    tomato: 16737095,
    turquoise: 4251856,
    violet: 15631086,
    wheat: 16113331,
    white: 16777215,
    whitesmoke: 16119285,
    yellow: 16776960,
    yellowgreen: 10145074
  };
  define_default(Color, color, {
    copy(channels) {
      return Object.assign(new this.constructor(), this, channels);
    },
    displayable() {
      return this.rgb().displayable();
    },
    hex: color_formatHex,
    // Deprecated! Use color.formatHex.
    formatHex: color_formatHex,
    formatHex8: color_formatHex8,
    formatHsl: color_formatHsl,
    formatRgb: color_formatRgb,
    toString: color_formatRgb
  });
  function color_formatHex() {
    return this.rgb().formatHex();
  }
  function color_formatHex8() {
    return this.rgb().formatHex8();
  }
  function color_formatHsl() {
    return hslConvert(this).formatHsl();
  }
  function color_formatRgb() {
    return this.rgb().formatRgb();
  }
  function color(format2) {
    var m2, l2;
    format2 = (format2 + "").trim().toLowerCase();
    return (m2 = reHex.exec(format2)) ? (l2 = m2[1].length, m2 = parseInt(m2[1], 16), l2 === 6 ? rgbn(m2) : l2 === 3 ? new Rgb(m2 >> 8 & 15 | m2 >> 4 & 240, m2 >> 4 & 15 | m2 & 240, (m2 & 15) << 4 | m2 & 15, 1) : l2 === 8 ? rgba(m2 >> 24 & 255, m2 >> 16 & 255, m2 >> 8 & 255, (m2 & 255) / 255) : l2 === 4 ? rgba(m2 >> 12 & 15 | m2 >> 8 & 240, m2 >> 8 & 15 | m2 >> 4 & 240, m2 >> 4 & 15 | m2 & 240, ((m2 & 15) << 4 | m2 & 15) / 255) : null) : (m2 = reRgbInteger.exec(format2)) ? new Rgb(m2[1], m2[2], m2[3], 1) : (m2 = reRgbPercent.exec(format2)) ? new Rgb(m2[1] * 255 / 100, m2[2] * 255 / 100, m2[3] * 255 / 100, 1) : (m2 = reRgbaInteger.exec(format2)) ? rgba(m2[1], m2[2], m2[3], m2[4]) : (m2 = reRgbaPercent.exec(format2)) ? rgba(m2[1] * 255 / 100, m2[2] * 255 / 100, m2[3] * 255 / 100, m2[4]) : (m2 = reHslPercent.exec(format2)) ? hsla(m2[1], m2[2] / 100, m2[3] / 100, 1) : (m2 = reHslaPercent.exec(format2)) ? hsla(m2[1], m2[2] / 100, m2[3] / 100, m2[4]) : named2.hasOwnProperty(format2) ? rgbn(named2[format2]) : format2 === "transparent" ? new Rgb(NaN, NaN, NaN, 0) : null;
  }
  function rgbn(n) {
    return new Rgb(n >> 16 & 255, n >> 8 & 255, n & 255, 1);
  }
  function rgba(r8, g2, b2, a3) {
    if (a3 <= 0) r8 = g2 = b2 = NaN;
    return new Rgb(r8, g2, b2, a3);
  }
  function rgbConvert(o) {
    if (!(o instanceof Color)) o = color(o);
    if (!o) return new Rgb();
    o = o.rgb();
    return new Rgb(o.r, o.g, o.b, o.opacity);
  }
  function rgb2(r8, g2, b2, opacity3) {
    return arguments.length === 1 ? rgbConvert(r8) : new Rgb(r8, g2, b2, opacity3 == null ? 1 : opacity3);
  }
  function Rgb(r8, g2, b2, opacity3) {
    this.r = +r8;
    this.g = +g2;
    this.b = +b2;
    this.opacity = +opacity3;
  }
  define_default(Rgb, rgb2, extend2(Color, {
    brighter(k) {
      k = k == null ? brighter : Math.pow(brighter, k);
      return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
    },
    darker(k) {
      k = k == null ? darker : Math.pow(darker, k);
      return new Rgb(this.r * k, this.g * k, this.b * k, this.opacity);
    },
    rgb() {
      return this;
    },
    clamp() {
      return new Rgb(clampi(this.r), clampi(this.g), clampi(this.b), clampa(this.opacity));
    },
    displayable() {
      return -0.5 <= this.r && this.r < 255.5 && (-0.5 <= this.g && this.g < 255.5) && (-0.5 <= this.b && this.b < 255.5) && (0 <= this.opacity && this.opacity <= 1);
    },
    hex: rgb_formatHex,
    // Deprecated! Use color.formatHex.
    formatHex: rgb_formatHex,
    formatHex8: rgb_formatHex8,
    formatRgb: rgb_formatRgb,
    toString: rgb_formatRgb
  }));
  function rgb_formatHex() {
    return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}`;
  }
  function rgb_formatHex8() {
    return `#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity) ? 1 : this.opacity) * 255)}`;
  }
  function rgb_formatRgb() {
    const a3 = clampa(this.opacity);
    return `${a3 === 1 ? "rgb(" : "rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${a3 === 1 ? ")" : `, ${a3})`}`;
  }
  function clampa(opacity3) {
    return isNaN(opacity3) ? 1 : Math.max(0, Math.min(1, opacity3));
  }
  function clampi(value18) {
    return Math.max(0, Math.min(255, Math.round(value18) || 0));
  }
  function hex(value18) {
    value18 = clampi(value18);
    return (value18 < 16 ? "0" : "") + value18.toString(16);
  }
  function hsla(h7, s2, l2, a3) {
    if (a3 <= 0) h7 = s2 = l2 = NaN;
    else if (l2 <= 0 || l2 >= 1) h7 = s2 = NaN;
    else if (s2 <= 0) h7 = NaN;
    return new Hsl(h7, s2, l2, a3);
  }
  function hslConvert(o) {
    if (o instanceof Hsl) return new Hsl(o.h, o.s, o.l, o.opacity);
    if (!(o instanceof Color)) o = color(o);
    if (!o) return new Hsl();
    if (o instanceof Hsl) return o;
    o = o.rgb();
    var r8 = o.r / 255, g2 = o.g / 255, b2 = o.b / 255, min13 = Math.min(r8, g2, b2), max11 = Math.max(r8, g2, b2), h7 = NaN, s2 = max11 - min13, l2 = (max11 + min13) / 2;
    if (s2) {
      if (r8 === max11) h7 = (g2 - b2) / s2 + (g2 < b2) * 6;
      else if (g2 === max11) h7 = (b2 - r8) / s2 + 2;
      else h7 = (r8 - g2) / s2 + 4;
      s2 /= l2 < 0.5 ? max11 + min13 : 2 - max11 - min13;
      h7 *= 60;
    } else {
      s2 = l2 > 0 && l2 < 1 ? 0 : h7;
    }
    return new Hsl(h7, s2, l2, o.opacity);
  }
  function hsl2(h7, s2, l2, opacity3) {
    return arguments.length === 1 ? hslConvert(h7) : new Hsl(h7, s2, l2, opacity3 == null ? 1 : opacity3);
  }
  function Hsl(h7, s2, l2, opacity3) {
    this.h = +h7;
    this.s = +s2;
    this.l = +l2;
    this.opacity = +opacity3;
  }
  define_default(Hsl, hsl2, extend2(Color, {
    brighter(k) {
      k = k == null ? brighter : Math.pow(brighter, k);
      return new Hsl(this.h, this.s, this.l * k, this.opacity);
    },
    darker(k) {
      k = k == null ? darker : Math.pow(darker, k);
      return new Hsl(this.h, this.s, this.l * k, this.opacity);
    },
    rgb() {
      var h7 = this.h % 360 + (this.h < 0) * 360, s2 = isNaN(h7) || isNaN(this.s) ? 0 : this.s, l2 = this.l, m2 = l2 + (l2 < 0.5 ? l2 : 1 - l2) * s2, m1 = 2 * l2 - m2;
      return new Rgb(
        hsl2rgb(h7 >= 240 ? h7 - 240 : h7 + 120, m1, m2),
        hsl2rgb(h7, m1, m2),
        hsl2rgb(h7 < 120 ? h7 + 240 : h7 - 120, m1, m2),
        this.opacity
      );
    },
    clamp() {
      return new Hsl(clamph(this.h), clampt(this.s), clampt(this.l), clampa(this.opacity));
    },
    displayable() {
      return (0 <= this.s && this.s <= 1 || isNaN(this.s)) && (0 <= this.l && this.l <= 1) && (0 <= this.opacity && this.opacity <= 1);
    },
    formatHsl() {
      const a3 = clampa(this.opacity);
      return `${a3 === 1 ? "hsl(" : "hsla("}${clamph(this.h)}, ${clampt(this.s) * 100}%, ${clampt(this.l) * 100}%${a3 === 1 ? ")" : `, ${a3})`}`;
    }
  }));
  function clamph(value18) {
    value18 = (value18 || 0) % 360;
    return value18 < 0 ? value18 + 360 : value18;
  }
  function clampt(value18) {
    return Math.max(0, Math.min(1, value18 || 0));
  }
  function hsl2rgb(h7, m1, m2) {
    return (h7 < 60 ? m1 + (m2 - m1) * h7 / 60 : h7 < 180 ? m2 : h7 < 240 ? m1 + (m2 - m1) * (240 - h7) / 60 : m1) * 255;
  }

  // node_modules/d3-interpolate/src/basis.js
  function basis(t12, v0, v1, v2, v3) {
    var t2 = t12 * t12, t3 = t2 * t12;
    return ((1 - 3 * t12 + 3 * t2 - t3) * v0 + (4 - 6 * t2 + 3 * t3) * v1 + (1 + 3 * t12 + 3 * t2 - 3 * t3) * v2 + t3 * v3) / 6;
  }
  function basis_default(values2) {
    var n = values2.length - 1;
    return function(t2) {
      var i2 = t2 <= 0 ? t2 = 0 : t2 >= 1 ? (t2 = 1, n - 1) : Math.floor(t2 * n), v1 = values2[i2], v2 = values2[i2 + 1], v0 = i2 > 0 ? values2[i2 - 1] : 2 * v1 - v2, v3 = i2 < n - 1 ? values2[i2 + 2] : 2 * v2 - v1;
      return basis((t2 - i2 / n) * n, v0, v1, v2, v3);
    };
  }

  // node_modules/d3-interpolate/src/basisClosed.js
  function basisClosed_default(values2) {
    var n = values2.length;
    return function(t2) {
      var i2 = Math.floor(((t2 %= 1) < 0 ? ++t2 : t2) * n), v0 = values2[(i2 + n - 1) % n], v1 = values2[i2 % n], v2 = values2[(i2 + 1) % n], v3 = values2[(i2 + 2) % n];
      return basis((t2 - i2 / n) * n, v0, v1, v2, v3);
    };
  }

  // node_modules/d3-interpolate/src/constant.js
  var constant_default2 = (x7) => () => x7;

  // node_modules/d3-interpolate/src/color.js
  function linear2(a3, d3) {
    return function(t2) {
      return a3 + t2 * d3;
    };
  }
  function exponential(a3, b2, y7) {
    return a3 = Math.pow(a3, y7), b2 = Math.pow(b2, y7) - a3, y7 = 1 / y7, function(t2) {
      return Math.pow(a3 + t2 * b2, y7);
    };
  }
  function gamma(y7) {
    return (y7 = +y7) === 1 ? nogamma : function(a3, b2) {
      return b2 - a3 ? exponential(a3, b2, y7) : constant_default2(isNaN(a3) ? b2 : a3);
    };
  }
  function nogamma(a3, b2) {
    var d3 = b2 - a3;
    return d3 ? linear2(a3, d3) : constant_default2(isNaN(a3) ? b2 : a3);
  }

  // node_modules/d3-interpolate/src/rgb.js
  var rgb_default = (function rgbGamma(y7) {
    var color2 = gamma(y7);
    function rgb3(start4, end2) {
      var r8 = color2((start4 = rgb2(start4)).r, (end2 = rgb2(end2)).r), g2 = color2(start4.g, end2.g), b2 = color2(start4.b, end2.b), opacity3 = nogamma(start4.opacity, end2.opacity);
      return function(t2) {
        start4.r = r8(t2);
        start4.g = g2(t2);
        start4.b = b2(t2);
        start4.opacity = opacity3(t2);
        return start4 + "";
      };
    }
    rgb3.gamma = rgbGamma;
    return rgb3;
  })(1);
  function rgbSpline(spline) {
    return function(colors) {
      var n = colors.length, r8 = new Array(n), g2 = new Array(n), b2 = new Array(n), i2, color2;
      for (i2 = 0; i2 < n; ++i2) {
        color2 = rgb2(colors[i2]);
        r8[i2] = color2.r || 0;
        g2[i2] = color2.g || 0;
        b2[i2] = color2.b || 0;
      }
      r8 = spline(r8);
      g2 = spline(g2);
      b2 = spline(b2);
      color2.opacity = 1;
      return function(t2) {
        color2.r = r8(t2);
        color2.g = g2(t2);
        color2.b = b2(t2);
        return color2 + "";
      };
    };
  }
  var rgbBasis = rgbSpline(basis_default);
  var rgbBasisClosed = rgbSpline(basisClosed_default);

  // node_modules/d3-interpolate/src/numberArray.js
  function numberArray_default(a3, b2) {
    if (!b2) b2 = [];
    var n = a3 ? Math.min(b2.length, a3.length) : 0, c2 = b2.slice(), i2;
    return function(t2) {
      for (i2 = 0; i2 < n; ++i2) c2[i2] = a3[i2] * (1 - t2) + b2[i2] * t2;
      return c2;
    };
  }
  function isNumberArray(x7) {
    return ArrayBuffer.isView(x7) && !(x7 instanceof DataView);
  }

  // node_modules/d3-interpolate/src/array.js
  function genericArray(a3, b2) {
    var nb = b2 ? b2.length : 0, na = a3 ? Math.min(nb, a3.length) : 0, x7 = new Array(na), c2 = new Array(nb), i2;
    for (i2 = 0; i2 < na; ++i2) x7[i2] = value_default(a3[i2], b2[i2]);
    for (; i2 < nb; ++i2) c2[i2] = b2[i2];
    return function(t2) {
      for (i2 = 0; i2 < na; ++i2) c2[i2] = x7[i2](t2);
      return c2;
    };
  }

  // node_modules/d3-interpolate/src/date.js
  function date_default(a3, b2) {
    var d3 = /* @__PURE__ */ new Date();
    return a3 = +a3, b2 = +b2, function(t2) {
      return d3.setTime(a3 * (1 - t2) + b2 * t2), d3;
    };
  }

  // node_modules/d3-interpolate/src/number.js
  function number_default(a3, b2) {
    return a3 = +a3, b2 = +b2, function(t2) {
      return a3 * (1 - t2) + b2 * t2;
    };
  }

  // node_modules/d3-interpolate/src/object.js
  function object_default(a3, b2) {
    var i2 = {}, c2 = {}, k;
    if (a3 === null || typeof a3 !== "object") a3 = {};
    if (b2 === null || typeof b2 !== "object") b2 = {};
    for (k in b2) {
      if (k in a3) {
        i2[k] = value_default(a3[k], b2[k]);
      } else {
        c2[k] = b2[k];
      }
    }
    return function(t2) {
      for (k in i2) c2[k] = i2[k](t2);
      return c2;
    };
  }

  // node_modules/d3-interpolate/src/string.js
  var reA = /[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g;
  var reB = new RegExp(reA.source, "g");
  function zero3(b2) {
    return function() {
      return b2;
    };
  }
  function one3(b2) {
    return function(t2) {
      return b2(t2) + "";
    };
  }
  function string_default(a3, b2) {
    var bi = reA.lastIndex = reB.lastIndex = 0, am, bm, bs, i2 = -1, s2 = [], q3 = [];
    a3 = a3 + "", b2 = b2 + "";
    while ((am = reA.exec(a3)) && (bm = reB.exec(b2))) {
      if ((bs = bm.index) > bi) {
        bs = b2.slice(bi, bs);
        if (s2[i2]) s2[i2] += bs;
        else s2[++i2] = bs;
      }
      if ((am = am[0]) === (bm = bm[0])) {
        if (s2[i2]) s2[i2] += bm;
        else s2[++i2] = bm;
      } else {
        s2[++i2] = null;
        q3.push({ i: i2, x: number_default(am, bm) });
      }
      bi = reB.lastIndex;
    }
    if (bi < b2.length) {
      bs = b2.slice(bi);
      if (s2[i2]) s2[i2] += bs;
      else s2[++i2] = bs;
    }
    return s2.length < 2 ? q3[0] ? one3(q3[0].x) : zero3(b2) : (b2 = q3.length, function(t2) {
      for (var i3 = 0, o; i3 < b2; ++i3) s2[(o = q3[i3]).i] = o.x(t2);
      return s2.join("");
    });
  }

  // node_modules/d3-interpolate/src/value.js
  function value_default(a3, b2) {
    var t2 = typeof b2, c2;
    return b2 == null || t2 === "boolean" ? constant_default2(b2) : (t2 === "number" ? number_default : t2 === "string" ? (c2 = color(b2)) ? (b2 = c2, rgb_default) : string_default : b2 instanceof color ? rgb_default : b2 instanceof Date ? date_default : isNumberArray(b2) ? numberArray_default : Array.isArray(b2) ? genericArray : typeof b2.valueOf !== "function" && typeof b2.toString !== "function" || isNaN(b2) ? object_default : number_default)(a3, b2);
  }

  // node_modules/d3-interpolate/src/round.js
  function round_default(a3, b2) {
    return a3 = +a3, b2 = +b2, function(t2) {
      return Math.round(a3 * (1 - t2) + b2 * t2);
    };
  }

  // node_modules/d3-scale/src/constant.js
  function constants(x7) {
    return function() {
      return x7;
    };
  }

  // node_modules/d3-scale/src/number.js
  function number2(x7) {
    return +x7;
  }

  // node_modules/d3-scale/src/continuous.js
  var unit2 = [0, 1];
  function identity13(x7) {
    return x7;
  }
  function normalize2(a3, b2) {
    return (b2 -= a3 = +a3) ? function(x7) {
      return (x7 - a3) / b2;
    } : constants(isNaN(b2) ? NaN : 0.5);
  }
  function clamper(a3, b2) {
    var t2;
    if (a3 > b2) t2 = a3, a3 = b2, b2 = t2;
    return function(x7) {
      return Math.max(a3, Math.min(b2, x7));
    };
  }
  function bimap3(domain2, range5, interpolate) {
    var d0 = domain2[0], d1 = domain2[1], r0 = range5[0], r1 = range5[1];
    if (d1 < d0) d0 = normalize2(d1, d0), r0 = interpolate(r1, r0);
    else d0 = normalize2(d0, d1), r0 = interpolate(r0, r1);
    return function(x7) {
      return r0(d0(x7));
    };
  }
  function polymap(domain2, range5, interpolate) {
    var j = Math.min(domain2.length, range5.length) - 1, d3 = new Array(j), r8 = new Array(j), i2 = -1;
    if (domain2[j] < domain2[0]) {
      domain2 = domain2.slice().reverse();
      range5 = range5.slice().reverse();
    }
    while (++i2 < j) {
      d3[i2] = normalize2(domain2[i2], domain2[i2 + 1]);
      r8[i2] = interpolate(range5[i2], range5[i2 + 1]);
    }
    return function(x7) {
      var i3 = bisect_default(domain2, x7, 1, j) - 1;
      return r8[i3](d3[i3](x7));
    };
  }
  function copy2(source3, target7) {
    return target7.domain(source3.domain()).range(source3.range()).interpolate(source3.interpolate()).clamp(source3.clamp()).unknown(source3.unknown());
  }
  function transformer() {
    var domain2 = unit2, range5 = unit2, interpolate = value_default, transform7, untransform, unknown, clamp4 = identity13, piecewise, output2, input3;
    function rescale() {
      var n = Math.min(domain2.length, range5.length);
      if (clamp4 !== identity13) clamp4 = clamper(domain2[0], domain2[n - 1]);
      piecewise = n > 2 ? polymap : bimap3;
      output2 = input3 = null;
      return scale;
    }
    function scale(x7) {
      return x7 == null || isNaN(x7 = +x7) ? unknown : (output2 || (output2 = piecewise(domain2.map(transform7), range5, interpolate)))(transform7(clamp4(x7)));
    }
    scale.invert = function(y7) {
      return clamp4(untransform((input3 || (input3 = piecewise(range5, domain2.map(transform7), number_default)))(y7)));
    };
    scale.domain = function(_) {
      return arguments.length ? (domain2 = Array.from(_, number2), rescale()) : domain2.slice();
    };
    scale.range = function(_) {
      return arguments.length ? (range5 = Array.from(_), rescale()) : range5.slice();
    };
    scale.rangeRound = function(_) {
      return range5 = Array.from(_), interpolate = round_default, rescale();
    };
    scale.clamp = function(_) {
      return arguments.length ? (clamp4 = _ ? true : identity13, rescale()) : clamp4 !== identity13;
    };
    scale.interpolate = function(_) {
      return arguments.length ? (interpolate = _, rescale()) : interpolate;
    };
    scale.unknown = function(_) {
      return arguments.length ? (unknown = _, scale) : unknown;
    };
    return function(t2, u2) {
      transform7 = t2, untransform = u2;
      return rescale();
    };
  }
  function continuous() {
    return transformer()(identity13, identity13);
  }

  // node_modules/d3-format/src/formatDecimal.js
  function formatDecimal_default(x7) {
    return Math.abs(x7 = Math.round(x7)) >= 1e21 ? x7.toLocaleString("en").replace(/,/g, "") : x7.toString(10);
  }
  function formatDecimalParts(x7, p2) {
    if ((i2 = (x7 = p2 ? x7.toExponential(p2 - 1) : x7.toExponential()).indexOf("e")) < 0) return null;
    var i2, coefficient = x7.slice(0, i2);
    return [
      coefficient.length > 1 ? coefficient[0] + coefficient.slice(2) : coefficient,
      +x7.slice(i2 + 1)
    ];
  }

  // node_modules/d3-format/src/exponent.js
  function exponent_default(x7) {
    return x7 = formatDecimalParts(Math.abs(x7)), x7 ? x7[1] : NaN;
  }

  // node_modules/d3-format/src/formatGroup.js
  function formatGroup_default(grouping, thousands) {
    return function(value18, width14) {
      var i2 = value18.length, t2 = [], j = 0, g2 = grouping[0], length10 = 0;
      while (i2 > 0 && g2 > 0) {
        if (length10 + g2 + 1 > width14) g2 = Math.max(1, width14 - length10);
        t2.push(value18.substring(i2 -= g2, i2 + g2));
        if ((length10 += g2 + 1) > width14) break;
        g2 = grouping[j = (j + 1) % grouping.length];
      }
      return t2.reverse().join(thousands);
    };
  }

  // node_modules/d3-format/src/formatNumerals.js
  function formatNumerals_default(numerals) {
    return function(value18) {
      return value18.replace(/[0-9]/g, function(i2) {
        return numerals[+i2];
      });
    };
  }

  // node_modules/d3-format/src/formatSpecifier.js
  var re = /^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;
  function formatSpecifier(specifier) {
    if (!(match3 = re.exec(specifier))) throw new Error("invalid format: " + specifier);
    var match3;
    return new FormatSpecifier({
      fill: match3[1],
      align: match3[2],
      sign: match3[3],
      symbol: match3[4],
      zero: match3[5],
      width: match3[6],
      comma: match3[7],
      precision: match3[8] && match3[8].slice(1),
      trim: match3[9],
      type: match3[10]
    });
  }
  formatSpecifier.prototype = FormatSpecifier.prototype;
  function FormatSpecifier(specifier) {
    this.fill = specifier.fill === void 0 ? " " : specifier.fill + "";
    this.align = specifier.align === void 0 ? ">" : specifier.align + "";
    this.sign = specifier.sign === void 0 ? "-" : specifier.sign + "";
    this.symbol = specifier.symbol === void 0 ? "" : specifier.symbol + "";
    this.zero = !!specifier.zero;
    this.width = specifier.width === void 0 ? void 0 : +specifier.width;
    this.comma = !!specifier.comma;
    this.precision = specifier.precision === void 0 ? void 0 : +specifier.precision;
    this.trim = !!specifier.trim;
    this.type = specifier.type === void 0 ? "" : specifier.type + "";
  }
  FormatSpecifier.prototype.toString = function() {
    return this.fill + this.align + this.sign + this.symbol + (this.zero ? "0" : "") + (this.width === void 0 ? "" : Math.max(1, this.width | 0)) + (this.comma ? "," : "") + (this.precision === void 0 ? "" : "." + Math.max(0, this.precision | 0)) + (this.trim ? "~" : "") + this.type;
  };

  // node_modules/d3-format/src/formatTrim.js
  function formatTrim_default(s2) {
    out: for (var n = s2.length, i2 = 1, i0 = -1, i1; i2 < n; ++i2) {
      switch (s2[i2]) {
        case ".":
          i0 = i1 = i2;
          break;
        case "0":
          if (i0 === 0) i0 = i2;
          i1 = i2;
          break;
        default:
          if (!+s2[i2]) break out;
          if (i0 > 0) i0 = 0;
          break;
      }
    }
    return i0 > 0 ? s2.slice(0, i0) + s2.slice(i1 + 1) : s2;
  }

  // node_modules/d3-format/src/formatPrefixAuto.js
  var prefixExponent;
  function formatPrefixAuto_default(x7, p2) {
    var d3 = formatDecimalParts(x7, p2);
    if (!d3) return x7 + "";
    var coefficient = d3[0], exponent2 = d3[1], i2 = exponent2 - (prefixExponent = Math.max(-8, Math.min(8, Math.floor(exponent2 / 3))) * 3) + 1, n = coefficient.length;
    return i2 === n ? coefficient : i2 > n ? coefficient + new Array(i2 - n + 1).join("0") : i2 > 0 ? coefficient.slice(0, i2) + "." + coefficient.slice(i2) : "0." + new Array(1 - i2).join("0") + formatDecimalParts(x7, Math.max(0, p2 + i2 - 1))[0];
  }

  // node_modules/d3-format/src/formatRounded.js
  function formatRounded_default(x7, p2) {
    var d3 = formatDecimalParts(x7, p2);
    if (!d3) return x7 + "";
    var coefficient = d3[0], exponent2 = d3[1];
    return exponent2 < 0 ? "0." + new Array(-exponent2).join("0") + coefficient : coefficient.length > exponent2 + 1 ? coefficient.slice(0, exponent2 + 1) + "." + coefficient.slice(exponent2 + 1) : coefficient + new Array(exponent2 - coefficient.length + 2).join("0");
  }

  // node_modules/d3-format/src/formatTypes.js
  var formatTypes_default = {
    "%": (x7, p2) => (x7 * 100).toFixed(p2),
    "b": (x7) => Math.round(x7).toString(2),
    "c": (x7) => x7 + "",
    "d": formatDecimal_default,
    "e": (x7, p2) => x7.toExponential(p2),
    "f": (x7, p2) => x7.toFixed(p2),
    "g": (x7, p2) => x7.toPrecision(p2),
    "o": (x7) => Math.round(x7).toString(8),
    "p": (x7, p2) => formatRounded_default(x7 * 100, p2),
    "r": formatRounded_default,
    "s": formatPrefixAuto_default,
    "X": (x7) => Math.round(x7).toString(16).toUpperCase(),
    "x": (x7) => Math.round(x7).toString(16)
  };

  // node_modules/d3-format/src/identity.js
  function identity_default(x7) {
    return x7;
  }

  // node_modules/d3-format/src/locale.js
  var map33 = Array.prototype.map;
  var prefixes = ["y", "z", "a", "f", "p", "n", "\xB5", "m", "", "k", "M", "G", "T", "P", "E", "Z", "Y"];
  function locale_default(locale3) {
    var group4 = locale3.grouping === void 0 || locale3.thousands === void 0 ? identity_default : formatGroup_default(map33.call(locale3.grouping, Number), locale3.thousands + ""), currencyPrefix = locale3.currency === void 0 ? "" : locale3.currency[0] + "", currencySuffix = locale3.currency === void 0 ? "" : locale3.currency[1] + "", decimal = locale3.decimal === void 0 ? "." : locale3.decimal + "", numerals = locale3.numerals === void 0 ? identity_default : formatNumerals_default(map33.call(locale3.numerals, String)), percent = locale3.percent === void 0 ? "%" : locale3.percent + "", minus = locale3.minus === void 0 ? "\u2212" : locale3.minus + "", nan2 = locale3.nan === void 0 ? "NaN" : locale3.nan + "";
    function newFormat(specifier) {
      specifier = formatSpecifier(specifier);
      var fill9 = specifier.fill, align2 = specifier.align, sign2 = specifier.sign, symbol = specifier.symbol, zero4 = specifier.zero, width14 = specifier.width, comma = specifier.comma, precision = specifier.precision, trim2 = specifier.trim, type = specifier.type;
      if (type === "n") comma = true, type = "g";
      else if (!formatTypes_default[type]) precision === void 0 && (precision = 12), trim2 = true, type = "g";
      if (zero4 || fill9 === "0" && align2 === "=") zero4 = true, fill9 = "0", align2 = "=";
      var prefix = symbol === "$" ? currencyPrefix : symbol === "#" && /[boxX]/.test(type) ? "0" + type.toLowerCase() : "", suffix = symbol === "$" ? currencySuffix : /[%p]/.test(type) ? percent : "";
      var formatType = formatTypes_default[type], maybeSuffix = /[defgprs%]/.test(type);
      precision = precision === void 0 ? 6 : /[gprs]/.test(type) ? Math.max(1, Math.min(21, precision)) : Math.max(0, Math.min(20, precision));
      function format2(value18) {
        var valuePrefix = prefix, valueSuffix = suffix, i2, n, c2;
        if (type === "c") {
          valueSuffix = formatType(value18) + valueSuffix;
          value18 = "";
        } else {
          value18 = +value18;
          var valueNegative = value18 < 0 || 1 / value18 < 0;
          value18 = isNaN(value18) ? nan2 : formatType(Math.abs(value18), precision);
          if (trim2) value18 = formatTrim_default(value18);
          if (valueNegative && +value18 === 0 && sign2 !== "+") valueNegative = false;
          valuePrefix = (valueNegative ? sign2 === "(" ? sign2 : minus : sign2 === "-" || sign2 === "(" ? "" : sign2) + valuePrefix;
          valueSuffix = (type === "s" ? prefixes[8 + prefixExponent / 3] : "") + valueSuffix + (valueNegative && sign2 === "(" ? ")" : "");
          if (maybeSuffix) {
            i2 = -1, n = value18.length;
            while (++i2 < n) {
              if (c2 = value18.charCodeAt(i2), 48 > c2 || c2 > 57) {
                valueSuffix = (c2 === 46 ? decimal + value18.slice(i2 + 1) : value18.slice(i2)) + valueSuffix;
                value18 = value18.slice(0, i2);
                break;
              }
            }
          }
        }
        if (comma && !zero4) value18 = group4(value18, Infinity);
        var length10 = valuePrefix.length + value18.length + valueSuffix.length, padding2 = length10 < width14 ? new Array(width14 - length10 + 1).join(fill9) : "";
        if (comma && zero4) value18 = group4(padding2 + value18, padding2.length ? width14 - valueSuffix.length : Infinity), padding2 = "";
        switch (align2) {
          case "<":
            value18 = valuePrefix + value18 + valueSuffix + padding2;
            break;
          case "=":
            value18 = valuePrefix + padding2 + value18 + valueSuffix;
            break;
          case "^":
            value18 = padding2.slice(0, length10 = padding2.length >> 1) + valuePrefix + value18 + valueSuffix + padding2.slice(length10);
            break;
          default:
            value18 = padding2 + valuePrefix + value18 + valueSuffix;
            break;
        }
        return numerals(value18);
      }
      format2.toString = function() {
        return specifier + "";
      };
      return format2;
    }
    function formatPrefix2(specifier, value18) {
      var f = newFormat((specifier = formatSpecifier(specifier), specifier.type = "f", specifier)), e = Math.max(-8, Math.min(8, Math.floor(exponent_default(value18) / 3))) * 3, k = Math.pow(10, -e), prefix = prefixes[8 + e / 3];
      return function(value19) {
        return f(k * value19) + prefix;
      };
    }
    return {
      format: newFormat,
      formatPrefix: formatPrefix2
    };
  }

  // node_modules/d3-format/src/defaultLocale.js
  var locale;
  var format;
  var formatPrefix;
  defaultLocale({
    thousands: ",",
    grouping: [3],
    currency: ["$", ""]
  });
  function defaultLocale(definition) {
    locale = locale_default(definition);
    format = locale.format;
    formatPrefix = locale.formatPrefix;
    return locale;
  }

  // node_modules/d3-format/src/precisionFixed.js
  function precisionFixed_default(step5) {
    return Math.max(0, -exponent_default(Math.abs(step5)));
  }

  // node_modules/d3-format/src/precisionPrefix.js
  function precisionPrefix_default(step5, value18) {
    return Math.max(0, Math.max(-8, Math.min(8, Math.floor(exponent_default(value18) / 3))) * 3 - exponent_default(Math.abs(step5)));
  }

  // node_modules/d3-format/src/precisionRound.js
  function precisionRound_default(step5, max11) {
    step5 = Math.abs(step5), max11 = Math.abs(max11) - step5;
    return Math.max(0, exponent_default(max11) - exponent_default(step5)) + 1;
  }

  // node_modules/d3-scale/src/tickFormat.js
  function tickFormat(start4, stop3, count, specifier) {
    var step5 = tickStep(start4, stop3, count), precision;
    specifier = formatSpecifier(specifier == null ? ",f" : specifier);
    switch (specifier.type) {
      case "s": {
        var value18 = Math.max(Math.abs(start4), Math.abs(stop3));
        if (specifier.precision == null && !isNaN(precision = precisionPrefix_default(step5, value18))) specifier.precision = precision;
        return formatPrefix(specifier, value18);
      }
      case "":
      case "e":
      case "g":
      case "p":
      case "r": {
        if (specifier.precision == null && !isNaN(precision = precisionRound_default(step5, Math.max(Math.abs(start4), Math.abs(stop3))))) specifier.precision = precision - (specifier.type === "e");
        break;
      }
      case "f":
      case "%": {
        if (specifier.precision == null && !isNaN(precision = precisionFixed_default(step5))) specifier.precision = precision - (specifier.type === "%") * 2;
        break;
      }
    }
    return format(specifier);
  }

  // node_modules/d3-scale/src/linear.js
  function linearish(scale) {
    var domain2 = scale.domain;
    scale.ticks = function(count) {
      var d3 = domain2();
      return ticks(d3[0], d3[d3.length - 1], count == null ? 10 : count);
    };
    scale.tickFormat = function(count, specifier) {
      var d3 = domain2();
      return tickFormat(d3[0], d3[d3.length - 1], count == null ? 10 : count, specifier);
    };
    scale.nice = function(count) {
      if (count == null) count = 10;
      var d3 = domain2();
      var i0 = 0;
      var i1 = d3.length - 1;
      var start4 = d3[i0];
      var stop3 = d3[i1];
      var prestep;
      var step5;
      var maxIter = 10;
      if (stop3 < start4) {
        step5 = start4, start4 = stop3, stop3 = step5;
        step5 = i0, i0 = i1, i1 = step5;
      }
      while (maxIter-- > 0) {
        step5 = tickIncrement(start4, stop3, count);
        if (step5 === prestep) {
          d3[i0] = start4;
          d3[i1] = stop3;
          return domain2(d3);
        } else if (step5 > 0) {
          start4 = Math.floor(start4 / step5) * step5;
          stop3 = Math.ceil(stop3 / step5) * step5;
        } else if (step5 < 0) {
          start4 = Math.ceil(start4 * step5) / step5;
          stop3 = Math.floor(stop3 * step5) / step5;
        } else {
          break;
        }
        prestep = step5;
      }
      return scale;
    };
    return scale;
  }
  function linear3() {
    var scale = continuous();
    scale.copy = function() {
      return copy2(scale, linear3());
    };
    initRange.apply(scale, arguments);
    return linearish(scale);
  }

  // node_modules/d3-scale/src/nice.js
  function nice(domain2, interval) {
    domain2 = domain2.slice();
    var i0 = 0, i1 = domain2.length - 1, x0 = domain2[i0], x13 = domain2[i1], t2;
    if (x13 < x0) {
      t2 = i0, i0 = i1, i1 = t2;
      t2 = x0, x0 = x13, x13 = t2;
    }
    domain2[i0] = interval.floor(x0);
    domain2[i1] = interval.ceil(x13);
    return domain2;
  }

  // node_modules/d3-scale/src/log.js
  function transformLog(x7) {
    return Math.log(x7);
  }
  function transformExp(x7) {
    return Math.exp(x7);
  }
  function transformLogn(x7) {
    return -Math.log(-x7);
  }
  function transformExpn(x7) {
    return -Math.exp(-x7);
  }
  function pow10(x7) {
    return isFinite(x7) ? +("1e" + x7) : x7 < 0 ? 0 : x7;
  }
  function powp(base3) {
    return base3 === 10 ? pow10 : base3 === Math.E ? Math.exp : (x7) => Math.pow(base3, x7);
  }
  function logp(base3) {
    return base3 === Math.E ? Math.log : base3 === 10 && Math.log10 || base3 === 2 && Math.log2 || (base3 = Math.log(base3), (x7) => Math.log(x7) / base3);
  }
  function reflect(f) {
    return (x7, k) => -f(-x7, k);
  }
  function loggish(transform7) {
    const scale = transform7(transformLog, transformExp);
    const domain2 = scale.domain;
    let base3 = 10;
    let logs;
    let pows;
    function rescale() {
      logs = logp(base3), pows = powp(base3);
      if (domain2()[0] < 0) {
        logs = reflect(logs), pows = reflect(pows);
        transform7(transformLogn, transformExpn);
      } else {
        transform7(transformLog, transformExp);
      }
      return scale;
    }
    scale.base = function(_) {
      return arguments.length ? (base3 = +_, rescale()) : base3;
    };
    scale.domain = function(_) {
      return arguments.length ? (domain2(_), rescale()) : domain2();
    };
    scale.ticks = (count) => {
      const d3 = domain2();
      let u2 = d3[0];
      let v2 = d3[d3.length - 1];
      const r8 = v2 < u2;
      if (r8) [u2, v2] = [v2, u2];
      let i2 = logs(u2);
      let j = logs(v2);
      let k;
      let t2;
      const n = count == null ? 10 : +count;
      let z2 = [];
      if (!(base3 % 1) && j - i2 < n) {
        i2 = Math.floor(i2), j = Math.ceil(j);
        if (u2 > 0) for (; i2 <= j; ++i2) {
          for (k = 1; k < base3; ++k) {
            t2 = i2 < 0 ? k / pows(-i2) : k * pows(i2);
            if (t2 < u2) continue;
            if (t2 > v2) break;
            z2.push(t2);
          }
        }
        else for (; i2 <= j; ++i2) {
          for (k = base3 - 1; k >= 1; --k) {
            t2 = i2 > 0 ? k / pows(-i2) : k * pows(i2);
            if (t2 < u2) continue;
            if (t2 > v2) break;
            z2.push(t2);
          }
        }
        if (z2.length * 2 < n) z2 = ticks(u2, v2, n);
      } else {
        z2 = ticks(i2, j, Math.min(j - i2, n)).map(pows);
      }
      return r8 ? z2.reverse() : z2;
    };
    scale.tickFormat = (count, specifier) => {
      if (count == null) count = 10;
      if (specifier == null) specifier = base3 === 10 ? "s" : ",";
      if (typeof specifier !== "function") {
        if (!(base3 % 1) && (specifier = formatSpecifier(specifier)).precision == null) specifier.trim = true;
        specifier = format(specifier);
      }
      if (count === Infinity) return specifier;
      const k = Math.max(1, base3 * count / scale.ticks().length);
      return (d3) => {
        let i2 = d3 / pows(Math.round(logs(d3)));
        if (i2 * base3 < base3 - 0.5) i2 *= base3;
        return i2 <= k ? specifier(d3) : "";
      };
    };
    scale.nice = () => {
      return domain2(nice(domain2(), {
        floor: (x7) => pows(Math.floor(logs(x7))),
        ceil: (x7) => pows(Math.ceil(logs(x7)))
      }));
    };
    return scale;
  }
  function log5() {
    const scale = loggish(transformer()).domain([1, 10]);
    scale.copy = () => copy2(scale, log5()).base(scale.base());
    initRange.apply(scale, arguments);
    return scale;
  }

  // node_modules/d3-scale/src/symlog.js
  function transformSymlog(c2) {
    return function(x7) {
      return Math.sign(x7) * Math.log1p(Math.abs(x7 / c2));
    };
  }
  function transformSymexp(c2) {
    return function(x7) {
      return Math.sign(x7) * Math.expm1(Math.abs(x7)) * c2;
    };
  }
  function symlogish(transform7) {
    var c2 = 1, scale = transform7(transformSymlog(c2), transformSymexp(c2));
    scale.constant = function(_) {
      return arguments.length ? transform7(transformSymlog(c2 = +_), transformSymexp(c2)) : c2;
    };
    return linearish(scale);
  }
  function symlog() {
    var scale = symlogish(transformer());
    scale.copy = function() {
      return copy2(scale, symlog()).constant(scale.constant());
    };
    return initRange.apply(scale, arguments);
  }

  // node_modules/d3-scale/src/pow.js
  function transformPow(exponent2) {
    return function(x7) {
      return x7 < 0 ? -Math.pow(-x7, exponent2) : Math.pow(x7, exponent2);
    };
  }
  function transformSqrt(x7) {
    return x7 < 0 ? -Math.sqrt(-x7) : Math.sqrt(x7);
  }
  function transformSquare(x7) {
    return x7 < 0 ? -x7 * x7 : x7 * x7;
  }
  function powish(transform7) {
    var scale = transform7(identity13, identity13), exponent2 = 1;
    function rescale() {
      return exponent2 === 1 ? transform7(identity13, identity13) : exponent2 === 0.5 ? transform7(transformSqrt, transformSquare) : transform7(transformPow(exponent2), transformPow(1 / exponent2));
    }
    scale.exponent = function(_) {
      return arguments.length ? (exponent2 = +_, rescale()) : exponent2;
    };
    return linearish(scale);
  }
  function pow3() {
    var scale = powish(transformer());
    scale.copy = function() {
      return copy2(scale, pow3()).exponent(scale.exponent());
    };
    initRange.apply(scale, arguments);
    return scale;
  }
  function sqrt2() {
    return pow3.apply(null, arguments).exponent(0.5);
  }

  // node_modules/d3-scale/src/quantile.js
  function quantile2() {
    var domain2 = [], range5 = [], thresholds = [], unknown;
    function rescale() {
      var i2 = 0, n = Math.max(1, range5.length);
      thresholds = new Array(n - 1);
      while (++i2 < n) thresholds[i2 - 1] = quantileSorted(domain2, i2 / n);
      return scale;
    }
    function scale(x7) {
      return x7 == null || isNaN(x7 = +x7) ? unknown : range5[bisect_default(thresholds, x7)];
    }
    scale.invertExtent = function(y7) {
      var i2 = range5.indexOf(y7);
      return i2 < 0 ? [NaN, NaN] : [
        i2 > 0 ? thresholds[i2 - 1] : domain2[0],
        i2 < thresholds.length ? thresholds[i2] : domain2[domain2.length - 1]
      ];
    };
    scale.domain = function(_) {
      if (!arguments.length) return domain2.slice();
      domain2 = [];
      for (let d3 of _) if (d3 != null && !isNaN(d3 = +d3)) domain2.push(d3);
      domain2.sort(ascending);
      return rescale();
    };
    scale.range = function(_) {
      return arguments.length ? (range5 = Array.from(_), rescale()) : range5.slice();
    };
    scale.unknown = function(_) {
      return arguments.length ? (unknown = _, scale) : unknown;
    };
    scale.quantiles = function() {
      return thresholds.slice();
    };
    scale.copy = function() {
      return quantile2().domain(domain2).range(range5).unknown(unknown);
    };
    return initRange.apply(scale, arguments);
  }

  // node_modules/d3-scale/src/quantize.js
  function quantize() {
    var x0 = 0, x13 = 1, n = 1, domain2 = [0.5], range5 = [0, 1], unknown;
    function scale(x7) {
      return x7 != null && x7 <= x7 ? range5[bisect_default(domain2, x7, 0, n)] : unknown;
    }
    function rescale() {
      var i2 = -1;
      domain2 = new Array(n);
      while (++i2 < n) domain2[i2] = ((i2 + 1) * x13 - (i2 - n) * x0) / (n + 1);
      return scale;
    }
    scale.domain = function(_) {
      return arguments.length ? ([x0, x13] = _, x0 = +x0, x13 = +x13, rescale()) : [x0, x13];
    };
    scale.range = function(_) {
      return arguments.length ? (n = (range5 = Array.from(_)).length - 1, rescale()) : range5.slice();
    };
    scale.invertExtent = function(y7) {
      var i2 = range5.indexOf(y7);
      return i2 < 0 ? [NaN, NaN] : i2 < 1 ? [x0, domain2[0]] : i2 >= n ? [domain2[n - 1], x13] : [domain2[i2 - 1], domain2[i2]];
    };
    scale.unknown = function(_) {
      return arguments.length ? (unknown = _, scale) : scale;
    };
    scale.thresholds = function() {
      return domain2.slice();
    };
    scale.copy = function() {
      return quantize().domain([x0, x13]).range(range5).unknown(unknown);
    };
    return initRange.apply(linearish(scale), arguments);
  }

  // node_modules/d3-time/src/interval.js
  var t0 = /* @__PURE__ */ new Date();
  var t1 = /* @__PURE__ */ new Date();
  function timeInterval(floori, offseti, count, field2) {
    function interval(date2) {
      return floori(date2 = arguments.length === 0 ? /* @__PURE__ */ new Date() : /* @__PURE__ */ new Date(+date2)), date2;
    }
    interval.floor = (date2) => {
      return floori(date2 = /* @__PURE__ */ new Date(+date2)), date2;
    };
    interval.ceil = (date2) => {
      return floori(date2 = new Date(date2 - 1)), offseti(date2, 1), floori(date2), date2;
    };
    interval.round = (date2) => {
      const d0 = interval(date2), d1 = interval.ceil(date2);
      return date2 - d0 < d1 - date2 ? d0 : d1;
    };
    interval.offset = (date2, step5) => {
      return offseti(date2 = /* @__PURE__ */ new Date(+date2), step5 == null ? 1 : Math.floor(step5)), date2;
    };
    interval.range = (start4, stop3, step5) => {
      const range5 = [];
      start4 = interval.ceil(start4);
      step5 = step5 == null ? 1 : Math.floor(step5);
      if (!(start4 < stop3) || !(step5 > 0)) return range5;
      let previous;
      do
        range5.push(previous = /* @__PURE__ */ new Date(+start4)), offseti(start4, step5), floori(start4);
      while (previous < start4 && start4 < stop3);
      return range5;
    };
    interval.filter = (test2) => {
      return timeInterval((date2) => {
        if (date2 >= date2) while (floori(date2), !test2(date2)) date2.setTime(date2 - 1);
      }, (date2, step5) => {
        if (date2 >= date2) {
          if (step5 < 0) while (++step5 <= 0) {
            while (offseti(date2, -1), !test2(date2)) {
            }
          }
          else while (--step5 >= 0) {
            while (offseti(date2, 1), !test2(date2)) {
            }
          }
        }
      });
    };
    if (count) {
      interval.count = (start4, end2) => {
        t0.setTime(+start4), t1.setTime(+end2);
        floori(t0), floori(t1);
        return Math.floor(count(t0, t1));
      };
      interval.every = (step5) => {
        step5 = Math.floor(step5);
        return !isFinite(step5) || !(step5 > 0) ? null : !(step5 > 1) ? interval : interval.filter(field2 ? (d3) => field2(d3) % step5 === 0 : (d3) => interval.count(0, d3) % step5 === 0);
      };
    }
    return interval;
  }

  // node_modules/d3-time/src/millisecond.js
  var millisecond = timeInterval(() => {
  }, (date2, step5) => {
    date2.setTime(+date2 + step5);
  }, (start4, end2) => {
    return end2 - start4;
  });
  millisecond.every = (k) => {
    k = Math.floor(k);
    if (!isFinite(k) || !(k > 0)) return null;
    if (!(k > 1)) return millisecond;
    return timeInterval((date2) => {
      date2.setTime(Math.floor(date2 / k) * k);
    }, (date2, step5) => {
      date2.setTime(+date2 + step5 * k);
    }, (start4, end2) => {
      return (end2 - start4) / k;
    });
  };
  var milliseconds = millisecond.range;

  // node_modules/d3-time/src/duration.js
  var durationSecond = 1e3;
  var durationMinute = durationSecond * 60;
  var durationHour = durationMinute * 60;
  var durationDay = durationHour * 24;
  var durationWeek = durationDay * 7;
  var durationMonth = durationDay * 30;
  var durationYear = durationDay * 365;

  // node_modules/d3-time/src/second.js
  var second = timeInterval((date2) => {
    date2.setTime(date2 - date2.getMilliseconds());
  }, (date2, step5) => {
    date2.setTime(+date2 + step5 * durationSecond);
  }, (start4, end2) => {
    return (end2 - start4) / durationSecond;
  }, (date2) => {
    return date2.getUTCSeconds();
  });
  var seconds = second.range;

  // node_modules/d3-time/src/minute.js
  var timeMinute = timeInterval((date2) => {
    date2.setTime(date2 - date2.getMilliseconds() - date2.getSeconds() * durationSecond);
  }, (date2, step5) => {
    date2.setTime(+date2 + step5 * durationMinute);
  }, (start4, end2) => {
    return (end2 - start4) / durationMinute;
  }, (date2) => {
    return date2.getMinutes();
  });
  var timeMinutes = timeMinute.range;
  var utcMinute = timeInterval((date2) => {
    date2.setUTCSeconds(0, 0);
  }, (date2, step5) => {
    date2.setTime(+date2 + step5 * durationMinute);
  }, (start4, end2) => {
    return (end2 - start4) / durationMinute;
  }, (date2) => {
    return date2.getUTCMinutes();
  });
  var utcMinutes = utcMinute.range;

  // node_modules/d3-time/src/hour.js
  var timeHour = timeInterval((date2) => {
    date2.setTime(date2 - date2.getMilliseconds() - date2.getSeconds() * durationSecond - date2.getMinutes() * durationMinute);
  }, (date2, step5) => {
    date2.setTime(+date2 + step5 * durationHour);
  }, (start4, end2) => {
    return (end2 - start4) / durationHour;
  }, (date2) => {
    return date2.getHours();
  });
  var timeHours = timeHour.range;
  var utcHour = timeInterval((date2) => {
    date2.setUTCMinutes(0, 0, 0);
  }, (date2, step5) => {
    date2.setTime(+date2 + step5 * durationHour);
  }, (start4, end2) => {
    return (end2 - start4) / durationHour;
  }, (date2) => {
    return date2.getUTCHours();
  });
  var utcHours = utcHour.range;

  // node_modules/d3-time/src/day.js
  var timeDay = timeInterval(
    (date2) => date2.setHours(0, 0, 0, 0),
    (date2, step5) => date2.setDate(date2.getDate() + step5),
    (start4, end2) => (end2 - start4 - (end2.getTimezoneOffset() - start4.getTimezoneOffset()) * durationMinute) / durationDay,
    (date2) => date2.getDate() - 1
  );
  var timeDays = timeDay.range;
  var utcDay = timeInterval((date2) => {
    date2.setUTCHours(0, 0, 0, 0);
  }, (date2, step5) => {
    date2.setUTCDate(date2.getUTCDate() + step5);
  }, (start4, end2) => {
    return (end2 - start4) / durationDay;
  }, (date2) => {
    return date2.getUTCDate() - 1;
  });
  var utcDays = utcDay.range;
  var unixDay = timeInterval((date2) => {
    date2.setUTCHours(0, 0, 0, 0);
  }, (date2, step5) => {
    date2.setUTCDate(date2.getUTCDate() + step5);
  }, (start4, end2) => {
    return (end2 - start4) / durationDay;
  }, (date2) => {
    return Math.floor(date2 / durationDay);
  });
  var unixDays = unixDay.range;

  // node_modules/d3-time/src/week.js
  function timeWeekday(i2) {
    return timeInterval((date2) => {
      date2.setDate(date2.getDate() - (date2.getDay() + 7 - i2) % 7);
      date2.setHours(0, 0, 0, 0);
    }, (date2, step5) => {
      date2.setDate(date2.getDate() + step5 * 7);
    }, (start4, end2) => {
      return (end2 - start4 - (end2.getTimezoneOffset() - start4.getTimezoneOffset()) * durationMinute) / durationWeek;
    });
  }
  var timeSunday = timeWeekday(0);
  var timeMonday = timeWeekday(1);
  var timeTuesday = timeWeekday(2);
  var timeWednesday = timeWeekday(3);
  var timeThursday = timeWeekday(4);
  var timeFriday = timeWeekday(5);
  var timeSaturday = timeWeekday(6);
  var timeSundays = timeSunday.range;
  var timeMondays = timeMonday.range;
  var timeTuesdays = timeTuesday.range;
  var timeWednesdays = timeWednesday.range;
  var timeThursdays = timeThursday.range;
  var timeFridays = timeFriday.range;
  var timeSaturdays = timeSaturday.range;
  function utcWeekday(i2) {
    return timeInterval((date2) => {
      date2.setUTCDate(date2.getUTCDate() - (date2.getUTCDay() + 7 - i2) % 7);
      date2.setUTCHours(0, 0, 0, 0);
    }, (date2, step5) => {
      date2.setUTCDate(date2.getUTCDate() + step5 * 7);
    }, (start4, end2) => {
      return (end2 - start4) / durationWeek;
    });
  }
  var utcSunday = utcWeekday(0);
  var utcMonday = utcWeekday(1);
  var utcTuesday = utcWeekday(2);
  var utcWednesday = utcWeekday(3);
  var utcThursday = utcWeekday(4);
  var utcFriday = utcWeekday(5);
  var utcSaturday = utcWeekday(6);
  var utcSundays = utcSunday.range;
  var utcMondays = utcMonday.range;
  var utcTuesdays = utcTuesday.range;
  var utcWednesdays = utcWednesday.range;
  var utcThursdays = utcThursday.range;
  var utcFridays = utcFriday.range;
  var utcSaturdays = utcSaturday.range;

  // node_modules/d3-time/src/month.js
  var timeMonth = timeInterval((date2) => {
    date2.setDate(1);
    date2.setHours(0, 0, 0, 0);
  }, (date2, step5) => {
    date2.setMonth(date2.getMonth() + step5);
  }, (start4, end2) => {
    return end2.getMonth() - start4.getMonth() + (end2.getFullYear() - start4.getFullYear()) * 12;
  }, (date2) => {
    return date2.getMonth();
  });
  var timeMonths = timeMonth.range;
  var utcMonth = timeInterval((date2) => {
    date2.setUTCDate(1);
    date2.setUTCHours(0, 0, 0, 0);
  }, (date2, step5) => {
    date2.setUTCMonth(date2.getUTCMonth() + step5);
  }, (start4, end2) => {
    return end2.getUTCMonth() - start4.getUTCMonth() + (end2.getUTCFullYear() - start4.getUTCFullYear()) * 12;
  }, (date2) => {
    return date2.getUTCMonth();
  });
  var utcMonths = utcMonth.range;

  // node_modules/d3-time/src/year.js
  var timeYear = timeInterval((date2) => {
    date2.setMonth(0, 1);
    date2.setHours(0, 0, 0, 0);
  }, (date2, step5) => {
    date2.setFullYear(date2.getFullYear() + step5);
  }, (start4, end2) => {
    return end2.getFullYear() - start4.getFullYear();
  }, (date2) => {
    return date2.getFullYear();
  });
  timeYear.every = (k) => {
    return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : timeInterval((date2) => {
      date2.setFullYear(Math.floor(date2.getFullYear() / k) * k);
      date2.setMonth(0, 1);
      date2.setHours(0, 0, 0, 0);
    }, (date2, step5) => {
      date2.setFullYear(date2.getFullYear() + step5 * k);
    });
  };
  var timeYears = timeYear.range;
  var utcYear = timeInterval((date2) => {
    date2.setUTCMonth(0, 1);
    date2.setUTCHours(0, 0, 0, 0);
  }, (date2, step5) => {
    date2.setUTCFullYear(date2.getUTCFullYear() + step5);
  }, (start4, end2) => {
    return end2.getUTCFullYear() - start4.getUTCFullYear();
  }, (date2) => {
    return date2.getUTCFullYear();
  });
  utcYear.every = (k) => {
    return !isFinite(k = Math.floor(k)) || !(k > 0) ? null : timeInterval((date2) => {
      date2.setUTCFullYear(Math.floor(date2.getUTCFullYear() / k) * k);
      date2.setUTCMonth(0, 1);
      date2.setUTCHours(0, 0, 0, 0);
    }, (date2, step5) => {
      date2.setUTCFullYear(date2.getUTCFullYear() + step5 * k);
    });
  };
  var utcYears = utcYear.range;

  // node_modules/d3-time/src/ticks.js
  function ticker(year, month, week, day, hour, minute) {
    const tickIntervals = [
      [second, 1, durationSecond],
      [second, 5, 5 * durationSecond],
      [second, 15, 15 * durationSecond],
      [second, 30, 30 * durationSecond],
      [minute, 1, durationMinute],
      [minute, 5, 5 * durationMinute],
      [minute, 15, 15 * durationMinute],
      [minute, 30, 30 * durationMinute],
      [hour, 1, durationHour],
      [hour, 3, 3 * durationHour],
      [hour, 6, 6 * durationHour],
      [hour, 12, 12 * durationHour],
      [day, 1, durationDay],
      [day, 2, 2 * durationDay],
      [week, 1, durationWeek],
      [month, 1, durationMonth],
      [month, 3, 3 * durationMonth],
      [year, 1, durationYear]
    ];
    function ticks3(start4, stop3, count) {
      const reverse3 = stop3 < start4;
      if (reverse3) [start4, stop3] = [stop3, start4];
      const interval = count && typeof count.range === "function" ? count : tickInterval(start4, stop3, count);
      const ticks4 = interval ? interval.range(start4, +stop3 + 1) : [];
      return reverse3 ? ticks4.reverse() : ticks4;
    }
    function tickInterval(start4, stop3, count) {
      const target7 = Math.abs(stop3 - start4) / count;
      const i2 = bisector(([, , step6]) => step6).right(tickIntervals, target7);
      if (i2 === tickIntervals.length) return year.every(tickStep(start4 / durationYear, stop3 / durationYear, count));
      if (i2 === 0) return millisecond.every(Math.max(tickStep(start4, stop3, count), 1));
      const [t2, step5] = tickIntervals[target7 / tickIntervals[i2 - 1][2] < tickIntervals[i2][2] / target7 ? i2 - 1 : i2];
      return t2.every(step5);
    }
    return [ticks3, tickInterval];
  }
  var [utcTicks, utcTickInterval] = ticker(utcYear, utcMonth, utcSunday, unixDay, utcHour, utcMinute);
  var [timeTicks, timeTickInterval] = ticker(timeYear, timeMonth, timeSunday, timeDay, timeHour, timeMinute);

  // node_modules/d3-time-format/src/locale.js
  function localDate(d3) {
    if (0 <= d3.y && d3.y < 100) {
      var date2 = new Date(-1, d3.m, d3.d, d3.H, d3.M, d3.S, d3.L);
      date2.setFullYear(d3.y);
      return date2;
    }
    return new Date(d3.y, d3.m, d3.d, d3.H, d3.M, d3.S, d3.L);
  }
  function utcDate(d3) {
    if (0 <= d3.y && d3.y < 100) {
      var date2 = new Date(Date.UTC(-1, d3.m, d3.d, d3.H, d3.M, d3.S, d3.L));
      date2.setUTCFullYear(d3.y);
      return date2;
    }
    return new Date(Date.UTC(d3.y, d3.m, d3.d, d3.H, d3.M, d3.S, d3.L));
  }
  function newDate(y7, m2, d3) {
    return { y: y7, m: m2, d: d3, H: 0, M: 0, S: 0, L: 0 };
  }
  function formatLocale(locale3) {
    var locale_dateTime = locale3.dateTime, locale_date = locale3.date, locale_time = locale3.time, locale_periods = locale3.periods, locale_weekdays = locale3.days, locale_shortWeekdays = locale3.shortDays, locale_months = locale3.months, locale_shortMonths = locale3.shortMonths;
    var periodRe = formatRe(locale_periods), periodLookup = formatLookup(locale_periods), weekdayRe = formatRe(locale_weekdays), weekdayLookup = formatLookup(locale_weekdays), shortWeekdayRe = formatRe(locale_shortWeekdays), shortWeekdayLookup = formatLookup(locale_shortWeekdays), monthRe = formatRe(locale_months), monthLookup = formatLookup(locale_months), shortMonthRe = formatRe(locale_shortMonths), shortMonthLookup = formatLookup(locale_shortMonths);
    var formats = {
      "a": formatShortWeekday,
      "A": formatWeekday,
      "b": formatShortMonth,
      "B": formatMonth,
      "c": null,
      "d": formatDayOfMonth,
      "e": formatDayOfMonth,
      "f": formatMicroseconds,
      "g": formatYearISO,
      "G": formatFullYearISO,
      "H": formatHour24,
      "I": formatHour12,
      "j": formatDayOfYear,
      "L": formatMilliseconds,
      "m": formatMonthNumber,
      "M": formatMinutes,
      "p": formatPeriod,
      "q": formatQuarter,
      "Q": formatUnixTimestamp,
      "s": formatUnixTimestampSeconds,
      "S": formatSeconds,
      "u": formatWeekdayNumberMonday,
      "U": formatWeekNumberSunday,
      "V": formatWeekNumberISO,
      "w": formatWeekdayNumberSunday,
      "W": formatWeekNumberMonday,
      "x": null,
      "X": null,
      "y": formatYear,
      "Y": formatFullYear,
      "Z": formatZone,
      "%": formatLiteralPercent
    };
    var utcFormats = {
      "a": formatUTCShortWeekday,
      "A": formatUTCWeekday,
      "b": formatUTCShortMonth,
      "B": formatUTCMonth,
      "c": null,
      "d": formatUTCDayOfMonth,
      "e": formatUTCDayOfMonth,
      "f": formatUTCMicroseconds,
      "g": formatUTCYearISO,
      "G": formatUTCFullYearISO,
      "H": formatUTCHour24,
      "I": formatUTCHour12,
      "j": formatUTCDayOfYear,
      "L": formatUTCMilliseconds,
      "m": formatUTCMonthNumber,
      "M": formatUTCMinutes,
      "p": formatUTCPeriod,
      "q": formatUTCQuarter,
      "Q": formatUnixTimestamp,
      "s": formatUnixTimestampSeconds,
      "S": formatUTCSeconds,
      "u": formatUTCWeekdayNumberMonday,
      "U": formatUTCWeekNumberSunday,
      "V": formatUTCWeekNumberISO,
      "w": formatUTCWeekdayNumberSunday,
      "W": formatUTCWeekNumberMonday,
      "x": null,
      "X": null,
      "y": formatUTCYear,
      "Y": formatUTCFullYear,
      "Z": formatUTCZone,
      "%": formatLiteralPercent
    };
    var parses = {
      "a": parseShortWeekday,
      "A": parseWeekday,
      "b": parseShortMonth,
      "B": parseMonth,
      "c": parseLocaleDateTime,
      "d": parseDayOfMonth,
      "e": parseDayOfMonth,
      "f": parseMicroseconds,
      "g": parseYear,
      "G": parseFullYear,
      "H": parseHour24,
      "I": parseHour24,
      "j": parseDayOfYear,
      "L": parseMilliseconds,
      "m": parseMonthNumber,
      "M": parseMinutes,
      "p": parsePeriod,
      "q": parseQuarter,
      "Q": parseUnixTimestamp,
      "s": parseUnixTimestampSeconds,
      "S": parseSeconds,
      "u": parseWeekdayNumberMonday,
      "U": parseWeekNumberSunday,
      "V": parseWeekNumberISO,
      "w": parseWeekdayNumberSunday,
      "W": parseWeekNumberMonday,
      "x": parseLocaleDate,
      "X": parseLocaleTime,
      "y": parseYear,
      "Y": parseFullYear,
      "Z": parseZone,
      "%": parseLiteralPercent
    };
    formats.x = newFormat(locale_date, formats);
    formats.X = newFormat(locale_time, formats);
    formats.c = newFormat(locale_dateTime, formats);
    utcFormats.x = newFormat(locale_date, utcFormats);
    utcFormats.X = newFormat(locale_time, utcFormats);
    utcFormats.c = newFormat(locale_dateTime, utcFormats);
    function newFormat(specifier, formats2) {
      return function(date2) {
        var string2 = [], i2 = -1, j = 0, n = specifier.length, c2, pad2, format2;
        if (!(date2 instanceof Date)) date2 = /* @__PURE__ */ new Date(+date2);
        while (++i2 < n) {
          if (specifier.charCodeAt(i2) === 37) {
            string2.push(specifier.slice(j, i2));
            if ((pad2 = pads[c2 = specifier.charAt(++i2)]) != null) c2 = specifier.charAt(++i2);
            else pad2 = c2 === "e" ? " " : "0";
            if (format2 = formats2[c2]) c2 = format2(date2, pad2);
            string2.push(c2);
            j = i2 + 1;
          }
        }
        string2.push(specifier.slice(j, i2));
        return string2.join("");
      };
    }
    function newParse(specifier, Z) {
      return function(string2) {
        var d3 = newDate(1900, void 0, 1), i2 = parseSpecifier(d3, specifier, string2 += "", 0), week, day;
        if (i2 != string2.length) return null;
        if ("Q" in d3) return new Date(d3.Q);
        if ("s" in d3) return new Date(d3.s * 1e3 + ("L" in d3 ? d3.L : 0));
        if (Z && !("Z" in d3)) d3.Z = 0;
        if ("p" in d3) d3.H = d3.H % 12 + d3.p * 12;
        if (d3.m === void 0) d3.m = "q" in d3 ? d3.q : 0;
        if ("V" in d3) {
          if (d3.V < 1 || d3.V > 53) return null;
          if (!("w" in d3)) d3.w = 1;
          if ("Z" in d3) {
            week = utcDate(newDate(d3.y, 0, 1)), day = week.getUTCDay();
            week = day > 4 || day === 0 ? utcMonday.ceil(week) : utcMonday(week);
            week = utcDay.offset(week, (d3.V - 1) * 7);
            d3.y = week.getUTCFullYear();
            d3.m = week.getUTCMonth();
            d3.d = week.getUTCDate() + (d3.w + 6) % 7;
          } else {
            week = localDate(newDate(d3.y, 0, 1)), day = week.getDay();
            week = day > 4 || day === 0 ? timeMonday.ceil(week) : timeMonday(week);
            week = timeDay.offset(week, (d3.V - 1) * 7);
            d3.y = week.getFullYear();
            d3.m = week.getMonth();
            d3.d = week.getDate() + (d3.w + 6) % 7;
          }
        } else if ("W" in d3 || "U" in d3) {
          if (!("w" in d3)) d3.w = "u" in d3 ? d3.u % 7 : "W" in d3 ? 1 : 0;
          day = "Z" in d3 ? utcDate(newDate(d3.y, 0, 1)).getUTCDay() : localDate(newDate(d3.y, 0, 1)).getDay();
          d3.m = 0;
          d3.d = "W" in d3 ? (d3.w + 6) % 7 + d3.W * 7 - (day + 5) % 7 : d3.w + d3.U * 7 - (day + 6) % 7;
        }
        if ("Z" in d3) {
          d3.H += d3.Z / 100 | 0;
          d3.M += d3.Z % 100;
          return utcDate(d3);
        }
        return localDate(d3);
      };
    }
    function parseSpecifier(d3, specifier, string2, j) {
      var i2 = 0, n = specifier.length, m2 = string2.length, c2, parse8;
      while (i2 < n) {
        if (j >= m2) return -1;
        c2 = specifier.charCodeAt(i2++);
        if (c2 === 37) {
          c2 = specifier.charAt(i2++);
          parse8 = parses[c2 in pads ? specifier.charAt(i2++) : c2];
          if (!parse8 || (j = parse8(d3, string2, j)) < 0) return -1;
        } else if (c2 != string2.charCodeAt(j++)) {
          return -1;
        }
      }
      return j;
    }
    function parsePeriod(d3, string2, i2) {
      var n = periodRe.exec(string2.slice(i2));
      return n ? (d3.p = periodLookup.get(n[0].toLowerCase()), i2 + n[0].length) : -1;
    }
    function parseShortWeekday(d3, string2, i2) {
      var n = shortWeekdayRe.exec(string2.slice(i2));
      return n ? (d3.w = shortWeekdayLookup.get(n[0].toLowerCase()), i2 + n[0].length) : -1;
    }
    function parseWeekday(d3, string2, i2) {
      var n = weekdayRe.exec(string2.slice(i2));
      return n ? (d3.w = weekdayLookup.get(n[0].toLowerCase()), i2 + n[0].length) : -1;
    }
    function parseShortMonth(d3, string2, i2) {
      var n = shortMonthRe.exec(string2.slice(i2));
      return n ? (d3.m = shortMonthLookup.get(n[0].toLowerCase()), i2 + n[0].length) : -1;
    }
    function parseMonth(d3, string2, i2) {
      var n = monthRe.exec(string2.slice(i2));
      return n ? (d3.m = monthLookup.get(n[0].toLowerCase()), i2 + n[0].length) : -1;
    }
    function parseLocaleDateTime(d3, string2, i2) {
      return parseSpecifier(d3, locale_dateTime, string2, i2);
    }
    function parseLocaleDate(d3, string2, i2) {
      return parseSpecifier(d3, locale_date, string2, i2);
    }
    function parseLocaleTime(d3, string2, i2) {
      return parseSpecifier(d3, locale_time, string2, i2);
    }
    function formatShortWeekday(d3) {
      return locale_shortWeekdays[d3.getDay()];
    }
    function formatWeekday(d3) {
      return locale_weekdays[d3.getDay()];
    }
    function formatShortMonth(d3) {
      return locale_shortMonths[d3.getMonth()];
    }
    function formatMonth(d3) {
      return locale_months[d3.getMonth()];
    }
    function formatPeriod(d3) {
      return locale_periods[+(d3.getHours() >= 12)];
    }
    function formatQuarter(d3) {
      return 1 + ~~(d3.getMonth() / 3);
    }
    function formatUTCShortWeekday(d3) {
      return locale_shortWeekdays[d3.getUTCDay()];
    }
    function formatUTCWeekday(d3) {
      return locale_weekdays[d3.getUTCDay()];
    }
    function formatUTCShortMonth(d3) {
      return locale_shortMonths[d3.getUTCMonth()];
    }
    function formatUTCMonth(d3) {
      return locale_months[d3.getUTCMonth()];
    }
    function formatUTCPeriod(d3) {
      return locale_periods[+(d3.getUTCHours() >= 12)];
    }
    function formatUTCQuarter(d3) {
      return 1 + ~~(d3.getUTCMonth() / 3);
    }
    return {
      format: function(specifier) {
        var f = newFormat(specifier += "", formats);
        f.toString = function() {
          return specifier;
        };
        return f;
      },
      parse: function(specifier) {
        var p2 = newParse(specifier += "", false);
        p2.toString = function() {
          return specifier;
        };
        return p2;
      },
      utcFormat: function(specifier) {
        var f = newFormat(specifier += "", utcFormats);
        f.toString = function() {
          return specifier;
        };
        return f;
      },
      utcParse: function(specifier) {
        var p2 = newParse(specifier += "", true);
        p2.toString = function() {
          return specifier;
        };
        return p2;
      }
    };
  }
  var pads = { "-": "", "_": " ", "0": "0" };
  var numberRe = /^\s*\d+/;
  var percentRe = /^%/;
  var requoteRe = /[\\^$*+?|[\]().{}]/g;
  function pad(value18, fill9, width14) {
    var sign2 = value18 < 0 ? "-" : "", string2 = (sign2 ? -value18 : value18) + "", length10 = string2.length;
    return sign2 + (length10 < width14 ? new Array(width14 - length10 + 1).join(fill9) + string2 : string2);
  }
  function requote(s2) {
    return s2.replace(requoteRe, "\\$&");
  }
  function formatRe(names) {
    return new RegExp("^(?:" + names.map(requote).join("|") + ")", "i");
  }
  function formatLookup(names) {
    return new Map(names.map((name16, i2) => [name16.toLowerCase(), i2]));
  }
  function parseWeekdayNumberSunday(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2, i2 + 1));
    return n ? (d3.w = +n[0], i2 + n[0].length) : -1;
  }
  function parseWeekdayNumberMonday(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2, i2 + 1));
    return n ? (d3.u = +n[0], i2 + n[0].length) : -1;
  }
  function parseWeekNumberSunday(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2, i2 + 2));
    return n ? (d3.U = +n[0], i2 + n[0].length) : -1;
  }
  function parseWeekNumberISO(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2, i2 + 2));
    return n ? (d3.V = +n[0], i2 + n[0].length) : -1;
  }
  function parseWeekNumberMonday(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2, i2 + 2));
    return n ? (d3.W = +n[0], i2 + n[0].length) : -1;
  }
  function parseFullYear(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2, i2 + 4));
    return n ? (d3.y = +n[0], i2 + n[0].length) : -1;
  }
  function parseYear(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2, i2 + 2));
    return n ? (d3.y = +n[0] + (+n[0] > 68 ? 1900 : 2e3), i2 + n[0].length) : -1;
  }
  function parseZone(d3, string2, i2) {
    var n = /^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(string2.slice(i2, i2 + 6));
    return n ? (d3.Z = n[1] ? 0 : -(n[2] + (n[3] || "00")), i2 + n[0].length) : -1;
  }
  function parseQuarter(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2, i2 + 1));
    return n ? (d3.q = n[0] * 3 - 3, i2 + n[0].length) : -1;
  }
  function parseMonthNumber(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2, i2 + 2));
    return n ? (d3.m = n[0] - 1, i2 + n[0].length) : -1;
  }
  function parseDayOfMonth(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2, i2 + 2));
    return n ? (d3.d = +n[0], i2 + n[0].length) : -1;
  }
  function parseDayOfYear(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2, i2 + 3));
    return n ? (d3.m = 0, d3.d = +n[0], i2 + n[0].length) : -1;
  }
  function parseHour24(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2, i2 + 2));
    return n ? (d3.H = +n[0], i2 + n[0].length) : -1;
  }
  function parseMinutes(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2, i2 + 2));
    return n ? (d3.M = +n[0], i2 + n[0].length) : -1;
  }
  function parseSeconds(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2, i2 + 2));
    return n ? (d3.S = +n[0], i2 + n[0].length) : -1;
  }
  function parseMilliseconds(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2, i2 + 3));
    return n ? (d3.L = +n[0], i2 + n[0].length) : -1;
  }
  function parseMicroseconds(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2, i2 + 6));
    return n ? (d3.L = Math.floor(n[0] / 1e3), i2 + n[0].length) : -1;
  }
  function parseLiteralPercent(d3, string2, i2) {
    var n = percentRe.exec(string2.slice(i2, i2 + 1));
    return n ? i2 + n[0].length : -1;
  }
  function parseUnixTimestamp(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2));
    return n ? (d3.Q = +n[0], i2 + n[0].length) : -1;
  }
  function parseUnixTimestampSeconds(d3, string2, i2) {
    var n = numberRe.exec(string2.slice(i2));
    return n ? (d3.s = +n[0], i2 + n[0].length) : -1;
  }
  function formatDayOfMonth(d3, p2) {
    return pad(d3.getDate(), p2, 2);
  }
  function formatHour24(d3, p2) {
    return pad(d3.getHours(), p2, 2);
  }
  function formatHour12(d3, p2) {
    return pad(d3.getHours() % 12 || 12, p2, 2);
  }
  function formatDayOfYear(d3, p2) {
    return pad(1 + timeDay.count(timeYear(d3), d3), p2, 3);
  }
  function formatMilliseconds(d3, p2) {
    return pad(d3.getMilliseconds(), p2, 3);
  }
  function formatMicroseconds(d3, p2) {
    return formatMilliseconds(d3, p2) + "000";
  }
  function formatMonthNumber(d3, p2) {
    return pad(d3.getMonth() + 1, p2, 2);
  }
  function formatMinutes(d3, p2) {
    return pad(d3.getMinutes(), p2, 2);
  }
  function formatSeconds(d3, p2) {
    return pad(d3.getSeconds(), p2, 2);
  }
  function formatWeekdayNumberMonday(d3) {
    var day = d3.getDay();
    return day === 0 ? 7 : day;
  }
  function formatWeekNumberSunday(d3, p2) {
    return pad(timeSunday.count(timeYear(d3) - 1, d3), p2, 2);
  }
  function dISO(d3) {
    var day = d3.getDay();
    return day >= 4 || day === 0 ? timeThursday(d3) : timeThursday.ceil(d3);
  }
  function formatWeekNumberISO(d3, p2) {
    d3 = dISO(d3);
    return pad(timeThursday.count(timeYear(d3), d3) + (timeYear(d3).getDay() === 4), p2, 2);
  }
  function formatWeekdayNumberSunday(d3) {
    return d3.getDay();
  }
  function formatWeekNumberMonday(d3, p2) {
    return pad(timeMonday.count(timeYear(d3) - 1, d3), p2, 2);
  }
  function formatYear(d3, p2) {
    return pad(d3.getFullYear() % 100, p2, 2);
  }
  function formatYearISO(d3, p2) {
    d3 = dISO(d3);
    return pad(d3.getFullYear() % 100, p2, 2);
  }
  function formatFullYear(d3, p2) {
    return pad(d3.getFullYear() % 1e4, p2, 4);
  }
  function formatFullYearISO(d3, p2) {
    var day = d3.getDay();
    d3 = day >= 4 || day === 0 ? timeThursday(d3) : timeThursday.ceil(d3);
    return pad(d3.getFullYear() % 1e4, p2, 4);
  }
  function formatZone(d3) {
    var z2 = d3.getTimezoneOffset();
    return (z2 > 0 ? "-" : (z2 *= -1, "+")) + pad(z2 / 60 | 0, "0", 2) + pad(z2 % 60, "0", 2);
  }
  function formatUTCDayOfMonth(d3, p2) {
    return pad(d3.getUTCDate(), p2, 2);
  }
  function formatUTCHour24(d3, p2) {
    return pad(d3.getUTCHours(), p2, 2);
  }
  function formatUTCHour12(d3, p2) {
    return pad(d3.getUTCHours() % 12 || 12, p2, 2);
  }
  function formatUTCDayOfYear(d3, p2) {
    return pad(1 + utcDay.count(utcYear(d3), d3), p2, 3);
  }
  function formatUTCMilliseconds(d3, p2) {
    return pad(d3.getUTCMilliseconds(), p2, 3);
  }
  function formatUTCMicroseconds(d3, p2) {
    return formatUTCMilliseconds(d3, p2) + "000";
  }
  function formatUTCMonthNumber(d3, p2) {
    return pad(d3.getUTCMonth() + 1, p2, 2);
  }
  function formatUTCMinutes(d3, p2) {
    return pad(d3.getUTCMinutes(), p2, 2);
  }
  function formatUTCSeconds(d3, p2) {
    return pad(d3.getUTCSeconds(), p2, 2);
  }
  function formatUTCWeekdayNumberMonday(d3) {
    var dow = d3.getUTCDay();
    return dow === 0 ? 7 : dow;
  }
  function formatUTCWeekNumberSunday(d3, p2) {
    return pad(utcSunday.count(utcYear(d3) - 1, d3), p2, 2);
  }
  function UTCdISO(d3) {
    var day = d3.getUTCDay();
    return day >= 4 || day === 0 ? utcThursday(d3) : utcThursday.ceil(d3);
  }
  function formatUTCWeekNumberISO(d3, p2) {
    d3 = UTCdISO(d3);
    return pad(utcThursday.count(utcYear(d3), d3) + (utcYear(d3).getUTCDay() === 4), p2, 2);
  }
  function formatUTCWeekdayNumberSunday(d3) {
    return d3.getUTCDay();
  }
  function formatUTCWeekNumberMonday(d3, p2) {
    return pad(utcMonday.count(utcYear(d3) - 1, d3), p2, 2);
  }
  function formatUTCYear(d3, p2) {
    return pad(d3.getUTCFullYear() % 100, p2, 2);
  }
  function formatUTCYearISO(d3, p2) {
    d3 = UTCdISO(d3);
    return pad(d3.getUTCFullYear() % 100, p2, 2);
  }
  function formatUTCFullYear(d3, p2) {
    return pad(d3.getUTCFullYear() % 1e4, p2, 4);
  }
  function formatUTCFullYearISO(d3, p2) {
    var day = d3.getUTCDay();
    d3 = day >= 4 || day === 0 ? utcThursday(d3) : utcThursday.ceil(d3);
    return pad(d3.getUTCFullYear() % 1e4, p2, 4);
  }
  function formatUTCZone() {
    return "+0000";
  }
  function formatLiteralPercent() {
    return "%";
  }
  function formatUnixTimestamp(d3) {
    return +d3;
  }
  function formatUnixTimestampSeconds(d3) {
    return Math.floor(+d3 / 1e3);
  }

  // node_modules/d3-time-format/src/defaultLocale.js
  var locale2;
  var timeFormat;
  var timeParse;
  var utcFormat;
  var utcParse;
  defaultLocale2({
    dateTime: "%x, %X",
    date: "%-m/%-d/%Y",
    time: "%-I:%M:%S %p",
    periods: ["AM", "PM"],
    days: ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"],
    shortDays: ["Sun", "Mon", "Tue", "Wed", "Thu", "Fri", "Sat"],
    months: ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"],
    shortMonths: ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"]
  });
  function defaultLocale2(definition) {
    locale2 = formatLocale(definition);
    timeFormat = locale2.format;
    timeParse = locale2.parse;
    utcFormat = locale2.utcFormat;
    utcParse = locale2.utcParse;
    return locale2;
  }

  // node_modules/d3-scale/src/time.js
  function date(t2) {
    return new Date(t2);
  }
  function number3(t2) {
    return t2 instanceof Date ? +t2 : +/* @__PURE__ */ new Date(+t2);
  }
  function calendar(ticks3, tickInterval, year, month, week, day, hour, minute, second3, format2) {
    var scale = continuous(), invert = scale.invert, domain2 = scale.domain;
    var formatMillisecond = format2(".%L"), formatSecond = format2(":%S"), formatMinute = format2("%I:%M"), formatHour = format2("%I %p"), formatDay = format2("%a %d"), formatWeek = format2("%b %d"), formatMonth = format2("%B"), formatYear2 = format2("%Y");
    function tickFormat3(date2) {
      return (second3(date2) < date2 ? formatMillisecond : minute(date2) < date2 ? formatSecond : hour(date2) < date2 ? formatMinute : day(date2) < date2 ? formatHour : month(date2) < date2 ? week(date2) < date2 ? formatDay : formatWeek : year(date2) < date2 ? formatMonth : formatYear2)(date2);
    }
    scale.invert = function(y7) {
      return new Date(invert(y7));
    };
    scale.domain = function(_) {
      return arguments.length ? domain2(Array.from(_, number3)) : domain2().map(date);
    };
    scale.ticks = function(interval) {
      var d3 = domain2();
      return ticks3(d3[0], d3[d3.length - 1], interval == null ? 10 : interval);
    };
    scale.tickFormat = function(count, specifier) {
      return specifier == null ? tickFormat3 : format2(specifier);
    };
    scale.nice = function(interval) {
      var d3 = domain2();
      if (!interval || typeof interval.range !== "function") interval = tickInterval(d3[0], d3[d3.length - 1], interval == null ? 10 : interval);
      return interval ? domain2(nice(d3, interval)) : scale;
    };
    scale.copy = function() {
      return copy2(scale, calendar(ticks3, tickInterval, year, month, week, day, hour, minute, second3, format2));
    };
    return scale;
  }
  function time2() {
    return initRange.apply(calendar(timeTicks, timeTickInterval, timeYear, timeMonth, timeSunday, timeDay, timeHour, timeMinute, second, timeFormat).domain([new Date(2e3, 0, 1), new Date(2e3, 0, 2)]), arguments);
  }

  // node_modules/d3-scale/src/utcTime.js
  function utcTime() {
    return initRange.apply(calendar(utcTicks, utcTickInterval, utcYear, utcMonth, utcSunday, utcDay, utcHour, utcMinute, second, utcFormat).domain([Date.UTC(2e3, 0, 1), Date.UTC(2e3, 0, 2)]), arguments);
  }

  // node_modules/d3-scale-chromatic/src/colors.js
  function colors_default(specifier) {
    var n = specifier.length / 6 | 0, colors = new Array(n), i2 = 0;
    while (i2 < n) colors[i2] = "#" + specifier.slice(i2 * 6, ++i2 * 6);
    return colors;
  }

  // node_modules/d3-scale-chromatic/src/categorical/category10.js
  var category10_default = colors_default("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf");

  // output/Hylograph.Scale/foreign.js
  var linear4 = linear3();
  var log6 = log5();
  var pow4 = pow3();
  var sqrt3 = sqrt2();
  var symlog2 = symlog();
  var scaleTime_ = time2();
  var scaleUtc_ = utcTime();
  var scaleQuantize = quantize();
  var scaleQuantile = quantile2();
  var ordinal2 = ordinal();
  var band2 = band();
  var point2 = point();
  function schemeCategory10At(index7) {
    return category10_default[Math.abs(index7) % 10];
  }

  // output/D3.Viz.LesMisV3.Draw/index.js
  var show24 = /* @__PURE__ */ show(showInt);
  var map34 = /* @__PURE__ */ map(functorArray);
  var svgWidth3 = 900;
  var svgHeight3 = 600;
  var simulationId2 = "lesmis-main";
  var updateDOM = function(stateRef) {
    return function __do7() {
      var state3 = read(stateRef)();
      var linkKey2 = function(link4) {
        return show24(link4.index);
      };
      var linksTree = forEach("links")(Line.value)(state3.links)(linkKey2)(function(link4) {
        return elem4(Line.value)([x1(link4.source.x), y1(link4.source.y), x22(link4.target.x), y22(link4.target.y), strokeWidth2(sqrt(link4.value)), stroke2("#999"), opacity("0.6")])([]);
      });
      var nodeKey2 = function(node) {
        return show24(node.id);
      };
      var nodesTree = forEach("nodes")(Circle.value)(state3.nodes)(nodeKey2)(function(node) {
        return withBehaviors([onDrag(new SimulationDrag(simulationId2))])(elem4(Circle.value)([cx2(node.x), cy2(node.y), r2(5), fill2(schemeCategory10At(node.group)), stroke2("#fff"), strokeWidth2(1.5)])([]));
      });
      rerender("#lesmis-links")(linksTree)();
      rerender("#lesmis-nodes")(nodesTree)();
      return unit;
    };
  };
  var cloneNode = function(n) {
    return {
      id: n.id,
      name: n.name,
      group: n.group,
      x: n.x,
      y: n.y,
      vx: n.vx,
      vy: n.vy,
      fx: n.fx,
      fy: n.fy
    };
  };
  var startLesMis = function(model) {
    return function(containerSelector) {
      var clonedNodes = map34(cloneNode)(model.nodes);
      var swizzledLinks = swizzleLinks(clonedNodes)(model.links)(function(src10) {
        return function(tgt) {
          return function(i2) {
            return function(link4) {
              return {
                source: src10,
                target: tgt,
                index: i2,
                value: link4.value
              };
            };
          };
        };
      });
      return function __do7() {
        var sim = create3(defaultConfig2)();
        setNodes(clonedNodes)(sim)();
        setLinks(model.links)(sim)();
        registerSimulation_(simulationId2)(reheat(sim))();
        addForce2(new ManyBody("charge", {
          theta: defaultManyBody.theta,
          distanceMin: defaultManyBody.distanceMin,
          strength: -100,
          distanceMax: 500
        }))(sim)();
        addForce2(new Collide("collision", {
          radius: 5,
          strength: 1,
          iterations: 1
        }))(sim)();
        addForce2(new Center("center", {
          x: 0,
          y: 0,
          strength: 0.1
        }))(sim)();
        addForce2(new Link("links", {
          distance: 30,
          strength: 0.5,
          iterations: 1
        }))(sim)();
        var stateRef = $$new({
          nodes: clonedNodes,
          links: swizzledLinks
        })();
        clearContainer(containerSelector)();
        var containerTree = withBehaviors([onZoom(defaultZoom(new ScaleExtent(0.1, 10))("#lesmis-zoom-group"))])(elem4(SVG.value)([width2(svgWidth3), height2(svgHeight3), viewBox2(-svgWidth3 / 2)(-svgHeight3 / 2)(svgWidth3)(svgHeight3), attr2("id")("lesmis-v3-svg"), class_("lesmis-v3")])([elem4(Group.value)([attr2("id")("lesmis-zoom-group"), class_("zoom-group")])([elem4(Group.value)([attr2("id")("lesmis-links"), class_("links")])([]), elem4(Group.value)([attr2("id")("lesmis-nodes"), class_("nodes")])([])])]));
        rerender(containerSelector)(containerTree)();
        onTick(updateDOM(stateRef))(sim)();
        start2(sim)();
        return function __do8() {
          stop(sim)();
          return unregisterSimulation_(simulationId2)();
        };
      };
    };
  };

  // output/D3.Viz.LesMisV3.Model/index.js
  var bind13 = /* @__PURE__ */ bind(bindMaybe);
  var lookup7 = /* @__PURE__ */ lookup(ordString);
  var pure32 = /* @__PURE__ */ pure(applicativeMaybe);
  var fromFoldable10 = /* @__PURE__ */ fromFoldable2(ordString)(foldableArray);
  var mkNode = function(idx) {
    return function(v2) {
      return {
        id: idx,
        name: v2.id,
        group: v2.group,
        x: 0,
        y: 0,
        vx: 0,
        vy: 0,
        fx: nullImpl,
        fy: nullImpl
      };
    };
  };
  var processRawModel = function(raw) {
    var convertLink = function(idMap) {
      return function(v2) {
        return bind13(lookup7(v2.source)(idMap))(function(srcIdx) {
          return bind13(lookup7(v2.target)(idMap))(function(tgtIdx) {
            return pure32({
              source: srcIdx,
              target: tgtIdx,
              value: v2.value
            });
          });
        });
      };
    };
    var nodes = mapWithIndex2(mkNode)(raw.nodes);
    var idToIndex = fromFoldable10(mapWithIndex2(function(i2) {
      return function(n) {
        return new Tuple(n.id, i2);
      };
    })(raw.nodes));
    var links = mapMaybe(convertLink(idToIndex))(raw.links);
    return {
      nodes,
      links
    };
  };

  // output/D3.Viz.TreeAPI.AnimatedTreeCluster/foreign.js
  var requestAnimationFrame_4 = (callback) => () => {
    return window.requestAnimationFrame(() => callback());
  };
  var setAttributeNS_ = (attrName) => (value18) => (element4) => () => {
    element4.setAttribute(attrName, value18);
  };
  var getTimestamp = () => {
    return performance.now();
  };
  var parseNumberNullable = (str6) => {
    const n = parseFloat(str6);
    return isNaN(n) ? null : n;
  };
  var unsafeCoerceToElement = (x7) => x7;

  // output/Control.Comonad.Cofree/index.js
  var tail2 = function(v2) {
    return snd(force(v2));
  };
  var mkCofree = function(a3) {
    return function(t2) {
      return defer3(function(v2) {
        return new Tuple(a3, t2);
      });
    };
  };
  var head4 = function(v2) {
    return fst(force(v2));
  };
  var foldableCofree = function(dictFoldable) {
    var foldr5 = foldr(dictFoldable);
    var foldl12 = foldl(dictFoldable);
    var foldMap3 = foldMap(dictFoldable);
    return {
      foldr: function(f) {
        var go2 = function(fa) {
          return function(b2) {
            return f(head4(fa))(foldr5(go2)(b2)(tail2(fa)));
          };
        };
        return flip(go2);
      },
      foldl: function(f) {
        var go2 = function(b2) {
          return function(fa) {
            return foldl12(go2)(f(b2)(head4(fa)))(tail2(fa));
          };
        };
        return go2;
      },
      foldMap: function(dictMonoid) {
        var append25 = append(dictMonoid.Semigroup0());
        var foldMap12 = foldMap3(dictMonoid);
        return function(f) {
          var go2 = function(fa) {
            return append25(f(head4(fa)))(foldMap12(go2)(tail2(fa)));
          };
          return go2;
        };
      }
    };
  };

  // output/Data.Tree/index.js
  var mkTree = mkCofree;

  // output/DataViz.Layout.Hierarchy.Cluster/index.js
  var compare3 = /* @__PURE__ */ compare(ordInt);
  var map35 = /* @__PURE__ */ map(functorList);
  var fromFoldable11 = /* @__PURE__ */ fromFoldable(foldableList);
  var fromFoldable14 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var fromFoldable24 = /* @__PURE__ */ fromFoldable(/* @__PURE__ */ foldableCofree(foldableList));
  var map113 = /* @__PURE__ */ map(functorArray);
  var maximum2 = /* @__PURE__ */ maximum(ordNumber)(foldableArray);
  var minimum2 = /* @__PURE__ */ minimum(ordNumber)(foldableArray);
  var maximum1 = /* @__PURE__ */ maximum(ordInt)(foldableArray);
  var foldl10 = /* @__PURE__ */ foldl(foldableArray);
  var sortByHeight = function(t2) {
    var compareByHeight = function(t12) {
      return function(t22) {
        return compare3(head4(t22).height)(head4(t12).height);
      };
    };
    var val = head4(t2);
    var children2 = tail2(t2);
    var sortedGrandchildren = map35(sortByHeight)(children2);
    var childArray = fromFoldable11(sortedGrandchildren);
    var sortedArray = sortBy(compareByHeight)(childArray);
    var sortedChildrenList = fromFoldable14(sortedArray);
    return mkTree(val)(sortedChildrenList);
  };
  var scaleToPixels = function(config) {
    return function(inputTree) {
      var allNodes = fromFoldable24(inputTree);
      var allX = map113(function(n) {
        return n.x;
      })(allNodes);
      var maxX = fromMaybe(1)(maximum2(allX));
      var minX = fromMaybe(0)(minimum2(allX));
      var xRange = (function() {
        var $30 = maxX - minX === 0;
        if ($30) {
          return 1;
        }
        ;
        return maxX - minX;
      })();
      var scaleX = function(x7) {
        return (x7 - minX) / xRange * config.size.width;
      };
      var allHeights = map113(function(n) {
        return n.height;
      })(allNodes);
      var maxHeight = fromMaybe(1)(maximum1(allHeights));
      var scaleY = function(height14) {
        return (1 - toNumber(height14) / toNumber(maxHeight)) * config.size.height;
      };
      var go2 = function(t2) {
        var val = head4(t2);
        var children2 = tail2(t2);
        return mkTree((function() {
          var $31 = {};
          for (var $32 in val) {
            if ({}.hasOwnProperty.call(val, $32)) {
              $31[$32] = val[$32];
            }
            ;
          }
          ;
          $31.x = scaleX(val.x);
          $31.y = scaleY(val.height);
          return $31;
        })())(map35(go2)(children2));
      };
      return go2(inputTree);
    };
  };
  var render14 = function(minSep) {
    return function(inputTree) {
      var foldl12 = function(f) {
        return function(init3) {
          return function(arr) {
            return foldl10(f)(init3)(arr);
          };
        };
      };
      var findExtent = function(t2) {
        var val = head4(t2);
        var children2 = tail2(t2);
        var v2 = fromFoldable11(children2);
        if (v2.length === 0) {
          return {
            minX: val.x,
            maxX: val.x
          };
        }
        ;
        var childExtents = map113(findExtent)(v2);
        var maxX = fromMaybe(val.x)(maximum2(map113(function(e) {
          return e.maxX;
        })(childExtents)));
        var minX = fromMaybe(val.x)(minimum2(map113(function(e) {
          return e.minX;
        })(childExtents)));
        return {
          minX,
          maxX
        };
      };
      var renderInternal = function(currentLeafX) {
        return function(t2) {
          var val = head4(t2);
          var children2 = tail2(t2);
          var v2 = fromFoldable11(children2);
          if (v2.length === 0) {
            var leafNode = mkTree((function() {
              var $36 = {};
              for (var $37 in val) {
                if ({}.hasOwnProperty.call(val, $37)) {
                  $36[$37] = val[$37];
                }
                ;
              }
              ;
              $36.x = currentLeafX;
              return $36;
            })())(Nil.value);
            return {
              tree: leafNode,
              lastLeafX: currentLeafX + minSep
            };
          }
          ;
          var processChildren = foldl12(function(acc) {
            return function(child) {
              var result = renderInternal(acc.lastLeafX)(child);
              return {
                trees: snoc(acc.trees)(result.tree),
                lastLeafX: result.lastLeafX
              };
            };
          })({
            trees: [],
            lastLeafX: currentLeafX
          })(v2);
          var childrenList = fromFoldable14(processChildren.trees);
          var allChildExtents = map113(findExtent)(processChildren.trees);
          var maxX = fromMaybe(0)(maximum2(map113(function(e) {
            return e.maxX;
          })(allChildExtents)));
          var minX = fromMaybe(0)(minimum2(map113(function(e) {
            return e.minX;
          })(allChildExtents)));
          var centerX = (minX + maxX) / 2;
          var internalNode = mkTree((function() {
            var $39 = {};
            for (var $40 in val) {
              if ({}.hasOwnProperty.call(val, $40)) {
                $39[$40] = val[$40];
              }
              ;
            }
            ;
            $39.x = centerX;
            return $39;
          })())(childrenList);
          return {
            tree: internalNode,
            lastLeafX: processChildren.lastLeafX
          };
        };
      };
      return renderInternal(0)(inputTree);
    };
  };
  var defaultClusterConfig = {
    size: {
      width: 800,
      height: 600
    },
    minSeparation: 1
  };
  var centerRoot = function(tree) {
    var root3 = head4(tree);
    var allNodes = fromFoldable24(tree);
    var leaves = filter(function(n) {
      return n.height === 0;
    })(allNodes);
    var firstLeaf = head(leaves);
    var minX = (function() {
      if (firstLeaf instanceof Just) {
        return firstLeaf.value0.x;
      }
      ;
      if (firstLeaf instanceof Nothing) {
        return 0;
      }
      ;
      throw new Error("Failed pattern match at DataViz.Layout.Hierarchy.Cluster (line 92, column 12 - line 94, column 21): " + [firstLeaf.constructor.name]);
    })();
    var lastLeaf = last(leaves);
    var maxX = (function() {
      if (lastLeaf instanceof Just) {
        return lastLeaf.value0.x;
      }
      ;
      if (lastLeaf instanceof Nothing) {
        return 0;
      }
      ;
      throw new Error("Failed pattern match at DataViz.Layout.Hierarchy.Cluster (line 96, column 12 - line 98, column 21): " + [lastLeaf.constructor.name]);
    })();
    var targetX = (minX + maxX) / 2;
    var offset = targetX - root3.x;
    var shiftTree = function(t2) {
      var val = head4(t2);
      var children2 = tail2(t2);
      return mkTree((function() {
        var $46 = {};
        for (var $47 in val) {
          if ({}.hasOwnProperty.call(val, $47)) {
            $46[$47] = val[$47];
          }
          ;
        }
        ;
        $46.x = val.x + offset;
        return $46;
      })())(map35(shiftTree)(children2));
    };
    return shiftTree(tree);
  };
  var addYCoordinates = function(t2) {
    var val = head4(t2);
    var nodeY = toNumber(val.height);
    var children2 = tail2(t2);
    var childrenWithY = map35(addYCoordinates)(children2);
    return mkTree((function() {
      var $49 = {};
      for (var $50 in val) {
        if ({}.hasOwnProperty.call(val, $50)) {
          $49[$50] = val[$50];
        }
        ;
      }
      ;
      $49.y = nodeY;
      return $49;
    })())(childrenWithY);
  };
  var addHeight = function(t2) {
    var val = head4(t2);
    var children2 = tail2(t2);
    var childrenWithHeight = map35(addHeight)(children2);
    var nodeHeight = (function() {
      var v2 = fromFoldable11(childrenWithHeight);
      if (v2.length === 0) {
        return 0;
      }
      ;
      var childHeights = map113(function(c2) {
        return head4(c2).height;
      })(v2);
      var maxChildHeight = fromMaybe(0)(maximum1(childHeights));
      return 1 + maxChildHeight | 0;
    })();
    return mkTree((function() {
      var $53 = {};
      for (var $54 in val) {
        if ({}.hasOwnProperty.call(val, $54)) {
          $53[$54] = val[$54];
        }
        ;
      }
      ;
      $53.height = nodeHeight;
      return $53;
    })())(childrenWithHeight);
  };
  var cluster = function(config) {
    return function(inputTree) {
      var withHeight = addHeight(inputTree);
      var sorted = sortByHeight(withHeight);
      var rendered = render14(config.minSeparation)(sorted);
      var centered = centerRoot(rendered.tree);
      var withCoords = addYCoordinates(centered);
      var scaled = scaleToPixels(config)(withCoords);
      return scaled;
    };
  };

  // output/DataViz.Layout.Hierarchy.Tree/index.js
  var compare4 = /* @__PURE__ */ compare(ordInt);
  var map36 = /* @__PURE__ */ map(functorList);
  var fromFoldable15 = /* @__PURE__ */ fromFoldable(foldableList);
  var fromFoldable16 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var add4 = /* @__PURE__ */ add(semiringNumber);
  var fromFoldable25 = /* @__PURE__ */ fromFoldable(/* @__PURE__ */ foldableCofree(foldableList));
  var map114 = /* @__PURE__ */ map(functorArray);
  var maximum3 = /* @__PURE__ */ maximum(ordNumber)(foldableArray);
  var minimum3 = /* @__PURE__ */ minimum(ordNumber)(foldableArray);
  var maximum12 = /* @__PURE__ */ maximum(ordInt)(foldableArray);
  var scanl3 = /* @__PURE__ */ scanl(traversableList);
  var Contours = /* @__PURE__ */ (function() {
    function Contours2(value0) {
      this.value0 = value0;
    }
    ;
    Contours2.create = function(value0) {
      return new Contours2(value0);
    };
    return Contours2;
  })();
  var sortByHeight2 = function(t2) {
    var compareByHeight = function(t12) {
      return function(t22) {
        return compare4(head4(t22).height)(head4(t12).height);
      };
    };
    var val = head4(t2);
    var children2 = tail2(t2);
    var sortedGrandchildren = map36(sortByHeight2)(children2);
    var childArray = fromFoldable15(sortedGrandchildren);
    var sortedArray = sortBy(compareByHeight)(childArray);
    var sortedChildrenList = fromFoldable16(sortedArray);
    return mkTree(val)(sortedChildrenList);
  };
  var singletonContours = /* @__PURE__ */ (function() {
    return new Contours({
      left: new Cons(0, Nil.value),
      right: new Cons(0, Nil.value)
    });
  })();
  var scanContoursWithBase = function(baseSep) {
    return function(v2) {
      return function(v1) {
        var go2 = function($copy_v2) {
          return function($copy_v3) {
            return function($copy_v4) {
              return function($copy_v5) {
                return function($copy_v6) {
                  var $tco_var_v2 = $copy_v2;
                  var $tco_var_v3 = $copy_v3;
                  var $tco_var_v4 = $copy_v4;
                  var $tco_var_v5 = $copy_v5;
                  var $tco_done = false;
                  var $tco_result;
                  function $tco_loop(v22, v3, v4, v5, v6) {
                    if (v5 instanceof Nil && v6 instanceof Nil) {
                      $tco_done = true;
                      return v22;
                    }
                    ;
                    if (v5 instanceof Nil && v6 instanceof Cons) {
                      var actualSep = v22 + v6.value0 - v3;
                      var neededSep = (function() {
                        var $96 = actualSep < baseSep;
                        if ($96) {
                          return v22 + (baseSep - actualSep);
                        }
                        ;
                        return v22;
                      })();
                      $tco_var_v2 = neededSep;
                      $tco_var_v3 = v3;
                      $tco_var_v4 = v6.value0;
                      $tco_var_v5 = Nil.value;
                      $copy_v6 = v6.value1;
                      return;
                    }
                    ;
                    if (v5 instanceof Cons && v6 instanceof Nil) {
                      var actualSep = v22 + v4 - v5.value0;
                      var neededSep = (function() {
                        var $99 = actualSep < baseSep;
                        if ($99) {
                          return v22 + (baseSep - actualSep);
                        }
                        ;
                        return v22;
                      })();
                      $tco_var_v2 = neededSep;
                      $tco_var_v3 = v5.value0;
                      $tco_var_v4 = v4;
                      $tco_var_v5 = v5.value1;
                      $copy_v6 = Nil.value;
                      return;
                    }
                    ;
                    if (v5 instanceof Cons && v6 instanceof Cons) {
                      var actualSep = v22 + v6.value0 - v5.value0;
                      var neededSep = (function() {
                        var $102 = actualSep < baseSep;
                        if ($102) {
                          return v22 + (baseSep - actualSep);
                        }
                        ;
                        return v22;
                      })();
                      $tco_var_v2 = neededSep;
                      $tco_var_v3 = v5.value0;
                      $tco_var_v4 = v6.value0;
                      $tco_var_v5 = v5.value1;
                      $copy_v6 = v6.value1;
                      return;
                    }
                    ;
                    throw new Error("Failed pattern match at DataViz.Layout.Hierarchy.Tree (line 313, column 3 - line 313, column 67): " + [v22.constructor.name, v3.constructor.name, v4.constructor.name, v5.constructor.name, v6.constructor.name]);
                  }
                  ;
                  while (!$tco_done) {
                    $tco_result = $tco_loop($tco_var_v2, $tco_var_v3, $tco_var_v4, $tco_var_v5, $copy_v6);
                  }
                  ;
                  return $tco_result;
                };
              };
            };
          };
        };
        return go2(baseSep)(0)(0)(v2.value0.right)(v1.value0.left);
      };
    };
  };
  var scaleToPixels2 = function(config) {
    return function(inputTree) {
      var layerScaleFn = fromMaybe(toNumber)(config.layerScale);
      var allNodes = fromFoldable25(inputTree);
      var allX = map114(function(n) {
        return n.x;
      })(allNodes);
      var maxX = fromMaybe(1)(maximum3(allX));
      var minX = fromMaybe(0)(minimum3(allX));
      var xRange = (function() {
        var $135 = maxX - minX === 0;
        if ($135) {
          return 1;
        }
        ;
        return maxX - minX;
      })();
      var scaleX = function(x7) {
        return (x7 - minX) / xRange * config.size.width;
      };
      var scaledDepths = map114(function(n) {
        return layerScaleFn(n.depth);
      })(allNodes);
      var maxScaledDepth = fromMaybe(1)(maximum3(scaledDepths));
      var scaleY = function(depth) {
        if (config.layerSeparation instanceof Just) {
          return toNumber(depth) * config.layerSeparation.value0;
        }
        ;
        if (config.layerSeparation instanceof Nothing) {
          var scaledDepth = layerScaleFn(depth);
          return scaledDepth / maxScaledDepth * config.size.height;
        }
        ;
        throw new Error("Failed pattern match at DataViz.Layout.Hierarchy.Tree (line 526, column 20 - line 532, column 63): " + [config.layerSeparation.constructor.name]);
      };
      var go2 = function(tr2) {
        var val = head4(tr2);
        var cs = tail2(tr2);
        return mkTree((function() {
          var $138 = {};
          for (var $139 in val) {
            if ({}.hasOwnProperty.call(val, $139)) {
              $138[$139] = val[$139];
            }
            ;
          }
          ;
          $138.x = scaleX(val.x);
          $138.y = scaleY(val.depth);
          return $138;
        })())(map36(go2)(cs));
      };
      return go2(inputTree);
    };
  };
  var petrify = function(parentX) {
    return function(t2) {
      var v2 = head4(t2);
      var nodeY = toNumber(v2.value1.depth);
      var nodeX = parentX + v2.value0.offset;
      var children2 = tail2(t2);
      var childrenWithCoords = map36(petrify(nodeX))(children2);
      return mkTree((function() {
        var $142 = {};
        for (var $143 in v2.value1) {
          if ({}.hasOwnProperty.call(v2.value1, $143)) {
            $142[$143] = v2["value1"][$143];
          }
          ;
        }
        ;
        $142.x = nodeX;
        $142.y = nodeY;
        return $142;
      })())(childrenWithCoords);
    };
  };
  var mergeContoursRight = function(contours) {
    var mergeLevel = function(cs) {
      var currentLevels = mapMaybe(function(c2) {
        if (c2 instanceof Cons) {
          return new Just(c2.value0);
        }
        ;
        if (c2 instanceof Nil) {
          return Nothing.value;
        }
        ;
        throw new Error("Failed pattern match at DataViz.Layout.Hierarchy.Tree (line 458, column 17 - line 460, column 27): " + [c2.constructor.name]);
      })(cs);
      var v2 = head(currentLevels);
      if (v2 instanceof Nothing) {
        return Nil.value;
      }
      ;
      if (v2 instanceof Just) {
        var restContours = mapMaybe(function(c2) {
          if (c2 instanceof Cons) {
            return new Just(c2.value1);
          }
          ;
          if (c2 instanceof Nil) {
            return Nothing.value;
          }
          ;
          throw new Error("Failed pattern match at DataViz.Layout.Hierarchy.Tree (line 471, column 23 - line 473, column 33): " + [c2.constructor.name]);
        })(cs);
        var maxVal = fromMaybe(0)(maximum3(currentLevels));
        return new Cons(maxVal, mergeLevel(restContours));
      }
      ;
      throw new Error("Failed pattern match at DataViz.Layout.Hierarchy.Tree (line 464, column 7 - line 477, column 50): " + [v2.constructor.name]);
    };
    if (contours.length === 0) {
      return Nil.value;
    }
    ;
    return mergeLevel(contours);
  };
  var mergeContoursLeft = function(contours) {
    var mergeLevel = function(cs) {
      var currentLevels = mapMaybe(function(c2) {
        if (c2 instanceof Cons) {
          return new Just(c2.value0);
        }
        ;
        if (c2 instanceof Nil) {
          return Nothing.value;
        }
        ;
        throw new Error("Failed pattern match at DataViz.Layout.Hierarchy.Tree (line 425, column 17 - line 427, column 27): " + [c2.constructor.name]);
      })(cs);
      var v2 = head(currentLevels);
      if (v2 instanceof Nothing) {
        return Nil.value;
      }
      ;
      if (v2 instanceof Just) {
        var restContours = mapMaybe(function(c2) {
          if (c2 instanceof Cons) {
            return new Just(c2.value1);
          }
          ;
          if (c2 instanceof Nil) {
            return Nothing.value;
          }
          ;
          throw new Error("Failed pattern match at DataViz.Layout.Hierarchy.Tree (line 438, column 23 - line 440, column 33): " + [c2.constructor.name]);
        })(cs);
        var minVal = fromMaybe(0)(minimum3(currentLevels));
        return new Cons(minVal, mergeLevel(restContours));
      }
      ;
      throw new Error("Failed pattern match at DataViz.Layout.Hierarchy.Tree (line 431, column 7 - line 444, column 50): " + [v2.constructor.name]);
    };
    if (contours.length === 0) {
      return Nil.value;
    }
    ;
    return mergeLevel(contours);
  };
  var spliceContours = function(offsets) {
    return function(contours) {
      var v2 = fromFoldable15(zipWith2(Tuple.create)(offsets)(contours));
      if (v2.length === 0) {
        return singletonContours;
      }
      ;
      if (v2.length === 1) {
        return new Contours({
          left: new Cons(0, map36(function(x7) {
            return x7 + v2[0].value0;
          })(v2[0].value1.value0.left)),
          right: new Cons(0, map36(function(x7) {
            return x7 + v2[0].value0;
          })(v2[0].value1.value0.right))
        });
      }
      ;
      var shiftedContours = map114(function(v1) {
        return new Contours({
          left: map36(function(x7) {
            return x7 + v1.value0;
          })(v1.value1.value0.left),
          right: map36(function(x7) {
            return x7 + v1.value0;
          })(v1.value1.value0.right)
        });
      })(v2);
      var mergedRight = mergeContoursRight(map114(function(v1) {
        return v1.value0.right;
      })(shiftedContours));
      var mergedLeft = mergeContoursLeft(map114(function(v1) {
        return v1.value0.left;
      })(shiftedContours));
      return new Contours({
        left: new Cons(0, mergedLeft),
        right: new Cons(0, mergedRight)
      });
    };
  };
  var getRootData = function(t2) {
    var v2 = head4(t2);
    return v2.value1;
  };
  var defaultTreeConfig = /* @__PURE__ */ (function() {
    return {
      size: {
        width: 800,
        height: 600
      },
      minSeparation: 1,
      separation: Nothing.value,
      layerScale: Nothing.value,
      layerSeparation: Nothing.value
    };
  })();
  var computeSeparationsWithBase = function(baseSeps) {
    return function(contours) {
      var tailSafe = function(v3) {
        if (v3 instanceof Nil) {
          return Nil.value;
        }
        ;
        if (v3 instanceof Cons) {
          return v3.value1;
        }
        ;
        throw new Error("Failed pattern match at DataViz.Layout.Hierarchy.Tree (line 301, column 3 - line 301, column 41): " + [v3.constructor.name]);
      };
      var applyBase = function(base3) {
        return function(v3) {
          return scanContoursWithBase(base3)(v3.value0)(v3.value1);
        };
      };
      var v2 = new Tuple(baseSeps, contours);
      if (v2.value0 instanceof Nil) {
        return Nil.value;
      }
      ;
      if (v2.value1 instanceof Nil) {
        return Nil.value;
      }
      ;
      if (v2.value1 instanceof Cons && v2.value1.value1 instanceof Nil) {
        return Nil.value;
      }
      ;
      var contourPairs = zipWith2(Tuple.create)(contours)(tailSafe(contours));
      return zipWith2(applyBase)(baseSeps)(contourPairs);
    };
  };
  var computeBaseSeparations = function(minSep) {
    return function(separationFn) {
      return function(nodes) {
        var tailSafe = function(v2) {
          if (v2 instanceof Nil) {
            return Nil.value;
          }
          ;
          if (v2 instanceof Cons) {
            return v2.value1;
          }
          ;
          throw new Error("Failed pattern match at DataViz.Layout.Hierarchy.Tree (line 279, column 3 - line 279, column 41): " + [v2.constructor.name]);
        };
        var getSep = function(v2) {
          return function(v1) {
            return function(v22) {
              return function(v3) {
                if (v2 instanceof Nothing) {
                  return v1;
                }
                ;
                if (v2 instanceof Just) {
                  return v2.value0(v22)(v3) + v1;
                }
                ;
                throw new Error("Failed pattern match at DataViz.Layout.Hierarchy.Tree (line 275, column 3 - line 275, column 67): " + [v2.constructor.name, v1.constructor.name, v22.constructor.name, v3.constructor.name]);
              };
            };
          };
        };
        if (nodes instanceof Nil) {
          return Nil.value;
        }
        ;
        if (nodes instanceof Cons && nodes.value1 instanceof Nil) {
          return Nil.value;
        }
        ;
        return zipWith2(getSep(separationFn)(minSep))(nodes)(tailSafe(nodes));
      };
    };
  };
  var render15 = function(minSep) {
    return function(separationFn) {
      return function(inputTree) {
        var updateOffset = function(tr2) {
          return function(newOffset) {
            var v3 = head4(tr2);
            var children2 = tail2(tr2);
            return mkTree(new Tuple({
              offset: newOffset
            }, v3.value1))(children2);
          };
        };
        var renderWithContours = function(t2) {
          var val = head4(t2);
          var children2 = tail2(t2);
          var childCount = length2(children2);
          if (childCount === 0) {
            return new Tuple(mkTree(new Tuple({
              offset: 0
            }, val))(Nil.value), singletonContours);
          }
          ;
          var childResults = map36(renderWithContours)(children2);
          var childTrees = map36(function(v3) {
            return v3.value0;
          })(childResults);
          var childRootData = map36(getRootData)(childTrees);
          var childContours = map36(function(v3) {
            return v3.value1;
          })(childResults);
          var baseSeparations = computeBaseSeparations(minSep)(separationFn)(childRootData);
          var separations = computeSeparationsWithBase(baseSeparations)(childContours);
          var childAbsoluteOffsets = new Cons(0, scanl3(add4)(0)(separations));
          var leftmostOffset = fromMaybe(0)(head(fromFoldable15(childAbsoluteOffsets)));
          var rightmostOffset = fromMaybe(0)(last(fromFoldable15(childAbsoluteOffsets)));
          var parentOffset = (leftmostOffset + rightmostOffset) / 2;
          var childRelativeOffsets = map36(function(absOffset) {
            return absOffset - parentOffset;
          })(childAbsoluteOffsets);
          var childrenWithOffsets = zipWith2(updateOffset)(childTrees)(childRelativeOffsets);
          var parentContours = spliceContours(childRelativeOffsets)(childContours);
          var resultTree = mkTree(new Tuple({
            offset: parentOffset
          }, val))(childrenWithOffsets);
          return new Tuple(resultTree, parentContours);
        };
        var v2 = renderWithContours(inputTree);
        return v2.value0;
      };
    };
  };
  var addHeightField = function(t2) {
    var val = head4(t2);
    var children2 = tail2(t2);
    var childrenWithHeight = map36(addHeightField)(children2);
    var nodeHeight = (function() {
      var v2 = fromFoldable15(childrenWithHeight);
      if (v2.length === 0) {
        return 0;
      }
      ;
      var childHeights = map114(function(c2) {
        return head4(c2).height;
      })(v2);
      var maxChildHeight = fromMaybe(0)(maximum12(childHeights));
      return maxChildHeight + 1 | 0;
    })();
    return mkTree((function() {
      var $276 = {};
      for (var $277 in val) {
        if ({}.hasOwnProperty.call(val, $277)) {
          $276[$277] = val[$277];
        }
        ;
      }
      ;
      $276.height = nodeHeight;
      return $276;
    })())(childrenWithHeight);
  };
  var addDepth = function(currentDepth) {
    return function(t2) {
      var val = head4(t2);
      var children2 = tail2(t2);
      return mkTree((function() {
        var $279 = {};
        for (var $280 in val) {
          if ({}.hasOwnProperty.call(val, $280)) {
            $279[$280] = val[$280];
          }
          ;
        }
        ;
        $279.depth = currentDepth;
        return $279;
      })())(map36(addDepth(currentDepth + 1 | 0))(children2));
    };
  };
  var treeWithSorting = function(config) {
    return function(inputTree) {
      var withDepth = addDepth(0)(inputTree);
      var withHeight = addHeightField(withDepth);
      var sorted = sortByHeight2(withHeight);
      var rendered = render15(config.minSeparation)(config.separation)(sorted);
      var withCoords = petrify(0)(rendered);
      var scaled = scaleToPixels2(config)(withCoords);
      return scaled;
    };
  };

  // output/Hylograph.Expr.Path/index.js
  var linkVertical = function(dict) {
    return dict.linkVertical;
  };

  // output/D3.Viz.TreeAPI.AnimatedTreeCluster/index.js
  var $runtime_lazy8 = function(name16, moduleName, init3) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init3();
      state3 = 2;
      return val;
    };
  };
  var for_7 = /* @__PURE__ */ for_(applicativeEffect)(foldableArray);
  var lookup8 = /* @__PURE__ */ lookup(ordString);
  var show25 = /* @__PURE__ */ show(showNumber);
  var traverse5 = /* @__PURE__ */ traverse(traversableArray)(applicativeEffect);
  var fromFoldable17 = /* @__PURE__ */ fromFoldable2(ordString)(foldableArray);
  var mapFlipped5 = /* @__PURE__ */ mapFlipped(functorArray);
  var bind14 = /* @__PURE__ */ bind(bindArray);
  var fromFoldable18 = /* @__PURE__ */ fromFoldable(foldableList);
  var append17 = /* @__PURE__ */ append(semigroupArray);
  var targetYIsSymbol = {
    reflectSymbol: function() {
      return "targetY";
    }
  };
  var targetXIsSymbol = {
    reflectSymbol: function() {
      return "targetX";
    }
  };
  var bind22 = /* @__PURE__ */ bind(bindMaybe);
  var pure110 = /* @__PURE__ */ pure(applicativeMaybe);
  var map37 = /* @__PURE__ */ map(functorArray);
  var sourceYIsSymbol = {
    reflectSymbol: function() {
      return "sourceY";
    }
  };
  var sourceXIsSymbol = {
    reflectSymbol: function() {
      return "sourceX";
    }
  };
  var linkVertical2 = /* @__PURE__ */ linkVertical(pathExprEvalD);
  var mapMaybeWithKey2 = /* @__PURE__ */ mapMaybeWithKey(ordString);
  var min10 = /* @__PURE__ */ min(ordNumber);
  var when8 = /* @__PURE__ */ when(applicativeEffect);
  var $$void12 = /* @__PURE__ */ $$void(functorEffect);
  var show111 = /* @__PURE__ */ show(showInt);
  var TreeLayout = /* @__PURE__ */ (function() {
    function TreeLayout2() {
    }
    ;
    TreeLayout2.value = new TreeLayout2();
    return TreeLayout2;
  })();
  var ClusterLayout = /* @__PURE__ */ (function() {
    function ClusterLayout2() {
    }
    ;
    ClusterLayout2.value = new ClusterLayout2();
    return ClusterLayout2;
  })();
  var showLayoutType = {
    show: function(v2) {
      if (v2 instanceof TreeLayout) {
        return "Tree (Reingold-Tilford)";
      }
      ;
      if (v2 instanceof ClusterLayout) {
        return "Cluster (Dendrogram)";
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.TreeAPI.AnimatedTreeCluster (line 49, column 1 - line 51, column 46): " + [v2.constructor.name]);
    }
  };
  var show26 = /* @__PURE__ */ show(showLayoutType);
  var updateNodesInDOM = function(selector) {
    return function(positions) {
      return function __do7() {
        var win = windowImpl();
        var doc = document2(win)();
        var parentNode3 = toParentNode3(doc);
        var nodeList = querySelectorAll(selector + " svg .nodes circle")(parentNode3)();
        var nodes = toArray2(nodeList)();
        return for_7(nodes)(function(node) {
          var elem7 = unsafeCoerceToElement(node);
          return function __do8() {
            var maybeName = getAttribute2("data-node")(elem7)();
            if (maybeName instanceof Just) {
              var v2 = lookup8(maybeName.value0)(positions);
              if (v2 instanceof Just) {
                setAttributeNS_("cx")(show25(v2.value0.x))(elem7)();
                return setAttributeNS_("cy")(show25(v2.value0.y))(elem7)();
              }
              ;
              if (v2 instanceof Nothing) {
                return unit;
              }
              ;
              throw new Error("Failed pattern match at D3.Viz.TreeAPI.AnimatedTreeCluster (line 404, column 20 - line 408, column 29): " + [v2.constructor.name]);
            }
            ;
            if (maybeName instanceof Nothing) {
              return unit;
            }
            ;
            throw new Error("Failed pattern match at D3.Viz.TreeAPI.AnimatedTreeCluster (line 403, column 5 - line 409, column 27): " + [maybeName.constructor.name]);
          };
        })();
      };
    };
  };
  var toggleLayout = function(v2) {
    if (v2 instanceof TreeLayout) {
      return ClusterLayout.value;
    }
    ;
    if (v2 instanceof ClusterLayout) {
      return TreeLayout.value;
    }
    ;
    throw new Error("Failed pattern match at D3.Viz.TreeAPI.AnimatedTreeCluster (line 54, column 1 - line 54, column 41): " + [v2.constructor.name]);
  };
  var pow5 = function(base3) {
    return function(exp2) {
      if (exp2 <= 0) {
        return 1;
      }
      ;
      if (otherwise) {
        return base3 * pow5(base3)(exp2 - 1 | 0);
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.TreeAPI.AnimatedTreeCluster (line 178, column 1 - line 178, column 31): " + [base3.constructor.name, exp2.constructor.name]);
    };
  };
  var parseNumber = function($122) {
    return toMaybe(parseNumberNullable($122));
  };
  var readNodePositionsFromDOM = function(selector) {
    return function __do7() {
      var win = windowImpl();
      var doc = document2(win)();
      var parentNode3 = toParentNode3(doc);
      var nodeList = querySelectorAll(selector + " svg .nodes circle")(parentNode3)();
      var nodes = toArray2(nodeList)();
      var positions = traverse5(function(node) {
        var elem7 = unsafeCoerceToElement(node);
        return function __do8() {
          var maybeName = getAttribute2("data-node")(elem7)();
          var maybeCx = getAttribute2("cx")(elem7)();
          var maybeCy = getAttribute2("cy")(elem7)();
          if (maybeName instanceof Just && (maybeCx instanceof Just && maybeCy instanceof Just)) {
            var y7 = fromMaybe(0)(parseNumber(maybeCy.value0));
            var x7 = fromMaybe(0)(parseNumber(maybeCx.value0));
            return new Just(new Tuple(maybeName.value0, {
              x: x7,
              y: y7
            }));
          }
          ;
          return Nothing.value;
        };
      })(nodes)();
      return fromFoldable17(catMaybes(positions));
    };
  };
  var nodesToPositions = function(nodes) {
    return fromFoldable17(mapFlipped5(nodes)(function(n) {
      return new Tuple(n.name, {
        x: n.x,
        y: n.y
      });
    }));
  };
  var nodeKey = function(node) {
    return node.name;
  };
  var makeLinkSpecs = function(t2) {
    var val = head4(t2);
    var children2 = tail2(t2);
    var grandchildLinks = bind14(fromFoldable18(children2))(makeLinkSpecs);
    var childLinks = bind14(fromFoldable18(children2))(function(child) {
      var childVal = head4(child);
      return [{
        name: val.name + ("->" + childVal.name),
        sourceName: val.name,
        targetName: childVal.name
      }];
    });
    return append17(childLinks)(grandchildLinks);
  };
  var linkTargetY = function(dictNumExpr) {
    return function(dictDatumExpr) {
      return field(dictDatumExpr)(targetYIsSymbol)()($$Proxy.value);
    };
  };
  var linkTargetY1 = /* @__PURE__ */ linkTargetY(numExprEvalD)(datumExprEvalD);
  var linkTargetX = function(dictNumExpr) {
    return function(dictDatumExpr) {
      return field(dictDatumExpr)(targetXIsSymbol)()($$Proxy.value);
    };
  };
  var linkTargetX1 = /* @__PURE__ */ linkTargetX(numExprEvalD)(datumExprEvalD);
  var linkSpecToData = function(positions) {
    return function(spec) {
      return bind22(lookup8(spec.sourceName)(positions))(function(sourcePos) {
        return bind22(lookup8(spec.targetName)(positions))(function(targetPos) {
          return pure110({
            name: spec.name,
            sourceX: sourcePos.x,
            sourceY: sourcePos.y,
            targetX: targetPos.x,
            targetY: targetPos.y
          });
        });
      });
    };
  };
  var makeLinksFromPositions = function(specs) {
    return function(positions) {
      return catMaybes(map37(linkSpecToData(positions))(specs));
    };
  };
  var linkSourceY = function(dictNumExpr) {
    return function(dictDatumExpr) {
      return field(dictDatumExpr)(sourceYIsSymbol)()($$Proxy.value);
    };
  };
  var linkSourceY1 = /* @__PURE__ */ linkSourceY(numExprEvalD)(datumExprEvalD);
  var linkSourceX = function(dictNumExpr) {
    return function(dictDatumExpr) {
      return field(dictDatumExpr)(sourceXIsSymbol)()($$Proxy.value);
    };
  };
  var linkSourceX1 = /* @__PURE__ */ linkSourceX(numExprEvalD)(datumExprEvalD);
  var verticalLinkPathV3 = function(link4) {
    return runEvalD(linkVertical2(linkSourceX1)(linkSourceY1)(linkTargetX1)(linkTargetY1))(link4)(0);
  };
  var updateLinksInDOM = function(selector) {
    return function(links) {
      return function __do7() {
        var win = windowImpl();
        var doc = document2(win)();
        var parentNode3 = toParentNode3(doc);
        var linkList = querySelectorAll(selector + " svg .links path")(parentNode3)();
        var linkNodes = toArray2(linkList)();
        var linkMap = fromFoldable17(mapFlipped5(links)(function(link4) {
          return new Tuple(link4.name, link4);
        }));
        return for_7(linkNodes)(function(node) {
          var elem7 = unsafeCoerceToElement(node);
          return function __do8() {
            var maybeName = getAttribute2("data-link")(elem7)();
            if (maybeName instanceof Just) {
              var v2 = lookup8(maybeName.value0)(linkMap);
              if (v2 instanceof Just) {
                var pathStr = verticalLinkPathV3(v2.value0);
                return setAttributeNS_("d")(pathStr)(elem7)();
              }
              ;
              if (v2 instanceof Nothing) {
                return unit;
              }
              ;
              throw new Error("Failed pattern match at D3.Viz.TreeAPI.AnimatedTreeCluster (line 427, column 20 - line 431, column 29): " + [v2.constructor.name]);
            }
            ;
            if (maybeName instanceof Nothing) {
              return unit;
            }
            ;
            throw new Error("Failed pattern match at D3.Viz.TreeAPI.AnimatedTreeCluster (line 426, column 5 - line 432, column 27): " + [maybeName.constructor.name]);
          };
        })();
      };
    };
  };
  var linkKey = function(link4) {
    return link4.name;
  };
  var lerp3 = function(start4) {
    return function(end2) {
      return function(t2) {
        return start4 + (end2 - start4) * t2;
      };
    };
  };
  var flattenTree = /* @__PURE__ */ fromFoldable(/* @__PURE__ */ foldableCofree(foldableList));
  var easeInOutCubic3 = function(t2) {
    var $115 = t2 < 0.5;
    if ($115) {
      return 4 * t2 * t2 * t2;
    }
    ;
    return 1 - pow5(-2 * t2 + 2)(3) / 2;
  };
  var interpolatePositions = function(oldPos) {
    return function(newPos) {
      return function(t2) {
        var easedT = easeInOutCubic3(t2);
        return mapMaybeWithKey2(function(name16) {
          return function(newP) {
            var v2 = lookup8(name16)(oldPos);
            if (v2 instanceof Just) {
              return new Just({
                x: lerp3(v2.value0.x)(newP.x)(easedT),
                y: lerp3(v2.value0.y)(newP.y)(easedT)
              });
            }
            ;
            if (v2 instanceof Nothing) {
              return new Just(newP);
            }
            ;
            throw new Error("Failed pattern match at D3.Viz.TreeAPI.AnimatedTreeCluster (line 192, column 8 - line 197, column 30): " + [v2.constructor.name]);
          };
        })(newPos);
      };
    };
  };
  var update2 = function(dataTree) {
    return function(selector) {
      return function(chartWidth) {
        return function(chartHeight) {
          return function(currentLayout) {
            return function __do7() {
              log2("=== Updating AnimatedTreeCluster to " + (show26(currentLayout) + " ==="))();
              var oldPositions = readNodePositionsFromDOM(selector)();
              var positioned = (function() {
                if (currentLayout instanceof TreeLayout) {
                  var config = {
                    layerScale: defaultTreeConfig.layerScale,
                    layerSeparation: defaultTreeConfig.layerSeparation,
                    minSeparation: defaultTreeConfig.minSeparation,
                    separation: defaultTreeConfig.separation,
                    size: {
                      width: chartWidth,
                      height: chartHeight
                    }
                  };
                  return treeWithSorting(config)(dataTree);
                }
                ;
                if (currentLayout instanceof ClusterLayout) {
                  var config = {
                    minSeparation: defaultClusterConfig.minSeparation,
                    size: {
                      width: chartWidth,
                      height: chartHeight
                    }
                  };
                  return cluster(config)(dataTree);
                }
                ;
                throw new Error("Failed pattern match at D3.Viz.TreeAPI.AnimatedTreeCluster (line 318, column 20 - line 324, column 37): " + [currentLayout.constructor.name]);
              })();
              var nodes = flattenTree(positioned);
              var newPositions = nodesToPositions(nodes);
              var linkSpecs = makeLinkSpecs(positioned);
              var startTimeRef = $$new(Nothing.value)();
              var $lazy_animate = $runtime_lazy8("animate", "D3.Viz.TreeAPI.AnimatedTreeCluster", function() {
                return function __do8() {
                  var maybeStartTime = read(startTimeRef)();
                  var now2 = getTimestamp();
                  var startTime = (function() {
                    if (maybeStartTime instanceof Nothing) {
                      write(new Just(now2))(startTimeRef)();
                      return now2;
                    }
                    ;
                    if (maybeStartTime instanceof Just) {
                      return maybeStartTime.value0;
                    }
                    ;
                    throw new Error("Failed pattern match at D3.Viz.TreeAPI.AnimatedTreeCluster (line 341, column 20 - line 345, column 25): " + [maybeStartTime.constructor.name]);
                  })();
                  var elapsed = now2 - startTime;
                  var progress2 = min10(1)(elapsed / 1500);
                  var currentPos = interpolatePositions(oldPositions)(newPositions)(progress2);
                  updateNodesInDOM(selector)(currentPos)();
                  var currentLinks = makeLinksFromPositions(linkSpecs)(currentPos);
                  updateLinksInDOM(selector)(currentLinks)();
                  return when8(progress2 < 1)($$void12(requestAnimationFrame_4($lazy_animate(362))))();
                };
              });
              var animate = $lazy_animate(336);
              return $$void12(requestAnimationFrame_4(animate))();
            };
          };
        };
      };
    };
  };
  var draw = function(dataTree) {
    return function(selector) {
      return function(currentLayout) {
        return function __do7() {
          log2("=== Drawing AnimatedTreeCluster with HATS ===")();
          log2("Layout: " + show26(currentLayout))();
          var positioned = (function() {
            if (currentLayout instanceof TreeLayout) {
              var config = {
                layerScale: defaultTreeConfig.layerScale,
                layerSeparation: defaultTreeConfig.layerSeparation,
                minSeparation: defaultTreeConfig.minSeparation,
                separation: defaultTreeConfig.separation,
                size: {
                  width: 500,
                  height: 300
                }
              };
              return treeWithSorting(config)(dataTree);
            }
            ;
            if (currentLayout instanceof ClusterLayout) {
              var config = {
                minSeparation: defaultClusterConfig.minSeparation,
                size: {
                  width: 500,
                  height: 300
                }
              };
              return cluster(config)(dataTree);
            }
            ;
            throw new Error("Failed pattern match at D3.Viz.TreeAPI.AnimatedTreeCluster (line 236, column 20 - line 242, column 37): " + [currentLayout.constructor.name]);
          })();
          var nodes = flattenTree(positioned);
          var linkSpecs = makeLinkSpecs(positioned);
          var currentPositions = nodesToPositions(nodes);
          var links = makeLinksFromPositions(linkSpecs)(currentPositions);
          log2("Nodes: " + (show111(length(nodes)) + (", Links: " + show111(length(linkSpecs)))))();
          clearContainer(selector)();
          var containerTree = elem4(SVG.value)([viewBox2(0)(0)(500)(300), class_("animated-tree-cluster"), width2(500), height2(300)])([elem4(Group.value)([class_("links"), attr2("id")("atc-links")])([]), elem4(Group.value)([class_("nodes"), attr2("id")("atc-nodes")])([])]);
          rerender(selector)(containerTree)();
          var linksTree = forEach("linkElements")(Path.value)(links)(linkKey)(function(link4) {
            return elem4(Path.value)([class_("link"), attr2("data-link")(link4.name), d(verticalLinkPathV3(link4)), fill2("none"), stroke2("#555"), strokeWidth2(1.5)])([]);
          });
          rerender(selector + " #atc-links")(linksTree)();
          var nodesTree = forEach("nodeElements")(Circle.value)(nodes)(nodeKey)(function(node) {
            return elem4(Circle.value)([class_("node"), attr2("data-node")(node.name), cx2(node.x), cy2(node.y), r2(4), fill2("#999"), stroke2("#555"), strokeWidth2(1.5)])([]);
          });
          rerender(selector + " #atc-nodes")(nodesTree)();
          log2("Initial render complete")();
          return {
            dataTree,
            chartWidth: 500,
            chartHeight: 300,
            currentPositions,
            linkSpecs,
            selector
          };
        };
      };
    };
  };

  // output/Data.Op/index.js
  var Op = function(x7) {
    return x7;
  };

  // output/Data.Options/index.js
  var fromFoldable19 = /* @__PURE__ */ fromFoldable8(foldableArray);
  var semigroupOptions = semigroupArray;
  var options2 = function(v2) {
    return unsafeToForeign(fromFoldable19(v2));
  };
  var defaultToOptions = function(k) {
    return function(v2) {
      return [new Tuple(k, unsafeToForeign(v2))];
    };
  };
  var opt = function($8) {
    return Op(defaultToOptions($8));
  };
  var assoc = /* @__PURE__ */ unwrap();

  // output/Hylograph.Shared.Data/foreign.js
  function parseFlareJson(jsonString) {
    return JSON.parse(jsonString);
  }
  var getName = (node) => node.name || "";
  var getValue = (node) => node.value || 0;
  var getChildren_ = (node) => {
    if (node.children && Array.isArray(node.children) && node.children.length > 0) {
      return node.children;
    }
    return null;
  };

  // output/Affjax/foreign.js
  function _ajax(platformSpecificDriver, timeoutErrorMessageIdent, requestFailedMessageIdent, mkHeader, options3) {
    return function(errback, callback) {
      var xhr = platformSpecificDriver.newXHR();
      var fixedUrl = platformSpecificDriver.fixupUrl(options3.url, xhr);
      xhr.open(options3.method || "GET", fixedUrl, true, options3.username, options3.password);
      if (options3.headers) {
        try {
          for (var i2 = 0, header2; (header2 = options3.headers[i2]) != null; i2++) {
            xhr.setRequestHeader(header2.field, header2.value);
          }
        } catch (e) {
          errback(e);
        }
      }
      var onerror = function(msgIdent) {
        return function() {
          errback(new Error(msgIdent));
        };
      };
      xhr.onerror = onerror(requestFailedMessageIdent);
      xhr.ontimeout = onerror(timeoutErrorMessageIdent);
      xhr.onload = function() {
        callback({
          status: xhr.status,
          statusText: xhr.statusText,
          headers: xhr.getAllResponseHeaders().split("\r\n").filter(function(header3) {
            return header3.length > 0;
          }).map(function(header3) {
            var i3 = header3.indexOf(":");
            return mkHeader(header3.substring(0, i3))(header3.substring(i3 + 2));
          }),
          body: xhr.response
        });
      };
      xhr.responseType = options3.responseType;
      xhr.withCredentials = options3.withCredentials;
      xhr.timeout = options3.timeout;
      xhr.send(options3.content);
      return function(error4, cancelErrback, cancelCallback) {
        try {
          xhr.abort();
        } catch (e) {
          return cancelErrback(e);
        }
        return cancelCallback();
      };
    };
  }

  // output/Data.MediaType.Common/index.js
  var applicationJSON = "application/json";
  var applicationFormURLEncoded = "application/x-www-form-urlencoded";

  // output/Affjax.RequestBody/index.js
  var ArrayView = /* @__PURE__ */ (function() {
    function ArrayView2(value0) {
      this.value0 = value0;
    }
    ;
    ArrayView2.create = function(value0) {
      return new ArrayView2(value0);
    };
    return ArrayView2;
  })();
  var Blob = /* @__PURE__ */ (function() {
    function Blob3(value0) {
      this.value0 = value0;
    }
    ;
    Blob3.create = function(value0) {
      return new Blob3(value0);
    };
    return Blob3;
  })();
  var Document = /* @__PURE__ */ (function() {
    function Document3(value0) {
      this.value0 = value0;
    }
    ;
    Document3.create = function(value0) {
      return new Document3(value0);
    };
    return Document3;
  })();
  var $$String = /* @__PURE__ */ (function() {
    function $$String3(value0) {
      this.value0 = value0;
    }
    ;
    $$String3.create = function(value0) {
      return new $$String3(value0);
    };
    return $$String3;
  })();
  var FormData = /* @__PURE__ */ (function() {
    function FormData2(value0) {
      this.value0 = value0;
    }
    ;
    FormData2.create = function(value0) {
      return new FormData2(value0);
    };
    return FormData2;
  })();
  var FormURLEncoded = /* @__PURE__ */ (function() {
    function FormURLEncoded2(value0) {
      this.value0 = value0;
    }
    ;
    FormURLEncoded2.create = function(value0) {
      return new FormURLEncoded2(value0);
    };
    return FormURLEncoded2;
  })();
  var Json = /* @__PURE__ */ (function() {
    function Json3(value0) {
      this.value0 = value0;
    }
    ;
    Json3.create = function(value0) {
      return new Json3(value0);
    };
    return Json3;
  })();
  var toMediaType = function(v2) {
    if (v2 instanceof FormURLEncoded) {
      return new Just(applicationFormURLEncoded);
    }
    ;
    if (v2 instanceof Json) {
      return new Just(applicationJSON);
    }
    ;
    return Nothing.value;
  };

  // output/Affjax.RequestHeader/index.js
  var unwrap7 = /* @__PURE__ */ unwrap();
  var Accept = /* @__PURE__ */ (function() {
    function Accept2(value0) {
      this.value0 = value0;
    }
    ;
    Accept2.create = function(value0) {
      return new Accept2(value0);
    };
    return Accept2;
  })();
  var ContentType = /* @__PURE__ */ (function() {
    function ContentType2(value0) {
      this.value0 = value0;
    }
    ;
    ContentType2.create = function(value0) {
      return new ContentType2(value0);
    };
    return ContentType2;
  })();
  var RequestHeader = /* @__PURE__ */ (function() {
    function RequestHeader2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    RequestHeader2.create = function(value0) {
      return function(value1) {
        return new RequestHeader2(value0, value1);
      };
    };
    return RequestHeader2;
  })();
  var value13 = function(v2) {
    if (v2 instanceof Accept) {
      return unwrap7(v2.value0);
    }
    ;
    if (v2 instanceof ContentType) {
      return unwrap7(v2.value0);
    }
    ;
    if (v2 instanceof RequestHeader) {
      return v2.value1;
    }
    ;
    throw new Error("Failed pattern match at Affjax.RequestHeader (line 26, column 1 - line 26, column 33): " + [v2.constructor.name]);
  };
  var name15 = function(v2) {
    if (v2 instanceof Accept) {
      return "Accept";
    }
    ;
    if (v2 instanceof ContentType) {
      return "Content-Type";
    }
    ;
    if (v2 instanceof RequestHeader) {
      return v2.value0;
    }
    ;
    throw new Error("Failed pattern match at Affjax.RequestHeader (line 21, column 1 - line 21, column 32): " + [v2.constructor.name]);
  };

  // output/Affjax.ResponseFormat/index.js
  var identity14 = /* @__PURE__ */ identity(categoryFn);
  var $$ArrayBuffer = /* @__PURE__ */ (function() {
    function $$ArrayBuffer2(value0) {
      this.value0 = value0;
    }
    ;
    $$ArrayBuffer2.create = function(value0) {
      return new $$ArrayBuffer2(value0);
    };
    return $$ArrayBuffer2;
  })();
  var Blob2 = /* @__PURE__ */ (function() {
    function Blob3(value0) {
      this.value0 = value0;
    }
    ;
    Blob3.create = function(value0) {
      return new Blob3(value0);
    };
    return Blob3;
  })();
  var Document2 = /* @__PURE__ */ (function() {
    function Document3(value0) {
      this.value0 = value0;
    }
    ;
    Document3.create = function(value0) {
      return new Document3(value0);
    };
    return Document3;
  })();
  var Json2 = /* @__PURE__ */ (function() {
    function Json3(value0) {
      this.value0 = value0;
    }
    ;
    Json3.create = function(value0) {
      return new Json3(value0);
    };
    return Json3;
  })();
  var $$String2 = /* @__PURE__ */ (function() {
    function $$String3(value0) {
      this.value0 = value0;
    }
    ;
    $$String3.create = function(value0) {
      return new $$String3(value0);
    };
    return $$String3;
  })();
  var Ignore = /* @__PURE__ */ (function() {
    function Ignore2(value0) {
      this.value0 = value0;
    }
    ;
    Ignore2.create = function(value0) {
      return new Ignore2(value0);
    };
    return Ignore2;
  })();
  var toResponseType = function(v2) {
    if (v2 instanceof $$ArrayBuffer) {
      return "arraybuffer";
    }
    ;
    if (v2 instanceof Blob2) {
      return "blob";
    }
    ;
    if (v2 instanceof Document2) {
      return "document";
    }
    ;
    if (v2 instanceof Json2) {
      return "text";
    }
    ;
    if (v2 instanceof $$String2) {
      return "text";
    }
    ;
    if (v2 instanceof Ignore) {
      return "";
    }
    ;
    throw new Error("Failed pattern match at Affjax.ResponseFormat (line 44, column 3 - line 50, column 19): " + [v2.constructor.name]);
  };
  var toMediaType2 = function(v2) {
    if (v2 instanceof Json2) {
      return new Just(applicationJSON);
    }
    ;
    return Nothing.value;
  };
  var string = /* @__PURE__ */ (function() {
    return new $$String2(identity14);
  })();
  var json = /* @__PURE__ */ (function() {
    return new Json2(identity14);
  })();
  var ignore = /* @__PURE__ */ (function() {
    return new Ignore(identity14);
  })();

  // output/Affjax.ResponseHeader/index.js
  var ResponseHeader = /* @__PURE__ */ (function() {
    function ResponseHeader2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    ResponseHeader2.create = function(value0) {
      return function(value1) {
        return new ResponseHeader2(value0, value1);
      };
    };
    return ResponseHeader2;
  })();

  // output/Data.Argonaut.Core/foreign.js
  function id3(x7) {
    return x7;
  }
  function stringify(j) {
    return JSON.stringify(j);
  }

  // output/Data.Argonaut.Core/index.js
  var jsonEmptyObject = /* @__PURE__ */ id3(empty4);

  // output/Data.Argonaut.Parser/foreign.js
  function _jsonParser(fail3, succ, s2) {
    try {
      return succ(JSON.parse(s2));
    } catch (e) {
      return fail3(e.message);
    }
  }

  // output/Data.Argonaut.Parser/index.js
  var jsonParser = function(j) {
    return _jsonParser(Left.create, Right.create, j);
  };

  // output/JSURI/foreign.js
  function encodeURIComponent_to_RFC3986(input3) {
    return input3.replace(/[!'()*]/g, function(c2) {
      return "%" + c2.charCodeAt(0).toString(16);
    });
  }
  function _encodeFormURLComponent(fail3, succeed, input3) {
    try {
      return succeed(encodeURIComponent_to_RFC3986(encodeURIComponent(input3)).replace(/%20/g, "+"));
    } catch (err) {
      return fail3(err);
    }
  }
  function _decodeURIComponent(fail3, succeed, input3) {
    try {
      return succeed(decodeURIComponent(input3));
    } catch (err) {
      return fail3(err);
    }
  }

  // output/JSURI/index.js
  var encodeFormURLComponent = /* @__PURE__ */ (function() {
    return runFn3(_encodeFormURLComponent)($$const(Nothing.value))(Just.create);
  })();
  var $$decodeURIComponent = /* @__PURE__ */ (function() {
    return runFn3(_decodeURIComponent)($$const(Nothing.value))(Just.create);
  })();

  // output/Data.FormURLEncoded/index.js
  var apply2 = /* @__PURE__ */ apply(applyMaybe);
  var map38 = /* @__PURE__ */ map(functorMaybe);
  var traverse6 = /* @__PURE__ */ traverse(traversableArray)(applicativeMaybe);
  var toArray3 = function(v2) {
    return v2;
  };
  var encode = /* @__PURE__ */ (function() {
    var encodePart = function(v2) {
      if (v2.value1 instanceof Nothing) {
        return encodeFormURLComponent(v2.value0);
      }
      ;
      if (v2.value1 instanceof Just) {
        return apply2(map38(function(key) {
          return function(val) {
            return key + ("=" + val);
          };
        })(encodeFormURLComponent(v2.value0)))(encodeFormURLComponent(v2.value1.value0));
      }
      ;
      throw new Error("Failed pattern match at Data.FormURLEncoded (line 37, column 16 - line 39, column 114): " + [v2.constructor.name]);
    };
    var $37 = map38(joinWith("&"));
    var $38 = traverse6(encodePart);
    return function($39) {
      return $37($38(toArray3($39)));
    };
  })();

  // output/Data.HTTP.Method/index.js
  var OPTIONS = /* @__PURE__ */ (function() {
    function OPTIONS2() {
    }
    ;
    OPTIONS2.value = new OPTIONS2();
    return OPTIONS2;
  })();
  var GET2 = /* @__PURE__ */ (function() {
    function GET3() {
    }
    ;
    GET3.value = new GET3();
    return GET3;
  })();
  var HEAD = /* @__PURE__ */ (function() {
    function HEAD2() {
    }
    ;
    HEAD2.value = new HEAD2();
    return HEAD2;
  })();
  var POST2 = /* @__PURE__ */ (function() {
    function POST3() {
    }
    ;
    POST3.value = new POST3();
    return POST3;
  })();
  var PUT = /* @__PURE__ */ (function() {
    function PUT2() {
    }
    ;
    PUT2.value = new PUT2();
    return PUT2;
  })();
  var DELETE = /* @__PURE__ */ (function() {
    function DELETE2() {
    }
    ;
    DELETE2.value = new DELETE2();
    return DELETE2;
  })();
  var TRACE = /* @__PURE__ */ (function() {
    function TRACE2() {
    }
    ;
    TRACE2.value = new TRACE2();
    return TRACE2;
  })();
  var CONNECT = /* @__PURE__ */ (function() {
    function CONNECT2() {
    }
    ;
    CONNECT2.value = new CONNECT2();
    return CONNECT2;
  })();
  var PROPFIND = /* @__PURE__ */ (function() {
    function PROPFIND2() {
    }
    ;
    PROPFIND2.value = new PROPFIND2();
    return PROPFIND2;
  })();
  var PROPPATCH = /* @__PURE__ */ (function() {
    function PROPPATCH2() {
    }
    ;
    PROPPATCH2.value = new PROPPATCH2();
    return PROPPATCH2;
  })();
  var MKCOL = /* @__PURE__ */ (function() {
    function MKCOL2() {
    }
    ;
    MKCOL2.value = new MKCOL2();
    return MKCOL2;
  })();
  var COPY = /* @__PURE__ */ (function() {
    function COPY2() {
    }
    ;
    COPY2.value = new COPY2();
    return COPY2;
  })();
  var MOVE = /* @__PURE__ */ (function() {
    function MOVE2() {
    }
    ;
    MOVE2.value = new MOVE2();
    return MOVE2;
  })();
  var LOCK = /* @__PURE__ */ (function() {
    function LOCK2() {
    }
    ;
    LOCK2.value = new LOCK2();
    return LOCK2;
  })();
  var UNLOCK = /* @__PURE__ */ (function() {
    function UNLOCK2() {
    }
    ;
    UNLOCK2.value = new UNLOCK2();
    return UNLOCK2;
  })();
  var PATCH = /* @__PURE__ */ (function() {
    function PATCH2() {
    }
    ;
    PATCH2.value = new PATCH2();
    return PATCH2;
  })();
  var unCustomMethod = function(v2) {
    return v2;
  };
  var showMethod = {
    show: function(v2) {
      if (v2 instanceof OPTIONS) {
        return "OPTIONS";
      }
      ;
      if (v2 instanceof GET2) {
        return "GET";
      }
      ;
      if (v2 instanceof HEAD) {
        return "HEAD";
      }
      ;
      if (v2 instanceof POST2) {
        return "POST";
      }
      ;
      if (v2 instanceof PUT) {
        return "PUT";
      }
      ;
      if (v2 instanceof DELETE) {
        return "DELETE";
      }
      ;
      if (v2 instanceof TRACE) {
        return "TRACE";
      }
      ;
      if (v2 instanceof CONNECT) {
        return "CONNECT";
      }
      ;
      if (v2 instanceof PROPFIND) {
        return "PROPFIND";
      }
      ;
      if (v2 instanceof PROPPATCH) {
        return "PROPPATCH";
      }
      ;
      if (v2 instanceof MKCOL) {
        return "MKCOL";
      }
      ;
      if (v2 instanceof COPY) {
        return "COPY";
      }
      ;
      if (v2 instanceof MOVE) {
        return "MOVE";
      }
      ;
      if (v2 instanceof LOCK) {
        return "LOCK";
      }
      ;
      if (v2 instanceof UNLOCK) {
        return "UNLOCK";
      }
      ;
      if (v2 instanceof PATCH) {
        return "PATCH";
      }
      ;
      throw new Error("Failed pattern match at Data.HTTP.Method (line 43, column 1 - line 59, column 23): " + [v2.constructor.name]);
    }
  };
  var print6 = /* @__PURE__ */ either(/* @__PURE__ */ show(showMethod))(unCustomMethod);

  // output/Affjax/index.js
  var pure33 = /* @__PURE__ */ pure(/* @__PURE__ */ applicativeExceptT(monadIdentity));
  var fail2 = /* @__PURE__ */ fail(monadIdentity);
  var unsafeReadTagged2 = /* @__PURE__ */ unsafeReadTagged(monadIdentity);
  var alt8 = /* @__PURE__ */ alt(/* @__PURE__ */ altExceptT(semigroupNonEmptyList)(monadIdentity));
  var composeKleisliFlipped3 = /* @__PURE__ */ composeKleisliFlipped(/* @__PURE__ */ bindExceptT(monadIdentity));
  var map39 = /* @__PURE__ */ map(functorMaybe);
  var any4 = /* @__PURE__ */ any(foldableArray)(heytingAlgebraBoolean);
  var eq6 = /* @__PURE__ */ eq(eqString);
  var bindFlipped4 = /* @__PURE__ */ bindFlipped(bindMaybe);
  var map115 = /* @__PURE__ */ map(functorArray);
  var mapFlipped6 = /* @__PURE__ */ mapFlipped(functorAff);
  var $$try3 = /* @__PURE__ */ $$try(monadErrorAff);
  var pure111 = /* @__PURE__ */ pure(applicativeAff);
  var RequestContentError = /* @__PURE__ */ (function() {
    function RequestContentError2(value0) {
      this.value0 = value0;
    }
    ;
    RequestContentError2.create = function(value0) {
      return new RequestContentError2(value0);
    };
    return RequestContentError2;
  })();
  var ResponseBodyError = /* @__PURE__ */ (function() {
    function ResponseBodyError2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    ResponseBodyError2.create = function(value0) {
      return function(value1) {
        return new ResponseBodyError2(value0, value1);
      };
    };
    return ResponseBodyError2;
  })();
  var TimeoutError = /* @__PURE__ */ (function() {
    function TimeoutError2() {
    }
    ;
    TimeoutError2.value = new TimeoutError2();
    return TimeoutError2;
  })();
  var RequestFailedError = /* @__PURE__ */ (function() {
    function RequestFailedError2() {
    }
    ;
    RequestFailedError2.value = new RequestFailedError2();
    return RequestFailedError2;
  })();
  var XHROtherError = /* @__PURE__ */ (function() {
    function XHROtherError2(value0) {
      this.value0 = value0;
    }
    ;
    XHROtherError2.create = function(value0) {
      return new XHROtherError2(value0);
    };
    return XHROtherError2;
  })();
  var request = function(driver2) {
    return function(req2) {
      var parseJSON = function(v3) {
        if (v3 === "") {
          return pure33(jsonEmptyObject);
        }
        ;
        return either(function($74) {
          return fail2(ForeignError.create($74));
        })(pure33)(jsonParser(v3));
      };
      var fromResponse = (function() {
        if (req2.responseFormat instanceof $$ArrayBuffer) {
          return unsafeReadTagged2("ArrayBuffer");
        }
        ;
        if (req2.responseFormat instanceof Blob2) {
          return unsafeReadTagged2("Blob");
        }
        ;
        if (req2.responseFormat instanceof Document2) {
          return function(x7) {
            return alt8(unsafeReadTagged2("Document")(x7))(alt8(unsafeReadTagged2("XMLDocument")(x7))(unsafeReadTagged2("HTMLDocument")(x7)));
          };
        }
        ;
        if (req2.responseFormat instanceof Json2) {
          return composeKleisliFlipped3(function($75) {
            return req2.responseFormat.value0(parseJSON($75));
          })(unsafeReadTagged2("String"));
        }
        ;
        if (req2.responseFormat instanceof $$String2) {
          return unsafeReadTagged2("String");
        }
        ;
        if (req2.responseFormat instanceof Ignore) {
          return $$const(req2.responseFormat.value0(pure33(unit)));
        }
        ;
        throw new Error("Failed pattern match at Affjax (line 274, column 18 - line 283, column 57): " + [req2.responseFormat.constructor.name]);
      })();
      var extractContent = function(v3) {
        if (v3 instanceof ArrayView) {
          return new Right(v3.value0(unsafeToForeign));
        }
        ;
        if (v3 instanceof Blob) {
          return new Right(unsafeToForeign(v3.value0));
        }
        ;
        if (v3 instanceof Document) {
          return new Right(unsafeToForeign(v3.value0));
        }
        ;
        if (v3 instanceof $$String) {
          return new Right(unsafeToForeign(v3.value0));
        }
        ;
        if (v3 instanceof FormData) {
          return new Right(unsafeToForeign(v3.value0));
        }
        ;
        if (v3 instanceof FormURLEncoded) {
          return note("Body contains values that cannot be encoded as application/x-www-form-urlencoded")(map39(unsafeToForeign)(encode(v3.value0)));
        }
        ;
        if (v3 instanceof Json) {
          return new Right(unsafeToForeign(stringify(v3.value0)));
        }
        ;
        throw new Error("Failed pattern match at Affjax (line 235, column 20 - line 250, column 69): " + [v3.constructor.name]);
      };
      var addHeader = function(mh) {
        return function(hs) {
          if (mh instanceof Just && !any4(on(eq6)(name15)(mh.value0))(hs)) {
            return snoc(hs)(mh.value0);
          }
          ;
          return hs;
        };
      };
      var headers = function(reqContent) {
        return addHeader(map39(ContentType.create)(bindFlipped4(toMediaType)(reqContent)))(addHeader(map39(Accept.create)(toMediaType2(req2.responseFormat)))(req2.headers));
      };
      var ajaxRequest = function(v3) {
        return {
          method: print6(req2.method),
          url: req2.url,
          headers: map115(function(h7) {
            return {
              field: name15(h7),
              value: value13(h7)
            };
          })(headers(req2.content)),
          content: v3,
          responseType: toResponseType(req2.responseFormat),
          username: toNullable(req2.username),
          password: toNullable(req2.password),
          withCredentials: req2.withCredentials,
          timeout: fromMaybe(0)(map39(function(v1) {
            return v1;
          })(req2.timeout))
        };
      };
      var send = function(content6) {
        return mapFlipped6($$try3(fromEffectFnAff(_ajax(driver2, "AffjaxTimeoutErrorMessageIdent", "AffjaxRequestFailedMessageIdent", ResponseHeader.create, ajaxRequest(content6)))))(function(v3) {
          if (v3 instanceof Right) {
            var v1 = runExcept(fromResponse(v3.value0.body));
            if (v1 instanceof Left) {
              return new Left(new ResponseBodyError(head3(v1.value0), v3.value0));
            }
            ;
            if (v1 instanceof Right) {
              return new Right({
                headers: v3.value0.headers,
                status: v3.value0.status,
                statusText: v3.value0.statusText,
                body: v1.value0
              });
            }
            ;
            throw new Error("Failed pattern match at Affjax (line 209, column 9 - line 211, column 52): " + [v1.constructor.name]);
          }
          ;
          if (v3 instanceof Left) {
            return new Left((function() {
              var message2 = message(v3.value0);
              var $61 = message2 === "AffjaxTimeoutErrorMessageIdent";
              if ($61) {
                return TimeoutError.value;
              }
              ;
              var $62 = message2 === "AffjaxRequestFailedMessageIdent";
              if ($62) {
                return RequestFailedError.value;
              }
              ;
              return new XHROtherError(v3.value0);
            })());
          }
          ;
          throw new Error("Failed pattern match at Affjax (line 207, column 144 - line 219, column 28): " + [v3.constructor.name]);
        });
      };
      if (req2.content instanceof Nothing) {
        return send(toNullable(Nothing.value));
      }
      ;
      if (req2.content instanceof Just) {
        var v2 = extractContent(req2.content.value0);
        if (v2 instanceof Right) {
          return send(toNullable(new Just(v2.value0)));
        }
        ;
        if (v2 instanceof Left) {
          return pure111(new Left(new RequestContentError(v2.value0)));
        }
        ;
        throw new Error("Failed pattern match at Affjax (line 199, column 7 - line 203, column 48): " + [v2.constructor.name]);
      }
      ;
      throw new Error("Failed pattern match at Affjax (line 195, column 3 - line 203, column 48): " + [req2.content.constructor.name]);
    };
  };
  var printError = function(v2) {
    if (v2 instanceof RequestContentError) {
      return "There was a problem with the request content: " + v2.value0;
    }
    ;
    if (v2 instanceof ResponseBodyError) {
      return "There was a problem with the response body: " + renderForeignError(v2.value0);
    }
    ;
    if (v2 instanceof TimeoutError) {
      return "There was a problem making the request: timeout";
    }
    ;
    if (v2 instanceof RequestFailedError) {
      return "There was a problem making the request: request failed";
    }
    ;
    if (v2 instanceof XHROtherError) {
      return "There was a problem making the request: " + message(v2.value0);
    }
    ;
    throw new Error("Failed pattern match at Affjax (line 113, column 14 - line 123, column 66): " + [v2.constructor.name]);
  };
  var defaultRequest = /* @__PURE__ */ (function() {
    return {
      method: new Left(GET2.value),
      url: "/",
      headers: [],
      content: Nothing.value,
      username: Nothing.value,
      password: Nothing.value,
      withCredentials: false,
      responseFormat: ignore,
      timeout: Nothing.value
    };
  })();
  var get3 = function(driver2) {
    return function(rf) {
      return function(u2) {
        return request(driver2)({
          method: defaultRequest.method,
          headers: defaultRequest.headers,
          content: defaultRequest.content,
          username: defaultRequest.username,
          password: defaultRequest.password,
          withCredentials: defaultRequest.withCredentials,
          timeout: defaultRequest.timeout,
          url: u2,
          responseFormat: rf
        });
      };
    };
  };

  // output/Affjax.Web/foreign.js
  var driver = {
    newXHR: function() {
      return new XMLHttpRequest();
    },
    fixupUrl: function(url2) {
      return url2 || "/";
    }
  };

  // output/Affjax.Web/index.js
  var get4 = /* @__PURE__ */ get3(driver);

  // output/Hylograph.Shared.Data/index.js
  var fromFoldable110 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var map116 = /* @__PURE__ */ map(functorArray);
  var discard4 = /* @__PURE__ */ discard(discardUnit)(bindAff);
  var log7 = /* @__PURE__ */ log3(monadEffectAff);
  var bind23 = /* @__PURE__ */ bind(bindAff);
  var pure210 = /* @__PURE__ */ pure(applicativeAff);
  var EnergyCSV = /* @__PURE__ */ (function() {
    function EnergyCSV2() {
    }
    ;
    EnergyCSV2.value = new EnergyCSV2();
    return EnergyCSV2;
  })();
  var FlareJSON = /* @__PURE__ */ (function() {
    function FlareJSON2() {
    }
    ;
    FlareJSON2.value = new FlareJSON2();
    return FlareJSON2;
  })();
  var FlareImportsJSON = /* @__PURE__ */ (function() {
    function FlareImportsJSON2() {
    }
    ;
    FlareImportsJSON2.value = new FlareImportsJSON2();
    return FlareImportsJSON2;
  })();
  var MiserablesJSON = /* @__PURE__ */ (function() {
    function MiserablesJSON2() {
    }
    ;
    MiserablesJSON2.value = new MiserablesJSON2();
    return MiserablesJSON2;
  })();
  var NationsJSON = /* @__PURE__ */ (function() {
    function NationsJSON2() {
    }
    ;
    NationsJSON2.value = new NationsJSON2();
    return NationsJSON2;
  })();
  var MetroUnemploymentCSV = /* @__PURE__ */ (function() {
    function MetroUnemploymentCSV2() {
    }
    ;
    MetroUnemploymentCSV2.value = new MetroUnemploymentCSV2();
    return MetroUnemploymentCSV2;
  })();
  var USPopulationStateAgeCSV = /* @__PURE__ */ (function() {
    function USPopulationStateAgeCSV2() {
    }
    ;
    USPopulationStateAgeCSV2.value = new USPopulationStateAgeCSV2();
    return USPopulationStateAgeCSV2;
  })();
  var BridgesCSV = /* @__PURE__ */ (function() {
    function BridgesCSV2() {
    }
    ;
    BridgesCSV2.value = new BridgesCSV2();
    return BridgesCSV2;
  })();
  var getChildren = function($125) {
    return toMaybe(getChildren_($125));
  };
  var hierDataToTree = function(hierData) {
    var value18 = getValue(hierData);
    var name16 = getName(hierData);
    var childrenMaybe = getChildren(hierData);
    var childrenList = (function() {
      if (childrenMaybe instanceof Nothing) {
        return Nil.value;
      }
      ;
      if (childrenMaybe instanceof Just) {
        return fromFoldable110(map116(hierDataToTree)(childrenMaybe.value0));
      }
      ;
      throw new Error("Failed pattern match at Hylograph.Shared.Data (line 152, column 20 - line 154, column 76): " + [childrenMaybe.constructor.name]);
    })();
    return mkTree({
      name: name16,
      value: value18,
      x: 0,
      y: 0,
      depth: 0,
      height: 0
    })(childrenList);
  };
  var dataFilePath = function(v2) {
    if (v2 instanceof EnergyCSV) {
      return "./data/energy.csv";
    }
    ;
    if (v2 instanceof FlareJSON) {
      return "./assets/data/flare-2.json";
    }
    ;
    if (v2 instanceof FlareImportsJSON) {
      return "./data/flare-imports.json";
    }
    ;
    if (v2 instanceof MiserablesJSON) {
      return "./data/miserables.json";
    }
    ;
    if (v2 instanceof NationsJSON) {
      return "./data/nations.json";
    }
    ;
    if (v2 instanceof MetroUnemploymentCSV) {
      return "./assets/data/bls-metro-unemployment.csv";
    }
    ;
    if (v2 instanceof USPopulationStateAgeCSV) {
      return "./data/us-population-state-age.csv";
    }
    ;
    if (v2 instanceof BridgesCSV) {
      return "./data/bridges.csv";
    }
    ;
    throw new Error("Failed pattern match at Hylograph.Shared.Data (line 36, column 1 - line 36, column 35): " + [v2.constructor.name]);
  };
  var loadDataFile = function(dataFile) {
    var path8 = dataFilePath(dataFile);
    return discard4(log7("Loading data file: " + path8))(function() {
      return bind23(get4(string)(path8))(function(response) {
        if (response instanceof Left) {
          return discard4(log7("Failed to load " + (path8 + (": " + printError(response.value0)))))(function() {
            return pure210(new Left("Failed to load data file: " + printError(response.value0)));
          });
        }
        ;
        if (response instanceof Right) {
          return discard4(log7("Successfully loaded " + path8))(function() {
            return pure210(new Right(response.value0.body));
          });
        }
        ;
        throw new Error("Failed pattern match at Hylograph.Shared.Data (line 64, column 3 - line 70, column 24): " + [response.constructor.name]);
      });
    });
  };
  var loadFlareData = /* @__PURE__ */ (function() {
    return bind23(loadDataFile(FlareJSON.value))(function(result) {
      if (result instanceof Left) {
        return pure210(new Left(result.value0));
      }
      ;
      if (result instanceof Right) {
        var hierData = parseFlareJson(result.value0);
        var tree = hierDataToTree(hierData);
        return pure210(new Right(tree));
      }
      ;
      throw new Error("Failed pattern match at Hylograph.Shared.Data (line 162, column 3 - line 167, column 24): " + [result.constructor.name]);
    });
  })();

  // output/Hylograph.Shared.DataLoader/index.js
  var bind15 = /* @__PURE__ */ bind(bindAff);
  var pure34 = /* @__PURE__ */ pure(applicativeAff);
  var LocalOnly = /* @__PURE__ */ (function() {
    function LocalOnly2() {
    }
    ;
    LocalOnly2.value = new LocalOnly2();
    return LocalOnly2;
  })();
  var RemoteOnly = /* @__PURE__ */ (function() {
    function RemoteOnly2() {
    }
    ;
    RemoteOnly2.value = new RemoteOnly2();
    return RemoteOnly2;
  })();
  var LocalFirst = /* @__PURE__ */ (function() {
    function LocalFirst2() {
    }
    ;
    LocalFirst2.value = new LocalFirst2();
    return LocalFirst2;
  })();
  var RemoteFirst = /* @__PURE__ */ (function() {
    function RemoteFirst2() {
    }
    ;
    RemoteFirst2.value = new RemoteFirst2();
    return RemoteFirst2;
  })();
  var NetworkError = /* @__PURE__ */ (function() {
    function NetworkError2(value0) {
      this.value0 = value0;
    }
    ;
    NetworkError2.create = function(value0) {
      return new NetworkError2(value0);
    };
    return NetworkError2;
  })();
  var ConfigError = /* @__PURE__ */ (function() {
    function ConfigError2(value0) {
      this.value0 = value0;
    }
    ;
    ConfigError2.create = function(value0) {
      return new ConfigError2(value0);
    };
    return ConfigError2;
  })();
  var loadRemoteJSON = function(baseUrl) {
    return function(path8) {
      var fullUrl = baseUrl + ("/" + path8);
      return bind15(get4(json)(fullUrl))(function(result) {
        return pure34((function() {
          if (result instanceof Left) {
            return new Left(new NetworkError("Failed to load remote JSON from " + (fullUrl + (": " + printError(result.value0)))));
          }
          ;
          if (result instanceof Right) {
            return new Right(result.value0.body);
          }
          ;
          throw new Error("Failed pattern match at Hylograph.Shared.DataLoader (line 83, column 10 - line 87, column 26): " + [result.constructor.name]);
        })());
      });
    };
  };
  var loadLocalJSON = function(path8) {
    return bind15(get4(json)(path8))(function(result) {
      return pure34((function() {
        if (result instanceof Left) {
          return new Left(new NetworkError("Failed to load local JSON from " + (path8 + (": " + printError(result.value0)))));
        }
        ;
        if (result instanceof Right) {
          return new Right(result.value0.body);
        }
        ;
        throw new Error("Failed pattern match at Hylograph.Shared.DataLoader (line 72, column 10 - line 76, column 26): " + [result.constructor.name]);
      })());
    });
  };
  var loadJSON = function(config) {
    return function(path8) {
      if (config.strategy instanceof LocalOnly) {
        return loadLocalJSON(path8);
      }
      ;
      if (config.strategy instanceof RemoteOnly) {
        if (config.baseUrl instanceof Nothing) {
          return pure34(new Left(new ConfigError("RemoteOnly strategy requires baseUrl")));
        }
        ;
        if (config.baseUrl instanceof Just) {
          return loadRemoteJSON(config.baseUrl.value0)(path8);
        }
        ;
        throw new Error("Failed pattern match at Hylograph.Shared.DataLoader (line 95, column 17 - line 97, column 40): " + [config.baseUrl.constructor.name]);
      }
      ;
      if (config.strategy instanceof LocalFirst) {
        if (config.baseUrl instanceof Nothing) {
          return loadLocalJSON(path8);
        }
        ;
        if (config.baseUrl instanceof Just) {
          return bind15(loadLocalJSON(path8))(function(localResult) {
            if (localResult instanceof Right) {
              return pure34(new Right(localResult.value0));
            }
            ;
            if (localResult instanceof Left) {
              return loadRemoteJSON(config.baseUrl.value0)(path8);
            }
            ;
            throw new Error("Failed pattern match at Hylograph.Shared.DataLoader (line 103, column 7 - line 105, column 42): " + [localResult.constructor.name]);
          });
        }
        ;
        throw new Error("Failed pattern match at Hylograph.Shared.DataLoader (line 99, column 17 - line 105, column 42): " + [config.baseUrl.constructor.name]);
      }
      ;
      if (config.strategy instanceof RemoteFirst) {
        if (config.baseUrl instanceof Nothing) {
          return loadLocalJSON(path8);
        }
        ;
        if (config.baseUrl instanceof Just) {
          return bind15(loadRemoteJSON(config.baseUrl.value0)(path8))(function(remoteResult) {
            if (remoteResult instanceof Right) {
              return pure34(new Right(remoteResult.value0));
            }
            ;
            if (remoteResult instanceof Left) {
              return loadLocalJSON(path8);
            }
            ;
            throw new Error("Failed pattern match at Hylograph.Shared.DataLoader (line 111, column 7 - line 113, column 37): " + [remoteResult.constructor.name]);
          });
        }
        ;
        throw new Error("Failed pattern match at Hylograph.Shared.DataLoader (line 107, column 18 - line 113, column 37): " + [config.baseUrl.constructor.name]);
      }
      ;
      throw new Error("Failed pattern match at Hylograph.Shared.DataLoader (line 91, column 24 - line 113, column 37): " + [config.strategy.constructor.name]);
    };
  };
  var loadJSONWithFallback = function(config) {
    return function(path8) {
      return function(fallback) {
        return bind15(loadJSON(config)(path8))(function(result) {
          return pure34((function() {
            if (result instanceof Right) {
              return result.value0;
            }
            ;
            if (result instanceof Left) {
              return fallback;
            }
            ;
            throw new Error("Failed pattern match at Hylograph.Shared.DataLoader (line 120, column 10 - line 122, column 23): " + [result.constructor.name]);
          })());
        });
      };
    };
  };
  var defaultConfig4 = /* @__PURE__ */ (function() {
    return {
      strategy: LocalOnly.value,
      baseUrl: Nothing.value
    };
  })();
  var simpleLoadJSON = function(path8) {
    return loadJSONWithFallback(defaultConfig4)(path8)({
      name: "error",
      children: []
    });
  };

  // output/Hylograph.Shared.TourNav/index.js
  var show27 = /* @__PURE__ */ show(showRoute);
  var eq7 = /* @__PURE__ */ eq(eqRoute);
  var tourTitle = function(v2) {
    if (v2 instanceof TourIndex) {
      return "Tour";
    }
    ;
    if (v2 instanceof TourScrolly) {
      return "From the Basics";
    }
    ;
    if (v2 instanceof TourMotionScrollyHATS) {
      return "Motion & Animation";
    }
    ;
    if (v2 instanceof TourSimpsons) {
      return "Simpson's Paradox";
    }
    ;
    if (v2 instanceof ForcePlayground) {
      return "Force Explorer";
    }
    ;
    return show27(v2);
  };
  var renderBreadcrumb = function(currentRoute) {
    return nav([classes(["breadcrumb"]), attr4("aria-label")("Breadcrumb")])([ol([classes(["breadcrumb__list"])])([li([classes(["breadcrumb__item"])])([a([href4("#" + routeToPath(TourIndex.value)), classes(["breadcrumb__link"])])([text6("Tour")])]), li([classes(["breadcrumb__item", "breadcrumb__item--current"]), attr4("aria-current")("page")])([span4([classes(["breadcrumb__text"])])([text6(tourTitle(currentRoute))])])])]);
  };
  var allTourRoutes = /* @__PURE__ */ (function() {
    return [TourScrolly.value, TourMotionScrollyHATS.value, TourSimpsons.value, ForcePlayground.value];
  })();
  var getNextTour = function(currentRoute) {
    var v2 = findIndex(function(r8) {
      return eq7(r8)(currentRoute);
    })(allTourRoutes);
    if (v2 instanceof Nothing) {
      return Nothing.value;
    }
    ;
    if (v2 instanceof Just) {
      return index(allTourRoutes)(v2.value0 + 1 | 0);
    }
    ;
    throw new Error("Failed pattern match at Hylograph.Shared.TourNav (line 42, column 3 - line 44, column 49): " + [v2.constructor.name]);
  };
  var getPrevTour = function(currentRoute) {
    var v2 = findIndex(function(r8) {
      return eq7(r8)(currentRoute);
    })(allTourRoutes);
    if (v2 instanceof Nothing) {
      return Nothing.value;
    }
    ;
    if (v2 instanceof Just) {
      var $13 = v2.value0 > 0;
      if ($13) {
        return index(allTourRoutes)(v2.value0 - 1 | 0);
      }
      ;
      return Nothing.value;
    }
    ;
    throw new Error("Failed pattern match at Hylograph.Shared.TourNav (line 49, column 3 - line 51, column 78): " + [v2.constructor.name]);
  };
  var renderHeader = function(currentRoute) {
    return div_([render2({
      logoSize: Normal.value,
      quadrant: NoQuadrant.value,
      prevNext: new Just({
        prev: getPrevTour(currentRoute),
        next: getNextTour(currentRoute)
      }),
      pageTitle: Nothing.value
    }), renderBreadcrumb(currentRoute)]);
  };

  // output/Web.Intersection.Observer/foreign.js
  var _newIntersectionObserver = (callback) => (options3) => () => {
    const uncurried = (a3, o) => {
      callback(a3)(o)();
    };
    return new IntersectionObserver(uncurried, options3);
  };
  var observe = (intersectionObserver) => (element4) => () => {
    intersectionObserver.observe(element4);
  };
  var unobserve = (intersectionObserver) => (element4) => () => {
    intersectionObserver.unobserve(element4);
  };

  // output/Web.Intersection.Observer/index.js
  var newIntersectionObserver = function(c2) {
    return function(o) {
      return _newIntersectionObserver(c2)(options2(o));
    };
  };

  // output/Web.Intersection.Observer.Options/index.js
  var threshold = /* @__PURE__ */ opt("threshold");
  var root2 = /* @__PURE__ */ opt("root");

  // output/Component.Tour.TourMotionScrollyHATS/index.js
  var $runtime_lazy9 = function(name16, moduleName, init3) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init3();
      state3 = 2;
      return val;
    };
  };
  var show28 = /* @__PURE__ */ show(showInt);
  var map40 = /* @__PURE__ */ map(functorArray);
  var sequence2 = /* @__PURE__ */ sequence(traversableArray)(applicativeEffect);
  var mapFlipped7 = /* @__PURE__ */ mapFlipped(functorArray);
  var pure35 = /* @__PURE__ */ pure(applicativeEffect);
  var bind16 = /* @__PURE__ */ bind(bindHalogenM);
  var forever2 = /* @__PURE__ */ forever(monadRecHalogenM);
  var discard5 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var modify_4 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var pure112 = /* @__PURE__ */ pure(applicativeHalogenM);
  var get5 = /* @__PURE__ */ get(monadStateHalogenM);
  var map117 = /* @__PURE__ */ map(functorMaybe);
  var bind24 = /* @__PURE__ */ bind(bindMaybe);
  var append18 = /* @__PURE__ */ append(semigroupOptions);
  var traverse_6 = /* @__PURE__ */ traverse_(applicativeEffect)(foldableArray);
  var $$void13 = /* @__PURE__ */ $$void(functorHalogenM);
  var when9 = /* @__PURE__ */ when(applicativeHalogenM);
  var Initialize14 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var Finalize3 = /* @__PURE__ */ (function() {
    function Finalize5() {
    }
    ;
    Finalize5.value = new Finalize5();
    return Finalize5;
  })();
  var StepBecameVisible = /* @__PURE__ */ (function() {
    function StepBecameVisible3(value0) {
      this.value0 = value0;
    }
    ;
    StepBecameVisible3.create = function(value0) {
      return new StepBecameVisible3(value0);
    };
    return StepBecameVisible3;
  })();
  var MarkReady = /* @__PURE__ */ (function() {
    function MarkReady3() {
    }
    ;
    MarkReady3.value = new MarkReady3();
    return MarkReady3;
  })();
  var Step1Tick = /* @__PURE__ */ (function() {
    function Step1Tick2(value0) {
      this.value0 = value0;
    }
    ;
    Step1Tick2.create = function(value0) {
      return new Step1Tick2(value0);
    };
    return Step1Tick2;
  })();
  var Step2Tick = /* @__PURE__ */ (function() {
    function Step2Tick2(value0) {
      this.value0 = value0;
    }
    ;
    Step2Tick2.create = function(value0) {
      return new Step2Tick2(value0);
    };
    return Step2Tick2;
  })();
  var Step3Tick = /* @__PURE__ */ (function() {
    function Step3Tick2(value0) {
      this.value0 = value0;
    }
    ;
    Step3Tick2.create = function(value0) {
      return new Step3Tick2(value0);
    };
    return Step3Tick2;
  })();
  var Step4Tick = /* @__PURE__ */ (function() {
    function Step4Tick2(value0) {
      this.value0 = value0;
    }
    ;
    Step4Tick2.create = function(value0) {
      return new Step4Tick2(value0);
    };
    return Step4Tick2;
  })();
  var Step5Tick = /* @__PURE__ */ (function() {
    function Step5Tick2() {
    }
    ;
    Step5Tick2.value = new Step5Tick2();
    return Step5Tick2;
  })();
  var Step6Tick = /* @__PURE__ */ (function() {
    function Step6Tick2() {
    }
    ;
    Step6Tick2.value = new Step6Tick2();
    return Step6Tick2;
  })();
  var Step8Tick = /* @__PURE__ */ (function() {
    function Step8Tick2() {
    }
    ;
    Step8Tick2.value = new Step8Tick2();
    return Step8Tick2;
  })();
  var TransitionTick = /* @__PURE__ */ (function() {
    function TransitionTick2(value0) {
      this.value0 = value0;
    }
    ;
    TransitionTick2.create = function(value0) {
      return new TransitionTick2(value0);
    };
    return TransitionTick2;
  })();
  var vizContainerSelector = "#motion-viz-container";
  var step9_lesMis = {
    id: 9,
    title: "Networks",
    narrative: ["And when data forms a network of relationships...", "This is Les Mis\xE9rables - 77 characters, 254 connections."],
    code: "simulation\n  [ forceLink links\n  , forceManyBody\n  , forceCenter (w/2) (h/2)\n  ]"
  };
  var step8_treeDendrogram = {
    id: 8,
    title: "Tree \u2194 Dendrogram",
    narrative: ["A hierarchical tree morphs into a dendrogram layout.", "Every node maintains its identity while flowing to new positions."],
    code: "-- Layout algorithms:\ntreeWithSorting config dataTree\ncluster config dataTree\n\n-- Same nodes, different positions"
  };
  var step7_transition = {
    id: 7,
    title: "Beyond Simple Shapes",
    narrative: ["But it's not just simple shapes that can dance.", "The same principles apply to complex structures too."],
    code: "-- The same patterns scale up:\n-- \u2022 Data binding\n-- \u2022 Enter/Update/Exit\n-- \u2022 Smooth transitions\n-- \u2022 Staggered timing"
  };
  var step6_gupLetters = {
    id: 6,
    title: "Letters Dance",
    narrative: ["The same pattern, different data. Letters shuffle and rearrange.", "Green letters drop in. Red letters fall away. Dark letters slide."],
    code: 'forEachWithGUP "letters" letters _.letter\n  (\\\\d -> elem Text\n    [ x $ letterXExpr\n    , y $ num 150.0\n    , textContent $ text d.letter\n    ])\n  gupSpec'
  };
  var step5_gupCircles = {
    id: 5,
    title: "The General Update Pattern",
    narrative: ["Data changes. Some circles appear, some disappear, some remain.", "Green circles enter. Brown circles exit. Gray circles stay."],
    code: 'forEachWithGUP "circles" data keyFn\n  template\n  { enter: Just enterSpec\n  , update: Just updateSpec\n  , exit: Just exitSpec\n  }'
  };
  var step4_staggered = {
    id: 4,
    title: "Staggered Motion",
    narrative: ["Now each circle waits its turn. A small delay creates a wave effect.", "Staggering transforms mechanical motion into something organic."],
    code: "withTransitionStaggered config\n  (staggerByIndex 80.0)\n  selection\n  [ cy $ num targetY ]"
  };
  var step3_manyCircles = {
    id: 3,
    title: "Many Circles",
    narrative: ["More data means more circles. They all move together, in lockstep.", "When every element animates identically, the motion feels mechanical."],
    code: 'joinData "circles" "circle" data\n  (\\\\d -> elem Circle\n    [ cx $ num d.x\n    , cy $ num 150.0\n    , r $ num 25.0\n    ])'
  };
  var step2_circleMove = {
    id: 2,
    title: "Motion",
    narrative: ["Now the circle moves. From here to there, and back again.", "This is the fundamental unit of animation: an attribute changing over time."],
    code: "withTransition config selection\n  [ cx $ num targetX ]\n\n-- config:\ntransitionWith\n  { duration: 1200ms\n  , easing: CubicInOut\n  }"
  };
  var step1_oneCircle = {
    id: 1,
    title: "A Circle",
    narrative: ["Here is a circle. The simplest possible element.", "Watch it breathe - fading in and out. Even this minimal animation creates a sense of life."],
    code: 'elem Circle\n  [ cx $ num 100.0\n  , cy $ num 150.0\n  , r $ num 30.0\n  , fill $ text "steelblue"\n  , opacity $ num 1.0\n  ]'
  };
  var tourSteps = [step1_oneCircle, step2_circleMove, step3_manyCircles, step4_staggered, step5_gupCircles, step6_gupLetters, step7_transition, step8_treeDendrogram, step9_lesMis];
  var renderStep = function(_idx) {
    return function(step5) {
      return div4([class_2("motion-step"), attr4("data-step")(show28(step5.id))])([div4([class_2("motion-step-content")])([h3_([text6(step5.title)]), div4([class_2("motion-step-narrative")])(map40(function(p2) {
        return p_([text6(p2)]);
      })(step5.narrative))]), pre([class_2("motion-step-code")])([code_([text6(step5.code)])])]);
    };
  };
  var render16 = function(_state) {
    return div_([renderHeader(TourMotionScrollyHATS.value), div4([class_2("motion-tour-container")])([div4([class_2("motion-viz-panel")])([div4([id2("motion-viz-container"), class_2("motion-viz-content")])([])]), div4([class_2("motion-scroll-panel")])(mapWithIndex2(renderStep)(tourSteps))])]);
  };
  var randomSubset = function(n) {
    return function __do7() {
      var results = sequence2(mapFlipped7(range2(0)(n - 1 | 0))(function(i2) {
        return function __do8() {
          var r8 = random();
          var $82 = r8 > 0.4;
          if ($82) {
            return new Just(i2);
          }
          ;
          return Nothing.value;
        };
      }))();
      return catMaybes(results);
    };
  };
  var getRandomLetters = /* @__PURE__ */ (function() {
    var coinToss = function(c2) {
      return function __do7() {
        var n = random();
        var $83 = n > 0.6;
        if ($83) {
          return new Just(c2);
        }
        ;
        return Nothing.value;
      };
    };
    var alphabet = toCharArray("ABCDEFGHIJKLMNOPQRSTUVWXYZ");
    return function __do7() {
      var choices = sequence2(map40(coinToss)(alphabet))();
      return fromCharArray(catMaybes(choices));
    };
  })();
  var startAnimationForStep = function(dictMonadAff) {
    var liftAff3 = liftAff(monadAffHalogenM(dictMonadAff));
    return function(stepId) {
      if (stepId === 1) {
        return bind16(fork(forever2(discard5(liftAff3(delay(1200)))(function() {
          return discard5(handleAction13(dictMonadAff)(new Step1Tick(true)))(function() {
            return discard5(liftAff3(delay(1200)))(function() {
              return handleAction13(dictMonadAff)(new Step1Tick(false));
            });
          });
        }))))(function(forkId) {
          return modify_4(function(s2) {
            var $85 = {};
            for (var $86 in s2) {
              if ({}.hasOwnProperty.call(s2, $86)) {
                $85[$86] = s2[$86];
              }
              ;
            }
            ;
            $85.animationFiber = new Just(forkId);
            return $85;
          });
        });
      }
      ;
      if (stepId === 2) {
        return bind16(fork(forever2(discard5(handleAction13(dictMonadAff)(new Step2Tick(true)))(function() {
          return discard5(liftAff3(delay(1500)))(function() {
            return discard5(handleAction13(dictMonadAff)(new Step2Tick(false)))(function() {
              return liftAff3(delay(1500));
            });
          });
        }))))(function(forkId) {
          return modify_4(function(s2) {
            var $88 = {};
            for (var $89 in s2) {
              if ({}.hasOwnProperty.call(s2, $89)) {
                $88[$89] = s2[$89];
              }
              ;
            }
            ;
            $88.animationFiber = new Just(forkId);
            return $88;
          });
        });
      }
      ;
      if (stepId === 3) {
        return bind16(fork(forever2(discard5(handleAction13(dictMonadAff)(new Step3Tick(true)))(function() {
          return discard5(liftAff3(delay(1e3)))(function() {
            return discard5(handleAction13(dictMonadAff)(new Step3Tick(false)))(function() {
              return liftAff3(delay(1e3));
            });
          });
        }))))(function(forkId) {
          return modify_4(function(s2) {
            var $91 = {};
            for (var $92 in s2) {
              if ({}.hasOwnProperty.call(s2, $92)) {
                $91[$92] = s2[$92];
              }
              ;
            }
            ;
            $91.animationFiber = new Just(forkId);
            return $91;
          });
        });
      }
      ;
      if (stepId === 4) {
        return bind16(fork(forever2(discard5(handleAction13(dictMonadAff)(new Step4Tick(true)))(function() {
          return discard5(liftAff3(delay(1200)))(function() {
            return discard5(handleAction13(dictMonadAff)(new Step4Tick(false)))(function() {
              return liftAff3(delay(1200));
            });
          });
        }))))(function(forkId) {
          return modify_4(function(s2) {
            var $94 = {};
            for (var $95 in s2) {
              if ({}.hasOwnProperty.call(s2, $95)) {
                $94[$95] = s2[$95];
              }
              ;
            }
            ;
            $94.animationFiber = new Just(forkId);
            return $94;
          });
        });
      }
      ;
      if (stepId === 5) {
        return bind16(fork(discard5(liftAff3(delay(1800)))(function() {
          return forever2(discard5(handleAction13(dictMonadAff)(Step5Tick.value))(function() {
            return liftAff3(delay(1500));
          }));
        })))(function(forkId) {
          return modify_4(function(s2) {
            var $97 = {};
            for (var $98 in s2) {
              if ({}.hasOwnProperty.call(s2, $98)) {
                $97[$98] = s2[$98];
              }
              ;
            }
            ;
            $97.animationFiber = new Just(forkId);
            return $97;
          });
        });
      }
      ;
      if (stepId === 6) {
        return bind16(fork(discard5(liftAff3(delay(2e3)))(function() {
          return forever2(discard5(handleAction13(dictMonadAff)(Step6Tick.value))(function() {
            return liftAff3(delay(2e3));
          }));
        })))(function(forkId) {
          return modify_4(function(s2) {
            var $100 = {};
            for (var $101 in s2) {
              if ({}.hasOwnProperty.call(s2, $101)) {
                $100[$101] = s2[$101];
              }
              ;
            }
            ;
            $100.animationFiber = new Just(forkId);
            return $100;
          });
        });
      }
      ;
      if (stepId === 7) {
        return pure112(unit);
      }
      ;
      if (stepId === 8) {
        return bind16(fork(forever2(discard5(liftAff3(delay(2500)))(function() {
          return handleAction13(dictMonadAff)(Step8Tick.value);
        }))))(function(forkId) {
          return modify_4(function(s2) {
            var $103 = {};
            for (var $104 in s2) {
              if ({}.hasOwnProperty.call(s2, $104)) {
                $103[$104] = s2[$104];
              }
              ;
            }
            ;
            $103.animationFiber = new Just(forkId);
            return $103;
          });
        });
      }
      ;
      if (stepId === 9) {
        return pure112(unit);
      }
      ;
      return pure112(unit);
    };
  };
  var rerenderWithTick = function(dictMonadAff) {
    var liftAff3 = liftAff(monadAffHalogenM(dictMonadAff));
    var liftEffect11 = liftEffect(monadEffectHalogenM(dictMonadAff.MonadEffect0()));
    return function(selector) {
      return function(tree) {
        var $lazy_tickLoop = $runtime_lazy9("tickLoop", "Component.Tour.TourMotionScrollyHATS", function() {
          return discard5(liftAff3(delay(16)))(function() {
            return discard5(handleAction13(dictMonadAff)(new TransitionTick(16)))(function() {
              return bind16(get5)(function(st) {
                if (st.transitions instanceof Just) {
                  return $lazy_tickLoop(559);
                }
                ;
                if (st.transitions instanceof Nothing) {
                  return pure112(unit);
                }
                ;
                throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 558, column 5 - line 560, column 27): " + [st.transitions.constructor.name]);
              });
            });
          });
        });
        var tickLoop = $lazy_tickLoop(553);
        return bind16(get5)(function(st) {
          return discard5((function() {
            if (st.transitionFiber instanceof Just) {
              return kill(st.transitionFiber.value0);
            }
            ;
            if (st.transitionFiber instanceof Nothing) {
              return pure112(unit);
            }
            ;
            throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 537, column 3 - line 539, column 25): " + [st.transitionFiber.constructor.name]);
          })())(function() {
            return bind16(liftEffect11(rerender(selector)(tree)))(function(result) {
              if (result.transitions instanceof Nothing) {
                return modify_4(function(s2) {
                  var $111 = {};
                  for (var $112 in s2) {
                    if ({}.hasOwnProperty.call(s2, $112)) {
                      $111[$112] = s2[$112];
                    }
                    ;
                  }
                  ;
                  $111.transitions = Nothing.value;
                  $111.transitionFiber = Nothing.value;
                  return $111;
                });
              }
              ;
              if (result.transitions instanceof Just) {
                return discard5(modify_4(function(s2) {
                  var $114 = {};
                  for (var $115 in s2) {
                    if ({}.hasOwnProperty.call(s2, $115)) {
                      $114[$115] = s2[$115];
                    }
                    ;
                  }
                  ;
                  $114.transitions = new Just(result.transitions.value0);
                  return $114;
                }))(function() {
                  return bind16(fork(tickLoop))(function(forkId) {
                    return modify_4(function(s2) {
                      var $117 = {};
                      for (var $118 in s2) {
                        if ({}.hasOwnProperty.call(s2, $118)) {
                          $117[$118] = s2[$118];
                        }
                        ;
                      }
                      ;
                      $117.transitionFiber = new Just(forkId);
                      return $117;
                    });
                  });
                });
              }
              ;
              throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 543, column 3 - line 551, column 58): " + [result.transitions.constructor.name]);
            });
          });
        });
      };
    };
  };
  var handleAction13 = function(dictMonadAff) {
    var liftAff3 = liftAff(monadAffHalogenM(dictMonadAff));
    var liftEffect11 = liftEffect(monadEffectHalogenM(dictMonadAff.MonadEffect0()));
    return function(v2) {
      if (v2 instanceof Initialize14) {
        return discard5(liftAff3(delay(100)))(function() {
          return bind16(get5)(function(state3) {
            var tree = buildStep1Tree({
              id: 0,
              x: state3.circleX,
              y: state3.circleY,
              opacity: state3.circleOpacity
            });
            return discard5(liftEffect11(renderViz(vizContainerSelector)(tree)))(function() {
              return discard5(liftEffect11(scrollToStep(1)))(function() {
                return discard5(startAnimationForStep(dictMonadAff)(1))(function() {
                  return bind16(liftEffect11(create8))(function(v1) {
                    return bind16(liftEffect11(function __do7() {
                      var win = windowImpl();
                      var doc = document2(win)();
                      var parentNode3 = toParentNode3(doc);
                      return querySelector(".motion-scroll-panel")(parentNode3)();
                    }))(function(maybeScrollContainer) {
                      return discard5((function() {
                        if (maybeScrollContainer instanceof Nothing) {
                          return pure112(unit);
                        }
                        ;
                        if (maybeScrollContainer instanceof Just) {
                          var callback = function(entries) {
                            return function(v22) {
                              var bestEntry = foldl2(function(acc) {
                                return function(entry) {
                                  var $124 = entry.isIntersecting && entry.intersectionRatio > fromMaybe(0)(map117(function(v3) {
                                    return v3.intersectionRatio;
                                  })(acc));
                                  if ($124) {
                                    return new Just(entry);
                                  }
                                  ;
                                  return acc;
                                };
                              })(Nothing.value)(entries);
                              if (bestEntry instanceof Nothing) {
                                return pure35(unit);
                              }
                              ;
                              if (bestEntry instanceof Just) {
                                return function __do7() {
                                  var maybeStepStr = getAttribute2("data-step")(bestEntry.value0.target)();
                                  var v3 = bind24(maybeStepStr)(fromString2);
                                  if (v3 instanceof Nothing) {
                                    return unit;
                                  }
                                  ;
                                  if (v3 instanceof Just) {
                                    return notify(v1.listener)(new StepBecameVisible(v3.value0))();
                                  }
                                  ;
                                  throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 335, column 19 - line 337, column 81): " + [v3.constructor.name]);
                                };
                              }
                              ;
                              throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 331, column 15 - line 337, column 81): " + [bestEntry.constructor.name]);
                            };
                          };
                          return bind16(liftEffect11(newIntersectionObserver(callback)(append18(assoc(root2)(maybeScrollContainer.value0))(assoc(threshold)(0.6)))))(function(observer) {
                            return discard5(liftEffect11(function __do7() {
                              var win = windowImpl();
                              var doc = document2(win)();
                              var parentNode3 = toParentNode3(doc);
                              return traverse_6(function(i2) {
                                return function __do8() {
                                  var maybeMarker = querySelector('[data-step="' + (show28(i2) + '"]'))(parentNode3)();
                                  if (maybeMarker instanceof Just) {
                                    return observe(observer)(maybeMarker.value0)();
                                  }
                                  ;
                                  if (maybeMarker instanceof Nothing) {
                                    return unit;
                                  }
                                  ;
                                  throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 348, column 13 - line 350, column 35): " + [maybeMarker.constructor.name]);
                                };
                              })(range2(1)(length(tourSteps)))();
                            }))(function() {
                              return discard5(modify_4(function(s2) {
                                var $131 = {};
                                for (var $132 in s2) {
                                  if ({}.hasOwnProperty.call(s2, $132)) {
                                    $131[$132] = s2[$132];
                                  }
                                  ;
                                }
                                ;
                                $131.observer = new Just(observer);
                                return $131;
                              }))(function() {
                                return $$void13(subscribe3(v1.emitter));
                              });
                            });
                          });
                        }
                        ;
                        throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 321, column 5 - line 354, column 35): " + [maybeScrollContainer.constructor.name]);
                      })())(function() {
                        return discard5(liftAff3(delay(300)))(function() {
                          return handleAction13(dictMonadAff)(MarkReady.value);
                        });
                      });
                    });
                  });
                });
              });
            });
          });
        });
      }
      ;
      if (v2 instanceof MarkReady) {
        return modify_4(function(s2) {
          var $137 = {};
          for (var $138 in s2) {
            if ({}.hasOwnProperty.call(s2, $138)) {
              $137[$138] = s2[$138];
            }
            ;
          }
          ;
          $137.isReady = true;
          return $137;
        });
      }
      ;
      if (v2 instanceof Finalize3) {
        return bind16(get5)(function(state3) {
          return discard5((function() {
            if (state3.animationFiber instanceof Just) {
              return kill(state3.animationFiber.value0);
            }
            ;
            if (state3.animationFiber instanceof Nothing) {
              return pure112(unit);
            }
            ;
            throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 364, column 5 - line 366, column 27): " + [state3.animationFiber.constructor.name]);
          })())(function() {
            return discard5((function() {
              if (state3.transitionFiber instanceof Just) {
                return kill(state3.transitionFiber.value0);
              }
              ;
              if (state3.transitionFiber instanceof Nothing) {
                return pure112(unit);
              }
              ;
              throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 367, column 5 - line 369, column 27): " + [state3.transitionFiber.constructor.name]);
            })())(function() {
              if (state3.lesMisCleanup instanceof Just) {
                return liftEffect11(state3.lesMisCleanup.value0);
              }
              ;
              if (state3.lesMisCleanup instanceof Nothing) {
                return pure112(unit);
              }
              ;
              throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 370, column 5 - line 372, column 27): " + [state3.lesMisCleanup.constructor.name]);
            });
          });
        });
      }
      ;
      if (v2 instanceof StepBecameVisible) {
        return bind16(get5)(function(state3) {
          return when9(state3.isReady)(when9(v2.value0 !== state3.currentStep)(discard5((function() {
            if (state3.animationFiber instanceof Just) {
              return kill(state3.animationFiber.value0);
            }
            ;
            if (state3.animationFiber instanceof Nothing) {
              return pure112(unit);
            }
            ;
            throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 378, column 9 - line 380, column 31): " + [state3.animationFiber.constructor.name]);
          })())(function() {
            return discard5(modify_4(function(s2) {
              var $148 = {};
              for (var $149 in s2) {
                if ({}.hasOwnProperty.call(s2, $149)) {
                  $148[$149] = s2[$149];
                }
                ;
              }
              ;
              $148.animationFiber = Nothing.value;
              return $148;
            }))(function() {
              return discard5((function() {
                if (state3.lesMisCleanup instanceof Just) {
                  return discard5(liftEffect11(state3.lesMisCleanup.value0))(function() {
                    return modify_4(function(s2) {
                      var $152 = {};
                      for (var $153 in s2) {
                        if ({}.hasOwnProperty.call(s2, $153)) {
                          $152[$153] = s2[$153];
                        }
                        ;
                      }
                      ;
                      $152.lesMisCleanup = Nothing.value;
                      return $152;
                    });
                  });
                }
                ;
                if (state3.lesMisCleanup instanceof Nothing) {
                  return pure112(unit);
                }
                ;
                throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 383, column 9 - line 387, column 31): " + [state3.lesMisCleanup.constructor.name]);
              })())(function() {
                return discard5((function() {
                  if (state3.transitionFiber instanceof Just) {
                    return kill(state3.transitionFiber.value0);
                  }
                  ;
                  if (state3.transitionFiber instanceof Nothing) {
                    return pure112(unit);
                  }
                  ;
                  throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 390, column 9 - line 392, column 31): " + [state3.transitionFiber.constructor.name]);
                })())(function() {
                  return discard5(modify_4(function(s2) {
                    var $158 = {};
                    for (var $159 in s2) {
                      if ({}.hasOwnProperty.call(s2, $159)) {
                        $158[$159] = s2[$159];
                      }
                      ;
                    }
                    ;
                    $158.transitions = Nothing.value;
                    $158.transitionFiber = Nothing.value;
                    return $158;
                  }))(function() {
                    return discard5(liftEffect11(clearViz(vizContainerSelector)))(function() {
                      return discard5((function() {
                        if (v2.value0 === 1) {
                          return discard5(modify_4(function(s2) {
                            var $162 = {};
                            for (var $163 in s2) {
                              if ({}.hasOwnProperty.call(s2, $163)) {
                                $162[$163] = s2[$163];
                              }
                              ;
                            }
                            ;
                            $162.circleX = leftX;
                            $162.circleY = centerY;
                            $162.circleOpacity = 1;
                            return $162;
                          }))(function() {
                            return bind16(get5)(function(st$prime) {
                              var tree = buildStep1Tree({
                                id: 0,
                                x: st$prime.circleX,
                                y: st$prime.circleY,
                                opacity: st$prime.circleOpacity
                              });
                              return rerenderWithTick(dictMonadAff)(vizContainerSelector)(tree);
                            });
                          });
                        }
                        ;
                        if (v2.value0 === 2) {
                          return discard5(modify_4(function(s2) {
                            var $165 = {};
                            for (var $166 in s2) {
                              if ({}.hasOwnProperty.call(s2, $166)) {
                                $165[$166] = s2[$166];
                              }
                              ;
                            }
                            ;
                            $165.circleX = leftX;
                            $165.circleY = centerY;
                            $165.circleOpacity = 1;
                            return $165;
                          }))(function() {
                            return bind16(get5)(function(st$prime) {
                              var tree = buildStep2Tree({
                                id: 0,
                                x: st$prime.circleX,
                                y: st$prime.circleY,
                                opacity: st$prime.circleOpacity
                              });
                              return rerenderWithTick(dictMonadAff)(vizContainerSelector)(tree);
                            });
                          });
                        }
                        ;
                        if (v2.value0 === 3) {
                          var circles = makeMultiCircleData(6);
                          return discard5(modify_4(function(s2) {
                            var $168 = {};
                            for (var $169 in s2) {
                              if ({}.hasOwnProperty.call(s2, $169)) {
                                $168[$169] = s2[$169];
                              }
                              ;
                            }
                            ;
                            $168.multiCircles = circles;
                            $168.multiTargetY = centerY;
                            return $168;
                          }))(function() {
                            return bind16(get5)(function(st$prime) {
                              var tree = buildStep3Tree(st$prime.multiCircles)(st$prime.multiTargetY);
                              return rerenderWithTick(dictMonadAff)(vizContainerSelector)(tree);
                            });
                          });
                        }
                        ;
                        if (v2.value0 === 4) {
                          return bind16(get5)(function(st$prime) {
                            var tree = buildStep4Tree(st$prime.multiCircles)(st$prime.multiTargetY);
                            return rerenderWithTick(dictMonadAff)(vizContainerSelector)(tree);
                          });
                        }
                        ;
                        if (v2.value0 === 5) {
                          return discard5(modify_4(function(s2) {
                            var $171 = {};
                            for (var $172 in s2) {
                              if ({}.hasOwnProperty.call(s2, $172)) {
                                $171[$172] = s2[$172];
                              }
                              ;
                            }
                            ;
                            $171.gupVisibleIds = [0, 1, 2, 3, 4, 5, 6];
                            return $171;
                          }))(function() {
                            return bind16(get5)(function(st$prime) {
                              var tree = buildStep5Tree(st$prime.gupVisibleIds);
                              return rerenderWithTick(dictMonadAff)(vizContainerSelector)(tree);
                            });
                          });
                        }
                        ;
                        if (v2.value0 === 6) {
                          return discard5(modify_4(function(s2) {
                            var $174 = {};
                            for (var $175 in s2) {
                              if ({}.hasOwnProperty.call(s2, $175)) {
                                $174[$175] = s2[$175];
                              }
                              ;
                            }
                            ;
                            $174.gupLetters = "ABCDEFG";
                            return $174;
                          }))(function() {
                            return bind16(get5)(function(st$prime) {
                              var tree = buildStep6Tree(st$prime.gupLetters);
                              return rerenderWithTick(dictMonadAff)(vizContainerSelector)(tree);
                            });
                          });
                        }
                        ;
                        if (v2.value0 === 7) {
                          return liftEffect11(clearViz(vizContainerSelector));
                        }
                        ;
                        if (v2.value0 === 8) {
                          return discard5(liftEffect11(clearViz(vizContainerSelector)))(function() {
                            return bind16(liftAff3(loadFlareData))(function(result) {
                              if (result instanceof Left) {
                                return pure112(unit);
                              }
                              ;
                              if (result instanceof Right) {
                                return bind16(liftEffect11(draw(result.value0)(vizContainerSelector)(TreeLayout.value)))(function(vizState) {
                                  return modify_4(function(s2) {
                                    var $179 = {};
                                    for (var $180 in s2) {
                                      if ({}.hasOwnProperty.call(s2, $180)) {
                                        $179[$180] = s2[$180];
                                      }
                                      ;
                                    }
                                    ;
                                    $179.treeVizState = new Just(vizState);
                                    $179.currentLayout = TreeLayout.value;
                                    return $179;
                                  });
                                });
                              }
                              ;
                              throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 442, column 13 - line 447, column 107): " + [result.constructor.name]);
                            });
                          });
                        }
                        ;
                        if (v2.value0 === 9) {
                          return discard5(liftEffect11(clearViz(vizContainerSelector)))(function() {
                            return bind16(liftAff3(simpleLoadJSON("./assets/data/miserables.json")))(function(rawJson) {
                              var model = processRawModel(rawJson);
                              return bind16(liftEffect11(startLesMis(model)(vizContainerSelector)))(function(cleanup) {
                                return modify_4(function(s2) {
                                  var $183 = {};
                                  for (var $184 in s2) {
                                    if ({}.hasOwnProperty.call(s2, $184)) {
                                      $183[$184] = s2[$184];
                                    }
                                    ;
                                  }
                                  ;
                                  $183.lesMisCleanup = new Just(cleanup);
                                  return $183;
                                });
                              });
                            });
                          });
                        }
                        ;
                        return pure112(unit);
                      })())(function() {
                        return discard5(startAnimationForStep(dictMonadAff)(v2.value0))(function() {
                          return modify_4(function(s2) {
                            var $186 = {};
                            for (var $187 in s2) {
                              if ({}.hasOwnProperty.call(s2, $187)) {
                                $186[$187] = s2[$187];
                              }
                              ;
                            }
                            ;
                            $186.currentStep = v2.value0;
                            return $186;
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          })));
        });
      }
      ;
      if (v2 instanceof Step1Tick) {
        var targetOpacity = (function() {
          if (v2.value0) {
            return 0.3;
          }
          ;
          return 1;
        })();
        return discard5(modify_4(function(s2) {
          var $191 = {};
          for (var $192 in s2) {
            if ({}.hasOwnProperty.call(s2, $192)) {
              $191[$192] = s2[$192];
            }
            ;
          }
          ;
          $191.circleOpacity = targetOpacity;
          return $191;
        }))(function() {
          return bind16(get5)(function(st) {
            var tree = buildStep1Tree({
              id: 0,
              x: st.circleX,
              y: st.circleY,
              opacity: st.circleOpacity
            });
            return rerenderWithTick(dictMonadAff)(vizContainerSelector)(tree);
          });
        });
      }
      ;
      if (v2 instanceof Step2Tick) {
        var targetX = (function() {
          if (v2.value0) {
            return rightX;
          }
          ;
          return leftX;
        })();
        return discard5(modify_4(function(s2) {
          var $196 = {};
          for (var $197 in s2) {
            if ({}.hasOwnProperty.call(s2, $197)) {
              $196[$197] = s2[$197];
            }
            ;
          }
          ;
          $196.circleX = targetX;
          return $196;
        }))(function() {
          return bind16(get5)(function(st) {
            var tree = buildStep2Tree({
              id: 0,
              x: st.circleX,
              y: st.circleY,
              opacity: st.circleOpacity
            });
            return rerenderWithTick(dictMonadAff)(vizContainerSelector)(tree);
          });
        });
      }
      ;
      if (v2 instanceof Step3Tick) {
        var targetY = (function() {
          if (v2.value0) {
            return 120;
          }
          ;
          return 180;
        })();
        return discard5(modify_4(function(s2) {
          var $201 = {};
          for (var $202 in s2) {
            if ({}.hasOwnProperty.call(s2, $202)) {
              $201[$202] = s2[$202];
            }
            ;
          }
          ;
          $201.multiTargetY = targetY;
          return $201;
        }))(function() {
          return bind16(get5)(function(st) {
            var tree = buildStep3Tree(st.multiCircles)(st.multiTargetY);
            return rerenderWithTick(dictMonadAff)(vizContainerSelector)(tree);
          });
        });
      }
      ;
      if (v2 instanceof Step4Tick) {
        var targetY = (function() {
          if (v2.value0) {
            return 120;
          }
          ;
          return 180;
        })();
        return discard5(modify_4(function(s2) {
          var $206 = {};
          for (var $207 in s2) {
            if ({}.hasOwnProperty.call(s2, $207)) {
              $206[$207] = s2[$207];
            }
            ;
          }
          ;
          $206.multiTargetY = targetY;
          return $206;
        }))(function() {
          return bind16(get5)(function(st) {
            var tree = buildStep4Tree(st.multiCircles)(st.multiTargetY);
            return rerenderWithTick(dictMonadAff)(vizContainerSelector)(tree);
          });
        });
      }
      ;
      if (v2 instanceof Step5Tick) {
        return bind16(liftEffect11(randomSubset(7)))(function(visibleIds) {
          return discard5(modify_4(function(s2) {
            var $210 = {};
            for (var $211 in s2) {
              if ({}.hasOwnProperty.call(s2, $211)) {
                $210[$211] = s2[$211];
              }
              ;
            }
            ;
            $210.gupVisibleIds = visibleIds;
            return $210;
          }))(function() {
            return bind16(get5)(function(st) {
              var tree = buildStep5Tree(st.gupVisibleIds);
              return rerenderWithTick(dictMonadAff)(vizContainerSelector)(tree);
            });
          });
        });
      }
      ;
      if (v2 instanceof Step6Tick) {
        return bind16(liftEffect11(getRandomLetters))(function(letters) {
          return discard5(modify_4(function(s2) {
            var $213 = {};
            for (var $214 in s2) {
              if ({}.hasOwnProperty.call(s2, $214)) {
                $213[$214] = s2[$214];
              }
              ;
            }
            ;
            $213.gupLetters = letters;
            return $213;
          }))(function() {
            return bind16(get5)(function(st) {
              var tree = buildStep6Tree(st.gupLetters);
              return rerenderWithTick(dictMonadAff)(vizContainerSelector)(tree);
            });
          });
        });
      }
      ;
      if (v2 instanceof Step8Tick) {
        return bind16(get5)(function(st) {
          if (st.treeVizState instanceof Nothing) {
            return pure112(unit);
          }
          ;
          if (st.treeVizState instanceof Just) {
            var newLayout = toggleLayout(st.currentLayout);
            return discard5(modify_4(function(s2) {
              var $217 = {};
              for (var $218 in s2) {
                if ({}.hasOwnProperty.call(s2, $218)) {
                  $217[$218] = s2[$218];
                }
                ;
              }
              ;
              $217.currentLayout = newLayout;
              return $217;
            }))(function() {
              return liftEffect11(update2(st.treeVizState.value0.dataTree)(vizContainerSelector)(st.treeVizState.value0.chartWidth)(st.treeVizState.value0.chartHeight)(newLayout));
            });
          }
          ;
          throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 508, column 5 - line 514, column 130): " + [st.treeVizState.constructor.name]);
        });
      }
      ;
      if (v2 instanceof TransitionTick) {
        return bind16(get5)(function(st) {
          if (st.transitions instanceof Nothing) {
            return pure112(unit);
          }
          ;
          if (st.transitions instanceof Just) {
            return bind16(liftEffect11(tickTransitions(v2.value0)(st.transitions.value0)))(function(result) {
              if (result instanceof Complete) {
                return discard5((function() {
                  if (st.transitionFiber instanceof Just) {
                    return kill(st.transitionFiber.value0);
                  }
                  ;
                  if (st.transitionFiber instanceof Nothing) {
                    return pure112(unit);
                  }
                  ;
                  throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 525, column 13 - line 527, column 35): " + [st.transitionFiber.constructor.name]);
                })())(function() {
                  return modify_4(function(s2) {
                    var $225 = {};
                    for (var $226 in s2) {
                      if ({}.hasOwnProperty.call(s2, $226)) {
                        $225[$226] = s2[$226];
                      }
                      ;
                    }
                    ;
                    $225.transitions = Nothing.value;
                    $225.transitionFiber = Nothing.value;
                    return $225;
                  });
                });
              }
              ;
              if (result instanceof Running) {
                return modify_4(function(s2) {
                  var $228 = {};
                  for (var $229 in s2) {
                    if ({}.hasOwnProperty.call(s2, $229)) {
                      $228[$229] = s2[$229];
                    }
                    ;
                  }
                  ;
                  $228.transitions = new Just(result.value0);
                  return $228;
                });
              }
              ;
              throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 522, column 9 - line 530, column 59): " + [result.constructor.name]);
            });
          }
          ;
          throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 518, column 5 - line 530, column 59): " + [st.transitions.constructor.name]);
        });
      }
      ;
      throw new Error("Failed pattern match at Component.Tour.TourMotionScrollyHATS (line 301, column 16 - line 530, column 59): " + [v2.constructor.name]);
    };
  };
  var component13 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return {
          currentStep: 1,
          observer: Nothing.value,
          animationFiber: Nothing.value,
          circleX: leftX,
          circleY: centerY,
          circleOpacity: 1,
          multiCircles: makeMultiCircleData(6),
          multiTargetY: centerY,
          gupVisibleIds: [0, 1, 2, 3, 4, 5, 6],
          gupLetters: "ABCDEFG",
          treeVizState: Nothing.value,
          currentLayout: TreeLayout.value,
          lesMisCleanup: Nothing.value,
          isReady: false,
          transitions: Nothing.value,
          transitionFiber: Nothing.value
        };
      },
      render: render16,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        handleAction: handleAction13(dictMonadAff),
        initialize: new Just(Initialize14.value),
        finalize: new Just(Finalize3.value)
      })
    });
  };

  // output/Component.Tour.TourScrolly/foreign.js
  var scrollToStep2 = (stepId) => () => {
    const element4 = document.querySelector(`[data-step="${stepId}"]`);
    if (element4) {
      element4.scrollIntoView({ behavior: "smooth", block: "center" });
    }
  };

  // output/Component.Tour.TourScrollyViz/index.js
  var mapFlipped8 = /* @__PURE__ */ mapFlipped(functorArray);
  var mod6 = /* @__PURE__ */ mod(euclideanRingInt);
  var show29 = /* @__PURE__ */ show(showInt);
  var max9 = /* @__PURE__ */ max(ordNumber);
  var min11 = /* @__PURE__ */ min(ordNumber);
  var show112 = /* @__PURE__ */ show(showNumber);
  var foldl11 = /* @__PURE__ */ foldl(foldableArray);
  var svgWidth4 = 400;
  var svgHeight4 = 300;
  var scaleParabolaY = function(y7) {
    return 280 - y7 * 3;
  };
  var scaleParabolaX = function(x7) {
    return 50 + x7 * 35;
  };
  var scaleLineY = function(r8) {
    return 280 - (r8 - 2) * 17;
  };
  var scaleLineX = function(m2) {
    return 50 + m2 * 2;
  };
  var scaleAnscombeY = function(y7) {
    return 280 - (y7 - 3) * 20;
  };
  var scaleAnscombeX = function(x7) {
    return 30 + (x7 - 4) * 20;
  };
  var sampleSeries = /* @__PURE__ */ mapFlipped8(/* @__PURE__ */ range2(0)(44))(function(i2) {
    var volatility = 0.3 + toNumber(mod6(i2)(5)) * 0.15;
    var recessionPeak = 2 + toNumber(mod6(i2)(6)) * 0.5;
    var phaseShift = toNumber(mod6(i2)(12));
    var baseRate = 3.5 + toNumber(mod6(i2)(8)) * 0.8;
    return {
      name: "Metro " + show29(i2 + 1 | 0),
      points: mapFlipped8(range2(0)(165))(function(m2) {
        var month = toNumber(m2);
        var recessionFactor = recessionPeak * exp(-((month - 90) * (month - 90) / 400));
        var recoveryFactor = (function() {
          var $27 = month > 100;
          if ($27) {
            return (month - 100) * 0.015;
          }
          ;
          return 0;
        })();
        var seasonal = volatility * sin((month + phaseShift) * 0.5);
        var rate = max9(2.5)(min11(15)(baseRate + recessionFactor - recoveryFactor + seasonal));
        return {
          month,
          rate
        };
      })
    };
  });
  var renderViz2 = function(selector) {
    return function(tree) {
      return function __do7() {
        rerender(selector)(tree)();
        return unit;
      };
    };
  };
  var parabolaData = /* @__PURE__ */ mapFlipped8(/* @__PURE__ */ range2(0)(9))(function(i2) {
    var x7 = toNumber(i2);
    return {
      x: x7,
      y: x7 * x7
    };
  });
  var linePath = function(points2) {
    var v2 = uncons(points2);
    if (v2 instanceof Nothing) {
      return "";
    }
    ;
    if (v2 instanceof Just) {
      return "M" + (show112(scaleLineX(v2.value0.head.month)) + (" " + (show112(scaleLineY(v2.value0.head.rate)) + foldl11(function(acc) {
        return function(pt) {
          return acc + (" L" + (show112(scaleLineX(pt.month)) + (" " + show112(scaleLineY(pt.rate)))));
        };
      })("")(v2.value0.tail))));
    }
    ;
    throw new Error("Failed pattern match at Component.Tour.TourScrollyViz (line 386, column 3 - line 390, column 111): " + [v2.constructor.name]);
  };
  var colorCircles = [{
    color: "red",
    x: 80
  }, {
    color: "green",
    x: 200
  }, {
    color: "blue",
    x: 320
  }];
  var clearViz2 = clearContainer;
  var buildSvg = function(children2) {
    return elem4(SVG.value)([width2(svgWidth4), height2(svgHeight4), viewBox2(0)(0)(svgWidth4)(svgHeight4), class_("scrolly-viz-svg")])(children2);
  };
  var step10MultiLineBasic = /* @__PURE__ */ (function() {
    return buildSvg([elem4(Line.value)([x1(50), y1(280), x22(380), y22(280), stroke2("#333"), strokeWidth2(1)])([]), elem4(Line.value)([x1(50), y1(280), x22(50), y22(60), stroke2("#333"), strokeWidth2(1)])([]), forEach("line-series")(Path.value)(sampleSeries)(function(v2) {
      return v2.name;
    })(function(s2) {
      return elem4(Path.value)([d(linePath(s2.points)), stroke2("#999"), strokeWidth2(1.5), fill2("none"), class_("data-line")])([]);
    })]);
  })();
  var step11MultiLineHover = /* @__PURE__ */ (function() {
    return buildSvg([elem4(Line.value)([x1(50), y1(280), x22(380), y22(280), stroke2("#333"), strokeWidth2(1)])([]), elem4(Line.value)([x1(50), y1(280), x22(50), y22(60), stroke2("#333"), strokeWidth2(1)])([]), forEach("line-series")(Path.value)(sampleSeries)(function(v2) {
      return v2.name;
    })(function(s2) {
      return elem4(Path.value)([d(linePath(s2.points)), stroke2("#bbb"), strokeWidth2(1.5), fill2("none"), class_("data-line hoverable"), attr2("data-series")(s2.name)])([]);
    })]);
  })();
  var step1EmptyCanvas = /* @__PURE__ */ buildSvg([]);
  var step2ThreeGreenCircles = /* @__PURE__ */ (function() {
    return buildSvg([elem4(Circle.value)([cx2(80), cy2(150), r2(30), fill2("green")])([]), elem4(Circle.value)([cx2(200), cy2(150), r2(30), fill2("green")])([]), elem4(Circle.value)([cx2(320), cy2(150), r2(30), fill2("green")])([])]);
  })();
  var step3ColoredCircles = /* @__PURE__ */ (function() {
    return buildSvg([elem4(Group.value)([])([forEach("color-circle")(Circle.value)(colorCircles)(function(v2) {
      return v2.color;
    })(function(d3) {
      return elem4(Circle.value)([cx2(d3.x), cy2(150), r2(30), fill2(d3.color)])([]);
    })])]);
  })();
  var step4ParabolaBasic = /* @__PURE__ */ (function() {
    return buildSvg([elem4(Group.value)([])([forEach("parabola-point")(Circle.value)(parabolaData)(function($32) {
      return show112((function(v2) {
        return v2.x;
      })($32));
    })(function(d3) {
      return elem4(Circle.value)([cx2(scaleParabolaX(d3.x)), cy2(scaleParabolaY(d3.y)), r2(8), fill2("green")])([]);
    })])]);
  })();
  var step5ParabolaAxes = /* @__PURE__ */ (function() {
    return buildSvg([elem4(Line.value)([x1(50), y1(280), x22(380), y22(280), stroke2("#333"), strokeWidth2(1)])([]), elem4(Line.value)([x1(50), y1(280), x22(50), y22(30), stroke2("#333"), strokeWidth2(1)])([]), elem4(Group.value)([])([forEach("parabola-point")(Circle.value)(parabolaData)(function($33) {
      return show112((function(v2) {
        return v2.x;
      })($33));
    })(function(d3) {
      return elem4(Circle.value)([cx2(scaleParabolaX(d3.x)), cy2(scaleParabolaY(d3.y)), r2(8), fill2("green")])([]);
    })])]);
  })();
  var step6ParabolaLabels = /* @__PURE__ */ (function() {
    return buildSvg([elem4(Line.value)([x1(50), y1(280), x22(380), y22(280), stroke2("#333"), strokeWidth2(1)])([]), elem4(Line.value)([x1(50), y1(280), x22(50), y22(30), stroke2("#333"), strokeWidth2(1)])([]), elem4(Text.value)([x4(200), y4(295), textAnchor2("middle"), fontSize2("14px"), attr2("textContent")("x")])([]), elem4(Text.value)([x4(20), y4(150), textAnchor2("middle"), fontSize2("14px"), attr2("transform")("rotate(-90, 20, 150)"), attr2("textContent")("x\xB2")])([]), elem4(Group.value)([])([forEach("parabola-point")(Circle.value)(parabolaData)(function($34) {
      return show112((function(v2) {
        return v2.x;
      })($34));
    })(function(d3) {
      return elem4(Circle.value)([cx2(scaleParabolaX(d3.x)), cy2(scaleParabolaY(d3.y)), r2(8), fill2("green")])([]);
    })])]);
  })();
  var anscombeD = [{
    x: 8,
    y: 6.58
  }, {
    x: 8,
    y: 5.76
  }, {
    x: 8,
    y: 7.71
  }, {
    x: 8,
    y: 8.84
  }, {
    x: 8,
    y: 8.47
  }, {
    x: 8,
    y: 7.04
  }, {
    x: 8,
    y: 5.25
  }, {
    x: 19,
    y: 12.5
  }, {
    x: 8,
    y: 5.56
  }, {
    x: 8,
    y: 7.91
  }, {
    x: 8,
    y: 6.89
  }];
  var anscombeC = [{
    x: 10,
    y: 7.46
  }, {
    x: 8,
    y: 6.77
  }, {
    x: 13,
    y: 12.74
  }, {
    x: 9,
    y: 7.11
  }, {
    x: 11,
    y: 7.81
  }, {
    x: 14,
    y: 8.84
  }, {
    x: 6,
    y: 6.08
  }, {
    x: 4,
    y: 5.39
  }, {
    x: 12,
    y: 8.15
  }, {
    x: 7,
    y: 6.42
  }, {
    x: 5,
    y: 5.73
  }];
  var anscombeB = [{
    x: 10,
    y: 9.14
  }, {
    x: 8,
    y: 8.14
  }, {
    x: 13,
    y: 8.74
  }, {
    x: 9,
    y: 8.77
  }, {
    x: 11,
    y: 9.26
  }, {
    x: 14,
    y: 8.1
  }, {
    x: 6,
    y: 6.13
  }, {
    x: 4,
    y: 3.1
  }, {
    x: 12,
    y: 9.13
  }, {
    x: 7,
    y: 7.26
  }, {
    x: 5,
    y: 4.74
  }];
  var anscombeA = [{
    x: 10,
    y: 8.04
  }, {
    x: 8,
    y: 6.95
  }, {
    x: 13,
    y: 7.58
  }, {
    x: 9,
    y: 8.81
  }, {
    x: 11,
    y: 8.33
  }, {
    x: 14,
    y: 9.96
  }, {
    x: 6,
    y: 7.24
  }, {
    x: 4,
    y: 4.26
  }, {
    x: 12,
    y: 10.84
  }, {
    x: 7,
    y: 4.82
  }, {
    x: 5,
    y: 5.68
  }];
  var coloredDatasets = [{
    points: anscombeA,
    color: "red"
  }, {
    points: anscombeB,
    color: "blue"
  }, {
    points: anscombeC,
    color: "green"
  }, {
    points: anscombeD,
    color: "purple"
  }];
  var step9AnscombeOverlay = /* @__PURE__ */ (function() {
    return buildSvg([elem4(Line.value)([x1(30), y1(280), x22(350), y22(280), stroke2("#333"), strokeWidth2(1)])([]), elem4(Line.value)([x1(30), y1(280), x22(30), y22(60), stroke2("#333"), strokeWidth2(1)])([]), forEach("overlay-dataset")(Group.value)(coloredDatasets)(function(v2) {
      return v2.color;
    })(function(ds) {
      return elem4(Group.value)([])([forEach("overlay-" + ds.color)(Circle.value)(ds.points)(function(d3) {
        return show112(d3.x) + ("-" + show112(d3.y));
      })(function(d3) {
        return elem4(Circle.value)([cx2(scaleAnscombeX(d3.x)), cy2(scaleAnscombeY(d3.y)), r2(5), fill2(ds.color), opacity("0.7")])([]);
      })]);
    })]);
  })();
  var step7AnscombeSingle = /* @__PURE__ */ (function() {
    return buildSvg([elem4(Line.value)([x1(30), y1(280), x22(350), y22(280), stroke2("#333"), strokeWidth2(1)])([]), elem4(Line.value)([x1(30), y1(280), x22(30), y22(60), stroke2("#333"), strokeWidth2(1)])([]), elem4(Group.value)([])([forEach("anscombe-a")(Circle.value)(anscombeA)(function(d3) {
      return show112(d3.x) + ("-" + show112(d3.y));
    })(function(d3) {
      return elem4(Circle.value)([cx2(scaleAnscombeX(d3.x)), cy2(scaleAnscombeY(d3.y)), r2(5), fill2("steelblue")])([]);
    })])]);
  })();
  var allDatasets = [{
    dataset: anscombeA,
    offsetX: 0,
    offsetY: 0,
    label: "A"
  }, {
    dataset: anscombeB,
    offsetX: 200,
    offsetY: 0,
    label: "B"
  }, {
    dataset: anscombeC,
    offsetX: 0,
    offsetY: 150,
    label: "C"
  }, {
    dataset: anscombeD,
    offsetX: 200,
    offsetY: 150,
    label: "D"
  }];
  var step8AnscombeQuartet = /* @__PURE__ */ (function() {
    return elem4(SVG.value)([width2(420), height2(320), viewBox2(0)(0)(420)(320), class_("scrolly-viz-svg")])([forEach("quartet-panel")(Group.value)(allDatasets)(function(v2) {
      return v2.label;
    })(function(panel) {
      return elem4(Group.value)([attr2("transform")("translate(" + (show112(panel.offsetX) + ("," + (show112(panel.offsetY) + ")"))))])([elem4(Line.value)([x1(20), y1(130), x22(180), y22(130), stroke2("#ccc"), strokeWidth2(0.5)])([]), elem4(Line.value)([x1(20), y1(130), x22(20), y22(20), stroke2("#ccc"), strokeWidth2(0.5)])([]), elem4(Text.value)([x4(100), y4(145), textAnchor2("middle"), fontSize2("12px"), attr2("textContent")(panel.label)])([]), forEach("panel-" + panel.label)(Circle.value)(panel.dataset)(function(d3) {
        return show112(d3.x) + ("-" + show112(d3.y));
      })(function(d3) {
        return elem4(Circle.value)([cx2(20 + (d3.x - 4) * 10), cy2(130 - (d3.y - 3) * 10), r2(3), fill2("steelblue")])([]);
      })]);
    })]);
  })();

  // output/Component.Tour.TourScrolly/index.js
  var discard6 = /* @__PURE__ */ discard(discardUnit);
  var pure36 = /* @__PURE__ */ pure(applicativeEffect);
  var map41 = /* @__PURE__ */ map(functorMaybe);
  var show30 = /* @__PURE__ */ show(showInt);
  var map118 = /* @__PURE__ */ map(functorArray);
  var discard22 = /* @__PURE__ */ discard6(bindHalogenM);
  var bind17 = /* @__PURE__ */ bind(bindHalogenM);
  var pure113 = /* @__PURE__ */ pure(applicativeHalogenM);
  var bind25 = /* @__PURE__ */ bind(bindMaybe);
  var append19 = /* @__PURE__ */ append(semigroupOptions);
  var modify_5 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var $$void14 = /* @__PURE__ */ $$void(functorHalogenM);
  var traverse_7 = /* @__PURE__ */ traverse_(applicativeEffect)(foldableArray);
  var get6 = /* @__PURE__ */ get(monadStateHalogenM);
  var when10 = /* @__PURE__ */ when(applicativeHalogenM);
  var Initialize15 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var Finalize4 = /* @__PURE__ */ (function() {
    function Finalize5() {
    }
    ;
    Finalize5.value = new Finalize5();
    return Finalize5;
  })();
  var StepBecameVisible2 = /* @__PURE__ */ (function() {
    function StepBecameVisible3(value0) {
      this.value0 = value0;
    }
    ;
    StepBecameVisible3.create = function(value0) {
      return new StepBecameVisible3(value0);
    };
    return StepBecameVisible3;
  })();
  var GoToStep = /* @__PURE__ */ (function() {
    function GoToStep2(value0) {
      this.value0 = value0;
    }
    ;
    GoToStep2.create = function(value0) {
      return new GoToStep2(value0);
    };
    return GoToStep2;
  })();
  var MarkReady2 = /* @__PURE__ */ (function() {
    function MarkReady3() {
    }
    ;
    MarkReady3.value = new MarkReady3();
    return MarkReady3;
  })();
  var vizContainerSelector2 = "#scrolly-viz-container";
  var step9_anscombeOverlay = /* @__PURE__ */ (function() {
    return {
      id: 9,
      title: "Overlay: A Stepping Stone",
      narrative: ["Overlaying datasets on one chart isn't always a good choice - it gets crowded fast. But it's a stepping stone to something better.", "With 44 points it's already hard to read. Imagine hundreds of data points. We need a different approach..."],
      codeLines: [{
        code: 'let colors = ["red", "blue", "green", "purple"]',
        highlight: true,
        indent: 0
      }, {
        code: "",
        highlight: false,
        indent: 0
      }, {
        code: 'join "g" (zip allDatasets colors) \\(dataset, color) _ ->',
        highlight: true,
        indent: 0
      }, {
        code: '  join "circle" dataset.points \\d _ ->',
        highlight: false,
        indent: 2
      }, {
        code: "    circle",
        highlight: false,
        indent: 4
      }, {
        code: "      [ cx d.x, cy d.y, r 5",
        highlight: false,
        indent: 4
      }, {
        code: "      , fill color",
        highlight: true,
        indent: 4
      }, {
        code: "      , opacity 0.7",
        highlight: false,
        indent: 4
      }, {
        code: "      ]",
        highlight: false,
        indent: 4
      }],
      insight: new Just("Crowded charts need interaction to be readable")
    };
  })();
  var step8_anscombeSmallMultiple = /* @__PURE__ */ (function() {
    return {
      id: 8,
      title: "Small Multiples: Nested Data",
      narrative: ["To show all four datasets, we feed in nested data: an array of arrays. The outer array creates panels, each inner array creates the circles.", "This 'small multiples' pattern repeats the same visualization for easy comparison."],
      codeLines: [{
        code: "let allDatasets = [datasetA, datasetB, datasetC, datasetD]",
        highlight: true,
        indent: 0
      }, {
        code: "",
        highlight: false,
        indent: 0
      }, {
        code: 'join "g" allDatasets \\dataset i ->',
        highlight: true,
        indent: 0
      }, {
        code: "  g [ transform (panelPosition i) ]",
        highlight: false,
        indent: 2
      }, {
        code: "    [ axisBottom, axisLeft",
        highlight: false,
        indent: 2
      }, {
        code: '    , join "circle" dataset.points \\d _ ->',
        highlight: true,
        indent: 2
      }, {
        code: "        circle [ cx d.x, cy d.y, r 4 ]",
        highlight: false,
        indent: 4
      }, {
        code: "    ]",
        highlight: false,
        indent: 2
      }],
      insight: new Just("Nested data = nested visualization")
    };
  })();
  var step7_anscombeScatter = /* @__PURE__ */ (function() {
    return {
      id: 7,
      title: "Real Data: Anscombe's Dataset A",
      narrative: ["Now we're visualizing real data. Anscombe's Quartet is famous: four datasets with identical statistics but very different patterns.", "Dataset A shows a clear linear relationship. Each point is an {x, y} record."],
      codeLines: [{
        code: "let datasetA =",
        highlight: true,
        indent: 0
      }, {
        code: "  [ {x: 10, y: 8.04}, {x: 8, y: 6.95}",
        highlight: true,
        indent: 2
      }, {
        code: "  , {x: 13, y: 7.58}, {x: 9, y: 8.81}",
        highlight: true,
        indent: 2
      }, {
        code: "  , ... ]",
        highlight: true,
        indent: 2
      }, {
        code: "",
        highlight: false,
        indent: 0
      }, {
        code: 'join "circle" datasetA \\d _ ->',
        highlight: false,
        indent: 0
      }, {
        code: "  circle",
        highlight: false,
        indent: 2
      }, {
        code: "    [ cx (scaleX d.x)  -- x from record",
        highlight: true,
        indent: 2
      }, {
        code: "    , cy (scaleY d.y)  -- y from record",
        highlight: true,
        indent: 2
      }, {
        code: "    , r 5",
        highlight: false,
        indent: 2
      }, {
        code: '    , fill "steelblue"',
        highlight: false,
        indent: 2
      }, {
        code: "    ]",
        highlight: false,
        indent: 2
      }],
      insight: new Just("Records as data: d.x, d.y")
    };
  })();
  var step6_axisLabels = /* @__PURE__ */ (function() {
    return {
      id: 6,
      title: "Labels Complete the Picture",
      narrative: ["Labels tell the viewer what they're looking at. The X axis shows the input values, Y shows the squared output.", "Notice: labels are just text elements. Everything in SVG is elements with attributes."],
      codeLines: [{
        code: "-- After the axes...",
        highlight: false,
        indent: 0
      }, {
        code: "  , text",
        highlight: true,
        indent: 0
      }, {
        code: "      [ x 200, y 290",
        highlight: true,
        indent: 2
      }, {
        code: '      , textAnchor "middle"',
        highlight: true,
        indent: 2
      }, {
        code: '      , textContent "x"',
        highlight: true,
        indent: 2
      }, {
        code: "      ]",
        highlight: true,
        indent: 2
      }, {
        code: "  , text",
        highlight: true,
        indent: 0
      }, {
        code: "      [ x 15, y 150",
        highlight: true,
        indent: 2
      }, {
        code: '      , textAnchor "middle"',
        highlight: true,
        indent: 2
      }, {
        code: '      , transform "rotate(-90, 15, 150)"',
        highlight: true,
        indent: 2
      }, {
        code: '      , textContent "x\xB2"',
        highlight: true,
        indent: 2
      }, {
        code: "      ]",
        highlight: true,
        indent: 2
      }],
      insight: new Just("Everything is elements + attributes")
    };
  })();
  var step5_parabolaAxes = /* @__PURE__ */ (function() {
    return {
      id: 5,
      title: "Adding Context: Axes",
      narrative: ["Circles alone don't tell the story. Axes provide context - they show what the positions mean.", "An axis is just another visualization element. It's built from the same scale we use for the circles."],
      codeLines: [{
        code: "svg [ width 400, height 300 ]",
        highlight: false,
        indent: 0
      }, {
        code: '  [ g [ transform "translate(50, 250)" ]  -- X axis',
        highlight: true,
        indent: 0
      }, {
        code: "      [ axisBottom scaleX ]",
        highlight: true,
        indent: 2
      }, {
        code: '  , g [ transform "translate(50, 0)" ]    -- Y axis',
        highlight: true,
        indent: 0
      }, {
        code: "      [ axisLeft scaleY ]",
        highlight: true,
        indent: 2
      }, {
        code: '  , g [ transform "translate(50, 0)" ]    -- circles',
        highlight: false,
        indent: 0
      }, {
        code: '      [ join "circle" data \\x _ -> ... ]',
        highlight: false,
        indent: 2
      }, {
        code: "  ]",
        highlight: false,
        indent: 0
      }],
      insight: new Just("Axes are just visualizations of scales")
    };
  })();
  var step4_parabolaBasic = /* @__PURE__ */ (function() {
    return {
      id: 4,
      title: "A Parabola of Circles",
      narrative: ["Now the Y position comes from a mathematical relationship: y = x\xB2. The data is numbers, and we compute the visual position.", "This is the essence of data visualization: mapping data values to visual properties."],
      codeLines: [{
        code: "let data = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]",
        highlight: true,
        indent: 0
      }, {
        code: "",
        highlight: false,
        indent: 0
      }, {
        code: "svg [ width 400, height 300 ]",
        highlight: false,
        indent: 0
      }, {
        code: '  [ join "circle" data \\x _ ->',
        highlight: false,
        indent: 0
      }, {
        code: "      let y = x * x  -- parabola!",
        highlight: true,
        indent: 2
      }, {
        code: "      in circle",
        highlight: false,
        indent: 2
      }, {
        code: "        [ cx (scaleX x)  -- map data to pixels",
        highlight: true,
        indent: 2
      }, {
        code: "        , cy (scaleY y)",
        highlight: true,
        indent: 2
      }, {
        code: "        , r 8",
        highlight: false,
        indent: 2
      }, {
        code: '        , fill "green"',
        highlight: false,
        indent: 2
      }, {
        code: "        ]",
        highlight: false,
        indent: 2
      }, {
        code: "  ]",
        highlight: false,
        indent: 0
      }],
      insight: new Just("Scales: map data domain -> pixel range")
    };
  })();
  var step3_threeCirclesData = /* @__PURE__ */ (function() {
    return {
      id: 3,
      title: "Data-Driven Circles",
      narrative: ["Now the magic: a data join. Instead of hardcoding three circles, we say 'for each item in this array, create a circle.'", "Both position AND color come from data. Change the array, and the circles change automatically."],
      codeLines: [{
        code: "svg [ width 400, height 300 ]",
        highlight: false,
        indent: 0
      }, {
        code: '  [ join "circle" ["red", "green", "blue"] \\color i ->',
        highlight: true,
        indent: 0
      }, {
        code: "      circle",
        highlight: false,
        indent: 2
      }, {
        code: "        [ cx (80 + i * 120)  -- position from index",
        highlight: true,
        indent: 2
      }, {
        code: "        , cy 150",
        highlight: false,
        indent: 2
      }, {
        code: "        , r 30",
        highlight: false,
        indent: 2
      }, {
        code: "        , fill color         -- color from data!",
        highlight: true,
        indent: 2
      }, {
        code: "        ]",
        highlight: false,
        indent: 2
      }, {
        code: "  ]",
        highlight: false,
        indent: 0
      }],
      insight: new Just("Data join: one datum = one element")
    };
  })();
  var step2_threeCirclesGreen = /* @__PURE__ */ (function() {
    return {
      id: 2,
      title: "Three Green Circles",
      narrative: ["The most minimal visualization: three circles. We don't even need data yet - just hardcoded positions.", "Each circle has attributes: position (cx, cy), size (r), and color (fill). These are static values."],
      codeLines: [{
        code: "svg [ width 400, height 300 ]",
        highlight: false,
        indent: 0
      }, {
        code: '  [ circle [ cx 80,  cy 150, r 30, fill "green" ]',
        highlight: true,
        indent: 0
      }, {
        code: '  , circle [ cx 200, cy 150, r 30, fill "green" ]',
        highlight: true,
        indent: 0
      }, {
        code: '  , circle [ cx 320, cy 150, r 30, fill "green" ]',
        highlight: true,
        indent: 0
      }, {
        code: "  ]",
        highlight: false,
        indent: 0
      }],
      insight: new Just("Static attributes = hardcoded values")
    };
  })();
  var step1_emptyCanvas = /* @__PURE__ */ (function() {
    return {
      id: 1,
      title: "The Empty Canvas",
      narrative: ["Every visualization begins here: an SVG element. It's just a container - a blank canvas waiting for content.", "In PSD3, we describe what we want declaratively. This single line creates a 400x300 pixel drawing area."],
      codeLines: [{
        code: "svg [ width 400, height 300 ]",
        highlight: true,
        indent: 0
      }],
      insight: Nothing.value
    };
  })();
  var step11_hoverTooltip = /* @__PURE__ */ (function() {
    return {
      id: 11,
      title: "Interaction Makes It Readable",
      narrative: ["Add hover: the line highlights, others fade. A tooltip shows the metro area and exact values.", "7,470 data points across 45 cities, now instantly explorable. Interaction makes dense data readable."],
      codeLines: [{
        code: "-- CSS handles the visual feedback",
        highlight: false,
        indent: 0
      }, {
        code: ".line { stroke: #bbb }",
        highlight: true,
        indent: 0
      }, {
        code: ".line:hover { stroke: #333; stroke-width: 2.5 }",
        highlight: true,
        indent: 0
      }, {
        code: "",
        highlight: false,
        indent: 0
      }, {
        code: "-- PureScript handles the tooltip",
        highlight: false,
        indent: 0
      }, {
        code: "path",
        highlight: false,
        indent: 0
      }, {
        code: "  [ onMouseMove \\info ->",
        highlight: true,
        indent: 2
      }, {
        code: "      showTooltip info.datum.division info.pageX info.pageY",
        highlight: true,
        indent: 4
      }, {
        code: "  , onMouseLeave \\_ -> hideTooltip",
        highlight: true,
        indent: 2
      }, {
        code: "  ]",
        highlight: false,
        indent: 2
      }],
      insight: new Just("7,470 points made explorable with hover")
    };
  })();
  var step10_multiLine = /* @__PURE__ */ (function() {
    return {
      id: 10,
      title: "From Points to Lines",
      narrative: ["Line charts connect points to show trends. This is real BLS data: 45 metro areas \xD7 166 months = 7,470 data points.", "All lines are gray. The 2008 recession spike is visible, but which city is which? Impossible to tell."],
      codeLines: [{
        code: "let linePath points =",
        highlight: true,
        indent: 0
      }, {
        code: '  "M" <> first <> foldl (\\acc p -> acc <> "L" <> p) "" rest',
        highlight: true,
        indent: 2
      }, {
        code: "",
        highlight: false,
        indent: 0
      }, {
        code: 'join "path" allSeries \\series _ ->',
        highlight: false,
        indent: 0
      }, {
        code: "  path",
        highlight: true,
        indent: 2
      }, {
        code: "    [ d (linePath series.points)",
        highlight: true,
        indent: 2
      }, {
        code: '    , stroke "#999"  -- all same color',
        highlight: true,
        indent: 2
      }, {
        code: "    , strokeWidth 1.5",
        highlight: false,
        indent: 2
      }, {
        code: '    , fill "none"',
        highlight: false,
        indent: 2
      }, {
        code: "    ]",
        highlight: false,
        indent: 2
      }],
      insight: new Just("7,470 points - but which line is which?")
    };
  })();
  var tourSteps2 = [step1_emptyCanvas, step2_threeCirclesGreen, step3_threeCirclesData, step4_parabolaBasic, step5_parabolaAxes, step6_axisLabels, step7_anscombeScatter, step8_anscombeSmallMultiple, step9_anscombeOverlay, step10_multiLine, step11_hoverTooltip];
  var renderVizForStep = function(stepId) {
    return function __do7() {
      clearViz2(vizContainerSelector2)();
      if (stepId === 1) {
        return renderViz2(vizContainerSelector2)(step1EmptyCanvas)();
      }
      ;
      if (stepId === 2) {
        return renderViz2(vizContainerSelector2)(step2ThreeGreenCircles)();
      }
      ;
      if (stepId === 3) {
        return renderViz2(vizContainerSelector2)(step3ColoredCircles)();
      }
      ;
      if (stepId === 4) {
        return renderViz2(vizContainerSelector2)(step4ParabolaBasic)();
      }
      ;
      if (stepId === 5) {
        return renderViz2(vizContainerSelector2)(step5ParabolaAxes)();
      }
      ;
      if (stepId === 6) {
        return renderViz2(vizContainerSelector2)(step6ParabolaLabels)();
      }
      ;
      if (stepId === 7) {
        return renderViz2(vizContainerSelector2)(step7AnscombeSingle)();
      }
      ;
      if (stepId === 8) {
        return renderViz2(vizContainerSelector2)(step8AnscombeQuartet)();
      }
      ;
      if (stepId === 9) {
        return renderViz2(vizContainerSelector2)(step9AnscombeOverlay)();
      }
      ;
      if (stepId === 10) {
        return renderViz2(vizContainerSelector2)(step10MultiLineBasic)();
      }
      ;
      if (stepId === 11) {
        return renderViz2(vizContainerSelector2)(step11MultiLineHover)();
      }
      ;
      return unit;
    };
  };
  var renderVisualization = function(v2) {
    return div4([classes(["scrolly-viz"]), id2("scrolly-viz-container")])([]);
  };
  var renderStepIndicator = function(currentStep) {
    return div4([classes(["scrolly-step-indicator"])])(mapWithIndex2(function(i2) {
      return function(v2) {
        return button2([classes(["scrolly-step-dot", (function() {
          var $50 = (i2 + 1 | 0) === currentStep;
          if ($50) {
            return "active";
          }
          ;
          return "";
        })()]), onClick(function(v1) {
          return new GoToStep(i2 + 1 | 0);
        }), title2(fromMaybe("")(map41(function(v1) {
          return v1.title;
        })(index(tourSteps2)(i2))))])([]);
      };
    })(tourSteps2));
  };
  var renderCodeLine = function(v2) {
    return div4([classes(["code-line", (function() {
      if (v2.highlight) {
        return "highlight";
      }
      ;
      return "";
    })()])])([text6(v2.code)]);
  };
  var renderStep2 = function(v2) {
    return function(step5) {
      return div4([classes(["scrolly-step"]), attr4("data-step")(show30(step5.id))])([div4([classes(["scrolly-step-number"])])([text6(show30(step5.id))]), h2([classes(["scrolly-step-title"])])([text6(step5.title)]), div4([classes(["scrolly-step-narrative"])])(map118(function(p2) {
        return p_([text6(p2)]);
      })(step5.narrative)), pre([classes(["scrolly-step-code"])])([code_(map118(renderCodeLine)(step5.codeLines))]), (function() {
        if (step5.insight instanceof Just) {
          return div4([classes(["scrolly-step-insight"])])([text6(step5.insight.value0)]);
        }
        ;
        if (step5.insight instanceof Nothing) {
          return text6("");
        }
        ;
        throw new Error("Failed pattern match at Component.Tour.TourScrolly (line 542, column 7 - line 547, column 30): " + [step5.insight.constructor.name]);
      })()]);
    };
  };
  var render17 = function(state3) {
    return div4([classes(["tour-scrolly"])])([renderHeader(TourScrolly.value), div4([classes(["scrolly-container"])])([div4([classes(["scrolly-fixed-panel"])])([renderVisualization(state3.currentStep), renderStepIndicator(state3.currentStep)]), div4([classes(["scrolly-scroll-panel"])])(mapWithIndex2(renderStep2)(tourSteps2))])]);
  };
  var handleAction14 = function(dictMonadAff) {
    var liftAff3 = liftAff(monadAffHalogenM(dictMonadAff));
    var liftEffect11 = liftEffect(monadEffectHalogenM(dictMonadAff.MonadEffect0()));
    return function(v2) {
      if (v2 instanceof Initialize15) {
        return discard22(liftAff3(delay(100)))(function() {
          return discard22(liftEffect11(scrollToStep2(1)))(function() {
            return discard22(liftEffect11(renderVizForStep(1)))(function() {
              return bind17(liftEffect11(create8))(function(v1) {
                return bind17(liftEffect11(function __do7() {
                  var win = windowImpl();
                  var doc = document2(win)();
                  var parentNode3 = toParentNode3(doc);
                  return querySelector(".scrolly-scroll-panel")(parentNode3)();
                }))(function(maybeScrollContainer) {
                  return discard22((function() {
                    if (maybeScrollContainer instanceof Nothing) {
                      return pure113(unit);
                    }
                    ;
                    if (maybeScrollContainer instanceof Just) {
                      var callback = function(entries) {
                        return function(v22) {
                          var bestEntry = foldl2(function(acc) {
                            return function(entry) {
                              var $60 = entry.isIntersecting && entry.intersectionRatio > fromMaybe(0)(map41(function(v3) {
                                return v3.intersectionRatio;
                              })(acc));
                              if ($60) {
                                return new Just(entry);
                              }
                              ;
                              return acc;
                            };
                          })(Nothing.value)(entries);
                          if (bestEntry instanceof Nothing) {
                            return pure36(unit);
                          }
                          ;
                          if (bestEntry instanceof Just) {
                            return function __do7() {
                              var maybeStepStr = getAttribute2("data-step")(bestEntry.value0.target)();
                              var v3 = bind25(maybeStepStr)(fromString2);
                              if (v3 instanceof Nothing) {
                                return unit;
                              }
                              ;
                              if (v3 instanceof Just) {
                                return notify(v1.listener)(new StepBecameVisible2(v3.value0))();
                              }
                              ;
                              throw new Error("Failed pattern match at Component.Tour.TourScrolly (line 405, column 19 - line 407, column 81): " + [v3.constructor.name]);
                            };
                          }
                          ;
                          throw new Error("Failed pattern match at Component.Tour.TourScrolly (line 400, column 15 - line 407, column 81): " + [bestEntry.constructor.name]);
                        };
                      };
                      return bind17(liftEffect11(newIntersectionObserver(callback)(append19(assoc(root2)(maybeScrollContainer.value0))(assoc(threshold)(0.5)))))(function(obs) {
                        return discard22(modify_5(function(v22) {
                          var $65 = {};
                          for (var $66 in v22) {
                            if ({}.hasOwnProperty.call(v22, $66)) {
                              $65[$66] = v22[$66];
                            }
                            ;
                          }
                          ;
                          $65.observer = new Just(obs);
                          return $65;
                        }))(function() {
                          return discard22($$void14(subscribe3(v1.emitter)))(function() {
                            return liftEffect11(function __do7() {
                              var win = windowImpl();
                              var doc = document2(win)();
                              var parentNode3 = toParentNode3(doc);
                              var stepIds = range2(1)(length(tourSteps2));
                              return traverse_7(function(id4) {
                                return function __do8() {
                                  var maybeEl = querySelector('[data-step="' + (show30(id4) + '"]'))(parentNode3)();
                                  if (maybeEl instanceof Nothing) {
                                    return unit;
                                  }
                                  ;
                                  if (maybeEl instanceof Just) {
                                    return observe(obs)(maybeEl.value0)();
                                  }
                                  ;
                                  throw new Error("Failed pattern match at Component.Tour.TourScrolly (line 426, column 13 - line 428, column 40): " + [maybeEl.constructor.name]);
                                };
                              })(stepIds)();
                            });
                          });
                        });
                      });
                    }
                    ;
                    throw new Error("Failed pattern match at Component.Tour.TourScrolly (line 387, column 5 - line 429, column 20): " + [maybeScrollContainer.constructor.name]);
                  })())(function() {
                    return discard22(liftAff3(delay(300)))(function() {
                      return handleAction14(dictMonadAff)(MarkReady2.value);
                    });
                  });
                });
              });
            });
          });
        });
      }
      ;
      if (v2 instanceof MarkReady2) {
        return modify_5(function(v1) {
          var $73 = {};
          for (var $74 in v1) {
            if ({}.hasOwnProperty.call(v1, $74)) {
              $73[$74] = v1[$74];
            }
            ;
          }
          ;
          $73.isReady = true;
          return $73;
        });
      }
      ;
      if (v2 instanceof Finalize4) {
        return bind17(get6)(function(st) {
          if (st.observer instanceof Just) {
            return liftEffect11(function __do7() {
              var win = windowImpl();
              var doc = document2(win)();
              var parentNode3 = toParentNode3(doc);
              var stepIds = range2(1)(length(tourSteps2));
              return traverse_7(function(id4) {
                return function __do8() {
                  var maybeEl = querySelector('[data-step="' + (show30(id4) + '"]'))(parentNode3)();
                  if (maybeEl instanceof Nothing) {
                    return unit;
                  }
                  ;
                  if (maybeEl instanceof Just) {
                    return unobserve(st.observer.value0)(maybeEl.value0)();
                  }
                  ;
                  throw new Error("Failed pattern match at Component.Tour.TourScrolly (line 450, column 13 - line 452, column 42): " + [maybeEl.constructor.name]);
                };
              })(stepIds)();
            });
          }
          ;
          if (st.observer instanceof Nothing) {
            return pure113(unit);
          }
          ;
          throw new Error("Failed pattern match at Component.Tour.TourScrolly (line 440, column 5 - line 454, column 27): " + [st.observer.constructor.name]);
        });
      }
      ;
      if (v2 instanceof StepBecameVisible2) {
        return bind17(get6)(function(st) {
          return when10(st.isReady)(discard22(when10(v2.value0 !== st.currentStep)(liftEffect11(renderVizForStep(v2.value0))))(function() {
            return modify_5(function(v1) {
              var $80 = {};
              for (var $81 in v1) {
                if ({}.hasOwnProperty.call(v1, $81)) {
                  $80[$81] = v1[$81];
                }
                ;
              }
              ;
              $80.currentStep = v2.value0;
              return $80;
            });
          }));
        });
      }
      ;
      if (v2 instanceof GoToStep) {
        return discard22(liftEffect11(scrollToStep2(v2.value0)))(function() {
          return discard22(liftEffect11(renderVizForStep(v2.value0)))(function() {
            return modify_5(function(v1) {
              var $84 = {};
              for (var $85 in v1) {
                if ({}.hasOwnProperty.call(v1, $85)) {
                  $84[$85] = v1[$85];
                }
                ;
              }
              ;
              $84.currentStep = v2.value0;
              return $84;
            });
          });
        });
      }
      ;
      throw new Error("Failed pattern match at Component.Tour.TourScrolly (line 368, column 16 - line 467, column 41): " + [v2.constructor.name]);
    };
  };
  var component14 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return {
          currentStep: 1,
          observer: Nothing.value,
          isReady: false
        };
      },
      render: render17,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        handleAction: handleAction14(dictMonadAff),
        initialize: new Just(Initialize15.value),
        finalize: new Just(Finalize4.value)
      })
    });
  };

  // output/D3.Viz.Simpsons.App/foreign.js
  function formatWithCommas(str6) {
    return str6.replace(/\B(?=(\d{3})+(?!\d))/g, ",");
  }

  // output/Content.Simpsons.Illustration/index.js
  var content3 = /* @__PURE__ */ div_([/* @__PURE__ */ h2_([/* @__PURE__ */ text6("What Simpson\u2019s paradox is not")]), /* @__PURE__ */ p_([/* @__PURE__ */ em_([/* @__PURE__ */ text6("Simpson\u2019s:")]), /* @__PURE__ */ text6(" It was "), /* @__PURE__ */ a([/* @__PURE__ */ href4("http://www.jstor.org/discover/10.2307/2331677?uid=2&uid=4&sid=21102567680247"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("first mentioned")]), /* @__PURE__ */ text6(" by British statistician "), /* @__PURE__ */ a([/* @__PURE__ */ href4("http://en.wikipedia.org/wiki/Udny_Yule"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("Udny Yule")]), /* @__PURE__ */ text6(" in 1903.")]), /* @__PURE__ */ p_([/* @__PURE__ */ em_([/* @__PURE__ */ text6("A paradox:")]), /* @__PURE__ */ text6(" Simpson\u2019s paradox is just a special case of "), /* @__PURE__ */ a([/* @__PURE__ */ href4("http://en.wikipedia.org/wiki/Omitted-variable_bias"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("ommitted variable bias")]), /* @__PURE__ */ text6(". W.V. Quine would call it a "), /* @__PURE__ */ a([/* @__PURE__ */ href4("http://en.wikipedia.org/wiki/Paradox#Quine.27s_classification_of_paradoxes"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("veridical paradox")]), /* @__PURE__ */ text6(".")]), /* @__PURE__ */ p_([/* @__PURE__ */ em_([/* @__PURE__ */ text6("Every ommitted variable problem:")]), /* @__PURE__ */ text6(" Women earn only 77 percent of what men do, but according to Cornell economists "), /* @__PURE__ */ a([/* @__PURE__ */ href4("http://digitalcommons.ilr.cornell.edu/cgi/viewcontent.cgi?article=1248&context=ilrreview"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("Francine Blau and Lawrence Kahn")]), /* @__PURE__ */ text6(", accounting for work experience, education, industry, and unionization shrinks the gap to 91 percent (p. 52). So, discrimination matters less than the "), /* @__PURE__ */ code_([/* @__PURE__ */ text6("77 percent")]), /* @__PURE__ */ text6(" stat would lead you to believe. But is this Simpson\u2019s paradox? No, because the correction isn\u2019t large enough for the effect of gender to change sign.")]), /* @__PURE__ */ h2_([/* @__PURE__ */ text6("Why it matters")]), /* @__PURE__ */ p_([/* @__PURE__ */ text6("Simpson\u2019s paradox usually fools us on tests of performance. In a "), /* @__PURE__ */ a([/* @__PURE__ */ href4("http://en.wikipedia.org/wiki/Simpson's_paradox#Kidney_stone_treatment"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("famous example")]), /* @__PURE__ */ text6(", researchers concluded that a newer treatment for kidney stones was more effective than traditional surgery, but it was "), /* @__PURE__ */ a([/* @__PURE__ */ href4("http://www.bmj.com/content/309/6967/1480"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("later revealed")]), /* @__PURE__ */ text6(" that the newer treatment was more often being used on small kidney stones. More recently, "), /* @__PURE__ */ a([/* @__PURE__ */ href4("http://educationnext.org/are-wisconsin-schools-better-than-those-in-texas/"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("on elementary school tests")]), /* @__PURE__ */ text6(", minority students in Texas outperform their peers in Wisconsin, but Texas has so many minority students that Wisconsin beats it in state rankings. It would be a shame if Simpson\u2019s paradox led doctors to prescribe ineffective treatments or Texas schools to waste money copying Wisconsin.")])]);

  // output/Content.Simpsons.MoreInfo/index.js
  var content4 = /* @__PURE__ */ div_([/* @__PURE__ */ h2_([/* @__PURE__ */ text6("More Information (original credits from "), /* @__PURE__ */ a([/* @__PURE__ */ href4("http://setosa.io/simpsons"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("setosa.io/simpsons")]), /* @__PURE__ */ text6(" site)")]), /* @__PURE__ */ ul_([/* @__PURE__ */ li_([/* @__PURE__ */ a([/* @__PURE__ */ href4("http://en.wikipedia.org/wiki/Simpson's_paradox"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("Wikipedia")])]), /* @__PURE__ */ li_([/* @__PURE__ */ text6("This project drew on the Simpson\u2019s Paradox Java Applet by Dr. Kady Schneiter at Utah State University, who has a "), /* @__PURE__ */ a([/* @__PURE__ */ href4("http://www.math.usu.edu/~schneit/CTIS/"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("bunch")]), /* @__PURE__ */ text6(" of neat illustrative Java applets.")]), /* @__PURE__ */ li_([/* @__PURE__ */ a([/* @__PURE__ */ href4("http://plato.stanford.edu/entries/paradox-simpson/"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("Stanford Encyclopedia of Philosophy")])]), /* @__PURE__ */ li_([/* @__PURE__ */ a([/* @__PURE__ */ href4("http://www.stat.osu.edu/~biostat/newsletters/volume2_2/article_vol2_2.html"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("Smoking Example")])]), /* @__PURE__ */ li_([/* @__PURE__ */ a([/* @__PURE__ */ href4("https://www.jstor.org/stable/1739581"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("Bickel et al. (1975) - \u201CSex Bias in Graduate Admissions: Data from Berkeley\u201D")]), /* @__PURE__ */ text6(" (Science, Vol. 187) "), /* @__PURE__ */ em_([/* @__PURE__ */ text6("(link updated)")])]), /* @__PURE__ */ li_([/* @__PURE__ */ a([/* @__PURE__ */ href4("http://www.bmj.com/content/309/6967/1480"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("Confounding and Simpson\u2019s Paradox")]), /* @__PURE__ */ text6(" from the British Medical Journal")])]), /* @__PURE__ */ h2_([/* @__PURE__ */ text6("Makers")]), /* @__PURE__ */ p_([/* @__PURE__ */ text6("A project of the "), /* @__PURE__ */ a([/* @__PURE__ */ href4("http://vudlab.com/#/"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("Visualizing Urban Data ideaLab")]), /* @__PURE__ */ text6(" at UC Berkeley. Created in "), /* @__PURE__ */ a([/* @__PURE__ */ href4("http://d3js.org/"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("d3.js")]), /* @__PURE__ */ text6(" and "), /* @__PURE__ */ a([/* @__PURE__ */ href4("http://angularjs.org/"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("AngularJS")]), /* @__PURE__ */ text6(" by "), /* @__PURE__ */ a([/* @__PURE__ */ href4("https://twitter.com/LewisLehe"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("Lewis Lehe")]), /* @__PURE__ */ text6(" and "), /* @__PURE__ */ a([/* @__PURE__ */ href4("http://vctr.me/"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("Victor Powell")]), /* @__PURE__ */ text6(".")]), /* @__PURE__ */ p_([/* @__PURE__ */ text6("Lewis Lehe is a PhD student in Transportation Engineering at UC Berkeley, and Victor Powell is a freelance developer, JavaScript instructor and yinzer.")])]);

  // output/Content.Simpsons.ProperPooling/index.js
  var content5 = /* @__PURE__ */ div_([/* @__PURE__ */ h2_([/* @__PURE__ */ text6("Proper Pooling")]), /* @__PURE__ */ p_([/* @__PURE__ */ text6("By \u201Cproperly pooled,\u201D the investigators at Berkeley meant \u201Cbroken down by department.\u201D Men more often applied to science departments, while women inclined towards humanities. Science departments require special technical skills but accept a large percentage of qualified applicants. In contrast, humanities departments only require a standard undergrad curriculum but have fewer slots.")]), /* @__PURE__ */ p_([/* @__PURE__ */ text6("The authors concluded that any sexism occurred before Berkeley ever saw the applications:")]), /* @__PURE__ */ blockquote_([/* @__PURE__ */ p_([/* @__PURE__ */ text6("Women are shunted by their socialization and education toward fields of graduate study that are generally more crowded, less > productive of completed degrees, and less well funded, and that frequently offer poorer professional employment prospects.")]), /* @__PURE__ */ ul_([/* @__PURE__ */ li_([/* @__PURE__ */ text6("Bickel et al. (1975), p. 403")])])]), /* @__PURE__ */ p_([/* @__PURE__ */ text6("To the right are data on the six largest departments, but the names have been changed to protect the innocent.")])]);

  // output/D3.Viz.Simpsons.Pie/index.js
  var append20 = /* @__PURE__ */ append(semigroupArray);
  var pieWithSort = function(getValue2) {
    return function(sortFn) {
      return function(items2) {
        var total = foldl2(function(acc) {
          return function(item) {
            return acc + getValue2(item);
          };
        })(0)(items2);
        var tau3 = 2 * pi;
        var sorted = (function() {
          if (sortFn instanceof Nothing) {
            return items2;
          }
          ;
          if (sortFn instanceof Just) {
            return sortBy(function(a3) {
              return function(b2) {
                return sortFn.value0(getValue2(a3))(getValue2(b2));
              };
            })(items2);
          }
          ;
          throw new Error("Failed pattern match at D3.Viz.Simpsons.Pie (line 55, column 14 - line 57, column 83): " + [sortFn.constructor.name]);
        })();
        var accumulate = function(acc) {
          return function(item) {
            var value18 = getValue2(item);
            var proportion = (function() {
              var $7 = total > 0;
              if ($7) {
                return value18 / total;
              }
              ;
              return 0;
            })();
            var arcAngle = proportion * tau3;
            var slice3 = {
              datum: item,
              value: value18,
              startAngle: acc.angle,
              endAngle: acc.angle + arcAngle,
              padAngle: 0
            };
            return {
              angle: acc.angle + arcAngle,
              slices: append20(acc.slices)([slice3])
            };
          };
        };
        var result = foldl2(accumulate)({
          angle: 0,
          slices: []
        })(sorted);
        return result.slices;
      };
    };
  };
  var pie = function(getValue2) {
    return function(items2) {
      return pieWithSort(getValue2)(Nothing.value)(items2);
    };
  };

  // output/D3.Viz.Simpsons.Types/index.js
  var Male = /* @__PURE__ */ (function() {
    function Male2() {
    }
    ;
    Male2.value = new Male2();
    return Male2;
  })();
  var Female = /* @__PURE__ */ (function() {
    function Female2() {
    }
    ;
    Female2.value = new Female2();
    return Female2;
  })();
  var eqGender = {
    eq: function(x7) {
      return function(y7) {
        if (x7 instanceof Male && y7 instanceof Male) {
          return true;
        }
        ;
        if (x7 instanceof Female && y7 instanceof Female) {
          return true;
        }
        ;
        return false;
      };
    }
  };
  var ordGender = {
    compare: function(x7) {
      return function(y7) {
        if (x7 instanceof Male && y7 instanceof Male) {
          return EQ.value;
        }
        ;
        if (x7 instanceof Male) {
          return LT.value;
        }
        ;
        if (y7 instanceof Male) {
          return GT.value;
        }
        ;
        if (x7 instanceof Female && y7 instanceof Female) {
          return EQ.value;
        }
        ;
        throw new Error("Failed pattern match at D3.Viz.Simpsons.Types (line 0, column 0 - line 0, column 0): " + [x7.constructor.name, y7.constructor.name]);
      };
    },
    Eq0: function() {
      return eqGender;
    }
  };
  var womenByDept = [{
    accepted: 9,
    applied: 2
  }, {
    accepted: 2,
    applied: 1
  }, {
    accepted: 18,
    applied: 35
  }, {
    accepted: 13,
    applied: 23
  }, {
    accepted: 9,
    applied: 28
  }, {
    accepted: 2,
    applied: 29
  }];
  var red = "#E74C3C";
  var rates = {
    male: {
      hard: 0.256,
      easy: 0.624
    },
    female: {
      hard: 0.265,
      easy: 0.797
    }
  };
  var purple = "#9b59b6";
  var population = {
    male: 2691,
    female: 1835
  };
  var overallAcceptanceRates = {
    male: 0.44,
    female: 0.35
  };
  var menByDept = [{
    accepted: 55,
    applied: 36
  }, {
    accepted: 33,
    applied: 21
  }, {
    accepted: 12,
    applied: 20
  }, {
    accepted: 14,
    applied: 30
  }, {
    accepted: 5,
    applied: 13
  }, {
    accepted: 2,
    applied: 25
  }];
  var isParadox = function(combined) {
    return combined.male > combined.female;
  };
  var green = "#1abc9c";
  var gray = "#bdc3c7";
  var defaultProportions = {
    easyFemale: 0.6,
    easyMale: 0.4
  };
  var calculateDepartments = function(props) {
    return {
      easy: {
        male: {
          applied: toNumber(population.male) * props.easyMale,
          admitted: toNumber(population.male) * props.easyMale * rates.male.easy
        },
        female: {
          applied: toNumber(population.female) * props.easyFemale,
          admitted: toNumber(population.female) * props.easyFemale * rates.female.easy
        }
      },
      hard: {
        male: {
          applied: toNumber(population.male) * (1 - props.easyMale),
          admitted: toNumber(population.male) * (1 - props.easyMale) * rates.male.hard
        },
        female: {
          applied: toNumber(population.female) * (1 - props.easyFemale),
          admitted: toNumber(population.female) * (1 - props.easyFemale) * rates.female.hard
        }
      }
    };
  };
  var calculateCombined = function(depts) {
    return {
      male: (depts.easy.male.admitted + depts.hard.male.admitted) / toNumber(population.male),
      female: (depts.easy.female.admitted + depts.hard.female.admitted) / toNumber(population.female)
    };
  };
  var deriveData = function(props) {
    var depts = calculateDepartments(props);
    var comb = calculateCombined(depts);
    return {
      departments: depts,
      combined: comb,
      isParadox: isParadox(comb)
    };
  };
  var blue = "#3498DB";
  var black2 = "#2C3E50";

  // output/Hylograph.Internal.Capabilities.Selection/index.js
  var select5 = function(dict) {
    return dict.select;
  };
  var renderTree2 = function(dict) {
    return dict.renderTree;
  };
  var clear3 = function(dict) {
    return dict.clear;
  };

  // node_modules/d3-shape/src/constant.js
  function constant_default3(x7) {
    return function constant2() {
      return x7;
    };
  }

  // node_modules/d3-shape/src/math.js
  var abs3 = Math.abs;
  var atan23 = Math.atan2;
  var cos3 = Math.cos;
  var max10 = Math.max;
  var min12 = Math.min;
  var sin3 = Math.sin;
  var sqrt4 = Math.sqrt;
  var epsilon = 1e-12;
  var pi3 = Math.PI;
  var halfPi = pi3 / 2;
  var tau = 2 * pi3;
  function acos3(x7) {
    return x7 > 1 ? 0 : x7 < -1 ? pi3 : Math.acos(x7);
  }
  function asin3(x7) {
    return x7 >= 1 ? halfPi : x7 <= -1 ? -halfPi : Math.asin(x7);
  }

  // node_modules/d3-path/src/path.js
  var pi4 = Math.PI;
  var tau2 = 2 * pi4;
  var epsilon2 = 1e-6;
  var tauEpsilon = tau2 - epsilon2;
  function append21(strings) {
    this._ += strings[0];
    for (let i2 = 1, n = strings.length; i2 < n; ++i2) {
      this._ += arguments[i2] + strings[i2];
    }
  }
  function appendRound(digits) {
    let d3 = Math.floor(digits);
    if (!(d3 >= 0)) throw new Error(`invalid digits: ${digits}`);
    if (d3 > 15) return append21;
    const k = 10 ** d3;
    return function(strings) {
      this._ += strings[0];
      for (let i2 = 1, n = strings.length; i2 < n; ++i2) {
        this._ += Math.round(arguments[i2] * k) / k + strings[i2];
      }
    };
  }
  var Path3 = class {
    constructor(digits) {
      this._x0 = this._y0 = // start of current subpath
      this._x1 = this._y1 = null;
      this._ = "";
      this._append = digits == null ? append21 : appendRound(digits);
    }
    moveTo(x7, y7) {
      this._append`M${this._x0 = this._x1 = +x7},${this._y0 = this._y1 = +y7}`;
    }
    closePath() {
      if (this._x1 !== null) {
        this._x1 = this._x0, this._y1 = this._y0;
        this._append`Z`;
      }
    }
    lineTo(x7, y7) {
      this._append`L${this._x1 = +x7},${this._y1 = +y7}`;
    }
    quadraticCurveTo(x13, y13, x7, y7) {
      this._append`Q${+x13},${+y13},${this._x1 = +x7},${this._y1 = +y7}`;
    }
    bezierCurveTo(x13, y13, x24, y24, x7, y7) {
      this._append`C${+x13},${+y13},${+x24},${+y24},${this._x1 = +x7},${this._y1 = +y7}`;
    }
    arcTo(x13, y13, x24, y24, r8) {
      x13 = +x13, y13 = +y13, x24 = +x24, y24 = +y24, r8 = +r8;
      if (r8 < 0) throw new Error(`negative radius: ${r8}`);
      let x0 = this._x1, y0 = this._y1, x21 = x24 - x13, y21 = y24 - y13, x01 = x0 - x13, y01 = y0 - y13, l01_2 = x01 * x01 + y01 * y01;
      if (this._x1 === null) {
        this._append`M${this._x1 = x13},${this._y1 = y13}`;
      } else if (!(l01_2 > epsilon2)) ;
      else if (!(Math.abs(y01 * x21 - y21 * x01) > epsilon2) || !r8) {
        this._append`L${this._x1 = x13},${this._y1 = y13}`;
      } else {
        let x20 = x24 - x0, y20 = y24 - y0, l21_2 = x21 * x21 + y21 * y21, l20_2 = x20 * x20 + y20 * y20, l21 = Math.sqrt(l21_2), l01 = Math.sqrt(l01_2), l2 = r8 * Math.tan((pi4 - Math.acos((l21_2 + l01_2 - l20_2) / (2 * l21 * l01))) / 2), t01 = l2 / l01, t21 = l2 / l21;
        if (Math.abs(t01 - 1) > epsilon2) {
          this._append`L${x13 + t01 * x01},${y13 + t01 * y01}`;
        }
        this._append`A${r8},${r8},0,0,${+(y01 * x20 > x01 * y20)},${this._x1 = x13 + t21 * x21},${this._y1 = y13 + t21 * y21}`;
      }
    }
    arc(x7, y7, r8, a0, a1, ccw) {
      x7 = +x7, y7 = +y7, r8 = +r8, ccw = !!ccw;
      if (r8 < 0) throw new Error(`negative radius: ${r8}`);
      let dx = r8 * Math.cos(a0), dy = r8 * Math.sin(a0), x0 = x7 + dx, y0 = y7 + dy, cw = 1 ^ ccw, da = ccw ? a0 - a1 : a1 - a0;
      if (this._x1 === null) {
        this._append`M${x0},${y0}`;
      } else if (Math.abs(this._x1 - x0) > epsilon2 || Math.abs(this._y1 - y0) > epsilon2) {
        this._append`L${x0},${y0}`;
      }
      if (!r8) return;
      if (da < 0) da = da % tau2 + tau2;
      if (da > tauEpsilon) {
        this._append`A${r8},${r8},0,1,${cw},${x7 - dx},${y7 - dy}A${r8},${r8},0,1,${cw},${this._x1 = x0},${this._y1 = y0}`;
      } else if (da > epsilon2) {
        this._append`A${r8},${r8},0,${+(da >= pi4)},${cw},${this._x1 = x7 + r8 * Math.cos(a1)},${this._y1 = y7 + r8 * Math.sin(a1)}`;
      }
    }
    rect(x7, y7, w, h7) {
      this._append`M${this._x0 = this._x1 = +x7},${this._y0 = this._y1 = +y7}h${w = +w}v${+h7}h${-w}Z`;
    }
    toString() {
      return this._;
    }
  };
  function path3() {
    return new Path3();
  }
  path3.prototype = Path3.prototype;

  // node_modules/d3-shape/src/path.js
  function withPath(shape2) {
    let digits = 3;
    shape2.digits = function(_) {
      if (!arguments.length) return digits;
      if (_ == null) {
        digits = null;
      } else {
        const d3 = Math.floor(_);
        if (!(d3 >= 0)) throw new RangeError(`invalid digits: ${_}`);
        digits = d3;
      }
      return shape2;
    };
    return () => new Path3(digits);
  }

  // node_modules/d3-shape/src/arc.js
  function arcInnerRadius(d3) {
    return d3.innerRadius;
  }
  function arcOuterRadius(d3) {
    return d3.outerRadius;
  }
  function arcStartAngle(d3) {
    return d3.startAngle;
  }
  function arcEndAngle(d3) {
    return d3.endAngle;
  }
  function arcPadAngle(d3) {
    return d3 && d3.padAngle;
  }
  function intersect2(x0, y0, x13, y13, x24, y24, x32, y32) {
    var x10 = x13 - x0, y10 = y13 - y0, x322 = x32 - x24, y322 = y32 - y24, t2 = y322 * x10 - x322 * y10;
    if (t2 * t2 < epsilon) return;
    t2 = (x322 * (y0 - y24) - y322 * (x0 - x24)) / t2;
    return [x0 + t2 * x10, y0 + t2 * y10];
  }
  function cornerTangents(x0, y0, x13, y13, r1, rc, cw) {
    var x01 = x0 - x13, y01 = y0 - y13, lo = (cw ? rc : -rc) / sqrt4(x01 * x01 + y01 * y01), ox = lo * y01, oy = -lo * x01, x11 = x0 + ox, y11 = y0 + oy, x10 = x13 + ox, y10 = y13 + oy, x00 = (x11 + x10) / 2, y00 = (y11 + y10) / 2, dx = x10 - x11, dy = y10 - y11, d22 = dx * dx + dy * dy, r8 = r1 - rc, D = x11 * y10 - x10 * y11, d3 = (dy < 0 ? -1 : 1) * sqrt4(max10(0, r8 * r8 * d22 - D * D)), cx0 = (D * dy - dx * d3) / d22, cy0 = (-D * dx - dy * d3) / d22, cx1 = (D * dy + dx * d3) / d22, cy1 = (-D * dx + dy * d3) / d22, dx0 = cx0 - x00, dy0 = cy0 - y00, dx1 = cx1 - x00, dy1 = cy1 - y00;
    if (dx0 * dx0 + dy0 * dy0 > dx1 * dx1 + dy1 * dy1) cx0 = cx1, cy0 = cy1;
    return {
      cx: cx0,
      cy: cy0,
      x01: -ox,
      y01: -oy,
      x11: cx0 * (r1 / r8 - 1),
      y11: cy0 * (r1 / r8 - 1)
    };
  }
  function arc_default() {
    var innerRadius = arcInnerRadius, outerRadius = arcOuterRadius, cornerRadius = constant_default3(0), padRadius = null, startAngle = arcStartAngle, endAngle = arcEndAngle, padAngle = arcPadAngle, context = null, path8 = withPath(arc);
    function arc() {
      var buffer, r8, r0 = +innerRadius.apply(this, arguments), r1 = +outerRadius.apply(this, arguments), a0 = startAngle.apply(this, arguments) - halfPi, a1 = endAngle.apply(this, arguments) - halfPi, da = abs3(a1 - a0), cw = a1 > a0;
      if (!context) context = buffer = path8();
      if (r1 < r0) r8 = r1, r1 = r0, r0 = r8;
      if (!(r1 > epsilon)) context.moveTo(0, 0);
      else if (da > tau - epsilon) {
        context.moveTo(r1 * cos3(a0), r1 * sin3(a0));
        context.arc(0, 0, r1, a0, a1, !cw);
        if (r0 > epsilon) {
          context.moveTo(r0 * cos3(a1), r0 * sin3(a1));
          context.arc(0, 0, r0, a1, a0, cw);
        }
      } else {
        var a01 = a0, a11 = a1, a00 = a0, a10 = a1, da0 = da, da1 = da, ap2 = padAngle.apply(this, arguments) / 2, rp2 = ap2 > epsilon && (padRadius ? +padRadius.apply(this, arguments) : sqrt4(r0 * r0 + r1 * r1)), rc = min12(abs3(r1 - r0) / 2, +cornerRadius.apply(this, arguments)), rc0 = rc, rc1 = rc, t02, t12;
        if (rp2 > epsilon) {
          var p0 = asin3(rp2 / r0 * sin3(ap2)), p1 = asin3(rp2 / r1 * sin3(ap2));
          if ((da0 -= p0 * 2) > epsilon) p0 *= cw ? 1 : -1, a00 += p0, a10 -= p0;
          else da0 = 0, a00 = a10 = (a0 + a1) / 2;
          if ((da1 -= p1 * 2) > epsilon) p1 *= cw ? 1 : -1, a01 += p1, a11 -= p1;
          else da1 = 0, a01 = a11 = (a0 + a1) / 2;
        }
        var x01 = r1 * cos3(a01), y01 = r1 * sin3(a01), x10 = r0 * cos3(a10), y10 = r0 * sin3(a10);
        if (rc > epsilon) {
          var x11 = r1 * cos3(a11), y11 = r1 * sin3(a11), x00 = r0 * cos3(a00), y00 = r0 * sin3(a00), oc;
          if (da < pi3) {
            if (oc = intersect2(x01, y01, x00, y00, x11, y11, x10, y10)) {
              var ax = x01 - oc[0], ay = y01 - oc[1], bx = x11 - oc[0], by = y11 - oc[1], kc = 1 / sin3(acos3((ax * bx + ay * by) / (sqrt4(ax * ax + ay * ay) * sqrt4(bx * bx + by * by))) / 2), lc = sqrt4(oc[0] * oc[0] + oc[1] * oc[1]);
              rc0 = min12(rc, (r0 - lc) / (kc - 1));
              rc1 = min12(rc, (r1 - lc) / (kc + 1));
            } else {
              rc0 = rc1 = 0;
            }
          }
        }
        if (!(da1 > epsilon)) context.moveTo(x01, y01);
        else if (rc1 > epsilon) {
          t02 = cornerTangents(x00, y00, x01, y01, r1, rc1, cw);
          t12 = cornerTangents(x11, y11, x10, y10, r1, rc1, cw);
          context.moveTo(t02.cx + t02.x01, t02.cy + t02.y01);
          if (rc1 < rc) context.arc(t02.cx, t02.cy, rc1, atan23(t02.y01, t02.x01), atan23(t12.y01, t12.x01), !cw);
          else {
            context.arc(t02.cx, t02.cy, rc1, atan23(t02.y01, t02.x01), atan23(t02.y11, t02.x11), !cw);
            context.arc(0, 0, r1, atan23(t02.cy + t02.y11, t02.cx + t02.x11), atan23(t12.cy + t12.y11, t12.cx + t12.x11), !cw);
            context.arc(t12.cx, t12.cy, rc1, atan23(t12.y11, t12.x11), atan23(t12.y01, t12.x01), !cw);
          }
        } else context.moveTo(x01, y01), context.arc(0, 0, r1, a01, a11, !cw);
        if (!(r0 > epsilon) || !(da0 > epsilon)) context.lineTo(x10, y10);
        else if (rc0 > epsilon) {
          t02 = cornerTangents(x10, y10, x11, y11, r0, -rc0, cw);
          t12 = cornerTangents(x01, y01, x00, y00, r0, -rc0, cw);
          context.lineTo(t02.cx + t02.x01, t02.cy + t02.y01);
          if (rc0 < rc) context.arc(t02.cx, t02.cy, rc0, atan23(t02.y01, t02.x01), atan23(t12.y01, t12.x01), !cw);
          else {
            context.arc(t02.cx, t02.cy, rc0, atan23(t02.y01, t02.x01), atan23(t02.y11, t02.x11), !cw);
            context.arc(0, 0, r0, atan23(t02.cy + t02.y11, t02.cx + t02.x11), atan23(t12.cy + t12.y11, t12.cx + t12.x11), cw);
            context.arc(t12.cx, t12.cy, rc0, atan23(t12.y11, t12.x11), atan23(t12.y01, t12.x01), !cw);
          }
        } else context.arc(0, 0, r0, a10, a00, cw);
      }
      context.closePath();
      if (buffer) return context = null, buffer + "" || null;
    }
    arc.centroid = function() {
      var r8 = (+innerRadius.apply(this, arguments) + +outerRadius.apply(this, arguments)) / 2, a3 = (+startAngle.apply(this, arguments) + +endAngle.apply(this, arguments)) / 2 - pi3 / 2;
      return [cos3(a3) * r8, sin3(a3) * r8];
    };
    arc.innerRadius = function(_) {
      return arguments.length ? (innerRadius = typeof _ === "function" ? _ : constant_default3(+_), arc) : innerRadius;
    };
    arc.outerRadius = function(_) {
      return arguments.length ? (outerRadius = typeof _ === "function" ? _ : constant_default3(+_), arc) : outerRadius;
    };
    arc.cornerRadius = function(_) {
      return arguments.length ? (cornerRadius = typeof _ === "function" ? _ : constant_default3(+_), arc) : cornerRadius;
    };
    arc.padRadius = function(_) {
      return arguments.length ? (padRadius = _ == null ? null : typeof _ === "function" ? _ : constant_default3(+_), arc) : padRadius;
    };
    arc.startAngle = function(_) {
      return arguments.length ? (startAngle = typeof _ === "function" ? _ : constant_default3(+_), arc) : startAngle;
    };
    arc.endAngle = function(_) {
      return arguments.length ? (endAngle = typeof _ === "function" ? _ : constant_default3(+_), arc) : endAngle;
    };
    arc.padAngle = function(_) {
      return arguments.length ? (padAngle = typeof _ === "function" ? _ : constant_default3(+_), arc) : padAngle;
    };
    arc.context = function(_) {
      return arguments.length ? (context = _ == null ? null : _, arc) : context;
    };
    return arc;
  }

  // output/Hylograph.Internal.FFI/foreign.js
  function arcGenerator_() {
    return arc_default();
  }
  function arcPath_(generator) {
    return (group4) => generator(group4);
  }
  function setArcInnerRadius_(generator) {
    return (radius) => {
      generator.innerRadius(radius);
      return generator;
    };
  }
  function setArcOuterRadius_(generator) {
    return (radius) => {
      generator.outerRadius(radius);
      return generator;
    };
  }

  // output/Hylograph.Interpreter.D3/index.js
  var select6 = /* @__PURE__ */ select3(monadEffectEffect);
  var selectElement3 = /* @__PURE__ */ selectElement2(monadEffectEffect);
  var selectAll2 = /* @__PURE__ */ selectAll(monadEffectEffect);
  var selectAllWithData2 = /* @__PURE__ */ selectAllWithData(monadEffectEffect);
  var renderData2 = /* @__PURE__ */ renderData(monadEffectEffect);
  var appendData2 = /* @__PURE__ */ appendData(monadEffectEffect);
  var joinData3 = /* @__PURE__ */ joinData2(monadEffectEffect);
  var joinDataWithKey2 = /* @__PURE__ */ joinDataWithKey(monadEffectEffect);
  var append22 = /* @__PURE__ */ append6(monadEffectEffect);
  var setAttrs2 = /* @__PURE__ */ setAttrs(monadEffectEffect);
  var setAttrsExit2 = /* @__PURE__ */ setAttrsExit(monadEffectEffect);
  var remove3 = /* @__PURE__ */ remove(monadEffectEffect);
  var clear4 = /* @__PURE__ */ clear2(monadEffectEffect);
  var merge2 = /* @__PURE__ */ merge(monadEffectEffect);
  var appendChild3 = /* @__PURE__ */ appendChild2(monadEffectEffect);
  var appendChildInheriting2 = /* @__PURE__ */ appendChildInheriting(monadEffectEffect);
  var map42 = /* @__PURE__ */ map(functorMap);
  var D3v2Selection_ = function(x7) {
    return x7;
  };
  var monadEffectD3v2M = monadEffectEffect;
  var monadD3v2M = monadEffect;
  var selectionMD3v2Selection_D = {
    select: function(selector) {
      return function __do7() {
        var sel = select6(selector)();
        return sel;
      };
    },
    selectElement: function(element4) {
      return function __do7() {
        var sel = selectElement3(element4)();
        return sel;
      };
    },
    selectAll: function(selector) {
      return function(v2) {
        return function __do7() {
          var result = selectAll2(selector)(v2)();
          return result;
        };
      };
    },
    openSelection: function(v2) {
      return function(selector) {
        return function __do7() {
          var result = selectAll2(selector)(v2)();
          return result;
        };
      };
    },
    selectAllWithData: function(selector) {
      return function(v2) {
        return function __do7() {
          var result = selectAllWithData2(selector)(v2)();
          return result;
        };
      };
    },
    renderData: function(dictFoldable) {
      var renderData1 = renderData2(dictFoldable);
      return function(dictOrd) {
        var renderData22 = renderData1(dictOrd);
        return function(elemType) {
          return function(foldableData) {
            return function(selector) {
              return function(v2) {
                return function(enterAttrs) {
                  return function(updateAttrs) {
                    return function(exitAttrs) {
                      return function __do7() {
                        var result = renderData22(elemType)(foldableData)(selector)(v2)(enterAttrs)(updateAttrs)(exitAttrs)();
                        return result;
                      };
                    };
                  };
                };
              };
            };
          };
        };
      };
    },
    appendData: function(dictFoldable) {
      var appendData1 = appendData2(dictFoldable);
      return function(elemType) {
        return function(foldableData) {
          return function(attrs) {
            return function(v2) {
              return function __do7() {
                var result = appendData1(elemType)(foldableData)(attrs)(v2)();
                return result;
              };
            };
          };
        };
      };
    },
    joinData: function(dictFoldable) {
      var joinData12 = joinData3(dictFoldable);
      return function(dictOrd) {
        var joinData22 = joinData12(dictOrd);
        return function(foldableData) {
          return function(selector) {
            return function(v2) {
              return function __do7() {
                var v1 = joinData22(foldableData)(selector)(v2)();
                return new JoinResult({
                  enter: v1.value0.enter,
                  update: v1.value0.update,
                  exit: v1.value0.exit
                });
              };
            };
          };
        };
      };
    },
    joinDataWithKey: function(dictFoldable) {
      var joinDataWithKey12 = joinDataWithKey2(dictFoldable);
      return function(dictOrd) {
        var joinDataWithKey22 = joinDataWithKey12(dictOrd.Eq0());
        return function(foldableData) {
          return function(keyFn) {
            return function(selector) {
              return function(v2) {
                return function __do7() {
                  var v1 = joinDataWithKey22(foldableData)(keyFn)(selector)(v2)();
                  return new JoinResult({
                    enter: v1.value0.enter,
                    update: v1.value0.update,
                    exit: v1.value0.exit
                  });
                };
              };
            };
          };
        };
      };
    },
    updateJoin: function(dictFoldable) {
      var joinDataWithKey12 = joinDataWithKey2(dictFoldable);
      return function(dictOrd) {
        var joinDataWithKey22 = joinDataWithKey12(dictOrd.Eq0());
        return function(v2) {
          return function(_elemType) {
            return function(foldableData) {
              return function(keyFn) {
                return function(selector) {
                  return function __do7() {
                    var v1 = joinDataWithKey22(foldableData)(keyFn)(selector)(v2)();
                    return new JoinResult({
                      enter: v1.value0.enter,
                      update: v1.value0.update,
                      exit: v1.value0.exit
                    });
                  };
                };
              };
            };
          };
        };
      };
    },
    append: function(elemType) {
      return function(attrs) {
        return function(v2) {
          return function __do7() {
            var result = append22(elemType)(attrs)(v2)();
            return result;
          };
        };
      };
    },
    setAttrs: function(attrs) {
      return function(v2) {
        return function __do7() {
          var result = setAttrs2(attrs)(v2)();
          return result;
        };
      };
    },
    setAttrsExit: function(attrs) {
      return function(v2) {
        return function __do7() {
          var result = setAttrsExit2(attrs)(v2)();
          return result;
        };
      };
    },
    remove: function(v2) {
      return remove3(v2);
    },
    clear: function(selector) {
      return clear4(selector);
    },
    merge: function(v2) {
      return function(v1) {
        return function __do7() {
          var result = merge2(v2)(v1)();
          return result;
        };
      };
    },
    appendChild: function(elemType) {
      return function(attrs) {
        return function(v2) {
          return function __do7() {
            var result = appendChild3(elemType)(attrs)(v2)();
            return result;
          };
        };
      };
    },
    appendChildInheriting: function(elemType) {
      return function(attrs) {
        return function(v2) {
          return function __do7() {
            var result = appendChildInheriting2(elemType)(attrs)(v2)();
            return result;
          };
        };
      };
    },
    on: function(behavior) {
      return function(v2) {
        return function __do7() {
          var result = on2(behavior)(v2)();
          return result;
        };
      };
    },
    renderTree: function(dictOrd) {
      var renderTree7 = renderTree(dictOrd);
      return function(v2) {
        return function(tree) {
          return function __do7() {
            var selectionsMap = renderTree7(v2)(tree)();
            return map42(D3v2Selection_)(selectionsMap);
          };
        };
      };
    },
    Monad0: function() {
      return monadD3v2M;
    }
  };
  var bindD3v2M = bindEffect;
  var applicativeD3v2M = applicativeEffect;
  var runD3v2M = function(v2) {
    return v2;
  };

  // output/D3.Viz.Simpsons.DataTable/index.js
  var bind18 = /* @__PURE__ */ bind(bindEffect);
  var mapFlipped9 = /* @__PURE__ */ mapFlipped(functorEffect);
  var for_8 = /* @__PURE__ */ for_(applicativeEffect);
  var for_13 = /* @__PURE__ */ for_8(foldableMaybe);
  var width11 = /* @__PURE__ */ width(toAttributeValueNumber);
  var num2 = /* @__PURE__ */ num(numExprEvalD);
  var height11 = /* @__PURE__ */ height(toAttributeValueNumber);
  var attr5 = /* @__PURE__ */ attr(toAttributeValueString);
  var text8 = /* @__PURE__ */ text(stringExprEvalD);
  var fill4 = /* @__PURE__ */ fill(toAttributeValueString);
  var stroke4 = /* @__PURE__ */ stroke(toAttributeValueString);
  var strokeWidth4 = /* @__PURE__ */ strokeWidth(toAttributeValueNumber);
  var bind19 = /* @__PURE__ */ bind(bindD3v2M);
  var select7 = /* @__PURE__ */ select5(selectionMD3v2Selection_D);
  var renderTree3 = /* @__PURE__ */ renderTree2(selectionMD3v2Selection_D)(ordUnit);
  var pure37 = /* @__PURE__ */ pure(applicativeD3v2M);
  var path4 = /* @__PURE__ */ path(toAttributeValueString);
  var x6 = /* @__PURE__ */ x(toAttributeValueNumber);
  var y6 = /* @__PURE__ */ y(toAttributeValueNumber);
  var textAnchor4 = /* @__PURE__ */ textAnchor(toAttributeValueString);
  var fontSize3 = /* @__PURE__ */ fontSize(toAttributeValueNumber);
  var textContent3 = /* @__PURE__ */ textContent(toAttributeValueString);
  var show31 = /* @__PURE__ */ show(showInt);
  var transform3 = /* @__PURE__ */ transform(toAttributeValueString);
  var show113 = /* @__PURE__ */ show(showNumber);
  var append110 = /* @__PURE__ */ append(semigroupArray);
  var cx4 = /* @__PURE__ */ cx(toAttributeValueNumber);
  var cy4 = /* @__PURE__ */ cy(toAttributeValueNumber);
  var r4 = /* @__PURE__ */ r(toAttributeValueNumber);
  var attr1 = /* @__PURE__ */ attr(toAttributeValueNumber);
  var map43 = /* @__PURE__ */ map(functorArray);
  var discard7 = /* @__PURE__ */ discard(discardUnit);
  var for_24 = /* @__PURE__ */ for_8(foldableArray);
  var for_32 = /* @__PURE__ */ for_(applicativeD3v2M)(foldableArray);
  var discard23 = /* @__PURE__ */ discard7(bindD3v2M);
  var sliceToDatum = function(slice3) {
    return {
      startAngle: slice3.startAngle,
      endAngle: slice3.endAngle
    };
  };
  var sliceColor = function(v2) {
    if (v2 === "accepted") {
      return blue;
    }
    ;
    if (v2 === "rejected") {
      return red;
    }
    ;
    return "#999";
  };
  var defaultMiniDonutConfig = /* @__PURE__ */ (function() {
    return {
      size: 85,
      outerRadius: 85 / 2.3,
      innerRadius: 85 / 2.3 - 10,
      highlightRadius: 85 / 2.1,
      labelSize: 12
    };
  })();
  var defaultBarConfig = /* @__PURE__ */ (function() {
    return {
      width: 50,
      height: 20,
      maxValue: toNumber(population.male)
    };
  })();
  var configureArc = function(innerR) {
    return function(outerR) {
      return setArcOuterRadius_(setArcInnerRadius_(arcGenerator_(unit))(innerR))(outerR);
    };
  };
  var clearContainer3 = function(selector) {
    return function __do7() {
      var doc = mapFlipped9(bind18(windowImpl)(document2))(toDocument)();
      var parentNode3 = toParentNode(doc);
      var maybeEl = querySelector(selector)(parentNode3)();
      return for_13(maybeEl)(function(el) {
        return setTextContent("")(toNode(el));
      })();
    };
  };
  var buildRowData = function(derived) {
    var hardMaleRate = rates.male.hard * 100;
    var hardFemaleRate = rates.female.hard * 100;
    var easyMaleRate = rates.male.easy * 100;
    var easyFemaleRate = rates.female.easy * 100;
    var combinedMaleRate = derived.combined.male * 100;
    var combinedMaleApplied = derived.departments.easy.male.applied + derived.departments.hard.male.applied;
    var combinedMaleAdmitted = derived.departments.easy.male.admitted + derived.departments.hard.male.admitted;
    var combinedFemaleRate = derived.combined.female * 100;
    var combinedFemaleApplied = derived.departments.easy.female.applied + derived.departments.hard.female.applied;
    var combinedFemaleAdmitted = derived.departments.easy.female.admitted + derived.departments.hard.female.admitted;
    return [{
      department: '"Easy"',
      maleApplied: derived.departments.easy.male.applied,
      femaleApplied: derived.departments.easy.female.applied,
      maleAdmitted: derived.departments.easy.male.admitted,
      femaleAdmitted: derived.departments.easy.female.admitted,
      maleRate: easyMaleRate,
      femaleRate: easyFemaleRate,
      maleWins: easyMaleRate > easyFemaleRate,
      femaleWins: easyFemaleRate > easyMaleRate
    }, {
      department: '"Hard"',
      maleApplied: derived.departments.hard.male.applied,
      femaleApplied: derived.departments.hard.female.applied,
      maleAdmitted: derived.departments.hard.male.admitted,
      femaleAdmitted: derived.departments.hard.female.admitted,
      maleRate: hardMaleRate,
      femaleRate: hardFemaleRate,
      maleWins: hardMaleRate > hardFemaleRate,
      femaleWins: hardFemaleRate > hardMaleRate
    }, {
      department: "Combined",
      maleApplied: combinedMaleApplied,
      femaleApplied: combinedFemaleApplied,
      maleAdmitted: combinedMaleAdmitted,
      femaleAdmitted: combinedFemaleAdmitted,
      maleRate: combinedMaleRate,
      femaleRate: combinedFemaleRate,
      maleWins: combinedMaleRate > combinedFemaleRate,
      femaleWins: combinedFemaleRate > combinedMaleRate
    }];
  };
  var barChart = function(config) {
    return function(value18) {
      return function(gender) {
        var fillColor = (function() {
          if (gender instanceof Male) {
            return purple;
          }
          ;
          if (gender instanceof Female) {
            return green;
          }
          ;
          throw new Error("Failed pattern match at D3.Viz.Simpsons.DataTable (line 99, column 17 - line 101, column 22): " + [gender.constructor.name]);
        })();
        var barWidth = value18 / config.maxValue * config.width;
        return withChildren(elem3(SVG.value)([width11(num2(config.width)), height11(num2(config.height)), viewBox(0)(0)(config.width)(config.height), attr5("class")(text8("bar-chart-svg"))]))([elem3(Rect.value)([width11(num2(config.width)), height11(num2(config.height)), fill4(text8("none")), stroke4(text8(gray)), strokeWidth4(num2(2))]), elem3(Rect.value)([width11(num2(barWidth)), height11(num2(config.height)), fill4(text8(fillColor))])]);
      };
    };
  };
  var renderBar = function(containerId) {
    return function(value18) {
      return function(gender) {
        return bind19(select7(containerId))(function(container) {
          return bind19(renderTree3(container)(barChart(defaultBarConfig)(value18)(gender)))(function() {
            return pure37(unit);
          });
        });
      };
    };
  };
  var arcCentroid = function(innerR) {
    return function(outerR) {
      return function(slice3) {
        var midRadius = (innerR + outerR) / 2;
        var midAngle = (slice3.startAngle + slice3.endAngle) / 2 - 1.5707963267948966;
        return {
          x: midRadius * cos(midAngle),
          y: midRadius * sin(midAngle)
        };
      };
    };
  };
  var miniDonutChart = function(config) {
    return function(acceptedPercent) {
      return function(isWinner) {
        var sliceData = [{
          label: "rejected",
          percent: 100 - acceptedPercent
        }, {
          label: "accepted",
          percent: acceptedPercent
        }];
        var slices = pie(function(v2) {
          return v2.percent;
        })(sliceData);
        var indexedSlices = mapWithIndex2(function(i2) {
          return function(s2) {
            return {
              index: i2,
              slice: s2
            };
          };
        })(slices);
        var highlightOpacity = (function() {
          if (isWinner) {
            return 0.6;
          }
          ;
          return 0;
        })();
        var centerY2 = config.size / 2;
        var centerX = config.size / 2;
        var arcGen = configureArc(config.innerRadius)(config.outerRadius);
        var mkArcElem = function(v2) {
          var centroid = arcCentroid(config.innerRadius)(config.outerRadius)(v2.slice);
          return withChildren(elem3(Group.value)([attr5("class")(text8("arc"))]))([elem3(Path.value)([path4(text8(arcPath_(arcGen)(sliceToDatum(v2.slice)))), fill4(text8(sliceColor(v2.slice.datum.label))), stroke4(text8("#2C3E50")), strokeWidth4(num2(1))]), elem3(Text.value)([x6(num2(centroid.x)), y6(num2(centroid.y)), textAnchor4(text8("middle")), fontSize3(num2(config.labelSize)), fill4(text8("#34495e")), textContent3(text8(show31(round2(v2.slice.datum.percent)) + "%"))])]);
        };
        return withChildren(elem3(SVG.value)([width11(num2(config.size)), height11(num2(config.size)), viewBox(0)(0)(config.size)(config.size), attr5("class")(text8("mini-donut-svg"))]))([withChildren(elem3(Group.value)([transform3(text8("translate(" + (show113(centerX) + ("," + (show113(centerY2) + ")")))))]))(append110([elem3(Circle.value)([cx4(num2(0)), cy4(num2(0)), r4(num2(config.highlightRadius)), fill4(text8("none")), stroke4(text8("#333")), strokeWidth4(num2(4)), attr1("stroke-opacity")(num2(highlightOpacity))])])(map43(mkArcElem)(indexedSlices)))]);
      };
    };
  };
  var renderDonut = function(containerId) {
    return function(rate) {
      return function(isWinner) {
        return bind19(select7(containerId))(function(container) {
          return bind19(renderTree3(container)(miniDonutChart(defaultMiniDonutConfig)(rate)(isWinner)))(function() {
            return pure37(unit);
          });
        });
      };
    };
  };
  var initDataTable = function(derived) {
    var rows4 = buildRowData(derived);
    return function __do7() {
      for_24(mapWithIndex2(function(i2) {
        return function(v2) {
          return i2;
        };
      })(rows4))(function(idx) {
        var prefix = "#row-" + show31(idx);
        return function __do8() {
          clearContainer3(prefix + "-male-applied")();
          clearContainer3(prefix + "-female-applied")();
          clearContainer3(prefix + "-male-admitted")();
          clearContainer3(prefix + "-female-admitted")();
          clearContainer3(prefix + "-male-rate")();
          return clearContainer3(prefix + "-female-rate")();
        };
      })();
      return runD3v2M(for_32(mapWithIndex2(function(i2) {
        return function(row) {
          return {
            idx: i2,
            row
          };
        };
      })(rows4))(function(v2) {
        var prefix = "row-" + show31(v2.idx);
        return discard23(renderBar("#" + (prefix + "-male-applied"))(v2.row.maleApplied)(Male.value))(function() {
          return discard23(renderBar("#" + (prefix + "-female-applied"))(v2.row.femaleApplied)(Female.value))(function() {
            return discard23(renderBar("#" + (prefix + "-male-admitted"))(v2.row.maleAdmitted)(Male.value))(function() {
              return discard23(renderBar("#" + (prefix + "-female-admitted"))(v2.row.femaleAdmitted)(Female.value))(function() {
                return discard23(renderDonut("#" + (prefix + "-male-rate"))(v2.row.maleRate)(v2.row.maleWins))(function() {
                  return renderDonut("#" + (prefix + "-female-rate"))(v2.row.femaleRate)(v2.row.femaleWins);
                });
              });
            });
          });
        });
      }))();
    };
  };
  var updateDataTable = initDataTable;

  // output/D3.Viz.Simpsons.Datasets/index.js
  var smokers = {
    id: "smokers",
    title: "20 Year Survival: Smokers vs. Non-smokers",
    description: "Twenty-year survival outcomes for women, comparing smokers and non-smokers across age groups.",
    source: "Vanderpump et al. (1996). Thyroid 6(3):155-160.",
    row1Label: "Under 65",
    row2Label: "65+",
    combinedLabel: "Combined",
    colGroupLabels: {
      count: "# Women",
      outcome: "# Alive",
      percent: "% Alive"
    },
    colALabel: "Smoker",
    colBLabel: "Non-smoker",
    row1: {
      countA: 533,
      countB: 539,
      outcomeA: 436,
      outcomeB: 474
    },
    row2: {
      countA: 49,
      countB: 193,
      outcomeA: 7,
      outcomeB: 28
    },
    axisLabels: {
      x: "Percent 65 or older",
      y: "Percent alive"
    },
    initialLv: {
      a: 8.4,
      b: 26.4
    }
  };
  var housePets = {
    id: "pets",
    title: "House Pets: Dogs vs Cats Indoors",
    description: "Whether dogs or cats are more likely to be kept indoors, stratified by pet size.",
    source: "Schneiter (2012). Hypothetical study data.",
    row1Label: "Small",
    row2Label: "Large",
    combinedLabel: "Combined",
    colGroupLabels: {
      count: "# Pets",
      outcome: "# in house",
      percent: "% in house"
    },
    colALabel: "Dogs",
    colBLabel: "Cats",
    row1: {
      countA: 12,
      countB: 42,
      outcomeA: 7,
      outcomeB: 17
    },
    row2: {
      countA: 83,
      countB: 8,
      outcomeA: 23,
      outcomeB: 2
    },
    axisLabels: {
      x: "Percent large",
      y: "Percent in house"
    },
    initialLv: {
      a: 87.4,
      b: 16
    }
  };
  var deathPenalty = {
    id: "death-penalty",
    title: "Racial Bias in FL Death Penalty Verdicts 1976-1987",
    description: "Death penalty verdicts for black and white defendants in Florida murder trials.",
    source: "Radelet and Pierce (1991). Florida Law Review.",
    row1Label: "Black victim",
    row2Label: "White victim",
    combinedLabel: "Combined",
    colGroupLabels: {
      count: "# Murder Trials",
      outcome: "# Death Penalty",
      percent: "% Death Penalty"
    },
    colALabel: "Black def.",
    colBLabel: "White def.",
    row1: {
      countA: 143,
      countB: 16,
      outcomeA: 4,
      outcomeB: 0
    },
    row2: {
      countA: 48,
      countB: 467,
      outcomeA: 11,
      outcomeB: 53
    },
    axisLabels: {
      x: "Percent white victim",
      y: "Percent receiving death penalty"
    },
    initialLv: {
      a: 25,
      b: 97
    }
  };
  var civilRights = {
    id: "civil-rights",
    title: "House Voting on the Civil Rights Act of 1964",
    description: "How Democrats and Republicans voted on the Civil Rights Act, split by Northern vs Southern representatives.",
    source: "Wikipedia: Simpson's Paradox.",
    row1Label: "Northern",
    row2Label: "Southern",
    combinedLabel: "Combined",
    colGroupLabels: {
      count: "# Representatives",
      outcome: "# in Favor",
      percent: "% in Favor"
    },
    colALabel: "Democrat",
    colBLabel: "Republican",
    row1: {
      countA: 154,
      countB: 162,
      outcomeA: 145,
      outcomeB: 138
    },
    row2: {
      countA: 94,
      countB: 10,
      outcomeA: 7,
      outcomeB: 0
    },
    axisLabels: {
      x: "Percent Southern",
      y: "Percent in favor"
    },
    initialLv: {
      a: 37.9,
      b: 5.8
    }
  };
  var berkeley = {
    id: "berkeley",
    title: "Berkeley Admissions Data",
    description: "Admission rates of men and women to easier and harder admittance majors at UC Berkeley.",
    source: "Bickel, Hammel, O'Connell (1975). Science.",
    row1Label: "Easier",
    row2Label: "Harder",
    combinedLabel: "Combined",
    colGroupLabels: {
      count: "# Applied",
      outcome: "# Admitted",
      percent: "% Admitted"
    },
    colALabel: "Women",
    colBLabel: "Men",
    row1: {
      countA: 133,
      countB: 1385,
      outcomeA: 106,
      outcomeB: 864
    },
    row2: {
      countA: 1702,
      countB: 1306,
      outcomeA: 451,
      outcomeB: 334
    },
    axisLabels: {
      x: "Percent applied to harder majors",
      y: "Percent admitted"
    },
    initialLv: {
      a: 93,
      b: 49
    }
  };
  var bakerKramer = {
    id: "baker-kramer",
    title: "Baker-Kramer Data",
    description: "Hypothetical data showing survival rates among men and women for treatments A and B.",
    source: "Baker and Kramer (2001).",
    row1Label: "Men",
    row2Label: "Women",
    combinedLabel: "Combined",
    colGroupLabels: {
      count: "# in Treatment",
      outcome: "# Surviving",
      percent: "% Surviving"
    },
    colALabel: "A",
    colBLabel: "B",
    row1: {
      countA: 200,
      countB: 40,
      outcomeA: 120,
      outcomeB: 20
    },
    row2: {
      countA: 100,
      countB: 260,
      outcomeA: 95,
      outcomeB: 221
    },
    axisLabels: {
      x: "Percent women",
      y: "Percent surviving"
    },
    initialLv: {
      a: 33,
      b: 87
    }
  };
  var airlines = {
    id: "airlines",
    title: "Flight Delays: Alaska Airlines vs America West",
    description: "Comparison of flight delay rates between two airlines across different origin airports.",
    source: "Moore, McCabe, Craig.",
    row1Label: "Los Angeles",
    row2Label: "Phoenix",
    combinedLabel: "Combined",
    colGroupLabels: {
      count: "# Flights",
      outcome: "# Delayed",
      percent: "% Delayed"
    },
    colALabel: "Alaska",
    colBLabel: "America West",
    row1: {
      countA: 559,
      countB: 811,
      outcomeA: 62,
      outcomeB: 117
    },
    row2: {
      countA: 233,
      countB: 5255,
      outcomeA: 12,
      outcomeB: 415
    },
    axisLabels: {
      x: "Percent originating in Phoenix",
      y: "Percent delayed"
    },
    initialLv: {
      a: 29,
      b: 87
    }
  };
  var allDatasets2 = [berkeley, bakerKramer, deathPenalty, airlines, civilRights, smokers, housePets];

  // output/D3.Viz.Simpsons.DonutChart/index.js
  var compare5 = /* @__PURE__ */ compare(ordInt);
  var attr6 = /* @__PURE__ */ attr(toAttributeValueString);
  var text9 = /* @__PURE__ */ text(stringExprEvalD);
  var textAnchor5 = /* @__PURE__ */ textAnchor(toAttributeValueString);
  var fill5 = /* @__PURE__ */ fill(toAttributeValueString);
  var fontSize4 = /* @__PURE__ */ fontSize(toAttributeValueNumber);
  var num3 = /* @__PURE__ */ num(numExprEvalD);
  var transform4 = /* @__PURE__ */ transform(toAttributeValueString);
  var show32 = /* @__PURE__ */ show(showNumber);
  var textContent4 = /* @__PURE__ */ textContent(toAttributeValueString);
  var path5 = /* @__PURE__ */ path(toAttributeValueString);
  var stroke5 = /* @__PURE__ */ stroke(toAttributeValueString);
  var strokeWidth5 = /* @__PURE__ */ strokeWidth(toAttributeValueNumber);
  var show114 = /* @__PURE__ */ show(showInt);
  var eqIndexedSlice = {
    eq: function(v2) {
      return function(v1) {
        return v2.index === v1.index;
      };
    }
  };
  var ordIndexedSlice = {
    compare: function(v2) {
      return function(v1) {
        return compare5(v2.index)(v1.index);
      };
    },
    Eq0: function() {
      return eqIndexedSlice;
    }
  };
  var sliceToDatum2 = function(slice3) {
    return {
      startAngle: slice3.startAngle,
      endAngle: slice3.endAngle
    };
  };
  var sliceColor2 = function(v2) {
    if (v2 === "accepted") {
      return blue;
    }
    ;
    if (v2 === "rejected") {
      return red;
    }
    ;
    return "#999";
  };
  var prepareDonutData = function(config) {
    return function(acceptedPercent) {
      return function(label5) {
        var sliceData = [{
          label: "rejected",
          percent: 100 - acceptedPercent
        }, {
          label: "accepted",
          percent: acceptedPercent
        }];
        var slices = pie(function(v2) {
          return v2.percent;
        })(sliceData);
        var indexedSlices = mapWithIndex2(function(i2) {
          return function(s2) {
            return {
              index: i2,
              slice: s2
            };
          };
        })(slices);
        return {
          slices: indexedSlices,
          label: label5,
          config
        };
      };
    };
  };
  var donutChartLabel = function(donutData) {
    return elem3(Text.value)([attr6("dy")(text9("0.35em")), textAnchor5(text9("middle")), fill5(text9(black2)), fontSize4(num3(14)), transform4(text9("translate(0," + (show32(donutData.config.outerRadius + 20) + ")"))), textContent4(text9(donutData.label))]);
  };
  var defaultConfig5 = {
    outerRadius: 60,
    innerRadius: 40,
    centerX: 70,
    centerY: 70,
    showLabels: true
  };
  var configureArc2 = function(innerR) {
    return function(outerR) {
      return setArcOuterRadius_(setArcInnerRadius_(arcGenerator_(unit))(innerR))(outerR);
    };
  };
  var arcCentroid2 = function(innerR) {
    return function(outerR) {
      return function(slice3) {
        var midRadius = (innerR + outerR) / 2;
        var midAngle = (slice3.startAngle + slice3.endAngle) / 2 - 1.5707963267948966;
        return {
          x: midRadius * cos(midAngle),
          y: midRadius * sin(midAngle)
        };
      };
    };
  };
  var donutChartArcs = function(donutData) {
    var arcGen = configureArc2(donutData.config.innerRadius)(donutData.config.outerRadius);
    return joinData("arcs")("g")(donutData.slices)(function(v2) {
      return withChildren(elem3(Group.value)([attr6("class")(text9("arc"))]))([elem3(Path.value)([path5(text9(arcPath_(arcGen)(sliceToDatum2(v2.slice)))), fill5(text9(sliceColor2(v2.slice.datum.label))), stroke5(text9(black2)), strokeWidth5(num3(1))]), elem3(Text.value)([transform4(text9("translate(" + (show32(arcCentroid2(donutData.config.innerRadius)(donutData.config.outerRadius)(v2.slice).x) + ("," + (show32(arcCentroid2(donutData.config.innerRadius)(donutData.config.outerRadius)(v2.slice).y) + ")"))))), attr6("dy")(text9("0.35em")), textAnchor5(text9("middle")), fill5(text9(black2)), fontSize4(num3(12)), textContent4(text9(show114(round2(v2.slice.datum.percent)) + "%"))])]);
    });
  };
  var donutChart = function(config) {
    return function(acceptedPercent) {
      return function(label5) {
        var donutData = prepareDonutData(config)(acceptedPercent)(label5);
        var centerTransform = "translate(" + (show32(config.centerX) + ("," + (show32(config.centerY) + ")")));
        return {
          arcs: donutChartArcs(donutData),
          label: donutChartLabel(donutData),
          centerTransform
        };
      };
    };
  };

  // output/D3.Viz.Simpsons.ForceViz/foreign.js
  function setTimeout_(effect) {
    return (delay2) => () => {
      return setTimeout(() => effect(), delay2);
    };
  }

  // output/D3.Viz.Simpsons.ForceDirected/index.js
  var append23 = /* @__PURE__ */ append(semigroupArray);
  var map44 = /* @__PURE__ */ map(functorArray);
  var genderY = function(config) {
    return function(gender) {
      var innerHeight4 = config.height - config.marginTop - config.marginBottom;
      if (gender instanceof Female) {
        return config.marginTop + innerHeight4 * 0.25;
      }
      ;
      if (gender instanceof Male) {
        return config.marginTop + innerHeight4 * 0.75;
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.Simpsons.ForceDirected (line 145, column 5 - line 147, column 52): " + [gender.constructor.name]);
    };
  };
  var departmentX = function(config) {
    return function(deptIdx) {
      var innerWidth4 = config.width - config.marginLeft - config.marginRight;
      var spacing = innerWidth4 / toNumber(6 + 1 | 0);
      return config.marginLeft + spacing * toNumber(deptIdx + 1 | 0);
    };
  };
  var defaultConfig6 = {
    width: 600,
    height: 400,
    nodeRadius: 2.5,
    marginLeft: 50,
    marginRight: 50,
    marginTop: 50,
    marginBottom: 50
  };
  var createApplicants = function(config) {
    var acceptedOffset = -12;
    var createDeptApplicants = function(gender) {
      return function(deptIdx) {
        return function(deptData) {
          var rejected = replicate(deptData.applied - deptData.accepted | 0)(false);
          var baseY = genderY(config)(gender);
          var baseX = departmentX(config)(deptIdx);
          var accepted = replicate(deptData.accepted)(true);
          var allStatus = append23(accepted)(rejected);
          return map44(function(isAccepted) {
            var targetX$prime = (function() {
              if (isAccepted) {
                return baseX + acceptedOffset;
              }
              ;
              return baseX - acceptedOffset;
            })();
            return {
              id: 0,
              gender,
              department: deptIdx,
              accepted: isAccepted,
              x: targetX$prime,
              y: baseY,
              targetX: targetX$prime,
              targetY: baseY
            };
          })(allStatus);
        };
      };
    };
    var menApplicants = concat(mapWithIndex2(createDeptApplicants(Male.value))(menByDept));
    var womenApplicants = concat(mapWithIndex2(createDeptApplicants(Female.value))(womenByDept));
    var allApplicants = append23(womenApplicants)(menApplicants);
    return mapWithIndex2(function(idx) {
      return function(app) {
        return {
          accepted: app.accepted,
          department: app.department,
          gender: app.gender,
          targetX: app.targetX,
          targetY: app.targetY,
          x: app.x,
          y: app.y,
          id: idx
        };
      };
    })(allApplicants);
  };
  var combinedX = function(config) {
    return config.marginLeft + (config.width - config.marginLeft - config.marginRight) / 2;
  };

  // output/D3.Viz.Simpsons.ForceViz/index.js
  var bind20 = /* @__PURE__ */ bind(bindD3v2M);
  var liftEffect4 = /* @__PURE__ */ liftEffect(monadEffectD3v2M);
  var select8 = /* @__PURE__ */ select5(selectionMD3v2Selection_D);
  var from4 = /* @__PURE__ */ from2(showNumber);
  var r5 = /* @__PURE__ */ r(toAttributeValueNumber);
  var num4 = /* @__PURE__ */ num(numExprEvalD);
  var stroke6 = /* @__PURE__ */ stroke(toAttributeValueString);
  var text10 = /* @__PURE__ */ text(stringExprEvalD);
  var strokeWidth6 = /* @__PURE__ */ strokeWidth(toAttributeValueNumber);
  var renderTree4 = /* @__PURE__ */ renderTree2(selectionMD3v2Selection_D);
  var ordRecord2 = /* @__PURE__ */ ordRecord();
  var ordRecordCons2 = /* @__PURE__ */ ordRecordCons(ordRecordNil)();
  var genderIsSymbol = {
    reflectSymbol: function() {
      return "gender";
    }
  };
  var ordNullable2 = /* @__PURE__ */ ordNullable(ordNumber);
  var renderTree1 = /* @__PURE__ */ renderTree4(/* @__PURE__ */ ordRecord2(/* @__PURE__ */ ordRecordCons(/* @__PURE__ */ ordRecordCons(/* @__PURE__ */ ordRecordCons(/* @__PURE__ */ ordRecordCons(/* @__PURE__ */ ordRecordCons(/* @__PURE__ */ ordRecordCons(/* @__PURE__ */ ordRecordCons(/* @__PURE__ */ ordRecordCons(/* @__PURE__ */ ordRecordCons(/* @__PURE__ */ ordRecordCons(/* @__PURE__ */ ordRecordCons(/* @__PURE__ */ ordRecordCons2({
    reflectSymbol: function() {
      return "y";
    }
  })(ordNumber))()({
    reflectSymbol: function() {
      return "x";
    }
  })(ordNumber))()({
    reflectSymbol: function() {
      return "vy";
    }
  })(ordNumber))()({
    reflectSymbol: function() {
      return "vx";
    }
  })(ordNumber))()({
    reflectSymbol: function() {
      return "id";
    }
  })(ordInt))()({
    reflectSymbol: function() {
      return "gridY";
    }
  })(ordNumber))()({
    reflectSymbol: function() {
      return "gridX";
    }
  })(ordNumber))()(genderIsSymbol)(ordGender))()({
    reflectSymbol: function() {
      return "fy";
    }
  })(ordNullable2))()({
    reflectSymbol: function() {
      return "fx";
    }
  })(ordNullable2))()({
    reflectSymbol: function() {
      return "department";
    }
  })(ordInt))()({
    reflectSymbol: function() {
      return "accepted";
    }
  })(ordBoolean)));
  var pure38 = /* @__PURE__ */ pure(applicativeD3v2M);
  var attr7 = /* @__PURE__ */ attr(toAttributeValueNumber);
  var textAnchor6 = /* @__PURE__ */ textAnchor(toAttributeValueString);
  var fontSize5 = /* @__PURE__ */ fontSize(toAttributeValueNumber);
  var eq8 = /* @__PURE__ */ eq(eqGender);
  var renderTree22 = /* @__PURE__ */ renderTree4(/* @__PURE__ */ ordRecord2(/* @__PURE__ */ ordRecordCons(/* @__PURE__ */ ordRecordCons2({
    reflectSymbol: function() {
      return "label";
    }
  })(ordString))()(genderIsSymbol)(ordGender)));
  var fill6 = /* @__PURE__ */ fill(toAttributeValueString);
  var renderTree32 = /* @__PURE__ */ renderTree4(/* @__PURE__ */ ordRecord2(/* @__PURE__ */ ordRecordCons(/* @__PURE__ */ ordRecordCons2({
    reflectSymbol: function() {
      return "name";
    }
  })(ordString))()({
    reflectSymbol: function() {
      return "idx";
    }
  })(ordInt)));
  var traverse7 = /* @__PURE__ */ traverse(traversableArray)(applicativeEffect);
  var map45 = /* @__PURE__ */ map(functorEffect);
  var discard8 = /* @__PURE__ */ discard(discardUnit);
  var insert11 = /* @__PURE__ */ insert(ordString);
  var width12 = /* @__PURE__ */ width(toAttributeValueNumber);
  var height12 = /* @__PURE__ */ height(toAttributeValueNumber);
  var attr12 = /* @__PURE__ */ attr(toAttributeValueString);
  var renderTree42 = /* @__PURE__ */ renderTree4(ordUnit);
  var discard24 = /* @__PURE__ */ discard8(bindD3v2M);
  var not4 = /* @__PURE__ */ not(heytingAlgebraBoolean);
  var when11 = /* @__PURE__ */ when(applicativeEffect);
  var tick5 = function(stateRef) {
    var nodeColor = function(node) {
      if (node.accepted) {
        return blue;
      }
      ;
      return red;
    };
    return runD3v2M(bind20(liftEffect4(read(stateRef)))(function(state3) {
      return bind20(select8("#force-viz-applicants"))(function(nodesGroup) {
        var nodesTree = joinData("applicants")("circle")(state3.nodes)(function(v2) {
          return elem3(Circle.value)([from4("cx")(function(v1) {
            return v1.x;
          }), from4("cy")(function(v1) {
            return v1.y;
          }), r5(num4(state3.config.nodeRadius)), fromStr("fill")(nodeColor), stroke6(text10("white")), strokeWidth6(num4(0.5))]);
        });
        return bind20(renderTree1(nodesGroup)(nodesTree))(function() {
          return pure38(unit);
        });
      });
    }));
  };
  var renderGenderLabels = function(config) {
    return function(parent2) {
      return runD3v2M((function() {
        var genders = [{
          gender: Female.value,
          label: "Women"
        }, {
          gender: Male.value,
          label: "Men"
        }];
        var labelsTree = joinData("gender-labels")("text")(genders)(function(v2) {
          return elem3(Text.value)([attr7("x")(num4(15)), from4("y")(function(v1) {
            return genderY(config)(v1.gender);
          }), textAnchor6(text10("start")), fontSize5(num4(14)), fromStr("fill")(function(v1) {
            var $131 = eq8(v1.gender)(Female.value);
            if ($131) {
              return green;
            }
            ;
            return purple;
          }), fromStr("textContent")(function(v1) {
            return v1.label;
          })]);
        });
        return bind20(renderTree22(parent2)(labelsTree))(function() {
          return pure38(unit);
        });
      })());
    };
  };
  var renderDepartmentLabels = function(config) {
    return function(parent2) {
      return runD3v2M((function() {
        var deptNames = ["A", "B", "C", "D", "E", "F"];
        var labelData = mapWithIndex2(function(i2) {
          return function(name16) {
            return {
              idx: i2,
              name: name16
            };
          };
        })(deptNames);
        var labelsTree = joinData("dept-labels")("text")(labelData)(function(v2) {
          return elem3(Text.value)([from4("x")(function(v1) {
            return departmentX(config)(v1.idx);
          }), attr7("y")(num4(config.marginTop - 10)), textAnchor6(text10("middle")), fontSize5(num4(12)), fill6(text10(black2)), fromStr("textContent")(function(v1) {
            return v1.name;
          })]);
        });
        return bind20(renderTree32(parent2)(labelsTree))(function() {
          return pure38(unit);
        });
      })());
    };
  };
  var createApplicantNodes = function(config) {
    var baseApplicants = createApplicants(config);
    return traverse7(function(app) {
      return function __do7() {
        var dx = map45(function(r1) {
          return (r1 - 0.5) * 40;
        })(random)();
        var dy = map45(function(r1) {
          return (r1 - 0.5) * 40;
        })(random)();
        return {
          id: app.id,
          x: app.x + dx,
          y: app.y + dy,
          vx: 0,
          vy: 0,
          fx: nullImpl,
          fy: nullImpl,
          gender: app.gender,
          department: app.department,
          accepted: app.accepted,
          gridX: app.targetX,
          gridY: app.targetY
        };
      };
    })(baseApplicants);
  };
  var initForceViz = function(selector) {
    return function __do7() {
      var nodes = createApplicantNodes(defaultConfig6)();
      var isCombinedRef = $$new(false)();
      var stateRef = $$new({
        nodes,
        config: defaultConfig6
      })();
      var sim = create3(defaultConfig2)();
      setNodes(nodes)(sim)();
      var forceXHandle = createForceXGrid(0.15);
      initializeForce(forceXHandle)(nodes)();
      modify_2(insert11("forceX")(forceXHandle))(sim.forces)();
      var forceYHandle = createForceYGrid(0.15);
      initializeForce(forceYHandle)(nodes)();
      modify_2(insert11("forceY")(forceYHandle))(sim.forces)();
      addForce2(new Collide("collide", {
        radius: defaultConfig6.nodeRadius + 0.5,
        strength: 0.7,
        iterations: 2
      }))(sim)();
      runD3v2M(bind20(select8(selector))(function(container) {
        var containerTree = withChildren(named(SVG.value)("svg")([width12(num4(defaultConfig6.width)), height12(num4(defaultConfig6.height)), viewBox(0)(0)(defaultConfig6.width)(defaultConfig6.height), attr12("class")(text10("force-viz-svg"))]))([withChildren(elem3(Group.value)([]))([named(Group.value)("dept-labels")([attr12("class")(text10("dept-labels")), attr12("id")(text10("force-viz-dept-labels"))]), named(Group.value)("gender-labels")([attr12("class")(text10("gender-labels")), attr12("id")(text10("force-viz-gender-labels"))]), named(Group.value)("applicants")([attr12("class")(text10("applicants")), attr12("id")(text10("force-viz-applicants"))])])]);
        return bind20(renderTree42(container)(containerTree))(function() {
          return pure38(unit);
        });
      }))();
      runD3v2M(bind20(select8("#force-viz-dept-labels"))(function(deptLabelsParent) {
        return discard24(liftEffect4(renderDepartmentLabels(defaultConfig6)(deptLabelsParent)))(function() {
          return bind20(select8("#force-viz-gender-labels"))(function(genderLabelsParent) {
            return liftEffect4(renderGenderLabels(defaultConfig6)(genderLabelsParent));
          });
        });
      }))();
      onTick(tick5(stateRef))(sim)();
      start2(sim)();
      var updateX = function(xFn) {
        return updateGridXYAndReinit(new Just(xFn))(Nothing.value)(forceXHandle)(Nothing.value)(sim);
      };
      var twoGroupsXFn = function(node) {
        var baseX = combinedX(defaultConfig6);
        if (node.accepted) {
          return baseX - 12;
        }
        ;
        return baseX + 12;
      };
      var separatedXFn = function(node) {
        var baseX = departmentX(defaultConfig6)(node.department);
        if (node.accepted) {
          return baseX - 12;
        }
        ;
        return baseX + 12;
      };
      var fourGroupsXFn = function(node) {
        var baseX = combinedX(defaultConfig6);
        if (node.accepted) {
          return baseX - 60;
        }
        ;
        return baseX + 60;
      };
      var toggle2 = function __do8() {
        var isCombined = read(isCombinedRef)();
        var newMode = !isCombined;
        write(newMode)(isCombinedRef)();
        if (newMode) {
          updateX(fourGroupsXFn)();
          setTimeout_(function __do9() {
            var stillCombined = read(isCombinedRef)();
            return when11(stillCombined)(updateX(twoGroupsXFn))();
          })(1200)();
          return unit;
        }
        ;
        updateX(fourGroupsXFn)();
        setTimeout_(function __do9() {
          var stillSeparated = map45(not4)(read(isCombinedRef))();
          return when11(stillSeparated)(updateX(separatedXFn))();
        })(1200)();
        return unit;
      };
      return {
        toggle: toggle2,
        stop: stop(sim),
        isCombined: read(isCombinedRef)
      };
    };
  };

  // output/Data.Number.Format/foreign.js
  function wrap3(method2) {
    return function(d3) {
      return function(num7) {
        return method2.apply(num7, [d3]);
      };
    };
  }
  var toPrecisionNative = wrap3(Number.prototype.toPrecision);
  var toFixedNative = wrap3(Number.prototype.toFixed);
  var toExponentialNative = wrap3(Number.prototype.toExponential);

  // output/Data.Number.Format/index.js
  var clamp3 = /* @__PURE__ */ clamp(ordInt);
  var Precision = /* @__PURE__ */ (function() {
    function Precision2(value0) {
      this.value0 = value0;
    }
    ;
    Precision2.create = function(value0) {
      return new Precision2(value0);
    };
    return Precision2;
  })();
  var Fixed = /* @__PURE__ */ (function() {
    function Fixed2(value0) {
      this.value0 = value0;
    }
    ;
    Fixed2.create = function(value0) {
      return new Fixed2(value0);
    };
    return Fixed2;
  })();
  var Exponential = /* @__PURE__ */ (function() {
    function Exponential2(value0) {
      this.value0 = value0;
    }
    ;
    Exponential2.create = function(value0) {
      return new Exponential2(value0);
    };
    return Exponential2;
  })();
  var toStringWith = function(v2) {
    if (v2 instanceof Precision) {
      return toPrecisionNative(v2.value0);
    }
    ;
    if (v2 instanceof Fixed) {
      return toFixedNative(v2.value0);
    }
    ;
    if (v2 instanceof Exponential) {
      return toExponentialNative(v2.value0);
    }
    ;
    throw new Error("Failed pattern match at Data.Number.Format (line 59, column 1 - line 59, column 43): " + [v2.constructor.name]);
  };
  var fixed = /* @__PURE__ */ (function() {
    var $9 = clamp3(0)(20);
    return function($10) {
      return Fixed.create($9($10));
    };
  })();

  // output/D3.Viz.Simpsons.InteractiveParadoxCard/index.js
  var type_19 = /* @__PURE__ */ type_18(isPropInputType);
  var value15 = /* @__PURE__ */ value12(isPropString);
  var show33 = /* @__PURE__ */ show(showInt);
  var pure39 = /* @__PURE__ */ pure(applicativeHalogenM);
  var modify_6 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var bind21 = /* @__PURE__ */ bind(bindHalogenM);
  var get7 = /* @__PURE__ */ get(monadStateHalogenM);
  var Initialize16 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var SetSliderA = /* @__PURE__ */ (function() {
    function SetSliderA2(value0) {
      this.value0 = value0;
    }
    ;
    SetSliderA2.create = function(value0) {
      return new SetSliderA2(value0);
    };
    return SetSliderA2;
  })();
  var SetSliderB = /* @__PURE__ */ (function() {
    function SetSliderB2(value0) {
      this.value0 = value0;
    }
    ;
    SetSliderB2.create = function(value0) {
      return new SetSliderB2(value0);
    };
    return SetSliderB2;
  })();
  var ResetSliders = /* @__PURE__ */ (function() {
    function ResetSliders2() {
    }
    ;
    ResetSliders2.value = new ResetSliders2();
    return ResetSliders2;
  })();
  var showN = function(n) {
    return toStringWith(fixed(1))(n);
  };
  var renderSlider = function(label5) {
    return function(value1) {
      return function(color2) {
        return function(action2) {
          return div4([classes(["paradox-slider"])])([label4([style2("color: " + color2)])([text6(label5 + " to row 2")]), input([type_19(InputRange.value), min8(0), max8(100), value15(show33(round2(value1))), step3(new Step(1)), style2("accent-color: " + color2), onValueInput(function(val) {
            return action2(fromMaybe(value1)(fromString(val)));
          })]), span_([text6(show33(round2(value1)) + "%")])]);
        };
      };
    };
  };
  var initialState = function(dataset) {
    return {
      dataset,
      sliderA: dataset.initialLv.a,
      sliderB: dataset.initialLv.b
    };
  };
  var handleAction15 = function(dictMonadAff) {
    return function(v2) {
      if (v2 instanceof Initialize16) {
        return pure39(unit);
      }
      ;
      if (v2 instanceof SetSliderA) {
        return modify_6(function(v1) {
          var $27 = {};
          for (var $28 in v1) {
            if ({}.hasOwnProperty.call(v1, $28)) {
              $27[$28] = v1[$28];
            }
            ;
          }
          ;
          $27.sliderA = v2.value0;
          return $27;
        });
      }
      ;
      if (v2 instanceof SetSliderB) {
        return modify_6(function(v1) {
          var $31 = {};
          for (var $32 in v1) {
            if ({}.hasOwnProperty.call(v1, $32)) {
              $31[$32] = v1[$32];
            }
            ;
          }
          ;
          $31.sliderB = v2.value0;
          return $31;
        });
      }
      ;
      if (v2 instanceof ResetSliders) {
        return bind21(get7)(function(state3) {
          return modify_6(function(v1) {
            var $35 = {};
            for (var $36 in v1) {
              if ({}.hasOwnProperty.call(v1, $36)) {
                $35[$36] = v1[$36];
              }
              ;
            }
            ;
            $35.sliderA = state3.dataset.initialLv.a;
            $35.sliderB = state3.dataset.initialLv.b;
            return $35;
          });
        });
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.Simpsons.InteractiveParadoxCard (line 397, column 16 - line 408, column 18): " + [v2.constructor.name]);
    };
  };
  var defaultChartConfig = {
    width: 280,
    height: 220,
    marginTop: 20,
    marginRight: 15,
    marginBottom: 45,
    marginLeft: 50
  };
  var colorB = "#008837";
  var colorA = "#7b3294";
  var renderChart = function(state3) {
    var fracB = state3.sliderB / 100;
    var fracA = state3.sliderA / 100;
    var row1RateA = (function() {
      var $38 = state3.dataset.row1.countA > 0;
      if ($38) {
        return state3.dataset.row1.outcomeA / state3.dataset.row1.countA * 100;
      }
      ;
      return 0;
    })();
    var row1RateB = (function() {
      var $39 = state3.dataset.row1.countB > 0;
      if ($39) {
        return state3.dataset.row1.outcomeB / state3.dataset.row1.countB * 100;
      }
      ;
      return 0;
    })();
    var row2RateA = (function() {
      var $40 = state3.dataset.row2.countA > 0;
      if ($40) {
        return state3.dataset.row2.outcomeA / state3.dataset.row2.countA * 100;
      }
      ;
      return 0;
    })();
    var row2RateB = (function() {
      var $41 = state3.dataset.row2.countB > 0;
      if ($41) {
        return state3.dataset.row2.outcomeB / state3.dataset.row2.countB * 100;
      }
      ;
      return 0;
    })();
    var ih = defaultChartConfig.height - defaultChartConfig.marginTop - defaultChartConfig.marginBottom;
    var iw = defaultChartConfig.width - defaultChartConfig.marginLeft - defaultChartConfig.marginRight;
    var scaleX = function(v2) {
      return defaultChartConfig.marginLeft + v2 / 100 * iw;
    };
    var ptA_x = scaleX(state3.sliderA);
    var ptB_x = scaleX(state3.sliderB);
    var scaleY = function(v2) {
      return defaultChartConfig.marginTop + ih - v2 / 100 * ih;
    };
    var lineA = "M " + (showN(scaleX(0)) + (" " + (showN(scaleY(row1RateA)) + (" L " + (showN(scaleX(100)) + (" " + showN(scaleY(row2RateA))))))));
    var lineB = "M " + (showN(scaleX(0)) + (" " + (showN(scaleY(row1RateB)) + (" L " + (showN(scaleX(100)) + (" " + showN(scaleY(row2RateB))))))));
    var combinedRateB = row1RateB * (1 - fracB) + row2RateB * fracB;
    var ptB_y = scaleY(combinedRateB);
    var combinedRateA = row1RateA * (1 - fracA) + row2RateA * fracA;
    var ptA_y = scaleY(combinedRateA);
    return svg([viewBox3(0)(0)(defaultChartConfig.width)(defaultChartConfig.height), width10(defaultChartConfig.width), height10(defaultChartConfig.height), classes2(["paradox-chart-svg"])])([rect([x5(defaultChartConfig.marginLeft), y5(defaultChartConfig.marginTop), width10(iw), height10(ih), fill3(new Named("#fafafa"))]), line([x12(defaultChartConfig.marginLeft), y12(defaultChartConfig.marginTop + ih * 0.5), x23(defaultChartConfig.marginLeft + iw), y23(defaultChartConfig.marginTop + ih * 0.5), stroke3(new Named("#e0e0e0")), strokeWidth3(1)]), line([x12(defaultChartConfig.marginLeft + iw * 0.5), y12(defaultChartConfig.marginTop), x23(defaultChartConfig.marginLeft + iw * 0.5), y23(defaultChartConfig.marginTop + ih), stroke3(new Named("#e0e0e0")), strokeWidth3(1)]), line([x12(defaultChartConfig.marginLeft), y12(defaultChartConfig.marginTop + ih), x23(defaultChartConfig.marginLeft + iw), y23(defaultChartConfig.marginTop + ih), stroke3(new Named("#333")), strokeWidth3(1)]), line([x12(defaultChartConfig.marginLeft), y12(defaultChartConfig.marginTop), x23(defaultChartConfig.marginLeft), y23(defaultChartConfig.marginTop + ih), stroke3(new Named("#333")), strokeWidth3(1)]), path2([attr4("d")(lineA), stroke3(new Named(colorA)), strokeWidth3(2), fill3(new Named("none"))]), path2([attr4("d")(lineB), stroke3(new Named(colorB)), strokeWidth3(2), fill3(new Named("none"))]), text7([x5(defaultChartConfig.marginLeft + iw / 2), y5(defaultChartConfig.height - 5), textAnchor3(AnchorMiddle.value), fill3(new Named("#666"))])([text6(state3.dataset.axisLabels.x)]), text7([x5(defaultChartConfig.marginLeft - 35), y5(defaultChartConfig.marginTop + ih / 2), textAnchor3(AnchorMiddle.value), fill3(new Named("#666")), transform2([new Rotate(-90, defaultChartConfig.marginLeft - 35, defaultChartConfig.marginTop + ih / 2)])])([text6(state3.dataset.colGroupLabels.percent)]), text7([x5(defaultChartConfig.marginLeft - 5), y5(defaultChartConfig.marginTop + ih + 3), textAnchor3(AnchorEnd.value), fill3(new Named("#888"))])([text6("0")]), text7([x5(defaultChartConfig.marginLeft - 5), y5(defaultChartConfig.marginTop + ih * 0.5 + 3), textAnchor3(AnchorEnd.value), fill3(new Named("#888"))])([text6("50")]), text7([x5(defaultChartConfig.marginLeft - 5), y5(defaultChartConfig.marginTop + 3), textAnchor3(AnchorEnd.value), fill3(new Named("#888"))])([text6("100")]), text7([x5(defaultChartConfig.marginLeft), y5(defaultChartConfig.marginTop + ih + 12), textAnchor3(AnchorMiddle.value), fill3(new Named("#888"))])([text6("0")]), text7([x5(defaultChartConfig.marginLeft + iw), y5(defaultChartConfig.marginTop + ih + 12), textAnchor3(AnchorMiddle.value), fill3(new Named("#888"))])([text6("100")]), g([transform2([new Translate(defaultChartConfig.marginLeft + 5, defaultChartConfig.marginTop + 5)])])([circle([cx3(4), cy3(0), r3(3), fill3(new Named(colorA))]), text7([x5(10), y5(3), fill3(new Named(colorA))])([text6(state3.dataset.colALabel)]), circle([cx3(4), cy3(12), r3(3), fill3(new Named(colorB))]), text7([x5(10), y5(15), fill3(new Named(colorB))])([text6(state3.dataset.colBLabel)])]), line([x12(defaultChartConfig.marginLeft), y12(ptA_y), x23(ptA_x), y23(ptA_y), stroke3(new Named("#333")), strokeWidth3(1), strokeDashArray("3,3"), strokeOpacity(0.5)]), line([x12(defaultChartConfig.marginLeft), y12(ptB_y), x23(ptB_x), y23(ptB_y), stroke3(new Named("#333")), strokeWidth3(1), strokeDashArray("3,3"), strokeOpacity(0.5)]), circle([cx3(ptA_x), cy3(ptA_y), r3(6), fill3(new Named(colorA)), stroke3(new Named("white")), strokeWidth3(2)]), circle([cx3(ptB_x), cy3(ptB_y), r3(6), fill3(new Named(colorB)), stroke3(new Named("white")), strokeWidth3(2)]), text7([x5(ptA_x + 8), y5(ptA_y - 5), fill3(new Named(colorA))])([text6(show33(round2(combinedRateA)) + "%")]), text7([x5(ptB_x + 8), y5(ptB_y + 12), fill3(new Named(colorB))])([text6(show33(round2(combinedRateB)) + "%")])]);
  };
  var render18 = function(state3) {
    var fracInRow2_B = state3.sliderB / 100;
    var fracInRow2_A = state3.sliderA / 100;
    var row1RateA = (function() {
      var $42 = state3.dataset.row1.countA > 0;
      if ($42) {
        return state3.dataset.row1.outcomeA / state3.dataset.row1.countA * 100;
      }
      ;
      return 0;
    })();
    var row1RateB = (function() {
      var $43 = state3.dataset.row1.countB > 0;
      if ($43) {
        return state3.dataset.row1.outcomeB / state3.dataset.row1.countB * 100;
      }
      ;
      return 0;
    })();
    var row2RateA = (function() {
      var $44 = state3.dataset.row2.countA > 0;
      if ($44) {
        return state3.dataset.row2.outcomeA / state3.dataset.row2.countA * 100;
      }
      ;
      return 0;
    })();
    var row2RateB = (function() {
      var $45 = state3.dataset.row2.countB > 0;
      if ($45) {
        return state3.dataset.row2.outcomeB / state3.dataset.row2.countB * 100;
      }
      ;
      return 0;
    })();
    var combinedRateB = row1RateB * (1 - fracInRow2_B) + row2RateB * fracInRow2_B;
    var combinedRateA = row1RateA * (1 - fracInRow2_A) + row2RateA * fracInRow2_A;
    var aBetterInRow2 = row2RateA > row2RateB;
    var aBetterInRow1 = row1RateA > row1RateB;
    var aBetterCombined = combinedRateA > combinedRateB;
    var isParadox2 = aBetterInRow1 && (aBetterInRow2 && !aBetterCombined) || !aBetterInRow1 && (!aBetterInRow2 && aBetterCombined);
    return article([classes(["interactive-card"])])([header([classes(["interactive-card-header"])])([h3_([text6(state3.dataset.title)]), p([classes(["interactive-card-description"])])([text6(state3.dataset.description)])]), div4([classes(["interactive-card-body"])])([div4([classes(["interactive-card-sliders"])])([renderSlider(state3.dataset.colALabel)(state3.sliderA)(colorA)(SetSliderA.create), renderSlider(state3.dataset.colBLabel)(state3.sliderB)(colorB)(SetSliderB.create), div4([classes(["interactive-card-controls"])])([button2([classes(["reset-button"]), onClick(function(v2) {
      return ResetSliders.value;
    })])([text6("Reset")])]), div4([classes(["paradox-indicator", (function() {
      if (isParadox2) {
        return "is-paradox";
      }
      ;
      return "no-paradox";
    })()])])([strong_([text6("Paradox: ")]), text6((function() {
      if (isParadox2) {
        return "Yes";
      }
      ;
      return "No";
    })())])]), div4([classes(["interactive-card-chart"])])([renderChart(state3)])]), footer([classes(["interactive-card-footer"])])([cite_([text6(state3.dataset.source)])])]);
  };
  var component15 = function(dictMonadAff) {
    return mkComponent({
      initialState,
      render: render18,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction15(dictMonadAff),
        initialize: new Just(Initialize16.value)
      })
    });
  };

  // output/Hylograph.Expr.Integration/index.js
  var evalAttrStr = function(name16) {
    return function(expr) {
      return new DataAttr(name16, UnknownSource.value, function(d3) {
        return new StringValue(runEvalD(expr)(d3)(0));
      });
    };
  };
  var evalAttr = function(dictShow) {
    var show40 = show(dictShow);
    return function(name16) {
      return function(expr) {
        return new DataAttr(name16, UnknownSource.value, function(d3) {
          return new StringValue(show40(runEvalD(expr)(d3)(0)));
        });
      };
    };
  };

  // output/Hylograph.Axis.Axis/index.js
  var map46 = /* @__PURE__ */ map(functorArray);
  var show34 = /* @__PURE__ */ show(showNumber);
  var str3 = /* @__PURE__ */ str(stringExprEvalD);
  var evalAttr2 = /* @__PURE__ */ evalAttr(showNumber);
  var lit3 = /* @__PURE__ */ lit(numExprEvalD);
  var append111 = /* @__PURE__ */ append(semigroupArray);
  var Top = /* @__PURE__ */ (function() {
    function Top2() {
    }
    ;
    Top2.value = new Top2();
    return Top2;
  })();
  var Right2 = /* @__PURE__ */ (function() {
    function Right3() {
    }
    ;
    Right3.value = new Right3();
    return Right3;
  })();
  var Bottom = /* @__PURE__ */ (function() {
    function Bottom2() {
    }
    ;
    Bottom2.value = new Bottom2();
    return Bottom2;
  })();
  var Left2 = /* @__PURE__ */ (function() {
    function Left3() {
    }
    ;
    Left3.value = new Left3();
    return Left3;
  })();
  var generateTicks = function(scale) {
    return function(count) {
      var step5 = (scale.domain.max - scale.domain.min) / toNumber(count);
      return map46(function(i2) {
        return scale.domain.min + toNumber(i2) * step5;
      })(range2(0)(count));
    };
  };
  var defaultTickFormat = function(n) {
    var $18 = n === 0;
    if ($18) {
      return "0";
    }
    ;
    return toStringWith(fixed(1))(n);
  };
  var defaultAxisConfig = /* @__PURE__ */ (function() {
    return {
      tickSize: 6,
      tickPadding: 3,
      tickCount: 10,
      tickFormat: Nothing.value
    };
  })();
  var axisLeft = function(scale) {
    return {
      orientation: Left2.value,
      scale,
      config: defaultAxisConfig
    };
  };
  var axisBottom = function(scale) {
    return {
      orientation: Bottom.value,
      scale,
      config: defaultAxisConfig
    };
  };
  var applyScale2 = function(scale) {
    return function(value18) {
      var rangeSpan = scale.range.max - scale.range.min;
      var domainSpan = scale.domain.max - scale.domain.min;
      var normalized = (value18 - scale.domain.min) / domainSpan;
      return scale.range.min + normalized * rangeSpan;
    };
  };
  var renderAxis = function(ax) {
    var ticks3 = generateTicks(ax.scale)(ax.config.tickCount);
    var formatter = fromMaybe(defaultTickFormat)(ax.config.tickFormat);
    var v2 = (function() {
      if (ax.orientation instanceof Bottom) {
        return {
          domainPath: "M" + (show34(ax.scale.range.min) + (",0H" + show34(ax.scale.range.max))),
          tickTransform: function(pos) {
            return "translate(" + (show34(pos) + ",0)");
          },
          tickLine: {
            x1: 0,
            y1: 0,
            x2: 0,
            y2: ax.config.tickSize
          },
          tickText: {
            x: 0,
            y: ax.config.tickSize + ax.config.tickPadding,
            anchor: "middle",
            dyVal: 7
          }
        };
      }
      ;
      if (ax.orientation instanceof Left2) {
        return {
          domainPath: "M0," + (show34(ax.scale.range.min) + ("V" + show34(ax.scale.range.max))),
          tickTransform: function(pos) {
            return "translate(0," + (show34(pos) + ")");
          },
          tickLine: {
            x1: -ax.config.tickSize,
            y1: 0,
            x2: 0,
            y2: 0
          },
          tickText: {
            x: -(ax.config.tickSize + ax.config.tickPadding),
            y: 0,
            anchor: "end",
            dyVal: 3
          }
        };
      }
      ;
      if (ax.orientation instanceof Top) {
        return {
          domainPath: "M" + (show34(ax.scale.range.min) + (",0H" + show34(ax.scale.range.max))),
          tickTransform: function(pos) {
            return "translate(" + (show34(pos) + ",0)");
          },
          tickLine: {
            x1: 0,
            y1: -ax.config.tickSize,
            x2: 0,
            y2: 0
          },
          tickText: {
            x: 0,
            y: -(ax.config.tickSize + ax.config.tickPadding),
            anchor: "middle",
            dyVal: 0
          }
        };
      }
      ;
      if (ax.orientation instanceof Right2) {
        return {
          domainPath: "M0," + (show34(ax.scale.range.min) + ("V" + show34(ax.scale.range.max))),
          tickTransform: function(pos) {
            return "translate(0," + (show34(pos) + ")");
          },
          tickLine: {
            x1: 0,
            y1: 0,
            x2: ax.config.tickSize,
            y2: 0
          },
          tickText: {
            x: ax.config.tickSize + ax.config.tickPadding,
            y: 0,
            anchor: "start",
            dyVal: 3
          }
        };
      }
      ;
      throw new Error("Failed pattern match at Hylograph.Axis.Axis (line 120, column 57 - line 144, column 10): " + [ax.orientation.constructor.name]);
    })();
    var tickElements = map46(function(tickValue) {
      var pos = applyScale2(ax.scale)(tickValue);
      return withChildren(elem3(Group.value)([evalAttrStr("class")(str3("tick")), evalAttrStr("transform")(str3(v2.tickTransform(pos)))]))([elem3(Line.value)([evalAttr2("x1")(lit3(v2.tickLine.x1)), evalAttr2("y1")(lit3(v2.tickLine.y1)), evalAttr2("x2")(lit3(v2.tickLine.x2)), evalAttr2("y2")(lit3(v2.tickLine.y2)), evalAttrStr("stroke")(str3("currentColor"))]), elem3(Text.value)([evalAttr2("x")(lit3(v2.tickText.x)), evalAttr2("y")(lit3(v2.tickText.y)), evalAttrStr("text-anchor")(str3(v2.tickText.anchor)), evalAttr2("dy")(lit3(v2.tickText.dyVal)), evalAttrStr("fill")(str3("currentColor")), evalAttr2("font-size")(lit3(10)), evalAttrStr("textContent")(str3(formatter(tickValue)))])]);
    })(ticks3);
    return withChildren(elem3(Group.value)([evalAttrStr("class")(str3("axis")), evalAttrStr("fill")(str3("none")), evalAttr2("font-size")(lit3(10)), evalAttrStr("stroke")(str3("currentColor"))]))(append111([elem3(Path.value)([evalAttrStr("class")(str3("domain")), evalAttrStr("stroke")(str3("currentColor")), evalAttrStr("d")(str3(v2.domainPath))])])(tickElements));
  };

  // output/D3.Viz.Simpsons.LineChart/index.js
  var compare6 = /* @__PURE__ */ compare(ordInt);
  var show35 = /* @__PURE__ */ show(showNumber);
  var attr8 = /* @__PURE__ */ attr(toAttributeValueString);
  var text11 = /* @__PURE__ */ text(stringExprEvalD);
  var path6 = /* @__PURE__ */ path(toAttributeValueString);
  var stroke7 = /* @__PURE__ */ stroke(toAttributeValueString);
  var strokeWidth7 = /* @__PURE__ */ strokeWidth(toAttributeValueNumber);
  var num5 = /* @__PURE__ */ num(numExprEvalD);
  var fill7 = /* @__PURE__ */ fill(toAttributeValueString);
  var cx5 = /* @__PURE__ */ cx(toAttributeValueNumber);
  var cy5 = /* @__PURE__ */ cy(toAttributeValueNumber);
  var r6 = /* @__PURE__ */ r(toAttributeValueNumber);
  var transform5 = /* @__PURE__ */ transform(toAttributeValueString);
  var textAnchor7 = /* @__PURE__ */ textAnchor(toAttributeValueString);
  var fontSize6 = /* @__PURE__ */ fontSize(toAttributeValueNumber);
  var textContent5 = /* @__PURE__ */ textContent(toAttributeValueString);
  var eqIndexedRatePoint = {
    eq: function(v2) {
      return function(v1) {
        return v2.index === v1.index;
      };
    }
  };
  var ordIndexedRatePoint = {
    compare: function(v2) {
      return function(v1) {
        return compare6(v2.index)(v1.index);
      };
    },
    Eq0: function() {
      return eqIndexedRatePoint;
    }
  };
  var pathFromPoints = function(xScale) {
    return function(yScale) {
      return function(pts) {
        var go2 = function(isFirst) {
          return function(arr) {
            var v2 = uncons(arr);
            if (v2 instanceof Nothing) {
              return "";
            }
            ;
            if (v2 instanceof Just) {
              var py = yScale(v2.value0.head.y);
              var px = xScale(v2.value0.head.x);
              var cmd = (function() {
                if (isFirst) {
                  return "M ";
                }
                ;
                return " L ";
              })();
              return cmd + (show35(px) + (" " + (show35(py) + go2(false)(v2.value0.tail))));
            }
            ;
            throw new Error("Failed pattern match at D3.Viz.Simpsons.LineChart (line 227, column 22 - line 235, column 60): " + [v2.constructor.name]);
          };
        };
        return go2(true)(pts);
      };
    };
  };
  var innerWidth2 = function(c2) {
    return c2.width - c2.marginLeft - c2.marginRight;
  };
  var innerHeight2 = function(c2) {
    return c2.height - c2.marginTop - c2.marginBottom;
  };
  var lineChartPoints = function(config) {
    return function(props) {
      var womenX = props.easyFemale * 100;
      var menX = props.easyMale * 100;
      var iw = innerWidth2(config);
      var xScale = function(v2) {
        return v2 / 100 * iw;
      };
      var ih = innerHeight2(config);
      var yScale = function(v2) {
        return ih - v2 / 100 * ih;
      };
      var derived = deriveData(props);
      var menY = derived.combined.male * 100;
      var womenY = derived.combined.female * 100;
      var points2 = [{
        x: womenX,
        y: womenY,
        color: green
      }, {
        x: menX,
        y: menY,
        color: purple
      }];
      var indexedPoints = mapWithIndex2(function(i2) {
        return function(p2) {
          return {
            index: i2,
            point: p2
          };
        };
      })(points2);
      return joinData("rate-points")("g")(indexedPoints)(function(v2) {
        return withChildren(elem3(Group.value)([]))([elem3(Path.value)([attr8("class")(text11("guide-line")), path6(text11("M 0 " + (show35(yScale(v2.point.y)) + (" L " + (show35(xScale(v2.point.x)) + (" " + show35(yScale(v2.point.y)))))))), stroke7(text11(black2)), strokeWidth7(num5(1)), attr8("stroke-dasharray")(text11("5,5")), fill7(text11("none"))]), elem3(Circle.value)([cx5(num5(xScale(v2.point.x))), cy5(num5(yScale(v2.point.y))), r6(num5(6)), fill7(text11(v2.point.color)), stroke7(text11("white")), strokeWidth7(num5(1))])]);
      });
    };
  };
  var lineChartStatic = function(config) {
    var womenLine = [{
      x: 0,
      y: rates.female.hard * 100
    }, {
      x: 100,
      y: rates.female.easy * 100
    }];
    var menLine = [{
      x: 0,
      y: rates.male.hard * 100
    }, {
      x: 100,
      y: rates.male.easy * 100
    }];
    var iw = innerWidth2(config);
    var xAxisScale = {
      domain: {
        min: 0,
        max: 100
      },
      range: {
        min: 0,
        max: iw
      }
    };
    var xScale = function(v2) {
      return v2 / 100 * iw;
    };
    var ih = innerHeight2(config);
    var yAxisScale = {
      domain: {
        min: 0,
        max: 100
      },
      range: {
        min: ih,
        max: 0
      }
    };
    var yScale = function(v2) {
      return ih - v2 / 100 * ih;
    };
    return withChildren(elem3(Group.value)([attr8("class")(text11("line-chart-static"))]))([withChildren(elem3(Group.value)([attr8("class")(text11("y-axis"))]))([renderAxis(axisLeft(yAxisScale)), elem3(Text.value)([transform5(text11("translate(-35," + (show35(ih / 2) + ") rotate(-90)"))), textAnchor7(text11("middle")), fontSize6(num5(12)), textContent5(text11("% admitted"))])]), withChildren(elem3(Group.value)([transform5(text11("translate(0," + (show35(ih) + ")"))), attr8("class")(text11("x-axis"))]))([renderAxis(axisBottom(xAxisScale)), elem3(Text.value)([transform5(text11("translate(" + (show35(iw / 2) + ",40)"))), textAnchor7(text11("middle")), fontSize6(num5(12)), textContent5(text11("% applied to easy department"))])]), elem3(Path.value)([attr8("class")(text11("rate-line women")), path6(text11(pathFromPoints(xScale)(yScale)(womenLine))), stroke7(text11(green)), strokeWidth7(num5(1.5)), fill7(text11("none"))]), elem3(Path.value)([attr8("class")(text11("rate-line men")), path6(text11(pathFromPoints(xScale)(yScale)(menLine))), stroke7(text11(purple)), strokeWidth7(num5(1.5)), fill7(text11("none"))])]);
  };
  var defaultConfig7 = {
    width: 320,
    height: 300,
    marginTop: 40,
    marginRight: 20,
    marginBottom: 55,
    marginLeft: 45
  };

  // output/D3.Viz.Simpsons.ScatterChart/index.js
  var compare7 = /* @__PURE__ */ compare(ordInt);
  var show36 = /* @__PURE__ */ show(showNumber);
  var attr9 = /* @__PURE__ */ attr(toAttributeValueString);
  var text12 = /* @__PURE__ */ text(stringExprEvalD);
  var transform6 = /* @__PURE__ */ transform(toAttributeValueString);
  var textAnchor8 = /* @__PURE__ */ textAnchor(toAttributeValueString);
  var fontSize7 = /* @__PURE__ */ fontSize(toAttributeValueNumber);
  var num6 = /* @__PURE__ */ num(numExprEvalD);
  var textContent6 = /* @__PURE__ */ textContent(toAttributeValueString);
  var path7 = /* @__PURE__ */ path(toAttributeValueString);
  var stroke8 = /* @__PURE__ */ stroke(toAttributeValueString);
  var strokeWidth8 = /* @__PURE__ */ strokeWidth(toAttributeValueNumber);
  var fill8 = /* @__PURE__ */ fill(toAttributeValueString);
  var cx6 = /* @__PURE__ */ cx(toAttributeValueNumber);
  var cy6 = /* @__PURE__ */ cy(toAttributeValueNumber);
  var r7 = /* @__PURE__ */ r(toAttributeValueNumber);
  var width13 = /* @__PURE__ */ width(toAttributeValueNumber);
  var height13 = /* @__PURE__ */ height(toAttributeValueNumber);
  var eqIndexedPoint = {
    eq: function(v2) {
      return function(v1) {
        return v2.index === v1.index;
      };
    }
  };
  var ordIndexedPoint = {
    compare: function(v2) {
      return function(v1) {
        return compare7(v2.index)(v1.index);
      };
    },
    Eq0: function() {
      return eqIndexedPoint;
    }
  };
  var purplePoints = [{
    x: 8,
    y: 1,
    color: purple
  }, {
    x: 9,
    y: 2,
    color: purple
  }, {
    x: 10,
    y: 3,
    color: purple
  }, {
    x: 11,
    y: 4,
    color: purple
  }];
  var pathFromPoints2 = function(xScale) {
    return function(yScale) {
      return function(pts) {
        var go2 = function(isFirst) {
          return function(arr) {
            var v2 = uncons(arr);
            if (v2 instanceof Nothing) {
              return "";
            }
            ;
            if (v2 instanceof Just) {
              var py = yScale(v2.value0.head.y);
              var px = xScale(v2.value0.head.x);
              var cmd = (function() {
                if (isFirst) {
                  return "M ";
                }
                ;
                return " L ";
              })();
              return cmd + (show36(px) + (" " + (show36(py) + go2(false)(v2.value0.tail))));
            }
            ;
            throw new Error("Failed pattern match at D3.Viz.Simpsons.ScatterChart (line 223, column 22 - line 231, column 60): " + [v2.constructor.name]);
          };
        };
        return go2(true)(pts);
      };
    };
  };
  var innerWidth3 = function(c2) {
    return c2.width - c2.marginLeft - c2.marginRight;
  };
  var innerHeight3 = function(c2) {
    return c2.height - c2.marginTop - c2.marginBottom;
  };
  var scatterChartStatic = function(config) {
    var purpleTrendLine = [{
      x: 7,
      y: 0
    }, {
      x: 13,
      y: 6
    }];
    var overallTrendLine = [{
      x: 0,
      y: 8.2
    }, {
      x: 13,
      y: 1
    }];
    var iw = innerWidth3(config);
    var xAxisScale = {
      domain: {
        min: 0,
        max: 12
      },
      range: {
        min: 0,
        max: iw
      }
    };
    var xScale = function(v2) {
      return v2 / 12 * iw;
    };
    var ih = innerHeight3(config);
    var yAxisScale = {
      domain: {
        min: 0,
        max: 10
      },
      range: {
        min: ih,
        max: 0
      }
    };
    var yScale = function(v2) {
      return ih - v2 / 10 * ih;
    };
    var greenTrendLine = [{
      x: 0,
      y: 5
    }, {
      x: 6,
      y: 11
    }];
    return withChildren(elem3(Group.value)([attr9("class")(text12("chart-static"))]))([withChildren(elem3(Group.value)([attr9("class")(text12("y-axis"))]))([renderAxis(axisLeft(yAxisScale)), elem3(Text.value)([transform6(text12("translate(-28," + (show36(ih / 2) + ") rotate(-90)"))), textAnchor8(text12("middle")), fontSize7(num6(12)), textContent6(text12("y"))])]), withChildren(elem3(Group.value)([transform6(text12("translate(0," + (show36(ih) + ")"))), attr9("class")(text12("x-axis"))]))([renderAxis(axisBottom(xAxisScale)), elem3(Text.value)([transform6(text12("translate(" + (show36(iw / 2) + ",35)"))), textAnchor8(text12("middle")), fontSize7(num6(12)), textContent6(text12("x"))])]), elem3(Path.value)([attr9("class")(text12("trend-line green")), path7(text12(pathFromPoints2(xScale)(yScale)(greenTrendLine))), stroke8(text12(green)), strokeWidth8(num6(1.5)), fill8(text12("none"))]), elem3(Path.value)([attr9("class")(text12("trend-line purple")), path7(text12(pathFromPoints2(xScale)(yScale)(purpleTrendLine))), stroke8(text12(purple)), strokeWidth8(num6(1.5)), fill8(text12("none"))]), elem3(Path.value)([attr9("class")(text12("trend-line overall")), path7(text12(pathFromPoints2(xScale)(yScale)(overallTrendLine))), stroke8(text12(gray)), strokeWidth8(num6(1.5)), attr9("stroke-dasharray")(text12("4,3")), fill8(text12("none"))])]);
  };
  var greenPoints = [{
    x: 1,
    y: 6,
    color: green
  }, {
    x: 2,
    y: 7,
    color: green
  }, {
    x: 3,
    y: 8,
    color: green
  }, {
    x: 4,
    y: 9,
    color: green
  }];
  var defaultConfig8 = {
    width: 380,
    height: 260,
    marginTop: 20,
    marginRight: 10,
    marginBottom: 40,
    marginLeft: 40
  };
  var allPoints = /* @__PURE__ */ append(semigroupArray)(greenPoints)(purplePoints);
  var scatterChartPoints = function(config) {
    var iw = innerWidth3(config);
    var xScale = function(v2) {
      return v2 / 12 * iw;
    };
    var indexedPoints = mapWithIndex2(function(i2) {
      return function(p2) {
        return {
          index: i2,
          point: p2
        };
      };
    })(allPoints);
    var ih = innerHeight3(config);
    var yScale = function(v2) {
      return ih - v2 / 10 * ih;
    };
    return joinData("points")("circle")(indexedPoints)(function(v2) {
      return elem3(Circle.value)([cx6(num6(xScale(v2.point.x))), cy6(num6(yScale(v2.point.y))), r7(num6(6)), fill8(text12(v2.point.color)), stroke8(text12("white")), strokeWidth8(num6(1))]);
    });
  };
  var scatterChart = function(config) {
    return {
      "static": scatterChartStatic(config),
      points: scatterChartPoints(config),
      containerAttrs: [width13(num6(config.width)), height13(num6(config.height)), viewBox(0)(0)(config.width)(config.height), attr9("class")(text12("scatter-chart"))]
    };
  };

  // output/Halogen.HTML/index.js
  var componentSlot2 = /* @__PURE__ */ componentSlot();
  var slot_ = function() {
    return function(dictIsSymbol) {
      var componentSlot1 = componentSlot2(dictIsSymbol);
      return function(dictOrd) {
        var componentSlot22 = componentSlot1(dictOrd);
        return function(label5) {
          return function(p2) {
            return function(component33) {
              return function(input3) {
                return widget(new ComponentSlot(componentSlot22(label5)(p2)(component33)(input3)($$const(Nothing.value))));
              };
            };
          };
        };
      };
    };
  };
  var slot = function() {
    return function(dictIsSymbol) {
      var componentSlot1 = componentSlot2(dictIsSymbol);
      return function(dictOrd) {
        var componentSlot22 = componentSlot1(dictOrd);
        return function(label5) {
          return function(p2) {
            return function(component33) {
              return function(input3) {
                return function(outputQuery) {
                  return widget(new ComponentSlot(componentSlot22(label5)(p2)(component33)(input3)(function($11) {
                    return Just.create(outputQuery($11));
                  })));
                };
              };
            };
          };
        };
      };
    };
  };

  // output/D3.Viz.Simpsons.App/index.js
  var discard9 = /* @__PURE__ */ discard(discardUnit);
  var discard1 = /* @__PURE__ */ discard9(bindD3v2M);
  var clear5 = /* @__PURE__ */ clear3(selectionMD3v2Selection_D);
  var bind26 = /* @__PURE__ */ bind(bindD3v2M);
  var select10 = /* @__PURE__ */ select5(selectionMD3v2Selection_D);
  var renderTree5 = /* @__PURE__ */ renderTree2(selectionMD3v2Selection_D);
  var renderTree12 = /* @__PURE__ */ renderTree5(ordIndexedRatePoint);
  var pure40 = /* @__PURE__ */ pure(applicativeD3v2M);
  var type_20 = /* @__PURE__ */ type_18(isPropInputType);
  var value16 = /* @__PURE__ */ value12(isPropString);
  var show37 = /* @__PURE__ */ show(showNumber);
  var show115 = /* @__PURE__ */ show(showInt);
  var str4 = /* @__PURE__ */ str(stringExprEvalD);
  var renderTree23 = /* @__PURE__ */ renderTree5(ordUnit);
  var renderTree33 = /* @__PURE__ */ renderTree5(ordIndexedPoint);
  var evalAttr3 = /* @__PURE__ */ evalAttr(showNumber);
  var lit4 = /* @__PURE__ */ lit(numExprEvalD);
  var renderTree43 = /* @__PURE__ */ renderTree5(ordIndexedSlice);
  var discard32 = /* @__PURE__ */ discard9(bindHalogenM);
  var bind27 = /* @__PURE__ */ bind(bindHalogenM);
  var get8 = /* @__PURE__ */ get(monadStateHalogenM);
  var modify_7 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var when12 = /* @__PURE__ */ when(applicativeHalogenM);
  var slot2 = /* @__PURE__ */ slot()({
    reflectSymbol: function() {
      return "paradoxCard";
    }
  })(ordString);
  var map48 = /* @__PURE__ */ map(functorArray);
  var Initialize17 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var SetMaleProportion = /* @__PURE__ */ (function() {
    function SetMaleProportion2(value0) {
      this.value0 = value0;
    }
    ;
    SetMaleProportion2.create = function(value0) {
      return new SetMaleProportion2(value0);
    };
    return SetMaleProportion2;
  })();
  var SetFemaleProportion = /* @__PURE__ */ (function() {
    function SetFemaleProportion2(value0) {
      this.value0 = value0;
    }
    ;
    SetFemaleProportion2.create = function(value0) {
      return new SetFemaleProportion2(value0);
    };
    return SetFemaleProportion2;
  })();
  var ToggleCombined = /* @__PURE__ */ (function() {
    function ToggleCombined2() {
    }
    ;
    ToggleCombined2.value = new ToggleCombined2();
    return ToggleCombined2;
  })();
  var Render = /* @__PURE__ */ (function() {
    function Render2() {
    }
    ;
    Render2.value = new Render2();
    return Render2;
  })();
  var updateLineChart = function(props) {
    return runD3v2M(discard1(clear5("#line-chart .rate-points-group"))(function() {
      return bind26(select10("#line-chart .rate-points-group"))(function(pointsContainer) {
        return bind26(renderTree12(pointsContainer)(lineChartPoints(defaultConfig7)(props)))(function() {
          return pure40(unit);
        });
      });
    }));
  };
  var renderSlider2 = function(label5) {
    return function(value1) {
      return function(color2) {
        return function(action2) {
          return div4([classes(["simpsons-slider"])])([label4([style2("color: " + color2)])([text6(label5)]), input([type_20(InputRange.value), min8(0), max8(100), value16(show37(value1 * 100)), step3(new Step(1)), style2("accent-color: " + color2), onValueInput(function(val) {
            return action2(fromMaybe(value1 * 100)(fromString(val)) / 100);
          })]), span_([text6(show115(round2(value1 * 100)) + "%")])]);
        };
      };
    };
  };
  var renderScatterSection = /* @__PURE__ */ section([/* @__PURE__ */ classes(["simpsons-scatter"])])([/* @__PURE__ */ h2_([/* @__PURE__ */ text6("What is Simpson's Paradox?")]), /* @__PURE__ */ p_([/* @__PURE__ */ text6("Simpson's Paradox occurs when a relationship between two variables has one direction in subgroups but the opposite direction when the groups are combined.")]), /* @__PURE__ */ p_([/* @__PURE__ */ text6("Formally, there are three variables:")]), /* @__PURE__ */ ol([/* @__PURE__ */ classes(["simpsons-variables-list"])])([/* @__PURE__ */ li_([/* @__PURE__ */ strong_([/* @__PURE__ */ text6("The explained variable")]), /* @__PURE__ */ text6(" (admission result: accepted or rejected)")]), /* @__PURE__ */ li_([/* @__PURE__ */ strong_([/* @__PURE__ */ text6("The observed explanatory variable")]), /* @__PURE__ */ text6(" (gender: male or female)")]), /* @__PURE__ */ li_([/* @__PURE__ */ strong_([/* @__PURE__ */ text6("The lurking explanatory variable")]), /* @__PURE__ */ text6(" (department: which department applied to)")])]), /* @__PURE__ */ p_([/* @__PURE__ */ text6("The paradox occurs when the effect of the observed variable "), /* @__PURE__ */ em_([/* @__PURE__ */ text6("reverses direction")]), /* @__PURE__ */ text6(" once we account for the lurking variable.")]), /* @__PURE__ */ div4([/* @__PURE__ */ id2("scatter-chart"), /* @__PURE__ */ classes(["scatter-chart"])])([]), /* @__PURE__ */ p([/* @__PURE__ */ classes(["simpsons-scatter-explanation"])])([/* @__PURE__ */ text6("In the chart above, each color represents a different group. Within each group, y increases with x (positive correlation). "), /* @__PURE__ */ text6("But look at the overall trend line: y "), /* @__PURE__ */ em_([/* @__PURE__ */ text6("decreases")]), /* @__PURE__ */ text6(" with x (negative correlation)!")])]);
  var renderProperPoolingSection = /* @__PURE__ */ div4([/* @__PURE__ */ classes(["simpsons-proper-pooling-content"])])([content5]);
  var renderMoreInfoSection = /* @__PURE__ */ section([/* @__PURE__ */ classes(["simpsons-more-info"])])([content4]);
  var renderInteractiveSection = function(state3) {
    return function(derived) {
      return section([classes(["simpsons-interactive"])])([h2_([text6("Interactive Demonstration")]), p_([text6("Adjust the sliders to see how the distribution of applicants affects overall rates.")]), div4([classes(["simpsons-sliders"])])([renderSlider2("Women to Easy Dept")(state3.proportions.easyFemale)(green)(SetFemaleProportion.create), renderSlider2("Men to Easy Dept")(state3.proportions.easyMale)(purple)(SetMaleProportion.create)]), div4([id2("line-chart"), classes(["line-chart"])])([]), div4([classes(["simpsons-paradox-indicator", (function() {
        if (derived.isParadox) {
          return "is-paradox";
        }
        ;
        return "no-paradox";
      })()])])([(function() {
        if (derived.isParadox) {
          return text6("Simpson's Paradox is present! Men have higher overall rate despite lower per-department rates.");
        }
        ;
        return text6("No paradox - the group with higher per-department rates also has higher overall rate.");
      })()])]);
    };
  };
  var renderIllustrationSection = /* @__PURE__ */ div4([/* @__PURE__ */ classes(["simpsons-illustration-content"])])([content3]);
  var renderHeader2 = /* @__PURE__ */ header([/* @__PURE__ */ classes(["simpsons-header"])])([/* @__PURE__ */ h1_([/* @__PURE__ */ text6("Simpson's Paradox")]), /* @__PURE__ */ p([/* @__PURE__ */ classes(["simpsons-tagline"])])([/* @__PURE__ */ text6("Girls gone average. Averages gone wild.")])]);
  var renderForceSection = function(state3) {
    return section([classes(["simpsons-force"])])([h2_([text6("Applicant Cohorts")]), p_([text6("Each dot represents an applicant. Blue = accepted, Red = rejected.")]), button2([classes(["simpsons-toggle"]), onClick(function(v2) {
      return ToggleCombined.value;
    })])([text6((function() {
      if (state3.isCombined) {
        return "Separate by Department";
      }
      ;
      return "Combine All";
    })())]), div4([id2("force-viz"), classes(["force-viz"])])([])]);
  };
  var renderDonutSection = /* @__PURE__ */ section([/* @__PURE__ */ classes(["simpsons-donuts"])])([/* @__PURE__ */ h2_([/* @__PURE__ */ text6("UC Berkeley Graduate Admissions (1973)")]), /* @__PURE__ */ p_([/* @__PURE__ */ text6("In 1973, the University of California-Berkeley was sued for sex discrimination. "), /* @__PURE__ */ text6("The numbers looked pretty damning: the overall acceptance rate for men was "), /* @__PURE__ */ strong_([/* @__PURE__ */ text6("44%")]), /* @__PURE__ */ text6(", while for women it was only "), /* @__PURE__ */ strong_([/* @__PURE__ */ text6("35%")]), /* @__PURE__ */ text6(".")]), /* @__PURE__ */ div4([/* @__PURE__ */ classes(["simpsons-donuts-container"])])([/* @__PURE__ */ div4([/* @__PURE__ */ id2("donut-men"), /* @__PURE__ */ classes(["donut-chart"])])([]), /* @__PURE__ */ div4([/* @__PURE__ */ id2("donut-women"), /* @__PURE__ */ classes(["donut-chart"])])([])]), /* @__PURE__ */ p_([/* @__PURE__ */ text6("When researchers looked at the data on a "), /* @__PURE__ */ em_([/* @__PURE__ */ text6("department by department")]), /* @__PURE__ */ text6(" basis, however, they found that "), /* @__PURE__ */ strong_([/* @__PURE__ */ text6("women were admitted at higher rates than men in most departments")]), /* @__PURE__ */ text6("!")]), /* @__PURE__ */ blockquote_([/* @__PURE__ */ p_([/* @__PURE__ */ text6('"If the data are properly pooled...there is a small but statistically significant bias in favor of women."')]), /* @__PURE__ */ cite_([/* @__PURE__ */ text6("\u2014 Bickel et al. (1975), p. 403")])]), /* @__PURE__ */ p_([/* @__PURE__ */ text6("This is an example of "), /* @__PURE__ */ strong_([/* @__PURE__ */ text6("Simpson's Paradox")]), /* @__PURE__ */ text6(": a phenomenon in which a trend appears in different groups of data but disappears or reverses when these groups are combined.")])]);
  var renderCredits = /* @__PURE__ */ footer([/* @__PURE__ */ classes(["simpsons-credits"])])([/* @__PURE__ */ p_([/* @__PURE__ */ text6("Based on the visualization by "), /* @__PURE__ */ a([/* @__PURE__ */ href4("https://setosa.io/simpsons/"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("Lewis Lehe & Victor Powell")]), /* @__PURE__ */ text6(" (2014). Reimplemented in PureScript using "), /* @__PURE__ */ a([/* @__PURE__ */ href4("https://github.com/psd3/psd3"), /* @__PURE__ */ target6("_blank")])([/* @__PURE__ */ text6("PS<$>D3")]), /* @__PURE__ */ text6(".")])]);
  var initialState2 = function(v2) {
    return {
      proportions: defaultProportions,
      isCombined: false,
      initialized: false
    };
  };
  var initScatterChart = /* @__PURE__ */ bind26(/* @__PURE__ */ select10("#scatter-chart"))(function(container) {
    var chart = scatterChart(defaultConfig8);
    var svgTree = withChildren(elem3(SVG.value)(chart.containerAttrs))([withChildren(elem3(Group.value)([evalAttrStr("transform")(str4("translate(" + (show37(defaultConfig8.marginLeft) + ("," + (show37(defaultConfig8.marginTop) + ")")))))]))([chart["static"]])]);
    return bind26(renderTree23(container)(svgTree))(function() {
      return bind26(select10("#scatter-chart svg"))(function(pointsContainer) {
        var pointsGroup = elem3(Group.value)([evalAttrStr("transform")(str4("translate(" + (show37(defaultConfig8.marginLeft) + ("," + (show37(defaultConfig8.marginTop) + ")"))))), evalAttrStr("class")(str4("points"))]);
        return bind26(renderTree23(pointsContainer)(pointsGroup))(function() {
          return bind26(select10("#scatter-chart svg .points"))(function(pointsInner) {
            return bind26(renderTree33(pointsInner)(chart.points))(function() {
              return pure40(unit);
            });
          });
        });
      });
    });
  });
  var initLineChart = /* @__PURE__ */ bind26(/* @__PURE__ */ select10("#line-chart"))(function(container) {
    var svgTree = withChildren(elem3(SVG.value)([evalAttr3("width")(lit4(defaultConfig7.width)), evalAttr3("height")(lit4(defaultConfig7.height)), evalAttrStr("viewBox")(str4("0 0 " + (show37(defaultConfig7.width) + (" " + show37(defaultConfig7.height))))), evalAttrStr("class")(str4("line-chart-svg"))]))([withChildren(elem3(Group.value)([evalAttrStr("transform")(str4("translate(" + (show37(defaultConfig7.marginLeft) + ("," + (show37(defaultConfig7.marginTop) + ")")))))]))([lineChartStatic(defaultConfig7)]), elem3(Group.value)([evalAttrStr("transform")(str4("translate(" + (show37(defaultConfig7.marginLeft) + ("," + (show37(defaultConfig7.marginTop) + ")"))))), evalAttrStr("class")(str4("rate-points-group"))])]);
    return bind26(renderTree23(container)(svgTree))(function() {
      return pure40(unit);
    });
  });
  var initDonutCharts = /* @__PURE__ */ bind26(/* @__PURE__ */ select10("#donut-men"))(function(menContainer) {
    var menDonut = donutChart(defaultConfig5)(overallAcceptanceRates.male * 100)("Men");
    var menTree = withChildren(elem3(SVG.value)([evalAttr3("width")(lit4(defaultConfig5.centerX * 2)), evalAttr3("height")(lit4(defaultConfig5.centerY + defaultConfig5.outerRadius + 30)), evalAttrStr("viewBox")(str4("0 0 " + (show37(defaultConfig5.centerX * 2) + (" " + show37(defaultConfig5.centerY + defaultConfig5.outerRadius + 30))))), evalAttrStr("class")(str4("donut-svg"))]))([withChildren(elem3(Group.value)([evalAttrStr("transform")(str4(menDonut.centerTransform))]))([menDonut.label])]);
    return bind26(renderTree23(menContainer)(menTree))(function() {
      return bind26(select10("#donut-men svg"))(function(menArcsContainer) {
        var menArcsGroup = elem3(Group.value)([evalAttrStr("transform")(str4(menDonut.centerTransform)), evalAttrStr("class")(str4("arcs"))]);
        return bind26(renderTree23(menArcsContainer)(menArcsGroup))(function() {
          return bind26(select10("#donut-men svg .arcs"))(function(menArcsInner) {
            return bind26(renderTree43(menArcsInner)(menDonut.arcs))(function() {
              return bind26(select10("#donut-women"))(function(womenContainer) {
                var womenDonut = donutChart(defaultConfig5)(overallAcceptanceRates.female * 100)("Women");
                var womenTree = withChildren(elem3(SVG.value)([evalAttr3("width")(lit4(defaultConfig5.centerX * 2)), evalAttr3("height")(lit4(defaultConfig5.centerY + defaultConfig5.outerRadius + 30)), evalAttrStr("viewBox")(str4("0 0 " + (show37(defaultConfig5.centerX * 2) + (" " + show37(defaultConfig5.centerY + defaultConfig5.outerRadius + 30))))), evalAttrStr("class")(str4("donut-svg"))]))([withChildren(elem3(Group.value)([evalAttrStr("transform")(str4(womenDonut.centerTransform))]))([womenDonut.label])]);
                return bind26(renderTree23(womenContainer)(womenTree))(function() {
                  return bind26(select10("#donut-women svg"))(function(womenArcsContainer) {
                    var womenArcsGroup = elem3(Group.value)([evalAttrStr("transform")(str4(womenDonut.centerTransform)), evalAttrStr("class")(str4("arcs"))]);
                    return bind26(renderTree23(womenArcsContainer)(womenArcsGroup))(function() {
                      return bind26(select10("#donut-women svg .arcs"))(function(womenArcsInner) {
                        return bind26(renderTree43(womenArcsInner)(womenDonut.arcs))(function() {
                          return pure40(unit);
                        });
                      });
                    });
                  });
                });
              });
            });
          });
        });
      });
    });
  });
  var formatNumber = function(n) {
    return formatWithCommas(show115(round2(n)));
  };
  var renderDataTable = function(_state) {
    return function(derived) {
      var rows4 = buildRowData(derived);
      return section([classes(["simpsons-table"])])([h2_([text6("Illustration")]), p([classes(["simpsons-table-description"])])([text6("Suppose there are two departments: one easy, one hard ('hard' as in 'hard to get into'). The sliders below set what percentage each gender applies to the easy department. Both departments prefer women, but if too many women apply to the hard one, their acceptance rate drops below the men's.")]), table([classes(["simpsons-data-table"])])([thead_([tr_([th_([text6("departments")]), th([colSpan2(2)])([text6("# applied")]), th([colSpan2(2)])([text6("# admitted")]), th([colSpan2(2)])([text6("% admitted")])]), tr([classes(["simpsons-subheader"])])([th_([]), th([style2("color: " + purple)])([text6("men")]), th([style2("color: " + green)])([text6("women")]), th([style2("color: " + purple)])([text6("men")]), th([style2("color: " + green)])([text6("women")]), th([style2("color: " + purple)])([text6("men")]), th([style2("color: " + green)])([text6("women")])])]), tbody_(mapWithIndex2(function(idx) {
        return function(row) {
          var prefix = "row-" + show115(idx);
          return tr_([td([classes(["simpsons-dept-name"])])([text6(row.department)]), td([classes(["simpsons-data-cell"])])([span_([text6(formatNumber(row.maleApplied))]), div4([id2(prefix + "-male-applied"), classes(["bar-container"])])([])]), td([classes(["simpsons-data-cell"])])([span_([text6(formatNumber(row.femaleApplied))]), div4([id2(prefix + "-female-applied"), classes(["bar-container"])])([])]), td([classes(["simpsons-data-cell"])])([span_([text6(formatNumber(row.maleAdmitted))]), div4([id2(prefix + "-male-admitted"), classes(["bar-container"])])([])]), td([classes(["simpsons-data-cell"])])([span_([text6(formatNumber(row.femaleAdmitted))]), div4([id2(prefix + "-female-admitted"), classes(["bar-container"])])([])]), td([classes(["simpsons-donut-cell"])])([div4([id2(prefix + "-male-rate"), classes(["donut-container"])])([])]), td([classes(["simpsons-donut-cell"])])([div4([id2(prefix + "-female-rate"), classes(["donut-container"])])([])])]);
        };
      })(rows4))]), div4([classes(["simpsons-paradox-result", (function() {
        if (derived.isParadox) {
          return "is-paradox";
        }
        ;
        return "no-paradox";
      })()])])([strong_([text6("Simpson's paradox? ")]), span_([text6((function() {
        if (derived.isParadox) {
          return "yes";
        }
        ;
        return "no";
      })())])])]);
    };
  };
  var forceVizHandleRef = /* @__PURE__ */ (function() {
    return unsafePerformEffect($$new(Nothing.value));
  })();
  var initForceViz2 = function __do5() {
    var handle = initForceViz("#force-viz")();
    return write(new Just(handle))(forceVizHandleRef)();
  };
  var initializeCharts = function(derived) {
    return function __do7() {
      runD3v2M(discard1(initDonutCharts)(function() {
        return discard1(initScatterChart)(function() {
          return initLineChart;
        });
      }))();
      initForceViz2();
      return initDataTable(derived)();
    };
  };
  var handleAction16 = function(dictMonadAff) {
    var liftAff3 = liftAff(monadAffHalogenM(dictMonadAff));
    var MonadEffect0 = dictMonadAff.MonadEffect0();
    var liftEffect11 = liftEffect(monadEffectHalogenM(MonadEffect0));
    return function(dictMonadEffect) {
      return function(v2) {
        if (v2 instanceof Initialize17) {
          return discard32(liftAff3(delay(100)))(function() {
            return bind27(get8)(function(state3) {
              var derived = deriveData(state3.proportions);
              return discard32(liftEffect11(initializeCharts(derived)))(function() {
                return discard32(modify_7(function(v1) {
                  var $71 = {};
                  for (var $72 in v1) {
                    if ({}.hasOwnProperty.call(v1, $72)) {
                      $71[$72] = v1[$72];
                    }
                    ;
                  }
                  ;
                  $71.initialized = true;
                  return $71;
                }))(function() {
                  return handleAction16(dictMonadAff)(MonadEffect0)(Render.value);
                });
              });
            });
          });
        }
        ;
        if (v2 instanceof SetMaleProportion) {
          return discard32(modify_7(function(s2) {
            var $77 = {};
            for (var $78 in s2) {
              if ({}.hasOwnProperty.call(s2, $78)) {
                $77[$78] = s2[$78];
              }
              ;
            }
            ;
            $77.proportions = (function() {
              var $74 = {};
              for (var $75 in s2.proportions) {
                if ({}.hasOwnProperty.call(s2.proportions, $75)) {
                  $74[$75] = s2["proportions"][$75];
                }
                ;
              }
              ;
              $74.easyMale = v2.value0;
              return $74;
            })();
            return $77;
          }))(function() {
            return handleAction16(dictMonadAff)(MonadEffect0)(Render.value);
          });
        }
        ;
        if (v2 instanceof SetFemaleProportion) {
          return discard32(modify_7(function(s2) {
            var $84 = {};
            for (var $85 in s2) {
              if ({}.hasOwnProperty.call(s2, $85)) {
                $84[$85] = s2[$85];
              }
              ;
            }
            ;
            $84.proportions = (function() {
              var $81 = {};
              for (var $82 in s2.proportions) {
                if ({}.hasOwnProperty.call(s2.proportions, $82)) {
                  $81[$82] = s2["proportions"][$82];
                }
                ;
              }
              ;
              $81.easyFemale = v2.value0;
              return $81;
            })();
            return $84;
          }))(function() {
            return handleAction16(dictMonadAff)(MonadEffect0)(Render.value);
          });
        }
        ;
        if (v2 instanceof ToggleCombined) {
          return discard32(modify_7(function(s2) {
            var $88 = {};
            for (var $89 in s2) {
              if ({}.hasOwnProperty.call(s2, $89)) {
                $88[$89] = s2[$89];
              }
              ;
            }
            ;
            $88.isCombined = !s2.isCombined;
            return $88;
          }))(function() {
            return liftEffect11(function __do7() {
              var maybeHandle = read(forceVizHandleRef)();
              if (maybeHandle instanceof Just) {
                return maybeHandle.value0.toggle();
              }
              ;
              if (maybeHandle instanceof Nothing) {
                return unit;
              }
              ;
              throw new Error("Failed pattern match at D3.Viz.Simpsons.App (line 591, column 7 - line 593, column 29): " + [maybeHandle.constructor.name]);
            });
          });
        }
        ;
        if (v2 instanceof Render) {
          return bind27(get8)(function(state3) {
            return when12(state3.initialized)((function() {
              var derived = deriveData(state3.proportions);
              return liftEffect11(function __do7() {
                updateLineChart(state3.proportions)();
                return updateDataTable(derived)();
              });
            })());
          });
        }
        ;
        throw new Error("Failed pattern match at D3.Viz.Simpsons.App (line 564, column 16 - line 601, column 42): " + [v2.constructor.name]);
      };
    };
  };
  var _paradoxCard = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var renderInteractiveCard = function(dictMonadAff) {
    var component110 = component15(dictMonadAff);
    return function(dataset) {
      return slot2(_paradoxCard)(dataset.id)(component110)(dataset)(absurd);
    };
  };
  var renderPostscriptSection = function(dictMonadAff) {
    return section([classes(["simpsons-postscript"])])([hr_, h2_([text6("Postscript: The Paradox Generalized")]), p([classes(["simpsons-postscript-intro"])])([text6("The visualization above is a tribute to "), a([href4("https://setosa.io/simpsons/"), target6("_blank")])([text6("Lehe & Powell's original")]), text6(", which itself drew from an "), a([href4("https://www.usu.edu/math/schneit/CTIS/SP/"), target6("_blank")])([text6("earlier applet by Schneiter at USU")]), text6(" featuring seven classic Simpson's Paradox examples. Use the sliders to explore how changing the distribution affects combined rates:")]), div4([classes(["simpsons-datasets-grid"])])(map48(renderInteractiveCard(dictMonadAff))(allDatasets2))]);
  };
  var render19 = function(dictMonadAff) {
    var renderPostscriptSection1 = renderPostscriptSection(dictMonadAff);
    return function(state3) {
      var derived = deriveData(state3.proportions);
      return div4([classes(["simpsons-paradox"])])([renderHeader2, section([classes(["simpsons-hero-row"])])([div4([classes(["simpsons-hero-left"])])([renderDonutSection]), div4([classes(["simpsons-hero-right"])])([renderForceSection(state3)])]), section([classes(["simpsons-explore-row"])])([div4([classes(["simpsons-explore-left"])])([renderInteractiveSection(state3)(derived)]), div4([classes(["simpsons-explore-right"])])([renderDataTable(state3)(derived)])]), section([classes(["simpsons-explain-row"])])([div4([classes(["simpsons-explain-left"])])([renderScatterSection]), div4([classes(["simpsons-explain-right"])])([renderIllustrationSection])]), section([classes(["simpsons-proper-pooling"])])([renderProperPoolingSection]), renderMoreInfoSection, renderCredits, renderPostscriptSection1]);
    };
  };
  var component16 = function(dictMonadAff) {
    var render1 = render19(dictMonadAff);
    var handleAction1 = handleAction16(dictMonadAff)(dictMonadAff.MonadEffect0());
    return function(dictMonadEffect) {
      return mkComponent({
        initialState: initialState2,
        render: render1,
        "eval": mkEval({
          handleQuery: defaultEval.handleQuery,
          receive: defaultEval.receive,
          finalize: defaultEval.finalize,
          handleAction: handleAction1,
          initialize: new Just(Initialize17.value)
        })
      });
    };
  };

  // output/Component.Tour.TourSimpsons/index.js
  var discard10 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var pure41 = /* @__PURE__ */ pure(applicativeHalogenM);
  var slot_2 = /* @__PURE__ */ slot_()({
    reflectSymbol: function() {
      return "simpsons";
    }
  })(ordUnit);
  var Initialize18 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var handleAction17 = function(dictMonadAff) {
    var liftAff3 = liftAff(monadAffHalogenM(dictMonadAff));
    return function(v2) {
      return discard10(liftAff3(delay(100)))(function() {
        return pure41(unit);
      });
    };
  };
  var _simpsons = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render20 = function(dictMonadAff) {
    var component110 = component16(dictMonadAff)(dictMonadAff.MonadEffect0());
    return function(v2) {
      return div4([classes(["showcase-page", "simpsons-showcase"])])([render2({
        logoSize: Normal.value,
        quadrant: NoQuadrant.value,
        prevNext: Nothing.value,
        pageTitle: new Just("Simpson's Paradox")
      }), slot_2(_simpsons)(unit)(component110)(unit)]);
    };
  };
  var component17 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render20(dictMonadAff),
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction17(dictMonadAff),
        initialize: new Just(Initialize18.value)
      })
    });
  };

  // output/Component.Shared.DocPage/index.js
  var QuadUnderstanding2 = /* @__PURE__ */ (function() {
    function QuadUnderstanding3() {
    }
    ;
    QuadUnderstanding3.value = new QuadUnderstanding3();
    return QuadUnderstanding3;
  })();
  var component18 = /* @__PURE__ */ mkComponent({
    initialState: /* @__PURE__ */ identity(categoryFn),
    render: function(input3) {
      return div_([text6("Documentation page: " + (input3.pageTitle + " (stub)"))]);
    },
    "eval": /* @__PURE__ */ mkEval(defaultEval)
  });

  // output/Component.Understanding.UnderstandingAttributes/index.js
  var slot_3 = /* @__PURE__ */ slot_()({
    reflectSymbol: function() {
      return "docPage";
    }
  })(ordUnit);
  var _docPage = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render21 = function(dictMonadAff) {
    return function(v2) {
      return slot_3(_docPage)(unit)(component18)({
        docPath: "understanding/attributes",
        pageTitle: "Type-Safe Attributes",
        quadrant: QuadUnderstanding2.value
      });
    };
  };
  var component19 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render21(dictMonadAff),
      "eval": mkEval(defaultEval)
    });
  };

  // output/Component.Understanding.UnderstandingGrammar/index.js
  var pure42 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize19 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var svgDiagram = function(src10) {
    return function(alt9) {
      return img([src9("assets/diagrams/" + src10), alt5(alt9), style2("max-width: 100%; height: auto;")]);
    };
  };
  var renderNavCard = function(title4) {
    return function(href5) {
      return function(description) {
        return a([href4(href5), classes(["section-nav-card"])])([h3_([text6(title4)]), p_([text6(description)])]);
      };
    };
  };
  var render22 = function(v2) {
    return div4([classes(["tutorial-page"])])([render2({
      logoSize: Large2.value,
      quadrant: QuadUnderstanding.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), main_([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text6("The Grammar of D3")]), p_([text6("D3 can be understood as an embedded Domain Specific Language for data visualization. While the full API has a large surface area, the essential grammar is remarkably small. PSD3 captures this grammar in a type-safe, composable way.")]), div4([classes(["section-nav-cards"])])([renderNavCard("Core Primitives")("#core-primitives")("The four essential operations"), renderNavCard("Selection States")("#selection-states")("Phantom types for safety"), renderNavCard("Static vs GUP")("#static-vs-gup")("One-time vs updating"), renderNavCard("TreeAPI")("#tree-api")("Declarative alternative")])]), section([classes(["tutorial-section"]), id2("core-primitives")])([h2([classes(["tutorial-section-title"])])([text6("Core Primitives")]), p_([text6("The grammar of D3 visualizations consists of four essential primitives. Everything else is built from these:")]), table([classes(["tutorial-table"])])([thead_([tr_([th_([text6("Primitive")]), th_([text6("Function")]), th_([text6("PSD3 API")])])]), tbody_([tr_([td_([em_([text6("select")])]), td_([text6("Find an entry point in the DOM")]), td_([code_([text6("select")]), text6(", "), code_([text6("selectAll")])])]), tr_([td_([em_([text6("append")])]), td_([text6("Add a DOM element to a selection")]), td_([code_([text6("appendChild")]), text6(", "), code_([text6("append")])])]), tr_([td_([em_([text6("join")])]), td_([text6("For each datum "), strong_([text6("d")]), text6(", create an element "), strong_([text6("e")])]), td_([code_([text6("appendData")]), text6(", "), code_([text6("joinData")]), text6(", "), code_([text6("renderData")])])]), tr_([td_([em_([text6("attr")])]), td_([text6("Apply attributes to current elements")]), td_([code_([text6("setAttrs")]), text6(" (array of Attribute)")])])])]), p([classes(["code-highlight"])])([text6("Key insight: "), text6("Attributes can be static values or functions of the datum, enabling Data Driven Documents.")])]), section([classes(["tutorial-section"]), id2("selection-states")])([h2([classes(["tutorial-section-title"])])([text6("Selection States (Phantom Types)")]), p_([text6("PSD3 uses phantom types to track what operations are legal on a selection. This catches errors at compile time that D3 would only catch at runtime:")]), div4([classes(["diagram-container"])])([svgDiagram("selection-state-machine.svg")("Selection state machine diagram")]), table([classes(["tutorial-table"])])([thead_([tr_([th_([text6("State")]), th_([text6("Meaning")]), th_([text6("Legal Operations")])])]), tbody_([tr_([td_([code_([text6("SEmpty")])]), td_([text6("Selection has elements but no data")]), td_([text6("appendChild, appendData, joinData")])]), tr_([td_([code_([text6("SPending")])]), td_([text6("Data waiting for elements (enter)")]), td_([text6("append")])]), tr_([td_([code_([text6("SBoundOwns")])]), td_([text6("Elements with bound data")]), td_([text6("setAttrs, appendChildInheriting, merge")])]), tr_([td_([code_([text6("SExiting")])]), td_([text6("Elements to be removed (exit)")]), td_([text6("setAttrsExit, remove")])])])]), p([classes(["code-highlight"])])([text6("Type safety: "), text6("Trying to call "), code_([text6("setAttrs")]), text6(" on an "), code_([text6("SEmpty")]), text6(" selection is a compile error, not a runtime bug.")])]), section([classes(["tutorial-section"]), id2("static-vs-gup")])([h2([classes(["tutorial-section-title"])])([text6("Static Visualizations vs General Update Pattern")]), p_([text6("There are two fundamental patterns for D3 visualizations:")]), h3_([text6("Static: One-time render")]), p_([text6("Use "), code_([text6("appendData")]), text6(" for simple visualizations that render once with fixed data. This is perfect for charts, static hierarchies, and basic data displays.")]), h3_([text6("GUP: Dynamic updates")]), div4([classes(["diagram-container"])])([svgDiagram("gup-flow.svg")("General Update Pattern flow diagram")]), p_([text6("Use "), code_([text6("joinData")]), text6(" when data changes over time. The join splits data into three disjoint sets:")]), ul_([li_([strong_([text6("Enter")]), text6(" - new data items that need elements created")]), li_([strong_([text6("Update")]), text6(" - existing elements that should be updated")]), li_([strong_([text6("Exit")]), text6(" - old elements that should be removed")])]), p([classes(["code-highlight"])])([text6("GUP enables: "), text6("Animated transitions, live data feeds, user interactions, and smooth state changes.")])]), section([classes(["tutorial-section"]), id2("tree-api")])([h2([classes(["tutorial-section-title"])])([text6("TreeAPI: Declarative Alternative")]), p_([text6("For static visualizations, the TreeAPI provides a more declarative, succinct syntax. Instead of imperative method chaining, you declare the desired tree structure.")]), p_([text6("TreeAPI variants handle different use cases:")]), ul_([li_([code_([text6("Node")]), text6(" - static elements with children")]), li_([code_([text6("Join")]), text6(" - data-driven element creation (N elements from N data)")]), li_([code_([text6("NestedJoin")]), text6(" - nested data with type decomposition")]), li_([code_([text6("UpdateJoin")]), text6(" - declarative GUP with enter/update/exit behaviors")])]), p([classes(["code-highlight"])])([text6("Note: "), text6("TreeAPI excels at static visualizations. For complex interactive visualizations with simulations, the underlying Selection API provides more control.")])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Summary")]), p_([text6("The D3 grammar in PSD3:")]), ul_([li_([text6("Four primitives: select, append, join, attr")]), li_([text6("Phantom types enforce correct operation ordering")]), li_([text6("Static visualizations use appendData or TreeAPI")]), li_([text6("Dynamic visualizations use joinData with GUP")]), li_([text6("TreeAPI provides declarative syntax for tree structures")])])])])]);
  };
  var handleAction18 = function(dictMonadAff) {
    return function(v2) {
      return pure42(unit);
    };
  };
  var component20 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render22,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction18(dictMonadAff),
        initialize: new Just(Initialize19.value)
      })
    });
  };

  // output/Component.Understanding.UnderstandingScenes/index.js
  var pure43 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize20 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var svgDiagram2 = function(src10) {
    return function(alt9) {
      return img([src9("assets/diagrams/" + src10), alt5(alt9), style2("max-width: 100%; height: auto;")]);
    };
  };
  var renderNavCard2 = function(title4) {
    return function(href5) {
      return function(description) {
        return a([href4(href5), classes(["section-nav-card"])])([h3_([text6(title4)]), p_([text6(description)])]);
      };
    };
  };
  var render23 = function(v2) {
    return div4([classes(["tutorial-page"])])([render2({
      logoSize: Large2.value,
      quadrant: QuadUnderstanding.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), main_([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text6("Scene Structures & Transitions")]), p_([text6("Complex interactive visualizations like force-directed graphs involve managing multiple concerns: user input, simulation physics, state transitions, and DOM updates. PSD3's Scene structures make this complexity declarative.")]), div4([classes(["section-nav-cards"])])([renderNavCard2("The Challenge")("#challenge")("Why interactive viz is hard"), renderNavCard2("Scene Structures")("#scene-structures")("Declarative state management"), renderNavCard2("Transitions")("#transitions")("Smooth state changes"), renderNavCard2("Code Explorer")("#code-explorer")("Flagship example")])]), section([classes(["tutorial-section"]), id2("challenge")])([h2([classes(["tutorial-section-title"])])([text6("The Challenge of Interactive Visualizations")]), p_([text6("Interactive, updating visualizations with simulations are among the most complex frontend code to write correctly. They involve:")]), ul_([li_([strong_([text6("User actions")]), text6(" - clicks, drags, hovers that trigger state changes")]), li_([strong_([text6("State management")]), text6(" - tracking what's visible, selected, filtered")]), li_([strong_([text6("Simulation physics")]), text6(" - continuous force calculations and position updates")]), li_([strong_([text6("Transitions")]), text6(" - smooth animations between states")]), li_([strong_([text6("DOM synchronization")]), text6(" - keeping the view in sync with the model")])]), p([classes(["code-highlight"])])([text6("Problem: "), text6("Imperative D3 code becomes tangled, hard to reason about, and prone to subtle bugs.")])]), section([classes(["tutorial-section"]), id2("scene-structures")])([h2([classes(["tutorial-section-title"])])([text6("Scene Structures")]), p_([text6("A Scene bundles together all the data needed to render a visualization state:")]), div4([classes(["diagram-container"])])([svgDiagram2("scene-lifecycle.svg")("Scene lifecycle diagram")]), p_([text6("Each scene contains:")]), ul_([li_([strong_([text6("Data")]), text6(" - the nodes, links, or other data to visualize")]), li_([strong_([text6("Configuration")]), text6(" - layout parameters, force strengths, etc.")]), li_([strong_([text6("Behaviors")]), text6(" - how elements enter, update, and exit")])]), p_([text6("When the scene changes, PSD3 automatically:")]), ul_([li_([text6("Calculates the diff between old and new data")]), li_([text6("Creates enter selections for new data")]), li_([text6("Updates existing elements")]), li_([text6("Removes exiting elements with transitions")])])]), section([classes(["tutorial-section"]), id2("transitions")])([h2([classes(["tutorial-section-title"])])([text6("Transition Matrix")]), p_([text6("Complex applications have multiple scenes (states) with transitions between them:")]), div4([classes(["diagram-container"])])([svgDiagram2("engines-comparison.svg")("Engine comparison: Interpolation vs Physics")]), p_([text6("Each transition defines:")]), ul_([li_([strong_([text6("TransitionConfig")]), text6(" - duration, easing, delay")]), li_([strong_([text6("Initial attributes")]), text6(" - starting state for entering elements")]), li_([strong_([text6("Target attributes")]), text6(" - ending state to animate toward")])]), p_([text6("This declarative approach makes complex multi-state visualizations much easier to reason about:")]), div4([classes(["diagram-container"])])([svgDiagram2("imperative-vs-declarative.svg")("Imperative vs declarative comparison")])]), section([classes(["tutorial-section"]), id2("code-explorer")])([h2([classes(["tutorial-section-title"])])([text6("Flagship Example: Code Explorer")]), p_([text6("The Code Explorer demonstrates Scene structures in action. It's an interactive force-directed graph of PureScript module dependencies with:")]), ul_([li_([strong_([text6("Multiple scenes")]), text6(" - different views of the module graph")]), li_([strong_([text6("Smooth transitions")]), text6(" - animated changes between states")]), li_([strong_([text6("User interactions")]), text6(" - click, drag, zoom, expand/collapse")]), li_([strong_([text6("Force simulation")]), text6(" - physics-based layout")])]), p_([text6("Despite this complexity, the core update logic is declarative - you specify the target scene and PSD3 handles the rest.")]), p([classes(["code-highlight"])])([text6("Key insight: "), text6('Think in terms of "what state do I want?" not "what updates do I need to apply?"')])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Summary")]), p_([text6("Scene structures enable:")]), ul_([li_([text6("Declarative state management for complex visualizations")]), li_([text6("Automatic diff calculation and DOM updates")]), li_([text6("Transition matrix for multi-state applications")]), li_([text6("Clean separation of data, configuration, and behavior")]), li_([text6("Easier reasoning about complex interactive visualizations")])])])])]);
  };
  var handleAction19 = function(dictMonadAff) {
    return function(v2) {
      return pure43(unit);
    };
  };
  var component21 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render23,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction19(dictMonadAff),
        initialize: new Just(Initialize20.value)
      })
    });
  };

  // output/Component.Understanding.UnderstandingSelections/index.js
  var pure44 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize21 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var svgDiagram3 = function(src10) {
    return function(alt9) {
      return img([src9("assets/diagrams/" + src10), alt5(alt9), style2("max-width: 100%; height: auto;")]);
    };
  };
  var renderNavCard3 = function(title4) {
    return function(href5) {
      return function(description) {
        return a([href4(href5), classes(["section-nav-card"])])([h3_([text6(title4)]), p_([text6(description)])]);
      };
    };
  };
  var render24 = function(v2) {
    return div4([classes(["tutorial-page"])])([render2({
      logoSize: Large2.value,
      quadrant: QuadUnderstanding.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), main_([section([classes(["tutorial-section", "tutorial-intro"])])([h1([classes(["tutorial-title"])])([text6("Selection Phantom Types")]), p_([text6("PSD3 uses phantom types to encode the state machine of D3 selections. This is similar to the Indexed Monad pattern - operations are only allowed when the selection is in the correct state, and this is enforced at compile time.")]), div4([classes(["section-nav-cards"])])([renderNavCard3("Selection States")("#selection-states")("Five phantom type states"), renderNavCard3("State Machine")("#state-machine")("Valid state transitions"), renderNavCard3("Indexed Monad")("#indexed-monad")("Why this pattern works"), renderNavCard3("Type Safety")("#type-safety")("Errors at compile time")])]), section([classes(["tutorial-section"]), id2("selection-states")])([h2([classes(["tutorial-section-title"])])([text6("The Five Selection States")]), p_([text6("A selection in PSD3 carries a phantom type parameter indicating its current state:")]), table([classes(["tutorial-table"])])([thead_([tr_([th_([text6("State")]), th_([text6("Meaning")]), th_([text6("Valid Operations")])])]), tbody_([tr_([td_([code_([text6("SEmpty")])]), td_([text6("Has parent elements, no data bound")]), td_([text6("appendChild, appendData, joinData")])]), tr_([td_([code_([text6("SPending")])]), td_([text6("Has data, needs elements (enter)")]), td_([text6("append")])]), tr_([td_([code_([text6("SBoundOwns")])]), td_([text6("Elements with bound data")]), td_([text6("setAttrs, appendChildInheriting, merge")])]), tr_([td_([code_([text6("SBoundInherits")])]), td_([text6("Child elements inheriting parent data")]), td_([text6("setAttrs")])]), tr_([td_([code_([text6("SExiting")])]), td_([text6("Elements to be removed (exit)")]), td_([text6("setAttrsExit, remove")])])])]), p([classes(["code-highlight"])])([text6("Note: "), text6("These types are 'phantom' - they exist only at compile time and carry no runtime data.")])]), section([classes(["tutorial-section"]), id2("state-machine")])([h2([classes(["tutorial-section-title"])])([text6("The Selection State Machine")]), p_([text6("Operations transition selections between states. The type system ensures only valid transitions are allowed:")]), div4([classes(["diagram-container"])])([svgDiagram3("selection-state-machine.svg")("Selection state machine diagram")]), p_([text6("Key transitions:")]), ul_([li_([code_([text6("select")]), text6(" \u2192 SEmpty (entry point)")]), li_([code_([text6("joinData")]), text6(" \u2192 JoinResult with enter/update/exit")]), li_([code_([text6("append")]), text6(" \u2192 SPending to SBoundOwns (creates elements)")]), li_([code_([text6("remove")]), text6(" \u2192 SExiting to done (deletes elements)")])])]), section([classes(["tutorial-section"]), id2("indexed-monad")])([h2([classes(["tutorial-section-title"])])([text6("The Indexed Monad Pattern")]), p_([text6("This design is inspired by Indexed Monads (also called Parameterized Monads). Unlike regular monads where bind has type:")]), p([classes(["code-highlight"])])([code_([text6("bind :: m a -> (a -> m b) -> m b")])]), p_([text6("Indexed monads carry additional type parameters for pre/post state:")]), p([classes(["code-highlight"])])([code_([text6("ibind :: m i j a -> (a -> m j k b) -> m i k b")])]), p_([text6("In PSD3, each selection operation is typed with its input and output states:")]), ul_([li_([code_([text6("select :: m (sel SEmpty ...)")])]), li_([code_([text6("append :: sel SPending ... -> m (sel SBoundOwns ...)")])])]), p_([text6("Sequencing operations chains their states - the output of one becomes input to the next.")])]), section([classes(["tutorial-section"]), id2("type-safety")])([h2([classes(["tutorial-section-title"])])([text6("Type Safety in Practice")]), p_([text6("Invalid operations are compile-time errors, not runtime bugs:")]), div4([classes(["diagram-container"])])([svgDiagram3("type-safety-errors.svg")("Type safety errors caught at compile time")]), p_([text6("Examples of errors caught at compile time:")]), ul_([li_([code_([text6("setAttrs attrs emptySel")]), text6(" - Can't set attrs on SEmpty")]), li_([code_([text6("append Circle boundSel")]), text6(" - Can't append to SBoundOwns")]), li_([code_([text6("remove pendingSel")]), text6(" - Can't remove SPending (has no elements)")])]), p_([text6("Compare to D3.js where these errors would fail silently or cause confusing runtime behavior.")]), p([classes(["code-highlight"])])([text6("Benefit: "), text6("The compiler guides you through the correct sequence of operations.")])]), section([classes(["tutorial-section"])])([h2([classes(["tutorial-section-title"])])([text6("Summary")]), p_([text6("Selection phantom types provide:")]), ul_([li_([text6("Five states: SEmpty, SPending, SBoundOwns, SBoundInherits, SExiting")]), li_([text6("State machine enforced by types")]), li_([text6("Indexed Monad pattern for state transitions")]), li_([text6("Invalid operation sequences caught at compile time")]), li_([text6("No more silent failures or undefined behavior")])])])])]);
  };
  var handleAction20 = function(dictMonadAff) {
    return function(v2) {
      return pure44(unit);
    };
  };
  var component22 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render24,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction20(dictMonadAff),
        initialize: new Just(Initialize21.value)
      })
    });
  };

  // output/Debug/foreign.js
  var req = typeof module === "undefined" ? void 0 : module.require;
  var util = (function() {
    try {
      return req === void 0 ? void 0 : req("util");
    } catch (e) {
      return void 0;
    }
  })();
  function _spy(tag, x7) {
    if (util !== void 0) {
      console.log(tag + ":", util.inspect(x7, { depth: null, colors: true }));
    } else {
      console.log(tag + ":", x7);
    }
    return x7;
  }
  var now = (function() {
    var perf;
    if (typeof performance !== "undefined") {
      perf = performance;
    } else if (req) {
      try {
        perf = req("perf_hooks").performance;
      } catch (e) {
      }
    }
    return (function() {
      return (perf || Date).now();
    });
  })();

  // output/Debug/index.js
  var spy = function() {
    return function(tag) {
      return function(a3) {
        return _spy(tag, a3);
      };
    };
  };

  // output/Halogen.Aff.Util/index.js
  var bind28 = /* @__PURE__ */ bind(bindAff);
  var liftEffect5 = /* @__PURE__ */ liftEffect(monadEffectAff);
  var bindFlipped5 = /* @__PURE__ */ bindFlipped(bindEffect);
  var composeKleisliFlipped4 = /* @__PURE__ */ composeKleisliFlipped(bindEffect);
  var pure45 = /* @__PURE__ */ pure(applicativeAff);
  var bindFlipped1 = /* @__PURE__ */ bindFlipped(bindMaybe);
  var pure114 = /* @__PURE__ */ pure(applicativeEffect);
  var map49 = /* @__PURE__ */ map(functorEffect);
  var discard11 = /* @__PURE__ */ discard(discardUnit);
  var throwError2 = /* @__PURE__ */ throwError(monadThrowAff);
  var selectElement4 = function(query2) {
    return bind28(liftEffect5(bindFlipped5(composeKleisliFlipped4((function() {
      var $16 = querySelector(query2);
      return function($17) {
        return $16(toParentNode3($17));
      };
    })())(document2))(windowImpl)))(function(mel) {
      return pure45(bindFlipped1(fromElement)(mel));
    });
  };
  var runHalogenAff = /* @__PURE__ */ runAff_(/* @__PURE__ */ either(throwException)(/* @__PURE__ */ $$const(/* @__PURE__ */ pure114(unit))));
  var awaitLoad = /* @__PURE__ */ makeAff(function(callback) {
    return function __do7() {
      var rs = bindFlipped5(readyState)(bindFlipped5(document2)(windowImpl))();
      if (rs instanceof Loading) {
        var et = map49(toEventTarget)(windowImpl)();
        var listener = eventListener(function(v2) {
          return callback(new Right(unit));
        })();
        addEventListener2(domcontentloaded)(listener)(false)(et)();
        return effectCanceler(removeEventListener2(domcontentloaded)(listener)(false)(et));
      }
      ;
      callback(new Right(unit))();
      return nonCanceler;
    };
  });
  var awaitBody = /* @__PURE__ */ discard11(bindAff)(awaitLoad)(function() {
    return bind28(selectElement4("body"))(function(body2) {
      return maybe(throwError2(error2("Could not find body")))(pure45)(body2);
    });
  });

  // output/Control.Monad.Fork.Class/index.js
  var monadForkAff = {
    suspend: suspendAff,
    fork: forkAff,
    join: joinFiber,
    Monad0: function() {
      return monadAff;
    },
    Functor1: function() {
      return functorFiber;
    }
  };
  var fork2 = function(dict) {
    return dict.fork;
  };

  // output/Halogen.Aff.Driver.State/index.js
  var unRenderStateX = unsafeCoerce2;
  var unDriverStateX = unsafeCoerce2;
  var renderStateX_ = function(dictApplicative) {
    var traverse_11 = traverse_(dictApplicative)(foldableMaybe);
    return function(f) {
      return unDriverStateX(function(st) {
        return traverse_11(f)(st.rendering);
      });
    };
  };
  var mkRenderStateX = unsafeCoerce2;
  var renderStateX = function(dictFunctor) {
    return function(f) {
      return unDriverStateX(function(st) {
        return mkRenderStateX(f(st.rendering));
      });
    };
  };
  var mkDriverStateXRef = unsafeCoerce2;
  var mapDriverState = function(f) {
    return function(v2) {
      return f(v2);
    };
  };
  var initDriverState = function(component33) {
    return function(input3) {
      return function(handler3) {
        return function(lchs) {
          return function __do7() {
            var selfRef = $$new({})();
            var childrenIn = $$new(empty5)();
            var childrenOut = $$new(empty5)();
            var handlerRef = $$new(handler3)();
            var pendingQueries = $$new(new Just(Nil.value))();
            var pendingOuts = $$new(new Just(Nil.value))();
            var pendingHandlers = $$new(Nothing.value)();
            var fresh2 = $$new(1)();
            var subscriptions = $$new(new Just(empty2))();
            var forks = $$new(empty2)();
            var ds = {
              component: component33,
              state: component33.initialState(input3),
              refs: empty2,
              children: empty5,
              childrenIn,
              childrenOut,
              selfRef,
              handlerRef,
              pendingQueries,
              pendingOuts,
              pendingHandlers,
              rendering: Nothing.value,
              fresh: fresh2,
              subscriptions,
              forks,
              lifecycleHandlers: lchs
            };
            write(ds)(selfRef)();
            return mkDriverStateXRef(selfRef);
          };
        };
      };
    };
  };

  // output/Halogen.Aff.Driver.Eval/index.js
  var traverse_8 = /* @__PURE__ */ traverse_(applicativeEffect)(foldableMaybe);
  var bindFlipped6 = /* @__PURE__ */ bindFlipped(bindMaybe);
  var lookup10 = /* @__PURE__ */ lookup(ordSubscriptionId);
  var bind110 = /* @__PURE__ */ bind(bindAff);
  var liftEffect6 = /* @__PURE__ */ liftEffect(monadEffectAff);
  var discard12 = /* @__PURE__ */ discard(discardUnit);
  var discard13 = /* @__PURE__ */ discard12(bindAff);
  var traverse_12 = /* @__PURE__ */ traverse_(applicativeAff);
  var traverse_22 = /* @__PURE__ */ traverse_12(foldableList);
  var fork3 = /* @__PURE__ */ fork2(monadForkAff);
  var parSequence_2 = /* @__PURE__ */ parSequence_(parallelAff)(applicativeParAff)(foldableList);
  var pure46 = /* @__PURE__ */ pure(applicativeAff);
  var map50 = /* @__PURE__ */ map(functorCoyoneda);
  var parallel3 = /* @__PURE__ */ parallel(parallelAff);
  var map119 = /* @__PURE__ */ map(functorAff);
  var sequential3 = /* @__PURE__ */ sequential(parallelAff);
  var map210 = /* @__PURE__ */ map(functorMaybe);
  var insert13 = /* @__PURE__ */ insert(ordSubscriptionId);
  var retractFreeAp2 = /* @__PURE__ */ retractFreeAp(applicativeParAff);
  var $$delete7 = /* @__PURE__ */ $$delete(ordForkId);
  var unlessM2 = /* @__PURE__ */ unlessM(monadEffect);
  var insert14 = /* @__PURE__ */ insert(ordForkId);
  var traverse_32 = /* @__PURE__ */ traverse_12(foldableMaybe);
  var lookup12 = /* @__PURE__ */ lookup(ordForkId);
  var lookup22 = /* @__PURE__ */ lookup(ordString);
  var foldFree2 = /* @__PURE__ */ foldFree(monadRecAff);
  var alter2 = /* @__PURE__ */ alter(ordString);
  var unsubscribe3 = function(sid) {
    return function(ref2) {
      return function __do7() {
        var v2 = read(ref2)();
        var subs = read(v2.subscriptions)();
        return traverse_8(unsubscribe)(bindFlipped6(lookup10(sid))(subs))();
      };
    };
  };
  var queueOrRun = function(ref2) {
    return function(au) {
      return bind110(liftEffect6(read(ref2)))(function(v2) {
        if (v2 instanceof Nothing) {
          return au;
        }
        ;
        if (v2 instanceof Just) {
          return liftEffect6(write(new Just(new Cons(au, v2.value0)))(ref2));
        }
        ;
        throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 188, column 33 - line 190, column 57): " + [v2.constructor.name]);
      });
    };
  };
  var handleLifecycle = function(lchs) {
    return function(f) {
      return discard13(liftEffect6(write({
        initializers: Nil.value,
        finalizers: Nil.value
      })(lchs)))(function() {
        return bind110(liftEffect6(f))(function(result) {
          return bind110(liftEffect6(read(lchs)))(function(v2) {
            return discard13(traverse_22(fork3)(v2.finalizers))(function() {
              return discard13(parSequence_2(v2.initializers))(function() {
                return pure46(result);
              });
            });
          });
        });
      });
    };
  };
  var handleAff = /* @__PURE__ */ runAff_(/* @__PURE__ */ either(throwException)(/* @__PURE__ */ $$const(/* @__PURE__ */ pure(applicativeEffect)(unit))));
  var fresh = function(f) {
    return function(ref2) {
      return bind110(liftEffect6(read(ref2)))(function(v2) {
        return liftEffect6(modify$prime(function(i2) {
          return {
            state: i2 + 1 | 0,
            value: f(i2)
          };
        })(v2.fresh));
      });
    };
  };
  var evalQ = function(render35) {
    return function(ref2) {
      return function(q3) {
        return bind110(liftEffect6(read(ref2)))(function(v2) {
          return evalM(render35)(ref2)(v2["component"]["eval"](new Query(map50(Just.create)(liftCoyoneda(q3)), $$const(Nothing.value))));
        });
      };
    };
  };
  var evalM = function(render35) {
    return function(initRef) {
      return function(v2) {
        var evalChildQuery = function(ref2) {
          return function(cqb) {
            return bind110(liftEffect6(read(ref2)))(function(v1) {
              return unChildQueryBox(function(v22) {
                var evalChild = function(v3) {
                  return parallel3(bind110(liftEffect6(read(v3)))(function(dsx) {
                    return unDriverStateX(function(ds) {
                      return evalQ(render35)(ds.selfRef)(v22.value1);
                    })(dsx);
                  }));
                };
                return map119(v22.value2)(sequential3(v22.value0(applicativeParAff)(evalChild)(v1.children)));
              })(cqb);
            });
          };
        };
        var go2 = function(ref2) {
          return function(v1) {
            if (v1 instanceof State) {
              return bind110(liftEffect6(read(ref2)))(function(v22) {
                var v3 = v1.value0(v22.state);
                if (unsafeRefEq(v22.state)(v3.value1)) {
                  return pure46(v3.value0);
                }
                ;
                if (otherwise) {
                  return discard13(liftEffect6(write({
                    component: v22.component,
                    refs: v22.refs,
                    children: v22.children,
                    childrenIn: v22.childrenIn,
                    childrenOut: v22.childrenOut,
                    selfRef: v22.selfRef,
                    handlerRef: v22.handlerRef,
                    pendingQueries: v22.pendingQueries,
                    pendingOuts: v22.pendingOuts,
                    pendingHandlers: v22.pendingHandlers,
                    rendering: v22.rendering,
                    fresh: v22.fresh,
                    subscriptions: v22.subscriptions,
                    forks: v22.forks,
                    lifecycleHandlers: v22.lifecycleHandlers,
                    state: v3.value1
                  })(ref2)))(function() {
                    return discard13(handleLifecycle(v22.lifecycleHandlers)(render35(v22.lifecycleHandlers)(ref2)))(function() {
                      return pure46(v3.value0);
                    });
                  });
                }
                ;
                throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 86, column 7 - line 92, column 21): " + [v3.constructor.name]);
              });
            }
            ;
            if (v1 instanceof Subscribe) {
              return bind110(fresh(SubscriptionId)(ref2))(function(sid) {
                return bind110(liftEffect6(subscribe2(v1.value0(sid))(function(act) {
                  return handleAff(evalF(render35)(ref2)(new Action(act)));
                })))(function(finalize) {
                  return bind110(liftEffect6(read(ref2)))(function(v22) {
                    return discard13(liftEffect6(modify_2(map210(insert13(sid)(finalize)))(v22.subscriptions)))(function() {
                      return pure46(v1.value1(sid));
                    });
                  });
                });
              });
            }
            ;
            if (v1 instanceof Unsubscribe) {
              return discard13(liftEffect6(unsubscribe3(v1.value0)(ref2)))(function() {
                return pure46(v1.value1);
              });
            }
            ;
            if (v1 instanceof Lift2) {
              return v1.value0;
            }
            ;
            if (v1 instanceof ChildQuery2) {
              return evalChildQuery(ref2)(v1.value0);
            }
            ;
            if (v1 instanceof Raise) {
              return bind110(liftEffect6(read(ref2)))(function(v22) {
                return bind110(liftEffect6(read(v22.handlerRef)))(function(handler3) {
                  return discard13(queueOrRun(v22.pendingOuts)(handler3(v1.value0)))(function() {
                    return pure46(v1.value1);
                  });
                });
              });
            }
            ;
            if (v1 instanceof Par) {
              return sequential3(retractFreeAp2(hoistFreeAp((function() {
                var $119 = evalM(render35)(ref2);
                return function($120) {
                  return parallel3($119($120));
                };
              })())(v1.value0)));
            }
            ;
            if (v1 instanceof Fork) {
              return bind110(fresh(ForkId)(ref2))(function(fid) {
                return bind110(liftEffect6(read(ref2)))(function(v22) {
                  return bind110(liftEffect6($$new(false)))(function(doneRef) {
                    return bind110(fork3($$finally(liftEffect6(function __do7() {
                      modify_2($$delete7(fid))(v22.forks)();
                      return write(true)(doneRef)();
                    }))(evalM(render35)(ref2)(v1.value0))))(function(fiber) {
                      return discard13(liftEffect6(unlessM2(read(doneRef))(modify_2(insert14(fid)(fiber))(v22.forks))))(function() {
                        return pure46(v1.value1(fid));
                      });
                    });
                  });
                });
              });
            }
            ;
            if (v1 instanceof Join2) {
              return bind110(liftEffect6(read(ref2)))(function(v22) {
                return bind110(liftEffect6(read(v22.forks)))(function(forkMap) {
                  return discard13(traverse_32(joinFiber)(lookup12(v1.value0)(forkMap)))(function() {
                    return pure46(v1.value1);
                  });
                });
              });
            }
            ;
            if (v1 instanceof Kill) {
              return bind110(liftEffect6(read(ref2)))(function(v22) {
                return bind110(liftEffect6(read(v22.forks)))(function(forkMap) {
                  return discard13(traverse_32(killFiber(error2("Cancelled")))(lookup12(v1.value0)(forkMap)))(function() {
                    return pure46(v1.value1);
                  });
                });
              });
            }
            ;
            if (v1 instanceof GetRef) {
              return bind110(liftEffect6(read(ref2)))(function(v22) {
                return pure46(v1.value1(lookup22(v1.value0)(v22.refs)));
              });
            }
            ;
            throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 83, column 12 - line 139, column 33): " + [v1.constructor.name]);
          };
        };
        return foldFree2(go2(initRef))(v2);
      };
    };
  };
  var evalF = function(render35) {
    return function(ref2) {
      return function(v2) {
        if (v2 instanceof RefUpdate) {
          return liftEffect6(flip(modify_2)(ref2)(mapDriverState(function(st) {
            return {
              component: st.component,
              state: st.state,
              children: st.children,
              childrenIn: st.childrenIn,
              childrenOut: st.childrenOut,
              selfRef: st.selfRef,
              handlerRef: st.handlerRef,
              pendingQueries: st.pendingQueries,
              pendingOuts: st.pendingOuts,
              pendingHandlers: st.pendingHandlers,
              rendering: st.rendering,
              fresh: st.fresh,
              subscriptions: st.subscriptions,
              forks: st.forks,
              lifecycleHandlers: st.lifecycleHandlers,
              refs: alter2($$const(v2.value1))(v2.value0)(st.refs)
            };
          })));
        }
        ;
        if (v2 instanceof Action) {
          return bind110(liftEffect6(read(ref2)))(function(v1) {
            return evalM(render35)(ref2)(v1["component"]["eval"](new Action2(v2.value0, unit)));
          });
        }
        ;
        throw new Error("Failed pattern match at Halogen.Aff.Driver.Eval (line 52, column 20 - line 58, column 62): " + [v2.constructor.name]);
      };
    };
  };

  // output/Halogen.Aff.Driver/index.js
  var bind29 = /* @__PURE__ */ bind(bindEffect);
  var discard14 = /* @__PURE__ */ discard(discardUnit);
  var for_9 = /* @__PURE__ */ for_(applicativeEffect)(foldableMaybe);
  var traverse_9 = /* @__PURE__ */ traverse_(applicativeAff)(foldableList);
  var fork4 = /* @__PURE__ */ fork2(monadForkAff);
  var bindFlipped7 = /* @__PURE__ */ bindFlipped(bindEffect);
  var traverse_13 = /* @__PURE__ */ traverse_(applicativeEffect);
  var traverse_23 = /* @__PURE__ */ traverse_13(foldableMaybe);
  var traverse_33 = /* @__PURE__ */ traverse_13(foldableMap);
  var discard25 = /* @__PURE__ */ discard14(bindAff);
  var parSequence_3 = /* @__PURE__ */ parSequence_(parallelAff)(applicativeParAff)(foldableList);
  var liftEffect7 = /* @__PURE__ */ liftEffect(monadEffectAff);
  var pure47 = /* @__PURE__ */ pure(applicativeEffect);
  var map51 = /* @__PURE__ */ map(functorEffect);
  var pure115 = /* @__PURE__ */ pure(applicativeAff);
  var when13 = /* @__PURE__ */ when(applicativeEffect);
  var renderStateX2 = /* @__PURE__ */ renderStateX(functorEffect);
  var $$void15 = /* @__PURE__ */ $$void(functorAff);
  var foreachSlot2 = /* @__PURE__ */ foreachSlot(applicativeEffect);
  var renderStateX_2 = /* @__PURE__ */ renderStateX_(applicativeEffect);
  var tailRecM3 = /* @__PURE__ */ tailRecM(monadRecEffect);
  var voidLeft3 = /* @__PURE__ */ voidLeft(functorEffect);
  var bind111 = /* @__PURE__ */ bind(bindAff);
  var liftEffect1 = /* @__PURE__ */ liftEffect(monadEffectEffect);
  var newLifecycleHandlers = /* @__PURE__ */ (function() {
    return $$new({
      initializers: Nil.value,
      finalizers: Nil.value
    });
  })();
  var handlePending = function(ref2) {
    return function __do7() {
      var queue = read(ref2)();
      write(Nothing.value)(ref2)();
      return for_9(queue)((function() {
        var $59 = traverse_9(fork4);
        return function($60) {
          return handleAff($59(reverse2($60)));
        };
      })())();
    };
  };
  var cleanupSubscriptionsAndForks = function(v2) {
    return function __do7() {
      bindFlipped7(traverse_23(traverse_33(unsubscribe)))(read(v2.subscriptions))();
      write(Nothing.value)(v2.subscriptions)();
      bindFlipped7(traverse_33((function() {
        var $61 = killFiber(error2("finalized"));
        return function($62) {
          return handleAff($61($62));
        };
      })()))(read(v2.forks))();
      return write(empty2)(v2.forks)();
    };
  };
  var runUI = function(renderSpec2) {
    return function(component33) {
      return function(i2) {
        var squashChildInitializers = function(lchs) {
          return function(preInits) {
            return unDriverStateX(function(st) {
              var parentInitializer = evalM(render35)(st.selfRef)(st["component"]["eval"](new Initialize(unit)));
              return modify_2(function(handlers) {
                return {
                  initializers: new Cons(discard25(parSequence_3(reverse2(handlers.initializers)))(function() {
                    return discard25(parentInitializer)(function() {
                      return liftEffect7(function __do7() {
                        handlePending(st.pendingQueries)();
                        return handlePending(st.pendingOuts)();
                      });
                    });
                  }), preInits),
                  finalizers: handlers.finalizers
                };
              })(lchs);
            });
          };
        };
        var runComponent = function(lchs) {
          return function(handler3) {
            return function(j) {
              return unComponent(function(c2) {
                return function __do7() {
                  var lchs$prime = newLifecycleHandlers();
                  var $$var2 = initDriverState(c2)(j)(handler3)(lchs$prime)();
                  var pre2 = read(lchs)();
                  write({
                    initializers: Nil.value,
                    finalizers: pre2.finalizers
                  })(lchs)();
                  bindFlipped7(unDriverStateX((function() {
                    var $63 = render35(lchs);
                    return function($64) {
                      return $63((function(v2) {
                        return v2.selfRef;
                      })($64));
                    };
                  })()))(read($$var2))();
                  bindFlipped7(squashChildInitializers(lchs)(pre2.initializers))(read($$var2))();
                  return $$var2;
                };
              });
            };
          };
        };
        var renderChild = function(lchs) {
          return function(handler3) {
            return function(childrenInRef) {
              return function(childrenOutRef) {
                return unComponentSlot(function(slot6) {
                  return function __do7() {
                    var childrenIn = map51(slot6.pop)(read(childrenInRef))();
                    var $$var2 = (function() {
                      if (childrenIn instanceof Just) {
                        write(childrenIn.value0.value1)(childrenInRef)();
                        var dsx = read(childrenIn.value0.value0)();
                        unDriverStateX(function(st) {
                          return function __do8() {
                            flip(write)(st.handlerRef)((function() {
                              var $65 = maybe(pure115(unit))(handler3);
                              return function($66) {
                                return $65(slot6.output($66));
                              };
                            })())();
                            return handleAff(evalM(render35)(st.selfRef)(st["component"]["eval"](new Receive(slot6.input, unit))))();
                          };
                        })(dsx)();
                        return childrenIn.value0.value0;
                      }
                      ;
                      if (childrenIn instanceof Nothing) {
                        return runComponent(lchs)((function() {
                          var $67 = maybe(pure115(unit))(handler3);
                          return function($68) {
                            return $67(slot6.output($68));
                          };
                        })())(slot6.input)(slot6.component)();
                      }
                      ;
                      throw new Error("Failed pattern match at Halogen.Aff.Driver (line 213, column 14 - line 222, column 98): " + [childrenIn.constructor.name]);
                    })();
                    var isDuplicate = map51(function($69) {
                      return isJust(slot6.get($69));
                    })(read(childrenOutRef))();
                    when13(isDuplicate)(warn("Halogen: Duplicate slot address was detected during rendering, unexpected results may occur"))();
                    modify_2(slot6.set($$var2))(childrenOutRef)();
                    return bind29(read($$var2))(renderStateX2(function(v2) {
                      if (v2 instanceof Nothing) {
                        return $$throw("Halogen internal error: child was not initialized in renderChild");
                      }
                      ;
                      if (v2 instanceof Just) {
                        return pure47(renderSpec2.renderChild(v2.value0));
                      }
                      ;
                      throw new Error("Failed pattern match at Halogen.Aff.Driver (line 227, column 37 - line 229, column 50): " + [v2.constructor.name]);
                    }))();
                  };
                });
              };
            };
          };
        };
        var render35 = function(lchs) {
          return function($$var2) {
            return function __do7() {
              var v2 = read($$var2)();
              var shouldProcessHandlers = map51(isNothing)(read(v2.pendingHandlers))();
              when13(shouldProcessHandlers)(write(new Just(Nil.value))(v2.pendingHandlers))();
              write(empty5)(v2.childrenOut)();
              write(v2.children)(v2.childrenIn)();
              var handler3 = (function() {
                var $70 = queueOrRun(v2.pendingHandlers);
                var $71 = evalF(render35)(v2.selfRef);
                return function($72) {
                  return $70($$void15($71($72)));
                };
              })();
              var childHandler = (function() {
                var $73 = queueOrRun(v2.pendingQueries);
                return function($74) {
                  return $73(handler3(Action.create($74)));
                };
              })();
              var rendering = renderSpec2.render(function($75) {
                return handleAff(handler3($75));
              })(renderChild(lchs)(childHandler)(v2.childrenIn)(v2.childrenOut))(v2.component.render(v2.state))(v2.rendering)();
              var children2 = read(v2.childrenOut)();
              var childrenIn = read(v2.childrenIn)();
              foreachSlot2(childrenIn)(function(v1) {
                return function __do8() {
                  var childDS = read(v1)();
                  renderStateX_2(renderSpec2.removeChild)(childDS)();
                  return finalize(lchs)(childDS)();
                };
              })();
              flip(modify_2)(v2.selfRef)(mapDriverState(function(ds$prime) {
                return {
                  component: ds$prime.component,
                  state: ds$prime.state,
                  refs: ds$prime.refs,
                  childrenIn: ds$prime.childrenIn,
                  childrenOut: ds$prime.childrenOut,
                  selfRef: ds$prime.selfRef,
                  handlerRef: ds$prime.handlerRef,
                  pendingQueries: ds$prime.pendingQueries,
                  pendingOuts: ds$prime.pendingOuts,
                  pendingHandlers: ds$prime.pendingHandlers,
                  fresh: ds$prime.fresh,
                  subscriptions: ds$prime.subscriptions,
                  forks: ds$prime.forks,
                  lifecycleHandlers: ds$prime.lifecycleHandlers,
                  rendering: new Just(rendering),
                  children: children2
                };
              }))();
              return when13(shouldProcessHandlers)(flip(tailRecM3)(unit)(function(v1) {
                return function __do8() {
                  var handlers = read(v2.pendingHandlers)();
                  write(new Just(Nil.value))(v2.pendingHandlers)();
                  traverse_23((function() {
                    var $76 = traverse_9(fork4);
                    return function($77) {
                      return handleAff($76(reverse2($77)));
                    };
                  })())(handlers)();
                  var mmore = read(v2.pendingHandlers)();
                  var $52 = maybe(false)($$null2)(mmore);
                  if ($52) {
                    return voidLeft3(write(Nothing.value)(v2.pendingHandlers))(new Done(unit))();
                  }
                  ;
                  return new Loop(unit);
                };
              }))();
            };
          };
        };
        var finalize = function(lchs) {
          return unDriverStateX(function(st) {
            return function __do7() {
              cleanupSubscriptionsAndForks(st)();
              var f = evalM(render35)(st.selfRef)(st["component"]["eval"](new Finalize(unit)));
              modify_2(function(handlers) {
                return {
                  initializers: handlers.initializers,
                  finalizers: new Cons(f, handlers.finalizers)
                };
              })(lchs)();
              return foreachSlot2(st.children)(function(v2) {
                return function __do8() {
                  var dsx = read(v2)();
                  return finalize(lchs)(dsx)();
                };
              })();
            };
          });
        };
        var evalDriver = function(disposed) {
          return function(ref2) {
            return function(q3) {
              return bind111(liftEffect7(read(disposed)))(function(v2) {
                if (v2) {
                  return pure115(Nothing.value);
                }
                ;
                return evalQ(render35)(ref2)(q3);
              });
            };
          };
        };
        var dispose = function(disposed) {
          return function(lchs) {
            return function(dsx) {
              return handleLifecycle(lchs)(function __do7() {
                var v2 = read(disposed)();
                if (v2) {
                  return unit;
                }
                ;
                write(true)(disposed)();
                finalize(lchs)(dsx)();
                return unDriverStateX(function(v1) {
                  return function __do8() {
                    var v22 = liftEffect1(read(v1.selfRef))();
                    return for_9(v22.rendering)(renderSpec2.dispose)();
                  };
                })(dsx)();
              });
            };
          };
        };
        return bind111(liftEffect7(newLifecycleHandlers))(function(lchs) {
          return bind111(liftEffect7($$new(false)))(function(disposed) {
            return handleLifecycle(lchs)(function __do7() {
              var sio = create8();
              var dsx = bindFlipped7(read)(runComponent(lchs)((function() {
                var $78 = notify(sio.listener);
                return function($79) {
                  return liftEffect7($78($79));
                };
              })())(i2)(component33))();
              return unDriverStateX(function(st) {
                return pure47({
                  query: evalDriver(disposed)(st.selfRef),
                  messages: sio.emitter,
                  dispose: dispose(disposed)(lchs)(dsx)
                });
              })(dsx)();
            });
          });
        });
      };
    };
  };

  // output/Halogen.VDom.Driver/index.js
  var $runtime_lazy10 = function(name16, moduleName, init3) {
    var state3 = 0;
    var val;
    return function(lineNumber) {
      if (state3 === 2) return val;
      if (state3 === 1) throw new ReferenceError(name16 + " was needed before it finished initializing (module " + moduleName + ", line " + lineNumber + ")", moduleName, lineNumber);
      state3 = 1;
      val = init3();
      state3 = 2;
      return val;
    };
  };
  var $$void16 = /* @__PURE__ */ $$void(functorEffect);
  var pure48 = /* @__PURE__ */ pure(applicativeEffect);
  var traverse_10 = /* @__PURE__ */ traverse_(applicativeEffect)(foldableMaybe);
  var unwrap8 = /* @__PURE__ */ unwrap();
  var when14 = /* @__PURE__ */ when(applicativeEffect);
  var not5 = /* @__PURE__ */ not(/* @__PURE__ */ heytingAlgebraFunction(/* @__PURE__ */ heytingAlgebraFunction(heytingAlgebraBoolean)));
  var identity15 = /* @__PURE__ */ identity(categoryFn);
  var bind112 = /* @__PURE__ */ bind(bindAff);
  var liftEffect8 = /* @__PURE__ */ liftEffect(monadEffectAff);
  var map52 = /* @__PURE__ */ map(functorEffect);
  var bindFlipped8 = /* @__PURE__ */ bindFlipped(bindEffect);
  var substInParent = function(v2) {
    return function(v1) {
      return function(v22) {
        if (v1 instanceof Just && v22 instanceof Just) {
          return $$void16(insertBefore(v2)(v1.value0)(v22.value0));
        }
        ;
        if (v1 instanceof Nothing && v22 instanceof Just) {
          return $$void16(appendChild(v2)(v22.value0));
        }
        ;
        return pure48(unit);
      };
    };
  };
  var removeChild3 = function(v2) {
    return function __do7() {
      var npn = parentNode(v2.node)();
      return traverse_10(function(pn) {
        return removeChild(v2.node)(pn);
      })(npn)();
    };
  };
  var mkSpec = function(handler3) {
    return function(renderChildRef) {
      return function(document3) {
        var getNode = unRenderStateX(function(v2) {
          return v2.node;
        });
        var done = function(st) {
          if (st instanceof Just) {
            return halt(st.value0);
          }
          ;
          return unit;
        };
        var buildWidget2 = function(spec) {
          var buildThunk2 = buildThunk(unwrap8)(spec);
          var $lazy_patch = $runtime_lazy10("patch", "Halogen.VDom.Driver", function() {
            return function(st, slot6) {
              if (st instanceof Just) {
                if (slot6 instanceof ComponentSlot) {
                  halt(st.value0);
                  return $lazy_renderComponentSlot(100)(slot6.value0);
                }
                ;
                if (slot6 instanceof ThunkSlot) {
                  var step$prime = step2(st.value0, slot6.value0);
                  return mkStep(new Step2(extract2(step$prime), new Just(step$prime), $lazy_patch(103), done));
                }
                ;
                throw new Error("Failed pattern match at Halogen.VDom.Driver (line 97, column 22 - line 103, column 79): " + [slot6.constructor.name]);
              }
              ;
              return $lazy_render(104)(slot6);
            };
          });
          var $lazy_render = $runtime_lazy10("render", "Halogen.VDom.Driver", function() {
            return function(slot6) {
              if (slot6 instanceof ComponentSlot) {
                return $lazy_renderComponentSlot(86)(slot6.value0);
              }
              ;
              if (slot6 instanceof ThunkSlot) {
                var step5 = buildThunk2(slot6.value0);
                return mkStep(new Step2(extract2(step5), new Just(step5), $lazy_patch(89), done));
              }
              ;
              throw new Error("Failed pattern match at Halogen.VDom.Driver (line 84, column 7 - line 89, column 75): " + [slot6.constructor.name]);
            };
          });
          var $lazy_renderComponentSlot = $runtime_lazy10("renderComponentSlot", "Halogen.VDom.Driver", function() {
            return function(cs) {
              var renderChild = read(renderChildRef)();
              var rsx = renderChild(cs)();
              var node = getNode(rsx);
              return mkStep(new Step2(node, Nothing.value, $lazy_patch(117), done));
            };
          });
          var patch2 = $lazy_patch(91);
          var render35 = $lazy_render(82);
          var renderComponentSlot = $lazy_renderComponentSlot(109);
          return render35;
        };
        var buildAttributes = buildProp(handler3);
        return {
          buildWidget: buildWidget2,
          buildAttributes,
          document: document3
        };
      };
    };
  };
  var renderSpec = function(document3) {
    return function(container) {
      var render35 = function(handler3) {
        return function(child) {
          return function(v2) {
            return function(v1) {
              if (v1 instanceof Nothing) {
                return function __do7() {
                  var renderChildRef = $$new(child)();
                  var spec = mkSpec(handler3)(renderChildRef)(document3);
                  var machine = buildVDom(spec)(v2);
                  var node = extract2(machine);
                  $$void16(appendChild(node)(toNode2(container)))();
                  return {
                    machine,
                    node,
                    renderChildRef
                  };
                };
              }
              ;
              if (v1 instanceof Just) {
                return function __do7() {
                  write(child)(v1.value0.renderChildRef)();
                  var parent2 = parentNode(v1.value0.node)();
                  var nextSib = nextSibling(v1.value0.node)();
                  var machine$prime = step2(v1.value0.machine, v2);
                  var newNode = extract2(machine$prime);
                  when14(not5(unsafeRefEq)(v1.value0.node)(newNode))(substInParent(newNode)(nextSib)(parent2))();
                  return {
                    machine: machine$prime,
                    node: newNode,
                    renderChildRef: v1.value0.renderChildRef
                  };
                };
              }
              ;
              throw new Error("Failed pattern match at Halogen.VDom.Driver (line 157, column 5 - line 173, column 80): " + [v1.constructor.name]);
            };
          };
        };
      };
      return {
        render: render35,
        renderChild: identity15,
        removeChild: removeChild3,
        dispose: removeChild3
      };
    };
  };
  var runUI2 = function(component33) {
    return function(i2) {
      return function(element4) {
        return bind112(liftEffect8(map52(toDocument)(bindFlipped8(document2)(windowImpl))))(function(document3) {
          return runUI(renderSpec(document3)(element4))(component33)(i2);
        });
      };
    };
  };

  // output/Hylograph.Shared.Footer/index.js
  var render25 = /* @__PURE__ */ (function() {
    return footer([classes(["site-footer"])])([hr([classes(["site-footer__rule"])]), div4([classes(["site-footer__content"])])([a([href4("#" + routeToPath(Acknowledgements.value)), classes(["site-footer__link"])])([text6("Acknowledgements")])])]);
  })();

  // output/Hylograph.Acknowledgements/index.js
  var pure49 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize22 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var render26 = function(v2) {
    return div4([classes(["acknowledgements-page"])])([render2({
      logoSize: Large2.value,
      quadrant: NoQuadrant.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), div4([classes(["acknowledgements-content"])])([h1([classes(["acknowledgements-title"])])([text6("Acknowledgements")]), section([classes(["acknowledgements-section"])])([h2_([text6("D3.js and Data Visualization")]), p_([text6("This project would not exist without "), a([href4("https://d3js.org/")])([text6("D3.js")]), text6(", created by "), a([href4("https://bost.ocks.org/mike/")])([text6("Mike Bostock")]), text6(". D3 revolutionized web-based data visualization and established patterns that have become fundamental to the field. Many of the examples in Hylograph are adapted from Mike's extensive collection of examples and tutorials.")]), p_([text6("Thanks so much to Mike for creating D3, for his clear documentation and examples, and for making the library open source. His work on Observable and continued contributions to visualization continue to inspire.")])]), section([classes(["acknowledgements-section"])])([h2_([text6("Observable Examples (ISC License)")]), p_([text6("Several chart examples are based on visualizations from "), a([href4("https://observablehq.com/")])([text6("Observable")]), text6(", licensed under the ISC License. These include:")]), ul_([li_([a([href4("https://observablehq.com/@d3/grouped-bar-chart/2")])([text6("Grouped Bar Chart")]), text6(" (Copyright 2018\u20132020 Observable, Inc.)")]), li_([a([href4("https://observablehq.com/@d3/multi-line-chart/2")])([text6("Multi-Line Chart")]), text6(" (Copyright 2018\u20132023 Observable, Inc.)")]), li_([a([href4("https://observablehq.com/@d3/radial-stacked-bar-chart/2")])([text6("Radial Stacked Bar Chart")]), text6(" (Copyright 2019\u20132023 Observable, Inc., created by Mike Bostock)")])]), p_([text6("These examples have been reimplemented in PureScript to demonstrate the library's capabilities while faithfully reproducing the original visualizations' dimensions, scales, and styling.")])]), section([classes(["acknowledgements-section"])])([h2_([text6("Data Visualization Pioneers")]), p_([a([href4("https://www.edwardtufte.com/")])([text6("Edward Tufte")]), text6("'s work on information design and visual communication established many of the principles we follow today. His books remain essential reading for anyone interested in effective data presentation.")]), p_([a([href4("https://www.gapminder.org/about/hans-rosling/")])([text6("Hans Rosling")]), text6("'s passionate advocacy for data literacy and his innovative animated visualizations (particularly the Gapminder World visualization) showed how data can tell compelling stories. The Wealth & Health example in this project is inspired by his work.")])]), section([classes(["acknowledgements-section"])])([h2_([text6("PureScript and Functional Programming")]), p_([a([href4("http://functorial.com/")])([text6("Phil Freeman")]), text6(", for his presentation and example of finally tagless encodings in PureScript which provided the spark for this library's architecture.")]), p_([text6("Ian Ross, for his solution to the polymorphic attribute architecture with typeclasses.")]), p_([text6("The PureScript Core Team and the wider PureScript community for building this language and ecosystem.")])]), section([classes(["acknowledgements-section"])])([h2_([text6("AI Collaboration")]), p_([text6("The 2024-2025 iteration of this project was developed in collaboration with Claude (Anthropic). This represents a significant experiment in human-AI pair programming on a complex, long-running project.")]), p_([text6("We believe transparency about AI involvement is important. This collaboration demonstrates both the potential and the nature of human-AI development: the human brings domain expertise, architectural vision, and quality judgment; the AI brings rapid implementation, pattern recognition across large codebases, and tireless iteration. Neither could have produced this result alone.")])]), section([classes(["acknowledgements-section"])])([h2_([text6("About This Project")]), p_([text6("Hylograph is an experimental exploration of what data visualization APIs might look like in a strongly-typed functional programming language. It aims to preserve D3's flexibility while adding type safety and composability.")]), p_([text6("This project is open source and available on GitHub. Contributions, feedback, and suggestions are always welcome.")])])]), render25]);
  };
  var handleAction21 = function(dictMonadAff) {
    return function(v2) {
      return pure49(unit);
    };
  };
  var component23 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render26,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction21(dictMonadAff),
        initialize: new Just(Initialize22.value)
      })
    });
  };

  // output/Hylograph.ForceEngine.Events/index.js
  var pure50 = /* @__PURE__ */ pure(applicativeEffect);
  var defaultCallbacks = function __do6() {
    var tickRef = $$new(pure50(unit))();
    var startRef = $$new(pure50(unit))();
    var stopRef = $$new(pure50(unit))();
    var alphaRef = $$new(function(v2) {
      return pure50(unit);
    })();
    return {
      onTick: tickRef,
      onStart: startRef,
      onStop: stopRef,
      onAlphaThreshold: alphaRef
    };
  };

  // output/Component.Hero.ConceptGraph/index.js
  var show38 = /* @__PURE__ */ show(showNumber);
  var map53 = /* @__PURE__ */ map(functorArray);
  var fromFoldable20 = /* @__PURE__ */ fromFoldable2(ordString)(foldableArray);
  var bind30 = /* @__PURE__ */ bind(bindMaybe);
  var lookup11 = /* @__PURE__ */ lookup(ordString);
  var pure51 = /* @__PURE__ */ pure(applicativeMaybe);
  var mod7 = /* @__PURE__ */ mod(euclideanRingInt);
  var bind113 = /* @__PURE__ */ bind(bindHalogenM);
  var get9 = /* @__PURE__ */ get(monadStateHalogenM);
  var liftEffect9 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var discard15 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var $$void17 = /* @__PURE__ */ $$void(functorHalogenM);
  var mapFlipped10 = /* @__PURE__ */ mapFlipped(functorEmitter);
  var modify_8 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var liftAff2 = /* @__PURE__ */ liftAff(/* @__PURE__ */ monadAffHalogenM(monadAffAff));
  var show116 = /* @__PURE__ */ show(showInt);
  var pure116 = /* @__PURE__ */ pure(applicativeHalogenM);
  var gets2 = /* @__PURE__ */ gets(monadStateHalogenM);
  var BuildsTo = /* @__PURE__ */ (function() {
    function BuildsTo2() {
    }
    ;
    BuildsTo2.value = new BuildsTo2();
    return BuildsTo2;
  })();
  var RunsOn = /* @__PURE__ */ (function() {
    function RunsOn2() {
    }
    ;
    RunsOn2.value = new RunsOn2();
    return RunsOn2;
  })();
  var Enables = /* @__PURE__ */ (function() {
    function Enables2() {
    }
    ;
    Enables2.value = new Enables2();
    return Enables2;
  })();
  var UsesLibrary = /* @__PURE__ */ (function() {
    function UsesLibrary2() {
    }
    ;
    UsesLibrary2.value = new UsesLibrary2();
    return UsesLibrary2;
  })();
  var CatCore = /* @__PURE__ */ (function() {
    function CatCore2() {
    }
    ;
    CatCore2.value = new CatCore2();
    return CatCore2;
  })();
  var CatBackend = /* @__PURE__ */ (function() {
    function CatBackend2() {
    }
    ;
    CatBackend2.value = new CatBackend2();
    return CatBackend2;
  })();
  var CatRuntime = /* @__PURE__ */ (function() {
    function CatRuntime2() {
    }
    ;
    CatRuntime2.value = new CatRuntime2();
    return CatRuntime2;
  })();
  var CatConcept = /* @__PURE__ */ (function() {
    function CatConcept2() {
    }
    ;
    CatConcept2.value = new CatConcept2();
    return CatConcept2;
  })();
  var CatLibrary = /* @__PURE__ */ (function() {
    function CatLibrary2() {
    }
    ;
    CatLibrary2.value = new CatLibrary2();
    return CatLibrary2;
  })();
  var CatExtLibrary = /* @__PURE__ */ (function() {
    function CatExtLibrary2() {
    }
    ;
    CatExtLibrary2.value = new CatExtLibrary2();
    return CatExtLibrary2;
  })();
  var CatShowcase = /* @__PURE__ */ (function() {
    function CatShowcase2() {
    }
    ;
    CatShowcase2.value = new CatShowcase2();
    return CatShowcase2;
  })();
  var CatDomain = /* @__PURE__ */ (function() {
    function CatDomain2() {
    }
    ;
    CatDomain2.value = new CatDomain2();
    return CatDomain2;
  })();
  var Initialize23 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var SimTick2 = /* @__PURE__ */ (function() {
    function SimTick3() {
    }
    ;
    SimTick3.value = new SimTick3();
    return SimTick3;
  })();
  var StartDrag = /* @__PURE__ */ (function() {
    function StartDrag2(value0, value1) {
      this.value0 = value0;
      this.value1 = value1;
    }
    ;
    StartDrag2.create = function(value0) {
      return function(value1) {
        return new StartDrag2(value0, value1);
      };
    };
    return StartDrag2;
  })();
  var DragMove = /* @__PURE__ */ (function() {
    function DragMove2(value0) {
      this.value0 = value0;
    }
    ;
    DragMove2.create = function(value0) {
      return new DragMove2(value0);
    };
    return DragMove2;
  })();
  var EndDrag = /* @__PURE__ */ (function() {
    function EndDrag2() {
    }
    ;
    EndDrag2.value = new EndDrag2();
    return EndDrag2;
  })();
  var render27 = function(state3) {
    var linkTypeClass = function(v2) {
      if (v2 instanceof BuildsTo) {
        return "builds-to";
      }
      ;
      if (v2 instanceof RunsOn) {
        return "runs-on";
      }
      ;
      if (v2 instanceof Enables) {
        return "enables";
      }
      ;
      if (v2 instanceof UsesLibrary) {
        return "uses-library";
      }
      ;
      throw new Error("Failed pattern match at Component.Hero.ConceptGraph (line 229, column 19 - line 233, column 34): " + [v2.constructor.name]);
    };
    var renderLink = function(link4) {
      var v2 = index(state3.nodes)(link4.target);
      var v1 = index(state3.nodes)(link4.source);
      if (v1 instanceof Just && v2 instanceof Just) {
        return line([x12(v1.value0.x), y12(v1.value0.y), x23(v2.value0.x), y23(v2.value0.y), classes2(["concept-graph__link", "concept-graph__link--" + linkTypeClass(link4.linkType)])]);
      }
      ;
      return g([])([]);
    };
    var categoryClass = function(v2) {
      if (v2 instanceof CatCore) {
        return "core";
      }
      ;
      if (v2 instanceof CatBackend) {
        return "backend";
      }
      ;
      if (v2 instanceof CatRuntime) {
        return "runtime";
      }
      ;
      if (v2 instanceof CatConcept) {
        return "concept";
      }
      ;
      if (v2 instanceof CatLibrary) {
        return "library";
      }
      ;
      if (v2 instanceof CatExtLibrary) {
        return "ext-library";
      }
      ;
      if (v2 instanceof CatShowcase) {
        return "showcase";
      }
      ;
      if (v2 instanceof CatDomain) {
        return "domain";
      }
      ;
      throw new Error("Failed pattern match at Component.Hero.ConceptGraph (line 258, column 19 - line 266, column 26): " + [v2.constructor.name]);
    };
    var renderNode = function(node) {
      return g([classes2(["concept-graph__node", "concept-graph__node--" + categoryClass(node.category)]), transform2([new Translate(node.x, node.y)]), onMouseDown(StartDrag.create(node.label))])([circle([r3(node.r), classes2(["concept-graph__circle"])]), text7([classes2(["concept-graph__label"]), attr4("dominant-baseline")("hanging"), attr4("text-anchor")("end"), attr4("x")("2"), attr4("y")(show38(node.r + 2)), attr4("transform")("rotate(-12)")])([text6(node.label)])]);
    };
    return svg([viewBox3(0)(0)(state3.width)(state3.height), classes2(["concept-graph"]), onMouseMove(DragMove.create), onMouseUp(function(v2) {
      return EndDrag.value;
    }), onMouseLeave(function(v2) {
      return EndDrag.value;
    })])([g([classes2(["concept-graph__links"])])(map53(renderLink)(state3.links)), g([classes2(["concept-graph__nodes"])])(map53(renderNode)(state3.nodes))]);
  };
  var parseLinkType = function(v2) {
    if (v2 === "builds-to") {
      return BuildsTo.value;
    }
    ;
    if (v2 === "runs-on") {
      return RunsOn.value;
    }
    ;
    if (v2 === "enables") {
      return Enables.value;
    }
    ;
    if (v2 === "uses-library") {
      return UsesLibrary.value;
    }
    ;
    return Enables.value;
  };
  var parseEdgesCSV = function(nodes) {
    return function(csv) {
      var lines = filter(function(l2) {
        return trim(l2) !== "" && trim(l2) !== "source,target,type";
      })(split("\n")(csv));
      var labelToIdx = fromFoldable20(mapWithIndex2(function(i2) {
        return function(n) {
          return new Tuple(n.label, i2);
        };
      })(nodes));
      var parseEdge = function(line2) {
        var v2 = split(",")(trim(line2));
        if (v2.length === 3) {
          return bind30(lookup11(trim(v2[0]))(labelToIdx))(function(srcIdx) {
            return bind30(lookup11(trim(v2[1]))(labelToIdx))(function(tgtIdx) {
              return pure51({
                source: srcIdx,
                target: tgtIdx,
                linkType: parseLinkType(trim(v2[2]))
              });
            });
          });
        }
        ;
        return Nothing.value;
      };
      return catMaybes(map53(parseEdge)(lines));
    };
  };
  var parseCategory = function(v2) {
    if (v2 === "core") {
      return CatCore.value;
    }
    ;
    if (v2 === "backend") {
      return CatBackend.value;
    }
    ;
    if (v2 === "runtime") {
      return CatRuntime.value;
    }
    ;
    if (v2 === "concept") {
      return CatConcept.value;
    }
    ;
    if (v2 === "library") {
      return CatLibrary.value;
    }
    ;
    if (v2 === "ext-library") {
      return CatExtLibrary.value;
    }
    ;
    if (v2 === "showcase") {
      return CatShowcase.value;
    }
    ;
    if (v2 === "domain") {
      return CatDomain.value;
    }
    ;
    return CatConcept.value;
  };
  var mkNode2 = function(nodeId) {
    return function(label5) {
      return function(category) {
        return function(x7) {
          return function(y7) {
            return function(fx) {
              return function(fy) {
                return function(r8) {
                  return {
                    id: nodeId,
                    label: label5,
                    category,
                    x: x7,
                    y: y7,
                    vx: 0,
                    vy: 0,
                    fx,
                    fy,
                    r: r8
                  };
                };
              };
            };
          };
        };
      };
    };
  };
  var initialState3 = function(v2) {
    return {
      nodes: [],
      links: [],
      simulation: Nothing.value,
      width: 400,
      height: 360,
      dragging: Nothing.value,
      lastMouse: {
        x: 0,
        y: 0
      },
      loading: true
    };
  };
  var eqCategory = {
    eq: function(x7) {
      return function(y7) {
        if (x7 instanceof CatCore && y7 instanceof CatCore) {
          return true;
        }
        ;
        if (x7 instanceof CatBackend && y7 instanceof CatBackend) {
          return true;
        }
        ;
        if (x7 instanceof CatRuntime && y7 instanceof CatRuntime) {
          return true;
        }
        ;
        if (x7 instanceof CatConcept && y7 instanceof CatConcept) {
          return true;
        }
        ;
        if (x7 instanceof CatLibrary && y7 instanceof CatLibrary) {
          return true;
        }
        ;
        if (x7 instanceof CatExtLibrary && y7 instanceof CatExtLibrary) {
          return true;
        }
        ;
        if (x7 instanceof CatShowcase && y7 instanceof CatShowcase) {
          return true;
        }
        ;
        if (x7 instanceof CatDomain && y7 instanceof CatDomain) {
          return true;
        }
        ;
        return false;
      };
    }
  };
  var eq14 = /* @__PURE__ */ eq(eqCategory);
  var categoryLayer = function(v2) {
    if (v2 instanceof CatCore) {
      return 0;
    }
    ;
    if (v2 instanceof CatBackend) {
      return 1;
    }
    ;
    if (v2 instanceof CatRuntime) {
      return 2;
    }
    ;
    if (v2 instanceof CatConcept) {
      return 3;
    }
    ;
    if (v2 instanceof CatLibrary) {
      return 3;
    }
    ;
    if (v2 instanceof CatExtLibrary) {
      return 4;
    }
    ;
    if (v2 instanceof CatShowcase) {
      return 5;
    }
    ;
    if (v2 instanceof CatDomain) {
      return 6;
    }
    ;
    throw new Error("Failed pattern match at Component.Hero.ConceptGraph (line 96, column 17 - line 104, column 17): " + [v2.constructor.name]);
  };
  var parseNodesCSV = function(centerX) {
    return function(centerY2) {
      return function(csv) {
        var lines = filter(function(l2) {
          return trim(l2) !== "" && trim(l2) !== "label,category,r";
        })(split("\n")(csv));
        var height14 = centerY2 * 2;
        var layerSpacing = height14 / 7;
        var parseNode = function(idx) {
          return function(line2) {
            var v2 = split(",")(trim(line2));
            if (v2.length === 3) {
              var spreadX = centerX + (toNumber(mod7(idx)(5)) - 2) * 40;
              var r8 = fromMaybe(6)(fromString(trim(v2[2])));
              var category = parseCategory(trim(v2[1]));
              var fx = (function() {
                var $86 = eq14(category)(CatCore.value);
                if ($86) {
                  return notNull(centerX);
                }
                ;
                return nullImpl;
              })();
              var layer = categoryLayer(category);
              var layerY = 30 + toNumber(layer) * layerSpacing;
              var fy = notNull(layerY);
              return new Just(mkNode2(idx)(trim(v2[0]))(category)(spreadX)(layerY)(fx)(fy)(r8));
            }
            ;
            return Nothing.value;
          };
        };
        return catMaybes(mapWithIndex2(parseNode)(lines));
      };
    };
  };
  var handleAction22 = /* @__PURE__ */ (function() {
    var unpinIfMatch = function(lbl) {
      return function(node) {
        if (node.label === lbl && node.label !== "PureScript") {
          return {
            id: node.id,
            x: node.x,
            y: node.y,
            vx: node.vx,
            vy: node.vy,
            label: node.label,
            category: node.category,
            r: node.r,
            fx: nullImpl,
            fy: nullImpl
          };
        }
        ;
        if (otherwise) {
          return node;
        }
        ;
        throw new Error("Failed pattern match at Component.Hero.ConceptGraph (line 437, column 3 - line 437, column 55): " + [lbl.constructor.name, node.constructor.name]);
      };
    };
    var setupSimulation = function(nodes) {
      return function(links) {
        return bind113(get9)(function(state3) {
          var centerY2 = state3.height / 2;
          var centerX = state3.width / 2;
          return bind113(liftEffect9(defaultCallbacks))(function(callbacks) {
            return bind113(liftEffect9(createWithCallbacks(defaultConfig2)(callbacks)))(function(sim) {
              return discard15(liftEffect9(setNodes(nodes)(sim)))(function() {
                return discard15(liftEffect9(addForce2(new ManyBody("charge", {
                  strength: -40,
                  theta: 0.9,
                  distanceMin: 1,
                  distanceMax: 150
                }))(sim)))(function() {
                  return discard15(liftEffect9(addForce2(new Collide("collide", {
                    radius: 8,
                    strength: 0.7,
                    iterations: 1
                  }))(sim)))(function() {
                    return discard15(liftEffect9(addForce2(new Link("links", {
                      distance: 30,
                      strength: 0.5,
                      iterations: 2
                    }))(sim)))(function() {
                      return discard15(liftEffect9(setLinks(map53(function(l2) {
                        return {
                          source: l2.source,
                          target: l2.target
                        };
                      })(links))(sim)))(function() {
                        return discard15(liftEffect9(addForce2(new Center("center", {
                          x: centerX,
                          y: centerY2,
                          strength: 0.1
                        }))(sim)))(function() {
                          return discard15(liftEffect9(addForce2(new PositionX("forceX", {
                            x: centerX,
                            strength: 0.06
                          }))(sim)))(function() {
                            return discard15(liftEffect9(addForce2(new PositionY("forceY", {
                              y: centerY2,
                              strength: 0.06
                            }))(sim)))(function() {
                              return bind113(liftEffect9(create8))(function(v2) {
                                return discard15(liftEffect9(onTick(notify(v2.listener)(unit))(sim)))(function() {
                                  return discard15($$void17(subscribe3(mapFlipped10(v2.emitter)(function(v1) {
                                    return SimTick2.value;
                                  }))))(function() {
                                    return discard15(liftEffect9(start2(sim)))(function() {
                                      return modify_8(function(v1) {
                                        var $93 = {};
                                        for (var $94 in v1) {
                                          if ({}.hasOwnProperty.call(v1, $94)) {
                                            $93[$94] = v1[$94];
                                          }
                                          ;
                                        }
                                        ;
                                        $93.simulation = new Just(sim);
                                        return $93;
                                      });
                                    });
                                  });
                                });
                              });
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          });
        });
      };
    };
    var pinIfMatch = function(lbl) {
      return function(x7) {
        return function(y7) {
          return function(node) {
            if (node.label === lbl) {
              return {
                id: node.id,
                x: node.x,
                y: node.y,
                vx: node.vx,
                vy: node.vy,
                label: node.label,
                category: node.category,
                r: node.r,
                fx: notNull(x7),
                fy: notNull(y7)
              };
            }
            ;
            if (otherwise) {
              return node;
            }
            ;
            throw new Error("Failed pattern match at Component.Hero.ConceptGraph (line 427, column 3 - line 427, column 73): " + [lbl.constructor.name, x7.constructor.name, y7.constructor.name, node.constructor.name]);
          };
        };
      };
    };
    var moveByDelta = function(lbl) {
      return function(dx) {
        return function(dy) {
          return function(node) {
            if (node.label === lbl) {
              return {
                id: node.id,
                vx: node.vx,
                vy: node.vy,
                label: node.label,
                category: node.category,
                r: node.r,
                x: node.x + dx,
                y: node.y + dy,
                fx: notNull(node.x + dx),
                fy: notNull(node.y + dy)
              };
            }
            ;
            if (otherwise) {
              return node;
            }
            ;
            throw new Error("Failed pattern match at Component.Hero.ConceptGraph (line 432, column 3 - line 432, column 74): " + [lbl.constructor.name, dx.constructor.name, dy.constructor.name, node.constructor.name]);
          };
        };
      };
    };
    return function(v2) {
      if (v2 instanceof Initialize23) {
        return bind113(get9)(function(state3) {
          var centerY2 = state3.height / 2;
          var centerX = state3.width / 2;
          return bind113(liftAff2(get4(string)("assets/data/concept-graph-nodes.csv")))(function(nodesResult) {
            return bind113(liftAff2(get4(string)("assets/data/concept-graph-edges.csv")))(function(edgesResult) {
              if (nodesResult instanceof Right && edgesResult instanceof Right) {
                var nodes = parseNodesCSV(centerX)(centerY2)(nodesResult.value0.body);
                var links = parseEdgesCSV(nodes)(edgesResult.value0.body);
                return discard15(liftEffect9(log2("Loaded " + (show116(length(nodes)) + (" nodes, " + (show116(length(links)) + " links"))))))(function() {
                  return discard15(modify_8(function(v1) {
                    var $109 = {};
                    for (var $110 in v1) {
                      if ({}.hasOwnProperty.call(v1, $110)) {
                        $109[$110] = v1[$110];
                      }
                      ;
                    }
                    ;
                    $109.nodes = nodes;
                    $109.links = links;
                    $109.loading = false;
                    return $109;
                  }))(function() {
                    return setupSimulation(nodes)(links);
                  });
                });
              }
              ;
              return discard15(liftEffect9(log2("Failed to load concept graph CSV files")))(function() {
                return modify_8(function(v1) {
                  var $114 = {};
                  for (var $115 in v1) {
                    if ({}.hasOwnProperty.call(v1, $115)) {
                      $114[$115] = v1[$115];
                    }
                    ;
                  }
                  ;
                  $114.loading = false;
                  return $114;
                });
              });
            });
          });
        });
      }
      ;
      if (v2 instanceof SimTick2) {
        return bind113(get9)(function(state3) {
          if (state3.simulation instanceof Nothing) {
            return pure116(unit);
          }
          ;
          if (state3.simulation instanceof Just) {
            return bind113(liftEffect9(getNodes(state3.simulation.value0)))(function(nodes) {
              return modify_8(function(v1) {
                var $118 = {};
                for (var $119 in v1) {
                  if ({}.hasOwnProperty.call(v1, $119)) {
                    $118[$119] = v1[$119];
                  }
                  ;
                }
                ;
                $118.nodes = nodes;
                return $118;
              });
            });
          }
          ;
          throw new Error("Failed pattern match at Component.Hero.ConceptGraph (line 292, column 5 - line 296, column 38): " + [state3.simulation.constructor.name]);
        });
      }
      ;
      if (v2 instanceof StartDrag) {
        var mouseY = toNumber(clientY(v2.value1));
        var mouseX = toNumber(clientX(v2.value1));
        return bind113(get9)(function(state3) {
          var v1 = find2(function(n) {
            return n.label === v2.value0;
          })(state3.nodes);
          if (v1 instanceof Nothing) {
            return pure116(unit);
          }
          ;
          if (v1 instanceof Just) {
            return discard15(modify_8(function(v22) {
              var $123 = {};
              for (var $124 in v22) {
                if ({}.hasOwnProperty.call(v22, $124)) {
                  $123[$124] = v22[$124];
                }
                ;
              }
              ;
              $123.dragging = new Just(v2.value0);
              $123.lastMouse = {
                x: mouseX,
                y: mouseY
              };
              return $123;
            }))(function() {
              return discard15(modify_8(function(s2) {
                var $126 = {};
                for (var $127 in s2) {
                  if ({}.hasOwnProperty.call(s2, $127)) {
                    $126[$127] = s2[$127];
                  }
                  ;
                }
                ;
                $126.nodes = map53(pinIfMatch(v2.value0)(v1.value0.x)(v1.value0.y))(s2.nodes);
                return $126;
              }))(function() {
                if (state3.simulation instanceof Nothing) {
                  return pure116(unit);
                }
                ;
                if (state3.simulation instanceof Just) {
                  return bind113(gets2(function(v22) {
                    return v22.nodes;
                  }))(function(nodes) {
                    return discard15(liftEffect9(setNodes(nodes)(state3.simulation.value0)))(function() {
                      return liftEffect9(reheat(state3.simulation.value0));
                    });
                  });
                }
                ;
                throw new Error("Failed pattern match at Component.Hero.ConceptGraph (line 312, column 9 - line 317, column 39): " + [state3.simulation.constructor.name]);
              });
            });
          }
          ;
          throw new Error("Failed pattern match at Component.Hero.ConceptGraph (line 303, column 5 - line 317, column 39): " + [v1.constructor.name]);
        });
      }
      ;
      if (v2 instanceof DragMove) {
        return bind113(get9)(function(state3) {
          if (state3.dragging instanceof Nothing) {
            return pure116(unit);
          }
          ;
          if (state3.dragging instanceof Just) {
            var mouseY2 = toNumber(clientY(v2.value0));
            var mouseX2 = toNumber(clientX(v2.value0));
            var deltaY = mouseY2 - state3.lastMouse.y;
            var deltaX = mouseX2 - state3.lastMouse.x;
            return discard15(modify_8(function(v1) {
              var $135 = {};
              for (var $136 in v1) {
                if ({}.hasOwnProperty.call(v1, $136)) {
                  $135[$136] = v1[$136];
                }
                ;
              }
              ;
              $135.lastMouse = {
                x: mouseX2,
                y: mouseY2
              };
              return $135;
            }))(function() {
              return discard15(modify_8(function(s2) {
                var $138 = {};
                for (var $139 in s2) {
                  if ({}.hasOwnProperty.call(s2, $139)) {
                    $138[$139] = s2[$139];
                  }
                  ;
                }
                ;
                $138.nodes = map53(moveByDelta(state3.dragging.value0)(deltaX * 1)(deltaY * 1))(s2.nodes);
                return $138;
              }))(function() {
                if (state3.simulation instanceof Nothing) {
                  return pure116(unit);
                }
                ;
                if (state3.simulation instanceof Just) {
                  return bind113(gets2(function(v1) {
                    return v1.nodes;
                  }))(function(nodes) {
                    return liftEffect9(setNodes(nodes)(state3.simulation.value0));
                  });
                }
                ;
                throw new Error("Failed pattern match at Component.Hero.ConceptGraph (line 337, column 9 - line 341, column 47): " + [state3.simulation.constructor.name]);
              });
            });
          }
          ;
          throw new Error("Failed pattern match at Component.Hero.ConceptGraph (line 321, column 5 - line 341, column 47): " + [state3.dragging.constructor.name]);
        });
      }
      ;
      if (v2 instanceof EndDrag) {
        return bind113(get9)(function(state3) {
          if (state3.dragging instanceof Nothing) {
            return pure116(unit);
          }
          ;
          if (state3.dragging instanceof Just) {
            return discard15(modify_8(function(s2) {
              var $146 = {};
              for (var $147 in s2) {
                if ({}.hasOwnProperty.call(s2, $147)) {
                  $146[$147] = s2[$147];
                }
                ;
              }
              ;
              $146.dragging = Nothing.value;
              $146.nodes = map53(unpinIfMatch(state3.dragging.value0))(s2.nodes);
              return $146;
            }))(function() {
              if (state3.simulation instanceof Nothing) {
                return pure116(unit);
              }
              ;
              if (state3.simulation instanceof Just) {
                return bind113(gets2(function(v1) {
                  return v1.nodes;
                }))(function(nodes) {
                  return liftEffect9(setNodes(nodes)(state3.simulation.value0));
                });
              }
              ;
              throw new Error("Failed pattern match at Component.Hero.ConceptGraph (line 353, column 9 - line 357, column 47): " + [state3.simulation.constructor.name]);
            });
          }
          ;
          throw new Error("Failed pattern match at Component.Hero.ConceptGraph (line 345, column 5 - line 357, column 47): " + [state3.dragging.constructor.name]);
        });
      }
      ;
      throw new Error("Failed pattern match at Component.Hero.ConceptGraph (line 269, column 16 - line 357, column 47): " + [v2.constructor.name]);
    };
  })();
  var component24 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: initialState3,
      render: render27,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction22,
        initialize: new Just(Initialize23.value)
      })
    });
  })();

  // output/Hylograph.Home/index.js
  var pure52 = /* @__PURE__ */ pure(applicativeHalogenM);
  var slot3 = /* @__PURE__ */ slot()({
    reflectSymbol: function() {
      return "conceptGraph";
    }
  })(ordUnit);
  var Initialize24 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var renderShowcaseSpineItem = function(title4) {
    return function(subtitle) {
      return function(backend) {
        return function(screenshotPath) {
          return function(mHref) {
            var wrapper = (function() {
              if (mHref instanceof Just) {
                return a([href4(mHref.value0), classes(["spine-item"])]);
              }
              ;
              if (mHref instanceof Nothing) {
                return div4([classes(["spine-item"])]);
              }
              ;
              throw new Error("Failed pattern match at Hylograph.Home (line 383, column 13 - line 390, column 8): " + [mHref.constructor.name]);
            })();
            return wrapper([div4([classes(["spine-item__card"])])([div4([classes(["spine-item__badges"])])([span4([classes(["spine-item__badge", "spine-item__badge--" + backend])])([text6(backend)]), span4([classes(["spine-item__badge", "spine-item__badge--showcase"])])([text6("showcase")])]), h3([classes(["spine-item__title"])])([text6(title4)]), p([classes(["spine-item__subtitle"])])([text6(subtitle)])]), div4([classes(["spine-item__screenshot"])])([img([src9(screenshotPath), alt5(title4 + " screenshot")])])]);
          };
        };
      };
    };
  };
  var renderSpineItem = renderShowcaseSpineItem;
  var renderLibrarySpineItem = function(title4) {
    return function(subtitle) {
      return function(screenshotPath) {
        return function(href5) {
          return a([href4(href5), classes(["spine-item"])])([div4([classes(["spine-item__card"])])([span4([classes(["spine-item__badge", "spine-item__badge--library"])])([text6("library")]), h3([classes(["spine-item__title"])])([text6(title4)]), p([classes(["spine-item__subtitle"])])([text6(subtitle)])]), div4([classes(["spine-item__screenshot"])])([img([src9(screenshotPath), alt5(title4 + " screenshot")])])]);
        };
      };
    };
  };
  var renderAcrosticLine = function(prefix) {
    return function(letter) {
      return function(suffix) {
        return function(backend) {
          return function(isPrimary) {
            var wordClass = (function() {
              if (isPrimary) {
                return "acrostic-word--primary";
              }
              ;
              return "acrostic-word--backend";
            })();
            return div4([classes(["acrostic-word"])])([div4([classes(["acrostic-lhs", wordClass])])([text6((function() {
              var $15 = prefix === "";
              if ($15) {
                return "\xA0";
              }
              ;
              return prefix;
            })())]), div4([classes(["acrostic-letter"]), attr4("data-backend")(backend)])([text6(letter)]), div4([classes(["acrostic-rhs", wordClass])])([text6((function() {
              var $16 = suffix === "";
              if ($16) {
                return "\xA0";
              }
              ;
              return suffix;
            })())])]);
          };
        };
      };
    };
  };
  var handleAction23 = function(v2) {
    return pure52(unit);
  };
  var _conceptGraph = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var render28 = function(v2) {
    return div4([classes(["home-page", "home-page--no-nav"])])([section([id2("hero"), classes(["home-hero", "home-hero--poster"])])([div4([classes(["home-hero__acrostic-col"])])([div4([classes(["home-acrostic"])])([renderAcrosticLine("")("p")("urescript")("purescript")(true), renderAcrosticLine("n")("o")("de")("nodejs")(false), renderAcrosticLine("er")("l")("ang")("erlang")(false), renderAcrosticLine("p")("y")("thon")("python")(false), renderAcrosticLine("")("g")("raphical")("js")(true), renderAcrosticLine("")("l")("ua")("lua")(false), renderAcrosticLine("expl")("o")("ration")("wasm")(true), renderAcrosticLine("rus")("t")("")("wasm")(false)])]), div4([classes(["home-hero__image-col"])])([slot3(_conceptGraph)(unit)(component24)(unit)(absurd)])]), section([id2("showcases"), classes(["home-showcases"])])([div4([classes(["home-showcases__spine-container"])])([renderLibrarySpineItem("hylograph-selection")("Type-safe D3 selections with a declarative AST")("assets/screenshots/hylograph-explorer.jpg")("/psd3/selection/demo/"), renderLibrarySpineItem("hylograph-simulation")("Force simulation with D3 or WASM backend")("assets/screenshots/force-playground.jpeg")("#" + routeToPath(ForcePlayground.value)), renderLibrarySpineItem("hylograph-layout")("Pure PureScript hierarchical layouts")("assets/screenshots/lib-layout.jpeg")("/psd3/layout/demo/"), renderLibrarySpineItem("hylograph-graph")("Graph algorithms for visualization")("assets/screenshots/lib-graph.jpeg")("/psd3/graph/demo/"), renderLibrarySpineItem("hylograph-music")("Data sonification and live coding")("assets/screenshots/lib-music.jpeg")("/psd3/music/demo/"), renderSpineItem("Algorave / Tidal")("Live coding music with Purerl")("erlang")("assets/screenshots/algorave.png")(new Just("/tidal")), renderSpineItem("Scientific Python")("UMAP, NumPy, NetworkX via PurePy")("python")("assets/screenshots/embedding-explorer.png")(new Just("/ge")), renderSpineItem("Code Explorer")("Interactive AST visualization")("nodejs")("assets/screenshots/code-explorer.jpg")(new Just("/code")), renderSpineItem("Sankey Editor")("Functional reactive data flows")("js")("assets/screenshots/sankey-editor.png")(new Just("/sankey")), renderSpineItem("Optic Menagerie")("Interactive optics on heterogeneous trees")("purescript")("assets/screenshots/emptier-coinage.jpeg")(new Just("/optics")), renderSpineItem("Morphism Zoo")("A children's book of recursion schemes")("purescript")("assets/screenshots/morphism-zoo.jpeg")(new Just("/zoo")), renderSpineItem("Simpson's Paradox")("Interactive statistical paradox visualization")("js")("assets/screenshots/simpsons-paradox.jpeg")(new Just("#" + routeToPath(SimpsonsV2.value))), renderSpineItem("Site Explorer")("AST-driven Halogen route discovery and dead code detection")("nodejs")("assets/screenshots/site-explorer.jpg")(new Just("/spider/")), renderSpineItem("Lua Edge Router")("The invisible showcase routing this site")("lua")("assets/screenshots/scuppered-ligature.jpeg")(new Just("#" + routeToPath(ShowcaseLuaEdge.value)))])]), section([id2("hylograph"), classes(["home-hylograph-link"])])([div4([classes(["hylograph-attribution"])])([img([src9("assets/hylo-twins.png"), alt5("Ana and Cata, the Hylograph twins"), classes(["hylograph-twins"])]), p([classes(["hylograph-message"])])([text6("Almost all of these demos are made possible through the "), a([href4("https://hylograph.net"), classes(["hylograph-link"])])([text6("purescript-hylograph")]), text6(" library suite.")])])]), render25]);
  };
  var component25 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render28,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction23,
        initialize: new Just(Initialize24.value)
      })
    });
  })();

  // output/Hylograph.HowTo.HowtoIndex/index.js
  var pure53 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize25 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var renderHowtoCard = function(route) {
    return function(title4) {
      return function(description) {
        return a([classes(["howto-card"]), href4("#" + routeToPath(route))])([h3([classes(["howto-card__title"])])([text6(title4)]), p([classes(["howto-card__description"])])([text6(description)])]);
      };
    };
  };
  var render29 = function(v2) {
    return div4([classes(["docs-page", "howto-wiki"])])([render2({
      logoSize: Large2.value,
      quadrant: QuadHowTo.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), section([classes(["docs-hero"])])([div4([classes(["docs-hero-content"])])([h1([classes(["docs-hero-title"])])([text6("How-to Guides")]), p([classes(["docs-hero-description"])])([text6("Practical guides for accomplishing specific tasks with PureScript D3. Each topic includes bullet points of what will be covered.")])])]), section([classes(["docs-section"])])([h2([classes(["docs-section-title"])])([text6("Core Techniques")]), div4([classes(["howto-card-grid"])])([renderHowtoCard(HowtoTransitions.value)("Creating Animated Transitions")("Smooth, animated transitions between visualization states."), renderHowtoCard(HowtoEvents.value)("Responding to User Events")("Click, hover, drag, and zoom interactions."), renderHowtoCard(HowtoTooltips.value)("Adding Tooltips")("Informative tooltips that appear on hover.")])]), section([classes(["docs-section"])])([h2([classes(["docs-section-title"])])([text6("Data & Scales")]), div4([classes(["howto-card-grid"])])([renderHowtoCard(HowtoLoadingData.value)("Loading External Data")("Fetch and parse JSON/CSV with Affjax.")])]), section([classes(["docs-section"])])([h2([classes(["docs-section-title"])])([text6("Layouts")]), div4([classes(["howto-card-grid"])])([renderHowtoCard(HowtoForceGraphs.value)("Building Force-Directed Graphs")("SimulationM for interactive network visualizations."), renderHowtoCard(HowtoHierarchical.value)("Working with Hierarchical Data")("Tree, cluster, and treemap layouts.")])]), section([classes(["docs-section"])])([h2([classes(["docs-section-title"])])([text6("Development")]), div4([classes(["howto-card-grid"])])([renderHowtoCard(HowtoDebugging.value)("Debugging Visualizations")("Console logging, DevTools, Mermaid diagrams."), renderHowtoCard(HowtoPerformance.value)("Performance Optimization")("DOM optimization, tick efficiency, CSS transitions.")])])]);
  };
  var handleAction24 = function(v2) {
    return pure53(unit);
  };
  var component26 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render29,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction24,
        initialize: new Just(Initialize25.value)
      })
    });
  })();

  // output/Hylograph.Reference.Reference/index.js
  var pure54 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize26 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var renderApiCard = function(title4) {
    return function(description) {
      return a([classes(["howto-card"]), href4("api/index.html"), target6("_blank")])([h3([classes(["howto-card__title"])])([text6(title4)]), p([classes(["howto-card__description"])])([text6(description)])]);
    };
  };
  var render30 = function(v2) {
    return div4([classes(["docs-page", "reference-index"])])([render2({
      logoSize: Large2.value,
      quadrant: QuadReference.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), section([classes(["docs-hero"])])([div4([classes(["docs-hero-content"])])([h1([classes(["docs-hero-title"])])([text6("API Reference")]), p([classes(["docs-hero-description"])])([text6("Lorem ipsum dolor sit amet, consectetur adipiscing elit. Comprehensive documentation for all PSD3 modules, types, and functions.")])])]), section([classes(["docs-section"])])([h2([classes(["docs-section-title"])])([text6("Browse Documentation")]), div4([classes(["howto-card-grid"])])([renderApiCard("Core Selection API")("Lorem ipsum dolor sit amet, consectetur adipiscing elit. SelectionM monad and phantom type system."), renderApiCard("Simulation & Forces")("Sed do eiusmod tempor incididunt ut labore. Force-directed layouts and physics configuration."), renderApiCard("TreeAPI & Declarative")("Ut enim ad minim veniam, quis nostrud exercitation. Declarative tree structures and interpreters."), renderApiCard("Data Utilities")("Duis aute irure dolor in reprehenderit in voluptate. Hierarchical data, scales, and transformations.")])])]);
  };
  var handleAction25 = function(v2) {
    return pure54(unit);
  };
  var component27 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render30,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction25,
        initialize: new Just(Initialize26.value)
      })
    });
  })();

  // output/Hylograph.Tutorial.GettingStarted/index.js
  var pure55 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize27 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var render31 = function(v2) {
    return div4([classes(["docs-page"])])([render2({
      logoSize: Large2.value,
      quadrant: QuadGettingStarted.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), section([classes(["docs-hero"])])([div4([classes(["docs-hero-content"])])([h1([classes(["docs-hero-title"])])([text6("Getting Started")]), p([classes(["docs-hero-description"])])([text6("Build type-safe, declarative D3 visualizations in PureScript. This guide will have you rendering your first chart in minutes.")])])]), section([classes(["tutorial-section"]), id2("quickstart")])([h2([classes(["tutorial-section-title"])])([text6("Quick Start")]), h3([id2("prerequisites")])([text6("Prerequisites")]), p_([text6("You'll need:")]), ul_([li_([text6("Node.js 18+")]), li_([text6("PureScript compiler and Spago")])]), pre_([code_([text6("npm install -g purescript spago")])]), h3([id2("installation")])([text6("Installation")]), p_([text6("Add the PSD3 packages to your project:")]), pre_([code_([text6("spago install psd3-selection psd3-layout")])]), p_([text6("For force-directed graphs and simulations (which use the lower-level PSD3 API), also add:")]), pre_([code_([text6("spago install psd3-simulation")])])]), section([classes(["tutorial-section"]), id2("first-viz")])([h2([classes(["tutorial-section-title"])])([text6("Your First Visualization")]), p_([text6("PSD3 uses a declarative Tree API. You describe what you want, and the library renders it to D3. Here's a complete example:")]), pre_([code_([text6('module Main where\n\nimport Prelude\nimport Effect (Effect)\nimport Hylograph.Tree as T\nimport Hylograph.Tree (Tree)\nimport Hylograph.Attribute (class_, cx, cy, r, fill)\nimport Hylograph.Interpreter.D3 (render)\n\n-- Your data\ntype Point = { x :: Number, y :: Number, color :: String }\n\nmyData :: Array Point\nmyData =\n  [ { x: 100.0, y: 100.0, color: "steelblue" }\n  , { x: 200.0, y: 150.0, color: "coral" }\n  , { x: 300.0, y: 100.0, color: "seagreen" }\n  ]\n\n-- The visualization\nchart :: Tree Point\nchart =\n  T.named Svg "svg"\n    [ T.width 400.0, T.height 200.0 ]\n    `T.withChildren`\n      [ T.joined "circles" Circle myData identity $ \\\\point ->\n          [ cx point.x\n          , cy point.y\n          , r 20.0\n          , fill point.color\n          ]\n      ]\n\n-- Render to the DOM\nmain :: Effect Unit\nmain = render "#chart" chart')])]), h3_([text6("What's happening here?")]), ul_([li_([code_([text6('T.named Svg "svg"')]), text6(" - Creates a named SVG element (the name helps with transitions)")]), li_([code_([text6('T.joined "circles" Circle myData identity')]), text6(" - Data joins your array to Circle elements. Each point becomes a circle.")]), li_([text6("The lambda "), code_([text6("\\point -> [...]")]), text6(" receives each data item with full type safety - no coercion needed")]), li_([code_([text6('render "#chart" chart')]), text6(" - Renders the tree to a DOM element with selector "), code_([text6("#chart")])])])]), section([classes(["tutorial-section"]), id2("html-setup")])([h2([classes(["tutorial-section-title"])])([text6("HTML Setup")]), p_([text6("Your HTML needs D3.js and a container element:")]), pre_([code_([text6('<!DOCTYPE html>\n<html>\n<head>\n  <script src="https://d3js.org/d3.v7.min.js"><\/script>\n</head>\n<body>\n  <div id="chart"></div>\n  <script src="bundle.js"><\/script>\n</body>\n</html>')])]), p_([text6("Bundle your PureScript:")]), pre_([code_([text6("spago bundle --module Main --outfile bundle.js")])])]), section([classes(["tutorial-section"]), id2("concepts")])([h2([classes(["tutorial-section-title"])])([text6("Key Concepts")]), h3_([text6("The Tree API")]), p_([text6("PSD3's Tree API is declarative - you describe the structure of your visualization as a tree of elements. The key building blocks:")]), ul_([li_([code_([text6("T.elem")]), text6(" - A single element with static attributes")]), li_([code_([text6("T.joined")]), text6(" - Data-driven elements (D3's data join)")]), li_([code_([text6("T.named")]), text6(" - Named container for identity-preserving updates")]), li_([code_([text6("T.withChild / T.withChildren")]), text6(" - Nest elements hierarchically")])]), h3_([text6("Type-Safe Attributes")]), p_([text6("Attributes are functions from your data to values. The compiler ensures you can't use attributes on wrong element types:")]), pre_([code_([text6(`-- This works: cx is valid for Circle
T.joined "dots" Circle data identity $ \\\\d ->
  [ cx d.x, cy d.y, r 5.0 ]

-- This won't compile: cx isn't valid for Rect
T.joined "bars" Rect data identity $ \\\\d ->
  [ cx d.x ]  -- Compile error!`)])]), h3_([text6("Interpreters")]), p_([text6("The same Tree can be rendered different ways:")]), ul_([li_([code_([text6("D3v2.render")]), text6(" - Renders to the DOM via D3")]), li_([code_([text6("MermaidTree.interpret")]), text6(" - Generates a Mermaid diagram of the tree structure")]), li_([code_([text6("English.interpret")]), text6(" - Produces English description (debugging)")])]), h3_([text6("Two APIs")]), p_([text6("PSD3 offers two levels of abstraction:")]), ul_([li_([strong_([text6("Tree API")]), text6(" - Declarative, ideal for static charts and layouts (bar charts, trees, Sankey diagrams). This is what we've shown above.")]), li_([strong_([text6("PSD3 API")]), text6(" - Lower-level but equally type-safe. Required for force simulations and highly interactive visualizations. See the "), a([href4("#/showcase")])([text6("Code Explorer")]), text6(" for an example.")])]), p_([text6("Both APIs share the same type-safe foundation. The Tree API builds on top of the PSD3 API, so you can mix them when needed.")])]), section([classes(["tutorial-section"]), id2("next")])([h2([classes(["tutorial-section-title"])])([text6("Next Steps")]), ul_([li_([a([href4("#/tour")])([text6("Take the Tour")]), text6(" - See what's possible with PSD3")]), li_([a([href4("#/showcase")])([text6("Explore the Showcase")]), text6(" - Interactive examples like the Code Explorer and SPLOM")]), li_([a([href4("#/examples")])([text6("Browse Examples")]), text6(" - All examples organized by category")]), li_([a([href4("#/understanding")])([text6("Understanding PSD3")]), text6(" - Deep dive into the architecture")])])]), render25]);
  };
  var handleAction26 = function(v2) {
    return pure55(unit);
  };
  var component28 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render31,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction26,
        initialize: new Just(Initialize27.value)
      })
    });
  })();

  // output/Hylograph.Understanding/index.js
  var pure56 = /* @__PURE__ */ pure(applicativeHalogenM);
  var Initialize28 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var renderCard2 = function(route) {
    return function(title4) {
      return function(description) {
        return a([classes(["howto-card"]), href4("#" + routeToPath(route))])([h3([classes(["howto-card__title"])])([text6(title4)]), p([classes(["howto-card__description"])])([text6(description)])]);
      };
    };
  };
  var render32 = function(v2) {
    return div4([classes(["docs-page", "understanding-index"])])([render2({
      logoSize: Large2.value,
      quadrant: QuadUnderstanding.value,
      prevNext: Nothing.value,
      pageTitle: Nothing.value
    }), section([classes(["docs-hero"])])([div4([classes(["docs-hero-content"])])([h1([classes(["docs-hero-title"])])([text6("Understanding")]), p([classes(["docs-hero-description"])])([text6("Deep dives into the core concepts and patterns that make PSD3 a type-safe, composable framework for D3 visualizations.")])])]), section([classes(["docs-section"])])([h2([classes(["docs-section-title"])])([text6("Core Concepts")]), div4([classes(["howto-card-grid"])])([renderCard2(UnderstandingGrammar.value)("The Grammar of D3")("Four essential primitives: select, append, join, attr. Everything else builds from these."), renderCard2(UnderstandingAttributes.value)("Type-Safe Attributes")("Static values, datum functions, contravariant pattern. Compile-time type safety."), renderCard2(UnderstandingSelections.value)("Selection Phantom Types")("Five states: SEmpty, SPending, SBoundOwns, SBoundInherits, SExiting. Indexed Monad pattern.")])]), section([classes(["docs-section"])])([h2([classes(["docs-section-title"])])([text6("Architecture")]), div4([classes(["howto-card-grid"])])([renderCard2(UnderstandingScenes.value)("Scene Structures & Transitions")("Declarative state management for complex interactive visualizations with transition matrices.")])])]);
  };
  var handleAction27 = function(v2) {
    return pure56(unit);
  };
  var component29 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: render32,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction27,
        initialize: new Just(Initialize28.value)
      })
    });
  })();

  // output/D3.Viz.Simpsons.Components/index.js
  var bind31 = /* @__PURE__ */ bind(bindD3v2M);
  var select11 = /* @__PURE__ */ select5(selectionMD3v2Selection_D);
  var evalAttr4 = /* @__PURE__ */ evalAttr(showNumber);
  var lit5 = /* @__PURE__ */ lit(numExprEvalD);
  var str5 = /* @__PURE__ */ str(stringExprEvalD);
  var show39 = /* @__PURE__ */ show(showNumber);
  var renderTree6 = /* @__PURE__ */ renderTree2(selectionMD3v2Selection_D);
  var renderTree13 = /* @__PURE__ */ renderTree6(ordUnit);
  var pure57 = /* @__PURE__ */ pure(applicativeD3v2M);
  var discard16 = /* @__PURE__ */ discard(discardUnit);
  var discard17 = /* @__PURE__ */ discard16(bindHalogenM);
  var show117 = /* @__PURE__ */ show(showInt);
  var type_21 = /* @__PURE__ */ type_18(isPropInputType);
  var value17 = /* @__PURE__ */ value12(isPropString);
  var renderTree34 = /* @__PURE__ */ renderTree6(ordIndexedRatePoint);
  var for_10 = /* @__PURE__ */ for_(applicativeEffect)(foldableArray);
  var for_14 = /* @__PURE__ */ for_(applicativeD3v2M)(foldableArray);
  var discard33 = /* @__PURE__ */ discard16(bindD3v2M);
  var bind114 = /* @__PURE__ */ bind(bindHalogenM);
  var get10 = /* @__PURE__ */ get(monadStateHalogenM);
  var modify_9 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var pure117 = /* @__PURE__ */ pure(applicativeHalogenM);
  var renderTree44 = /* @__PURE__ */ renderTree6(ordIndexedSlice);
  var slot4 = /* @__PURE__ */ slot()({
    reflectSymbol: function() {
      return "card";
    }
  })(ordString);
  var map54 = /* @__PURE__ */ map(functorArray);
  var IllustrationInit = /* @__PURE__ */ (function() {
    function IllustrationInit2() {
    }
    ;
    IllustrationInit2.value = new IllustrationInit2();
    return IllustrationInit2;
  })();
  var UpdateMaleProportion = /* @__PURE__ */ (function() {
    function UpdateMaleProportion2(value0) {
      this.value0 = value0;
    }
    ;
    UpdateMaleProportion2.create = function(value0) {
      return new UpdateMaleProportion2(value0);
    };
    return UpdateMaleProportion2;
  })();
  var UpdateFemaleProportion = /* @__PURE__ */ (function() {
    function UpdateFemaleProportion2(value0) {
      this.value0 = value0;
    }
    ;
    UpdateFemaleProportion2.create = function(value0) {
      return new UpdateFemaleProportion2(value0);
    };
    return UpdateFemaleProportion2;
  })();
  var ResetProportions = /* @__PURE__ */ (function() {
    function ResetProportions2() {
    }
    ;
    ResetProportions2.value = new ResetProportions2();
    return ResetProportions2;
  })();
  var ForceVizInit = /* @__PURE__ */ (function() {
    function ForceVizInit2() {
    }
    ;
    ForceVizInit2.value = new ForceVizInit2();
    return ForceVizInit2;
  })();
  var ForceVizToggle = /* @__PURE__ */ (function() {
    function ForceVizToggle2() {
    }
    ;
    ForceVizToggle2.value = new ForceVizToggle2();
    return ForceVizToggle2;
  })();
  var showN2 = function(n) {
    return toStringWith(fixed(1))(n);
  };
  var renderIllustrationTable = function(derived) {
    var rows4 = buildRowData(derived);
    var renderRow = function(idx) {
      return function(row) {
        return tr_([td([classes(["dept-cell"])])([text6(row.department)]), td_([div4([id2("illus-row-" + (show117(idx) + "-male-applied")), classes(["bar-cell"])])([])]), td_([div4([id2("illus-row-" + (show117(idx) + "-female-applied")), classes(["bar-cell"])])([])]), td_([div4([id2("illus-row-" + (show117(idx) + "-male-admitted")), classes(["bar-cell"])])([])]), td_([div4([id2("illus-row-" + (show117(idx) + "-female-admitted")), classes(["bar-cell"])])([])]), td_([div4([id2("illus-row-" + (show117(idx) + "-male-rate")), classes(["donut-cell"])])([])]), td_([div4([id2("illus-row-" + (show117(idx) + "-female-rate")), classes(["donut-cell"])])([])])]);
      };
    };
    return table([classes(["simpsons-data-table"])])([thead_([tr_([th_([text6("Dept.")]), th([classes(["header-group"])])([text6("Applied"), div4([classes(["subheaders"])])([span4([classes(["male"])])([text6("M")]), span4([classes(["female"])])([text6("F")])])]), th([classes(["header-group"])])([text6("Admitted"), div4([classes(["subheaders"])])([span4([classes(["male"])])([text6("M")]), span4([classes(["female"])])([text6("F")])])]), th([classes(["header-group"])])([text6("Rate"), div4([classes(["subheaders"])])([span4([classes(["male"])])([text6("M")]), span4([classes(["female"])])([text6("F")])])])])]), tbody_(mapWithIndex2(renderRow)(rows4))]);
  };
  var renderIllustrationSlider = function(label5) {
    return function(value1) {
      return function(color2) {
        return function(action2) {
          return div4([classes(["paradox-slider"])])([label4([style2("color: " + color2)])([text6(label5 + ' to "Easy"')]), input([type_21(InputRange.value), min8(0), max8(100), value17(show117(value1)), step3(new Step(1)), style2("accent-color: " + color2), onValueInput(action2)]), span_([text6(show117(value1) + "%")])]);
        };
      };
    };
  };
  var renderIllustrationLineChart = function(state3) {
    var womenX = state3.proportions.easyFemale * 100;
    var womenHardRate = rates.female.hard * 100;
    var womenEasyRate = rates.female.easy * 100;
    var menX = state3.proportions.easyMale * 100;
    var menHardRate = rates.male.hard * 100;
    var menEasyRate = rates.male.easy * 100;
    var derived = deriveData(state3.proportions);
    var menY = derived.combined.male * 100;
    var womenY = derived.combined.female * 100;
    var config = {
      width: 280,
      height: 220,
      marginTop: 20,
      marginRight: 15,
      marginBottom: 45,
      marginLeft: 50
    };
    var ih = config.height - config.marginTop - config.marginBottom;
    var iw = config.width - config.marginLeft - config.marginRight;
    var scaleX = function(v2) {
      return config.marginLeft + v2 / 100 * iw;
    };
    var ptMen_x = scaleX(menX);
    var ptWomen_x = scaleX(womenX);
    var scaleY = function(v2) {
      return config.marginTop + ih - v2 / 100 * ih;
    };
    var lineMen = "M " + (showN2(scaleX(0)) + (" " + (showN2(scaleY(menHardRate)) + (" L " + (showN2(scaleX(100)) + (" " + showN2(scaleY(menEasyRate))))))));
    var lineWomen = "M " + (showN2(scaleX(0)) + (" " + (showN2(scaleY(womenHardRate)) + (" L " + (showN2(scaleX(100)) + (" " + showN2(scaleY(womenEasyRate))))))));
    var ptMen_y = scaleY(menY);
    var ptWomen_y = scaleY(womenY);
    return svg([viewBox3(0)(0)(config.width)(config.height), width10(config.width), height10(config.height), classes2(["illustration-line-chart-svg"])])([rect([x5(config.marginLeft), y5(config.marginTop), width10(iw), height10(ih), fill3(new Named("#fafafa"))]), line([x12(config.marginLeft), y12(config.marginTop + ih * 0.5), x23(config.marginLeft + iw), y23(config.marginTop + ih * 0.5), stroke3(new Named("#e0e0e0")), strokeWidth3(1)]), line([x12(config.marginLeft + iw * 0.5), y12(config.marginTop), x23(config.marginLeft + iw * 0.5), y23(config.marginTop + ih), stroke3(new Named("#e0e0e0")), strokeWidth3(1)]), line([x12(config.marginLeft), y12(config.marginTop + ih), x23(config.marginLeft + iw), y23(config.marginTop + ih), stroke3(new Named("#333")), strokeWidth3(1)]), line([x12(config.marginLeft), y12(config.marginTop), x23(config.marginLeft), y23(config.marginTop + ih), stroke3(new Named("#333")), strokeWidth3(1)]), path2([attr4("d")(lineMen), stroke3(new Named(purple)), strokeWidth3(2), fill3(new Named("none"))]), path2([attr4("d")(lineWomen), stroke3(new Named(green)), strokeWidth3(2), fill3(new Named("none"))]), text7([x5(config.marginLeft + iw / 2), y5(config.height - 5), textAnchor3(AnchorMiddle.value), fill3(new Named("#666"))])([text6("% to Easy dept")]), text7([x5(config.marginLeft - 35), y5(config.marginTop + ih / 2), textAnchor3(AnchorMiddle.value), fill3(new Named("#666")), transform2([new Rotate(-90, config.marginLeft - 35, config.marginTop + ih / 2)])])([text6("% admitted")]), text7([x5(config.marginLeft - 5), y5(config.marginTop + ih + 3), textAnchor3(AnchorEnd.value), fill3(new Named("#888"))])([text6("0")]), text7([x5(config.marginLeft - 5), y5(config.marginTop + ih * 0.5 + 3), textAnchor3(AnchorEnd.value), fill3(new Named("#888"))])([text6("50")]), text7([x5(config.marginLeft - 5), y5(config.marginTop + 3), textAnchor3(AnchorEnd.value), fill3(new Named("#888"))])([text6("100")]), text7([x5(config.marginLeft), y5(config.marginTop + ih + 12), textAnchor3(AnchorMiddle.value), fill3(new Named("#888"))])([text6("0")]), text7([x5(config.marginLeft + iw), y5(config.marginTop + ih + 12), textAnchor3(AnchorMiddle.value), fill3(new Named("#888"))])([text6("100")]), g([transform2([new Translate(config.marginLeft + 5, config.marginTop + 5)])])([circle([cx3(4), cy3(0), r3(3), fill3(new Named(purple))]), text7([x5(10), y5(3), fill3(new Named(purple))])([text6("Men")]), circle([cx3(4), cy3(12), r3(3), fill3(new Named(green))]), text7([x5(10), y5(15), fill3(new Named(green))])([text6("Women")])]), line([x12(config.marginLeft), y12(ptMen_y), x23(ptMen_x), y23(ptMen_y), stroke3(new Named("#333")), strokeWidth3(1), strokeDashArray("3,3"), strokeOpacity(0.5)]), line([x12(config.marginLeft), y12(ptWomen_y), x23(ptWomen_x), y23(ptWomen_y), stroke3(new Named("#333")), strokeWidth3(1), strokeDashArray("3,3"), strokeOpacity(0.5)]), circle([cx3(ptMen_x), cy3(ptMen_y), r3(6), fill3(new Named(purple)), stroke3(new Named("white")), strokeWidth3(2)]), circle([cx3(ptWomen_x), cy3(ptWomen_y), r3(6), fill3(new Named(green)), stroke3(new Named("white")), strokeWidth3(2)]), text7([x5(ptMen_x + 8), y5(ptMen_y - 5), fill3(new Named(purple))])([text6(show117(round2(menY)) + "%")]), text7([x5(ptWomen_x + 8), y5(ptWomen_y + 12), fill3(new Named(green))])([text6(show117(round2(womenY)) + "%")])]);
  };
  var renderIllustration = function(state3) {
    var malePercent = round2(state3.proportions.easyMale * 100);
    var femalePercent = round2(state3.proportions.easyFemale * 100);
    var derived = deriveData(state3.proportions);
    return div4([classes(["illustration-section"])])([div4([classes(["illustration-body"])])([div4([classes(["illustration-sliders"])])([renderIllustrationSlider("Men")(malePercent)(purple)(UpdateMaleProportion.create), renderIllustrationSlider("Women")(femalePercent)(green)(UpdateFemaleProportion.create), div4([classes(["illustration-controls"])])([button2([classes(["reset-button"]), onClick(function(v2) {
      return ResetProportions.value;
    })])([text6("Reset")])]), div4([classes(["paradox-indicator-small", (function() {
      if (derived.isParadox) {
        return "is-paradox";
      }
      ;
      return "no-paradox";
    })()])])([strong_([text6("Paradox: ")]), text6((function() {
      if (derived.isParadox) {
        return "Yes";
      }
      ;
      return "No";
    })())])]), div4([classes(["illustration-chart"])])([renderIllustrationLineChart(state3)])]), div4([id2("illustration-table"), classes(["illustration-table-container"])])([renderIllustrationTable(derived)])]);
  };
  var renderForceViz = function(state3) {
    return div4([classes(["force-viz-section"])])([div4([classes(["force-viz-legend"])])([span4([classes(["legend-item", "legend-accepted"])])([span4([classes(["legend-dot", "accepted"])])([]), text6("Accepted")]), span4([classes(["legend-item", "legend-rejected"])])([span4([classes(["legend-dot", "rejected"])])([]), text6("Rejected")])]), button2([classes(["simpsons-toggle"]), onClick(function(v2) {
      return ForceVizToggle.value;
    })])([text6((function() {
      if (state3.isCombined) {
        return "Separate by Department";
      }
      ;
      return "Combine All";
    })())]), div4([id2("force-viz"), classes(["force-viz-container"])])([]), (function() {
      if (state3.isCombined) {
        return div4([classes(["force-viz-combined-label"])])([text6("Combined: All departments merged")]);
      }
      ;
      return text6("");
    })()]);
  };
  var lineChartComponent = function(dictMonadAff) {
    var liftAff3 = liftAff(monadAffHalogenM(dictMonadAff));
    var liftEffect11 = liftEffect(monadEffectHalogenM(dictMonadAff.MonadEffect0()));
    var initLineChart2 = bind31(select11("#line-chart"))(function(container) {
      var svgTree = withChildren(named(SVG.value)("line-chart-svg")([evalAttr4("width")(lit5(defaultConfig7.width)), evalAttr4("height")(lit5(defaultConfig7.height)), evalAttrStr("viewBox")(str5("0 0 " + (show39(defaultConfig7.width) + (" " + show39(defaultConfig7.height))))), evalAttrStr("class")(str5("line-chart-svg"))]))([withChildren(elem3(Group.value)([evalAttrStr("transform")(str5("translate(" + (show39(defaultConfig7.marginLeft) + ("," + (show39(defaultConfig7.marginTop) + ")")))))]))([lineChartStatic(defaultConfig7)]), elem3(Group.value)([evalAttrStr("transform")(str5("translate(" + (show39(defaultConfig7.marginLeft) + ("," + (show39(defaultConfig7.marginTop) + ")"))))), evalAttrStr("class")(str5("rate-points-group"))])]);
      return bind31(renderTree13(container)(svgTree))(function() {
        return bind31(select11("#line-chart .rate-points-group"))(function(pointsContainer) {
          return bind31(renderTree34(pointsContainer)(lineChartPoints(defaultConfig7)(defaultProportions)))(function() {
            return pure57(unit);
          });
        });
      });
    });
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: function(v2) {
        return div4([id2("line-chart"), classes(["line-chart-container"])])([]);
      },
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        initialize: new Just(unit),
        handleAction: function(v1) {
          return discard17(liftAff3(delay(50)))(function() {
            return liftEffect11(runD3v2M(initLineChart2));
          });
        }
      })
    });
  };
  var initIllustrationTable = function(props) {
    var derived = deriveData(props);
    var rows4 = buildRowData(derived);
    return function __do7() {
      for_10([0, 1, 2])(function(idx) {
        var prefix = "#illus-row-" + show117(idx);
        return function __do8() {
          clearContainer3(prefix + "-male-applied")();
          clearContainer3(prefix + "-female-applied")();
          clearContainer3(prefix + "-male-admitted")();
          clearContainer3(prefix + "-female-admitted")();
          clearContainer3(prefix + "-male-rate")();
          return clearContainer3(prefix + "-female-rate")();
        };
      })();
      return runD3v2M(for_14(mapWithIndex2(function(i2) {
        return function(row) {
          return {
            idx: i2,
            row
          };
        };
      })(rows4))(function(v2) {
        var prefix = "illus-row-" + show117(v2.idx);
        return discard33(renderBar("#" + (prefix + "-male-applied"))(v2.row.maleApplied)(Male.value))(function() {
          return discard33(renderBar("#" + (prefix + "-female-applied"))(v2.row.femaleApplied)(Female.value))(function() {
            return discard33(renderBar("#" + (prefix + "-male-admitted"))(v2.row.maleAdmitted)(Male.value))(function() {
              return discard33(renderBar("#" + (prefix + "-female-admitted"))(v2.row.femaleAdmitted)(Female.value))(function() {
                return discard33(renderDonut("#" + (prefix + "-male-rate"))(v2.row.maleRate)(v2.row.maleWins))(function() {
                  return renderDonut("#" + (prefix + "-female-rate"))(v2.row.femaleRate)(v2.row.femaleWins);
                });
              });
            });
          });
        });
      }))();
    };
  };
  var handleIllustrationAction = function(dictMonadAff) {
    var liftAff3 = liftAff(monadAffHalogenM(dictMonadAff));
    var liftEffect11 = liftEffect(monadEffectHalogenM(dictMonadAff.MonadEffect0()));
    return function(v2) {
      if (v2 instanceof IllustrationInit) {
        return discard17(liftAff3(delay(50)))(function() {
          return bind114(get10)(function(state3) {
            return liftEffect11(initIllustrationTable(state3.proportions));
          });
        });
      }
      ;
      if (v2 instanceof UpdateMaleProportion) {
        var v1 = fromString(v2.value0);
        if (v1 instanceof Just) {
          return discard17(modify_9(function(s2) {
            var $127 = {};
            for (var $128 in s2) {
              if ({}.hasOwnProperty.call(s2, $128)) {
                $127[$128] = s2[$128];
              }
              ;
            }
            ;
            $127.proportions = (function() {
              var $124 = {};
              for (var $125 in s2.proportions) {
                if ({}.hasOwnProperty.call(s2.proportions, $125)) {
                  $124[$125] = s2["proportions"][$125];
                }
                ;
              }
              ;
              $124.easyMale = v1.value0 / 100;
              return $124;
            })();
            return $127;
          }))(function() {
            return bind114(get10)(function(state3) {
              return liftEffect11(initIllustrationTable(state3.proportions));
            });
          });
        }
        ;
        if (v1 instanceof Nothing) {
          return pure117(unit);
        }
        ;
        throw new Error("Failed pattern match at D3.Viz.Simpsons.Components (line 638, column 5 - line 643, column 27): " + [v1.constructor.name]);
      }
      ;
      if (v2 instanceof UpdateFemaleProportion) {
        var v1 = fromString(v2.value0);
        if (v1 instanceof Just) {
          return discard17(modify_9(function(s2) {
            var $136 = {};
            for (var $137 in s2) {
              if ({}.hasOwnProperty.call(s2, $137)) {
                $136[$137] = s2[$137];
              }
              ;
            }
            ;
            $136.proportions = (function() {
              var $133 = {};
              for (var $134 in s2.proportions) {
                if ({}.hasOwnProperty.call(s2.proportions, $134)) {
                  $133[$134] = s2["proportions"][$134];
                }
                ;
              }
              ;
              $133.easyFemale = v1.value0 / 100;
              return $133;
            })();
            return $136;
          }))(function() {
            return bind114(get10)(function(state3) {
              return liftEffect11(initIllustrationTable(state3.proportions));
            });
          });
        }
        ;
        if (v1 instanceof Nothing) {
          return pure117(unit);
        }
        ;
        throw new Error("Failed pattern match at D3.Viz.Simpsons.Components (line 646, column 5 - line 651, column 27): " + [v1.constructor.name]);
      }
      ;
      if (v2 instanceof ResetProportions) {
        return discard17(modify_9(function(v12) {
          var $141 = {};
          for (var $142 in v12) {
            if ({}.hasOwnProperty.call(v12, $142)) {
              $141[$142] = v12[$142];
            }
            ;
          }
          ;
          $141.proportions = defaultProportions;
          return $141;
        }))(function() {
          return bind114(get10)(function(state3) {
            return liftEffect11(initIllustrationTable(state3.proportions));
          });
        });
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.Simpsons.Components (line 631, column 28 - line 656, column 57): " + [v2.constructor.name]);
    };
  };
  var illustrationComponent = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return {
          proportions: defaultProportions
        };
      },
      render: renderIllustration,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        initialize: new Just(IllustrationInit.value),
        handleAction: handleIllustrationAction(dictMonadAff)
      })
    });
  };
  var handleForceVizAction = function(dictMonadAff) {
    var liftAff3 = liftAff(monadAffHalogenM(dictMonadAff));
    var liftEffect11 = liftEffect(monadEffectHalogenM(dictMonadAff.MonadEffect0()));
    return function(v2) {
      if (v2 instanceof ForceVizInit) {
        return discard17(liftAff3(delay(50)))(function() {
          return bind114(liftEffect11(initForceViz("#force-viz")))(function(handle) {
            return modify_9(function(v1) {
              var $145 = {};
              for (var $146 in v1) {
                if ({}.hasOwnProperty.call(v1, $146)) {
                  $145[$146] = v1[$146];
                }
                ;
              }
              ;
              $145.handle = new Just(handle);
              return $145;
            });
          });
        });
      }
      ;
      if (v2 instanceof ForceVizToggle) {
        return bind114(get10)(function(state3) {
          if (state3.handle instanceof Just) {
            return discard17(liftEffect11(state3.handle.value0.toggle))(function() {
              return modify_9(function(v1) {
                var $149 = {};
                for (var $150 in v1) {
                  if ({}.hasOwnProperty.call(v1, $150)) {
                    $149[$150] = v1[$150];
                  }
                  ;
                }
                ;
                $149.isCombined = !state3.isCombined;
                return $149;
              });
            });
          }
          ;
          if (state3.handle instanceof Nothing) {
            return pure117(unit);
          }
          ;
          throw new Error("Failed pattern match at D3.Viz.Simpsons.Components (line 135, column 5 - line 139, column 27): " + [state3.handle.constructor.name]);
        });
      }
      ;
      throw new Error("Failed pattern match at D3.Viz.Simpsons.Components (line 127, column 24 - line 139, column 27): " + [v2.constructor.name]);
    };
  };
  var forceVizComponent = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return {
          handle: Nothing.value,
          isCombined: false
        };
      },
      render: renderForceViz,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        initialize: new Just(ForceVizInit.value),
        handleAction: handleForceVizAction(dictMonadAff)
      })
    });
  };
  var donutChartsComponent = function(dictMonadAff) {
    var liftAff3 = liftAff(monadAffHalogenM(dictMonadAff));
    var liftEffect11 = liftEffect(monadEffectHalogenM(dictMonadAff.MonadEffect0()));
    var initDonutCharts2 = (function() {
      var svgWidth5 = defaultConfig5.centerX * 2;
      var svgHeight5 = defaultConfig5.centerY + defaultConfig5.outerRadius + 30;
      return bind31(select11("#donut-men"))(function(menContainer) {
        var menDonut = donutChart(defaultConfig5)(44)("Men");
        var menSvgTree = withChildren(named(SVG.value)("men-svg")([evalAttr4("width")(lit5(svgWidth5)), evalAttr4("height")(lit5(svgHeight5)), evalAttrStr("viewBox")(str5("0 0 " + (show39(svgWidth5) + (" " + show39(svgHeight5))))), evalAttrStr("class")(str5("donut-svg"))]))([withChildren(elem3(Group.value)([evalAttrStr("transform")(str5(menDonut.centerTransform))]))([menDonut.label])]);
        return bind31(renderTree13(menContainer)(menSvgTree))(function() {
          return bind31(select11("#donut-men svg"))(function(menArcsContainer) {
            var menArcsGroup = elem3(Group.value)([evalAttrStr("transform")(str5(menDonut.centerTransform)), evalAttrStr("class")(str5("arcs"))]);
            return bind31(renderTree13(menArcsContainer)(menArcsGroup))(function() {
              return bind31(select11("#donut-men svg .arcs"))(function(menArcsInner) {
                return bind31(renderTree44(menArcsInner)(menDonut.arcs))(function() {
                  return bind31(select11("#donut-women"))(function(womenContainer) {
                    var womenDonut = donutChart(defaultConfig5)(35)("Women");
                    var womenSvgTree = withChildren(named(SVG.value)("women-svg")([evalAttr4("width")(lit5(svgWidth5)), evalAttr4("height")(lit5(svgHeight5)), evalAttrStr("viewBox")(str5("0 0 " + (show39(svgWidth5) + (" " + show39(svgHeight5))))), evalAttrStr("class")(str5("donut-svg"))]))([withChildren(elem3(Group.value)([evalAttrStr("transform")(str5(womenDonut.centerTransform))]))([womenDonut.label])]);
                    return bind31(renderTree13(womenContainer)(womenSvgTree))(function() {
                      return bind31(select11("#donut-women svg"))(function(womenArcsContainer) {
                        var womenArcsGroup = elem3(Group.value)([evalAttrStr("transform")(str5(womenDonut.centerTransform)), evalAttrStr("class")(str5("arcs"))]);
                        return bind31(renderTree13(womenArcsContainer)(womenArcsGroup))(function() {
                          return bind31(select11("#donut-women svg .arcs"))(function(womenArcsInner) {
                            return bind31(renderTree44(womenArcsInner)(womenDonut.arcs))(function() {
                              return pure57(unit);
                            });
                          });
                        });
                      });
                    });
                  });
                });
              });
            });
          });
        });
      });
    })();
    return mkComponent({
      initialState: function(v2) {
        return unit;
      },
      render: function(v2) {
        return div4([classes(["donut-charts-row"])])([div4([id2("donut-men"), classes(["donut-chart"])])([]), div4([id2("donut-women"), classes(["donut-chart"])])([])]);
      },
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        initialize: new Just(unit),
        handleAction: function(v1) {
          return discard17(liftAff3(delay(50)))(function() {
            return liftEffect11(runD3v2M(initDonutCharts2));
          });
        }
      })
    });
  };
  var _card = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var postscriptCardsComponent = function(dictMonadAff) {
    var component33 = component15(dictMonadAff);
    var renderCard3 = function(dataset) {
      return slot4(_card)(dataset.id)(component33)(dataset)(absurd);
    };
    var render35 = function(datasets) {
      return div4([classes(["simpsons-datasets-grid"])])(map54(renderCard3)(datasets));
    };
    return mkComponent({
      initialState: function(v2) {
        return allDatasets2;
      },
      render: render35,
      "eval": mkEval(defaultEval)
    });
  };

  // output/Page.Simpsons/index.js
  var slot5 = /* @__PURE__ */ slot();
  var slot1 = /* @__PURE__ */ slot5({
    reflectSymbol: function() {
      return "postscriptcards";
    }
  })(ordUnit);
  var slot22 = /* @__PURE__ */ slot5({
    reflectSymbol: function() {
      return "illustration";
    }
  })(ordUnit);
  var slot32 = /* @__PURE__ */ slot5({
    reflectSymbol: function() {
      return "forceviz";
    }
  })(ordUnit);
  var slot42 = /* @__PURE__ */ slot5({
    reflectSymbol: function() {
      return "donutcharts";
    }
  })(ordUnit);
  var slot52 = /* @__PURE__ */ slot5({
    reflectSymbol: function() {
      return "linechart";
    }
  })(ordUnit);
  var Initialize29 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var renderSectionI = function(dictMonadAff) {
    return div4([classes(["page-section", "section-I", "simpsons-more-info"])])([h2_([text6("More Information")]), ul_([li_([a([href4("http://en.wikipedia.org/wiki/Simpson's_paradox"), target6("_blank")])([text6("Wikipedia")])]), li_([text6("This project drew on the Simpson\u2019s Paradox Java Applet by Dr. Kady Schneiter at Utah State University, who has a "), a([href4("http://www.math.usu.edu/~schneit/CTIS/"), target6("_blank")])([text6("bunch")]), text6(" of neat illustrative Java applets.")]), li_([a([href4("http://plato.stanford.edu/entries/paradox-simpson/"), target6("_blank")])([text6("Stanford Encyclopedia of Philosophy")])]), li_([a([href4("http://www.stat.osu.edu/~biostat/newsletters/volume2_2/article_vol2_2.html"), target6("_blank")])([text6("Smoking Example")])]), li_([a([href4("https://www.jstor.org/stable/1739581"), target6("_blank")])([text6("Bickel et al. (1975) - \u201CSex Bias in Graduate Admissions: Data from Berkeley\u201D")]), text6(" (Science, Vol. 187) "), em_([text6("(link updated)")])]), li_([a([href4("http://www.bmj.com/content/309/6967/1480"), target6("_blank")])([text6("Confounding and Simpson\u2019s Paradox")]), text6(" from the British Medical Journal")])]), h3_([text6("Makers")]), p_([text6("A project of the "), a([href4("http://vudlab.com/#/"), target6("_blank")])([text6("Visualizing Urban Data ideaLab")]), text6(" at UC Berkeley. Created in "), a([href4("http://d3js.org/"), target6("_blank")])([text6("d3.js")]), text6(" and "), a([href4("http://angularjs.org/"), target6("_blank")])([text6("AngularJS")]), text6(" by "), a([href4("https://twitter.com/LewisLehe"), target6("_blank")])([text6("Lewis Lehe")]), text6(" and "), a([href4("http://vctr.me/"), target6("_blank")])([text6("Victor Powell")]), text6(".")]), p_([text6("Lewis Lehe is a PhD student in Transportation Engineering at UC Berkeley, and Victor Powell is a freelance developer, JavaScript instructor and yinzer.")])]);
  };
  var renderSectionH = function(dictMonadAff) {
    return div4([classes(["page-section", "section-H"])])([h2_([text6("What Simpson's paradox is not")]), p_([em_([text6("Simpson\u2019s:")]), text6(" It was "), a([href4("http://www.jstor.org/discover/10.2307/2331677?uid=2&uid=4&sid=21102567680247"), target6("_blank")])([text6("first mentioned")]), text6(" by British statistician "), a([href4("http://en.wikipedia.org/wiki/Udny_Yule"), target6("_blank")])([text6("Udny Yule")]), text6(" in 1903.")]), p_([em_([text6("A paradox:")]), text6(" Simpson\u2019s paradox is just a special case of "), a([href4("http://en.wikipedia.org/wiki/Omitted-variable_bias"), target6("_blank")])([text6("ommitted variable bias")]), text6(". W.V. Quine would call it a "), a([href4("http://en.wikipedia.org/wiki/Paradox#Quine.27s_classification_of_paradoxes"), target6("_blank")])([text6("veridical paradox")]), text6(".")]), p_([em_([text6("Every ommitted variable problem:")]), text6(" Women earn only 77 percent of what men do, but according to Cornell economists "), a([href4("http://digitalcommons.ilr.cornell.edu/cgi/viewcontent.cgi?article=1248&context=ilrreview"), target6("_blank")])([text6("Francine Blau and Lawrence Kahn")]), text6(", accounting for work experience, education, industry, and unionization shrinks the gap to 91 percent (p. 52). So, discrimination matters less than the "), code_([text6("77 percent")]), text6(" stat would lead you to believe. But is this Simpson\u2019s paradox? No, because the correction isn\u2019t large enough for the effect of gender to change sign.")]), h3_([text6("Why it matters")]), p_([text6("Simpson\u2019s paradox usually fools us on tests of performance. In a "), a([href4("http://en.wikipedia.org/wiki/Simpson's_paradox#Kidney_stone_treatment"), target6("_blank")])([text6("famous example")]), text6(", researchers concluded that a newer treatment for kidney stones was more effective than traditional surgery, but it was "), a([href4("http://www.bmj.com/content/309/6967/1480"), target6("_blank")])([text6("later revealed")]), text6(" that the newer treatment was more often being used on small kidney stones. More recently, "), a([href4("http://educationnext.org/are-wisconsin-schools-better-than-those-in-texas/"), target6("_blank")])([text6("on elementary school tests")]), text6(", minority students in Texas outperform their peers in Wisconsin, but Texas has so many minority students that Wisconsin beats it in state rankings. It would be a shame if Simpson\u2019s paradox led doctors to prescribe ineffective treatments or Texas schools to waste money copying Wisconsin.")])]);
  };
  var renderSectionC = function(dictMonadAff) {
    return div4([classes(["page-section", "section-C", "simpsons-proper-pooling"])])([h2_([text6("Proper Pooling")]), p_([text6("By \u201Cproperly pooled,\u201D the investigators at Berkeley meant \u201Cbroken down by department.\u201D Men more often applied to science departments, while women inclined towards humanities. Science departments require special technical skills but accept a large percentage of qualified applicants. In contrast, humanities departments only require a standard undergrad curriculum but have fewer slots.")]), p_([text6("The authors concluded that any sexism occurred before Berkeley ever saw the applications:")]), blockquote_([p_([text6("Women are shunted by their socialization and education toward fields of graduate study that are generally more crowded, less > productive of completed degrees, and less well funded, and that frequently offer poorer professional employment prospects.")]), ul_([li_([text6("Bickel et al. (1975), p. 403")])])]), p_([text6("To the right are data on the six largest departments, but the names have been changed to protect the innocent.")])]);
  };
  var renderSectionA = function(dictMonadAff) {
    return div4([classes(["page-section", "section-A"])])([p_([text6("In 1973, the University of California-Berkeley was sued for sex discrimination. The numbers looked pretty incriminating: the graduate schools had just accepted "), em_([text6("44%")]), text6(" of male applicants but only "), em_([text6("35%")]), text6(" of female applicants. When researchers looked at the evidence, though, they uncovered something surprising:")]), blockquote_([p_([text6("If the data are properly pooled\u2026there is a small but statistically significant bias in favor of women.")]), ul_([li_([text6("Bickel et al (1975), p. 403")])])]), p_([text6("It was a textbook case of Simpson\u2019s paradox.")]), h3_([text6("What is Simpson\u2019s paradox?")]), p_([text6("Every Simpson\u2019s paradox involves at least three variables:")]), ol_([li_([text6("the explained")]), li_([text6("the observed explanatory")]), li_([text6("the lurking explanatory")])]), p_([text6("If the effect of the observed explanatory variable on the explained variable changes directions when you account for the lurking explanatory variable, you\u2019ve got a Simpson\u2019s Paradox.")]), p_([text6("For example, to the right, x appears to have a negative effect on y, but the opposite is true when you account for color. y is the explained variable, x the observed explanatory variable, and color the lurking explanatory variable.")])]);
  };
  var _postscriptcards = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var renderSectionJ = function(dictMonadAff) {
    return div4([classes(["page-section", "section-J", "simpsons-postscript"])])([h2_([text6("More Examples")]), p_([text6("Use the sliders below to explore seven classic Simpson\u2019s Paradox examples from real-world data.")]), p_([slot1(_postscriptcards)(unit)(postscriptCardsComponent(dictMonadAff))(unit)(absurd)])]);
  };
  var _linechart = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _illustration = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var renderSectionEFG = function(dictMonadAff) {
    return div4([classes(["page-section", "section-E", "section-illustration"])])([h2_([text6("Illustration")]), p_([text6("Suppose there are two departments: one easy, one hard ('hard' as in 'hard to get into'). The sliders below set what percentage each gender applies to the easy department. Both departments prefer women, but if too many women apply to the hard one, their acceptance rate drops below the men's.")]), slot22(_illustration)(unit)(illustrationComponent(dictMonadAff))(unit)(absurd)]);
  };
  var _forceviz = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var renderSectionD = function(dictMonadAff) {
    return div4([classes(["page-section", "section-D", "simpsons-interactive"])])([h2_([text6("Departments")]), p_([slot32(_forceviz)(unit)(forceVizComponent(dictMonadAff))(unit)(absurd)])]);
  };
  var _donutcharts = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var renderSectionB = function(dictMonadAff) {
    return div4([classes(["page-section", "section-B", "simpsons-donuts"])])([slot42(_donutcharts)(unit)(donutChartsComponent(dictMonadAff))(unit)(absurd), slot52(_linechart)(unit)(lineChartComponent(dictMonadAff))(unit)(absurd)]);
  };
  var render33 = function(dictMonadAff) {
    var renderSectionA1 = renderSectionA(dictMonadAff);
    var renderSectionB1 = renderSectionB(dictMonadAff);
    var renderSectionC1 = renderSectionC(dictMonadAff);
    var renderSectionD1 = renderSectionD(dictMonadAff);
    var renderSectionEFG1 = renderSectionEFG(dictMonadAff);
    var renderSectionH1 = renderSectionH(dictMonadAff);
    var renderSectionI1 = renderSectionI(dictMonadAff);
    var renderSectionJ1 = renderSectionJ(dictMonadAff);
    return function(_state) {
      return div4([classes(["simpsons-standalone"])])([div4([classes(["acknowledgement-banner"])])([text6("Based on work by "), a([href4("https://twitter.com/LewisLehe"), target6("_blank")])([text6("Lewis Lehe")]), text6(" & "), a([href4("http://vctr.me/"), target6("_blank")])([text6("Victor Powell")]), text6(" at "), a([href4("http://vudlab.com/"), target6("_blank")])([text6("VUDlab")])]), div4([classes(["page-grid"])])([renderSectionA1, renderSectionB1, renderSectionC1, renderSectionD1, renderSectionEFG1, renderSectionH1, renderSectionI1, renderSectionJ1])]);
    };
  };
  var component30 = function(dictMonadAff) {
    return mkComponent({
      initialState: function(v2) {
        return {};
      },
      render: render33(dictMonadAff),
      "eval": mkEval({
        handleAction: defaultEval.handleAction,
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        initialize: new Just(Initialize29.value)
      })
    });
  };

  // output/Routing.Parser/index.js
  var map55 = /* @__PURE__ */ map(functorArray);
  var discard18 = /* @__PURE__ */ discard(discardUnit)(bindMaybe);
  var guard2 = /* @__PURE__ */ guard(alternativeMaybe);
  var apply3 = /* @__PURE__ */ apply(applyMaybe);
  var map120 = /* @__PURE__ */ map(functorMaybe);
  var fromFoldable21 = /* @__PURE__ */ fromFoldable2(ordString)(foldableArray);
  var traverse8 = /* @__PURE__ */ traverse(traversableArray)(applicativeMaybe);
  var fromFoldable111 = /* @__PURE__ */ fromFoldable3(foldableArray);
  var append24 = /* @__PURE__ */ append(semigroupList);
  var map211 = /* @__PURE__ */ map(functorList);
  var fromFoldable26 = /* @__PURE__ */ fromFoldable3(foldableMaybe);
  var parseQueryPart = function(decoder) {
    var part2tuple = function(input3) {
      var keyVal = map55(decoder)(split("=")(input3));
      return discard18(guard2(length(keyVal) <= 2))(function() {
        return apply3(map120(Tuple.create)(head(keyVal)))(index(keyVal)(1));
      });
    };
    var $27 = map120(fromFoldable21);
    var $28 = traverse8(part2tuple);
    var $29 = split("&");
    return function($30) {
      return $27($28($29($30)));
    };
  };
  var parse7 = function(decoder) {
    return function(hash2) {
      var pathParts = function(str6) {
        var parts = fromFoldable111(map55(function($31) {
          return Path2.create(decoder($31));
        })(split("/")(str6)));
        var v3 = unsnoc(parts);
        if (v3 instanceof Just && (v3.value0.last instanceof Path2 && v3.value0.last.value0 === "")) {
          return v3.value0.init;
        }
        ;
        return parts;
      };
      var v2 = map120(flip(splitAt3)(hash2))(indexOf2("?")(hash2));
      if (v2 instanceof Just) {
        return append24(pathParts(v2.value0.before))(map211(Query2.create)(fromFoldable26(parseQueryPart(decoder)(drop3(1)(v2.value0.after)))));
      }
      ;
      if (v2 instanceof Nothing) {
        return pathParts(hash2);
      }
      ;
      throw new Error("Failed pattern match at Routing.Parser (line 32, column 3 - line 37, column 21): " + [v2.constructor.name]);
    };
  };

  // output/Routing/index.js
  var fromJust6 = /* @__PURE__ */ fromJust();
  var matchWith = function(decoder) {
    return function(matcher) {
      var $2 = runMatch(matcher);
      var $3 = parse7(decoder);
      return function($4) {
        return $2($3($4));
      };
    };
  };
  var match2 = /* @__PURE__ */ matchWith(function($6) {
    return fromJust6($$decodeURIComponent($6));
  });

  // output/Web.HTML.Event.HashChangeEvent.EventTypes/index.js
  var hashchange = "hashchange";

  // output/Routing.Hash/index.js
  var bind32 = /* @__PURE__ */ bind(bindEffect);
  var map56 = /* @__PURE__ */ map(functorEffect);
  var bindFlipped9 = /* @__PURE__ */ bindFlipped(bindEffect);
  var join4 = /* @__PURE__ */ join(bindEffect);
  var apply4 = /* @__PURE__ */ apply(applyEffect);
  var pure58 = /* @__PURE__ */ pure(applicativeEffect);
  var voidRight3 = /* @__PURE__ */ voidRight(functorEffect);
  var setHash2 = function(h7) {
    return bind32(bind32(windowImpl)(location))(setHash(h7));
  };
  var getHash = /* @__PURE__ */ bind32(/* @__PURE__ */ bind32(windowImpl)(location))(/* @__PURE__ */ (function() {
    var $16 = map56((function() {
      var $18 = fromMaybe("");
      var $19 = stripPrefix("#");
      return function($20) {
        return $18($19($20));
      };
    })());
    return function($17) {
      return $16(hash($17));
    };
  })());
  var foldHashes = function(cb) {
    return function(init3) {
      return function __do7() {
        var ref2 = bindFlipped9($$new)(bindFlipped9(init3)(getHash))();
        var win = map56(toEventTarget)(windowImpl)();
        var listener = eventListener(function(v2) {
          return bindFlipped9(flip(write)(ref2))(join4(apply4(map56(cb)(read(ref2)))(getHash)));
        })();
        addEventListener2(hashchange)(listener)(false)(win)();
        return removeEventListener2(hashchange)(listener)(false)(win);
      };
    };
  };
  var matchesWith = function(dictFoldable) {
    var indexl2 = indexl(dictFoldable);
    return function(parser) {
      return function(cb) {
        var go2 = function(a3) {
          var $21 = maybe(pure58(a3))(function(b2) {
            return voidRight3(new Just(b2))(cb(a3)(b2));
          });
          var $22 = indexl2(0);
          return function($23) {
            return $21($22(parser($23)));
          };
        };
        return foldHashes(go2)(go2(Nothing.value));
      };
    };
  };
  var matches2 = /* @__PURE__ */ (function() {
    var $24 = matchesWith(foldableEither);
    return function($25) {
      return $24(match2($25));
    };
  })();

  // output/Hylograph.Main/index.js
  var bind33 = /* @__PURE__ */ bind(bindHalogenM);
  var liftEffect10 = /* @__PURE__ */ liftEffect(/* @__PURE__ */ monadEffectHalogenM(monadEffectAff));
  var discard19 = /* @__PURE__ */ discard(discardUnit)(bindHalogenM);
  var when15 = /* @__PURE__ */ when(applicativeHalogenM);
  var pure59 = /* @__PURE__ */ pure(applicativeHalogenM);
  var spy2 = /* @__PURE__ */ spy();
  var modify_10 = /* @__PURE__ */ modify_(monadStateHalogenM);
  var slot_4 = /* @__PURE__ */ slot_();
  var slot_1 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "home";
    }
  })(ordUnit);
  var slot_22 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "gettingStarted";
    }
  })(ordUnit);
  var slot_32 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "howtoIndex";
    }
  })(ordUnit);
  var slot_42 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "howtoTransitions";
    }
  })(ordUnit);
  var component1 = /* @__PURE__ */ component9(monadAffAff);
  var slot_5 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "howtoForceGraphs";
    }
  })(ordUnit);
  var component210 = /* @__PURE__ */ component4(monadAffAff);
  var slot_6 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "howtoHierarchical";
    }
  })(ordUnit);
  var component32 = /* @__PURE__ */ component5(monadAffAff);
  var slot_7 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "howtoEvents";
    }
  })(ordUnit);
  var component42 = /* @__PURE__ */ component3(monadAffAff);
  var slot_8 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "howtoLoadingData";
    }
  })(ordUnit);
  var component52 = /* @__PURE__ */ component6(monadAffAff);
  var slot_9 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "howtoTooltips";
    }
  })(ordUnit);
  var component62 = /* @__PURE__ */ component8(monadAffAff);
  var slot_10 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "howtoDebugging";
    }
  })(ordUnit);
  var component72 = /* @__PURE__ */ component2(monadAffAff);
  var slot_11 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "howtoPerformance";
    }
  })(ordUnit);
  var component82 = /* @__PURE__ */ component7(monadAffAff);
  var slot_12 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "understanding";
    }
  })(ordUnit);
  var slot_13 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "understandingGrammar";
    }
  })(ordUnit);
  var component92 = /* @__PURE__ */ component20(monadAffAff);
  var slot_14 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "understandingAttributes";
    }
  })(ordUnit);
  var component102 = /* @__PURE__ */ component19(monadAffAff);
  var slot_15 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "understandingSelections";
    }
  })(ordUnit);
  var component112 = /* @__PURE__ */ component22(monadAffAff);
  var slot_16 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "understandingScenes";
    }
  })(ordUnit);
  var component122 = /* @__PURE__ */ component21(monadAffAff);
  var slot_17 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "reference";
    }
  })(ordUnit);
  var slot_18 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "tourIndex";
    }
  })(ordUnit);
  var slot_19 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "tourScrolly";
    }
  })(ordUnit);
  var component132 = /* @__PURE__ */ component14(monadAffAff);
  var slot_20 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "tourMotionScrollyHATS";
    }
  })(ordUnit);
  var component142 = /* @__PURE__ */ component13(monadAffAff);
  var slot_21 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "tourSimpsons";
    }
  })(ordUnit);
  var component152 = /* @__PURE__ */ component17(monadAffAff);
  var slot_222 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "showcase";
    }
  })(ordUnit);
  var slot_23 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "showcaseLuaEdge";
    }
  })(ordUnit);
  var slot_24 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "simpsonsV2";
    }
  })(ordUnit);
  var component162 = /* @__PURE__ */ component30(monadAffAff);
  var slot_25 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "forcePlayground";
    }
  })(ordUnit);
  var component172 = /* @__PURE__ */ component(monadAffAff);
  var slot_26 = /* @__PURE__ */ slot_4({
    reflectSymbol: function() {
      return "acknowledgements";
    }
  })(ordUnit);
  var component182 = /* @__PURE__ */ component23(monadAffAff);
  var bind210 = /* @__PURE__ */ bind(bindAff);
  var Initialize30 = /* @__PURE__ */ (function() {
    function Initialize31() {
    }
    ;
    Initialize31.value = new Initialize31();
    return Initialize31;
  })();
  var Navigate = /* @__PURE__ */ (function() {
    function Navigate2(value0) {
      this.value0 = value0;
    }
    ;
    Navigate2.create = function(value0) {
      return new Navigate2(value0);
    };
    return Navigate2;
  })();
  var RouteChanged = /* @__PURE__ */ (function() {
    function RouteChanged2(value0) {
      this.value0 = value0;
    }
    ;
    RouteChanged2.create = function(value0) {
      return new RouteChanged2(value0);
    };
    return RouteChanged2;
  })();
  var handleAction28 = function(v2) {
    if (v2 instanceof Initialize30) {
      return bind33(liftEffect10(function __do7() {
        var w = windowImpl();
        var loc = location(w)();
        return hash(loc)();
      }))(function(currentHash) {
        return discard19(when15(currentHash === "" || (currentHash === "#" || currentHash === "#/"))(liftEffect10(setHash2(routeToPath(Home.value)))))(function() {
          return bind33(subscribe3(makeEmitter(function(push2) {
            return matches2(routing)(function(v12) {
              return function(newRoute) {
                return push2(new RouteChanged(new Just(newRoute)));
              };
            });
          })))(function() {
            return pure59(unit);
          });
        });
      });
    }
    ;
    if (v2 instanceof Navigate) {
      return liftEffect10(setHash2(routeToPath(v2.value0)));
    }
    ;
    if (v2 instanceof RouteChanged) {
      var v1 = spy2("RouteChanged")(v2.value0);
      return discard19((function() {
        if (v2.value0 instanceof Just) {
          var v22 = spy2("Updating currentRoute to")(v2.value0.value0);
          return modify_10(function(v3) {
            var $123 = {};
            for (var $124 in v3) {
              if ({}.hasOwnProperty.call(v3, $124)) {
                $123[$124] = v3[$124];
              }
              ;
            }
            ;
            $123.currentRoute = v2.value0.value0;
            return $123;
          });
        }
        ;
        if (v2.value0 instanceof Nothing) {
          return modify_10(function(v23) {
            var $127 = {};
            for (var $128 in v23) {
              if ({}.hasOwnProperty.call(v23, $128)) {
                $127[$128] = v23[$128];
              }
              ;
            }
            ;
            $127.currentRoute = NotFound.value;
            return $127;
          });
        }
        ;
        throw new Error("Failed pattern match at Hylograph.Main (line 279, column 5 - line 283, column 57): " + [v2.value0.constructor.name]);
      })())(function() {
        return liftEffect10(function __do7() {
          var w = windowImpl();
          return scroll(0)(0)(w)();
        });
      });
    }
    ;
    throw new Error("Failed pattern match at Hylograph.Main (line 258, column 16 - line 287, column 19): " + [v2.constructor.name]);
  };
  var _understandingSelections = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _understandingScenes = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _understandingGrammar = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _understandingAttributes = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _understanding = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _tourSimpsons = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _tourScrolly = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _tourMotionScrollyHATS = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _tourIndex = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _simpsonsV2 = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _showcaseLuaEdge = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _showcase = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _reference = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _howtoTransitions = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _howtoTooltips = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _howtoPerformance = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _howtoLoadingData = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _howtoIndex = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _howtoHierarchical = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _howtoForceGraphs = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _howtoEvents = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _howtoDebugging = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _home = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _gettingStarted = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _forcePlayground = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var _acknowledgements = /* @__PURE__ */ (function() {
    return $$Proxy.value;
  })();
  var renderPage = function(route) {
    var v2 = spy2("Route is")(route);
    if (v2 instanceof Home) {
      return slot_1(_home)(unit)(component25)(unit);
    }
    ;
    if (v2 instanceof GettingStarted) {
      return slot_22(_gettingStarted)(unit)(component28)(unit);
    }
    ;
    if (v2 instanceof HowtoIndex) {
      return slot_32(_howtoIndex)(unit)(component26)(unit);
    }
    ;
    if (v2 instanceof HowtoTransitions) {
      return slot_42(_howtoTransitions)(unit)(component1)(unit);
    }
    ;
    if (v2 instanceof HowtoForceGraphs) {
      return slot_5(_howtoForceGraphs)(unit)(component210)(unit);
    }
    ;
    if (v2 instanceof HowtoHierarchical) {
      return slot_6(_howtoHierarchical)(unit)(component32)(unit);
    }
    ;
    if (v2 instanceof HowtoEvents) {
      return slot_7(_howtoEvents)(unit)(component42)(unit);
    }
    ;
    if (v2 instanceof HowtoLoadingData) {
      return slot_8(_howtoLoadingData)(unit)(component52)(unit);
    }
    ;
    if (v2 instanceof HowtoTooltips) {
      return slot_9(_howtoTooltips)(unit)(component62)(unit);
    }
    ;
    if (v2 instanceof HowtoDebugging) {
      return slot_10(_howtoDebugging)(unit)(component72)(unit);
    }
    ;
    if (v2 instanceof HowtoPerformance) {
      return slot_11(_howtoPerformance)(unit)(component82)(unit);
    }
    ;
    if (v2 instanceof Understanding) {
      return slot_12(_understanding)(unit)(component29)(unit);
    }
    ;
    if (v2 instanceof UnderstandingGrammar) {
      return slot_13(_understandingGrammar)(unit)(component92)(unit);
    }
    ;
    if (v2 instanceof UnderstandingAttributes) {
      return slot_14(_understandingAttributes)(unit)(component102)(unit);
    }
    ;
    if (v2 instanceof UnderstandingSelections) {
      return slot_15(_understandingSelections)(unit)(component112)(unit);
    }
    ;
    if (v2 instanceof UnderstandingScenes) {
      return slot_16(_understandingScenes)(unit)(component122)(unit);
    }
    ;
    if (v2 instanceof Reference) {
      return slot_17(_reference)(unit)(component27)(unit);
    }
    ;
    if (v2 instanceof ReferenceModule) {
      return slot_17(_reference)(unit)(component27)(unit);
    }
    ;
    if (v2 instanceof TourIndex) {
      return slot_18(_tourIndex)(unit)(component12)(unit);
    }
    ;
    if (v2 instanceof TourScrolly) {
      return slot_19(_tourScrolly)(unit)(component132)(unit);
    }
    ;
    if (v2 instanceof TourMotionScrollyHATS) {
      return slot_20(_tourMotionScrollyHATS)(unit)(component142)(unit);
    }
    ;
    if (v2 instanceof TourSimpsons) {
      return slot_21(_tourSimpsons)(unit)(component152)(unit);
    }
    ;
    if (v2 instanceof Showcase) {
      return slot_222(_showcase)(unit)(component10)(unit);
    }
    ;
    if (v2 instanceof ShowcaseLuaEdge) {
      return slot_23(_showcaseLuaEdge)(unit)(component11)(unit);
    }
    ;
    if (v2 instanceof SimpsonsV2) {
      return slot_24(_simpsonsV2)(unit)(component162)(unit);
    }
    ;
    if (v2 instanceof ModuleGraph) {
      return div_([text6("Module Graph - coming soon")]);
    }
    ;
    if (v2 instanceof ForcePlayground) {
      return slot_25(_forcePlayground)(unit)(component172)(unit);
    }
    ;
    if (v2 instanceof TreeBuilder) {
      return div_([text6("Tree Builder has been replaced by Hylograph Explorer")]);
    }
    ;
    if (v2 instanceof Acknowledgements) {
      return slot_26(_acknowledgements)(unit)(component182)(unit);
    }
    ;
    if (v2 instanceof NotFound) {
      return div4([classes(["not-found"])])([h1_([text6("404 - Page Not Found")]), p_([text6("The page you're looking for doesn't exist.")]), a([href4("#" + routeToPath(Home.value))])([text6("Go to Home")])]);
    }
    ;
    throw new Error("Failed pattern match at Hylograph.Main (line 156, column 20 - line 255, column 8): " + [v2.constructor.name]);
  };
  var render34 = function(state3) {
    return div4([classes(["app"])])([main([classes(["app__main"])])([renderPage(state3.currentRoute)])]);
  };
  var component31 = /* @__PURE__ */ (function() {
    return mkComponent({
      initialState: function(v2) {
        return {
          currentRoute: Home.value
        };
      },
      render: render34,
      "eval": mkEval({
        handleQuery: defaultEval.handleQuery,
        receive: defaultEval.receive,
        finalize: defaultEval.finalize,
        handleAction: handleAction28,
        initialize: new Just(Initialize30.value)
      })
    });
  })();
  var main2 = /* @__PURE__ */ runHalogenAff(/* @__PURE__ */ bind210(/* @__PURE__ */ selectElement4("#app"))(function(maybeApp) {
    if (maybeApp instanceof Nothing) {
      return bind210(awaitBody)(function(body2) {
        return runUI2(component31)(unit)(body2);
      });
    }
    ;
    if (maybeApp instanceof Just) {
      return runUI2(component31)(unit)(maybeApp.value0);
    }
    ;
    throw new Error("Failed pattern match at Hylograph.Main (line 294, column 3 - line 300, column 33): " + [maybeApp.constructor.name]);
  }));

  // <stdin>
  main2();
})();
